<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>env-loader.js ãƒ†ã‚¹ãƒˆ</title>
</head>
<body>
    <h1>env-loader.js å‹•ä½œãƒ†ã‚¹ãƒˆ</h1>
    <div id="results"></div>

    <!-- env-loader.jsã‚’æœ€åˆã«èª­ã¿è¾¼ã¿ -->
    <script src="env-loader.js"></script>

    <script>
        // ãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤º
        const results = document.getElementById('results');

        function addResult(text, success = true) {
            const p = document.createElement('p');
            p.textContent = text;
            p.style.color = success ? 'green' : 'red';
            results.appendChild(p);
        }

        // env-loader.jsã®å‹•ä½œç¢ºèª
        console.log('ğŸ§ª env-loader.js ãƒ†ã‚¹ãƒˆé–‹å§‹');

        try {
            if (window.ENV) {
                addResult('âœ… window.ENV ãŒæ­£å¸¸ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™');
                console.log('âœ… window.ENV:', window.ENV);

                if (window.ENV.GAS_URL) {
                    addResult(`âœ… GAS_URL: ${window.ENV.GAS_URL}`);

                    // URLã®å½¢å¼ãƒã‚§ãƒƒã‚¯
                    if (window.ENV.GAS_URL.startsWith('https://script.google.com/macros/s/AKfyc')) {
                        addResult('âœ… GAS_URLå½¢å¼ãŒæ­£ã—ã„ã§ã™');
                    } else {
                        addResult('âŒ GAS_URLå½¢å¼ãŒä¸æ­£ã§ã™', false);
                    }
                } else {
                    addResult('âŒ GAS_URLãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“', false);
                }

                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯URLç¢ºèª
                if (window.ENV.FALLBACK_GAS_URL) {
                    addResult(`âœ… FALLBACK_GAS_URL: ${window.ENV.FALLBACK_GAS_URL}`);
                } else {
                    addResult('âŒ FALLBACK_GAS_URLãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“', false);
                }

                // ç·Šæ€¥æ™‚URLç¢ºèª
                if (window.ENV.EMERGENCY_GAS_URL) {
                    addResult(`âœ… EMERGENCY_GAS_URL: ${window.ENV.EMERGENCY_GAS_URL}`);
                } else {
                    addResult('âŒ EMERGENCY_GAS_URLãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“', false);
                }

                if (window.ENV.DEBUG !== undefined) {
                    addResult(`âœ… DEBUG: ${window.ENV.DEBUG}`);
                } else {
                    addResult('âŒ DEBUGãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“', false);
                }

                if (window.ENV.CACHE_BUSTER) {
                    addResult(`âœ… CACHE_BUSTER: ${window.ENV.CACHE_BUSTER}`);
                } else {
                    addResult('âŒ CACHE_BUSTERãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“', false);
                }

            } else {
                addResult('âŒ window.ENV ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼', false);
                console.error('âŒ window.ENV ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }

            // cv-api.jså®Œå…¨é›†ç´„è¨­è¨ˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            const simulatedGasUrl = window.ENV?.GAS_URL ||
                                   window.ENV?.FALLBACK_GAS_URL ||
                                   window.ENV?.EMERGENCY_GAS_URL ||
                                   'LAST_RESORT_URL';
            addResult(`âœ… CV-APIç”¨å®Œå…¨é›†ç´„URLå–å¾—ãƒ†ã‚¹ãƒˆ: ${simulatedGasUrl}`);

            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ®µéšè¡¨ç¤º
            if (window.ENV?.GAS_URL) {
                addResult(`ğŸ¯ ä½¿ç”¨URL: PRIMARY (GAS_URL)`);
            } else if (window.ENV?.FALLBACK_GAS_URL) {
                addResult(`âš ï¸ ä½¿ç”¨URL: FALLBACK (FALLBACK_GAS_URL)`);
            } else if (window.ENV?.EMERGENCY_GAS_URL) {
                addResult(`ğŸš¨ ä½¿ç”¨URL: EMERGENCY (EMERGENCY_GAS_URL)`);
            } else {
                addResult(`âŒ ä½¿ç”¨URL: LAST_RESORT (ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰)`);
            }

            console.log('ğŸ‰ env-loader.js ãƒ†ã‚¹ãƒˆå®Œäº†');

        } catch (error) {
            addResult(`âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}`, false);
            console.error('âŒ ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
        }
    </script>
</body>
</html>