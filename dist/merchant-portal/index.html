<html lang="ja"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰Á–¿“XŠÇ—ƒVƒXƒeƒ€ - ŠO•Ç“h‘•‚­‚ç‚×‚éAI</title>
    <script src="merchant-portal/env-loader.js?v=1134"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gray: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            200: '#e5e7eb',
                            300: '#d1d5db',
                            400: '#9ca3af',
                            500: '#6b7280',
                            600: '#4b5563',
                            700: '#374151',
                            800: '#1f2937',
                            900: '#111827',
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; }
        .glass { backdrop-filter: blur(12px); }
        .section {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
            min-height: 200px;
        }
        .permission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        /* ƒgƒOƒ‹ƒXƒCƒbƒ`‚ÌƒXƒ^ƒCƒ‹ */
        .toggle-switch {
            position: relative;
            appearance: none;
            width: 44px;
            height: 24px;
            background: #cbd5e0;
            border-radius: 9999px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .toggle-switch:checked {
            background: #3b82f6;
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.2s;
        }
        .toggle-switch:checked::after {
            transform: translateX(20px);
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.invisible{visibility:hidden}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0px}.-right-1{right:-0.25rem}.-top-1{top:-0.25rem}.-top-8{top:-2rem}.bottom-0{bottom:0px}.left-0{left:0px}.right-0{right:0px}.right-4{right:1rem}.top-0{top:0px}.top-1€/2{top:50%}.top-14{top:3.5rem}.top-16{top:4rem}.top-20{top:5rem}.top-4{top:1rem}.top-full{top:100%}.right-1{right:0.25rem}.top-1{top:0.25rem}.left-2{left:0.5rem}.top-2{top:0.5rem}.z-10{z-index:10}.z-20{z-index:20}.z-40{z-index:40}.z-50{z-index:50}.z-€[200€]{z-index:200}.-mx-4{margin-left:-1rem;margin-right:-1rem}.mx-auto{margin-left:auto;margin-right:auto}.-mb-px{margin-bottom:-1px}.mb-1{margin-bottom:0.25rem}.mb-1€.5{margin-bottom:0.375rem}.mb-12{margin-bottom:3rem}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:0.25rem}.ml-2{margin-left:0.5rem}.ml-3{margin-left:0.75rem}.ml-4{margin-left:1rem}.ml-6{margin-left:1.5rem}.ml-auto{margin-left:auto}.mr-1{margin-right:0.25rem}.mr-2{margin-right:0.5rem}.mr-3{margin-right:0.75rem}.mt-0€.5{margin-top:0.125rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-3{margin-top:0.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1 / 1}.h-10{height:2.5rem}.h-12{height:3rem}.h-16{height:4rem}.h-2{height:0.5rem}.h-3{height:0.75rem}.h-4{height:1rem}.h-48{height:12rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-8{height:2rem}.h-full{height:100%}.h-32{height:8rem}.h-24{height:6rem}.max-h-64{max-height:16rem}.max-h-€[500px€]{max-height:500px}.max-h-€[600px€]{max-height:600px}.max-h-€[90vh€]{max-height:90vh}.max-h-full{max-height:100%}.min-h-€[48px€]{min-height:48px}.min-h-screen{min-height:100vh}.w-1{width:0.25rem}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-11€/12{width:91.666667%}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:0.5rem}.w-3{width:0.75rem}.w-32{width:8rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-96{width:24rem}.w-€[120px€]{width:120px}.w-full{width:100%}.w-72{width:18rem}.min-w-0{min-width:0px}.min-w-€[20px€]{min-width:20px}.min-w-€[280px€]{min-width:280px}.min-w-full{min-width:100%}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-6xl{max-width:72rem}.max-w-€[100px€]{max-width:100px}.max-w-€[80px€]{max-width:80px}.max-w-full{max-width:100%}.max-w-7xl{max-width:80rem}.max-w-lg{max-width:32rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-x-12{--tw-translate-x:-3rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-4{--tw-translate-x:-1rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-full{--tw-translate-x:-100%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1€/2{--tw-translate-y:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-12{--tw-translate-x:3rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-4{--tw-translate-x:1rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-125{--tw-scale-x:1.25;--tw-scale-y:1.25;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite}.cursor-help{cursor:help}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize-y{resize:vertical}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.grid-cols-7{grid-template-columns:repeat(7, minmax(0, 1fr))}.grid-cols-8{grid-template-columns:repeat(8, minmax(0, 1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0{gap:0px}.gap-1{gap:0.25rem}.gap-1€.5{gap:0.375rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-x-2 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.5rem * var(--tw-space-x-reverse));margin-left:calc(0.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.75rem * var(--tw-space-x-reverse));margin-left:calc(0.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.25rem * var(--tw-space-y-reverse))}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.divide-y > :not([hidden]) ~ :not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-200 > :not([hidden]) ~ :not([hidden]){--tw-divide-opacity:1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.rounded{border-radius:0.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}.rounded-xl{border-radius:0.75rem}.rounded-b-lg{border-bottom-right-radius:0.5rem;border-bottom-left-radius:0.5rem}.rounded-t-2xl{border-top-left-radius:1rem;border-top-right-radius:1rem}.rounded-t-lg{border-top-left-radius:0.5rem;border-top-right-radius:0.5rem}.rounded-t-xl{border-top-left-radius:0.75rem;border-top-right-radius:0.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-t-0{border-top-width:0px}.border-t-2{border-top-width:2px}.border-dashed{border-style:dashed}.border-blue-200{--tw-border-opacity:1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-gray-100{--tw-border-opacity:1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-700{--tw-border-opacity:1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.border-gray-800{--tw-border-opacity:1;border-color:rgb(31 41 55 / var(--tw-border-opacity, 1))}.border-orange-200{--tw-border-opacity:1;border-color:rgb(254 215 170 / var(--tw-border-opacity, 1))}.border-orange-500{--tw-border-opacity:1;border-color:rgb(249 115 22 / var(--tw-border-opacity, 1))}.border-purple-200{--tw-border-opacity:1;border-color:rgb(233 213 255 / var(--tw-border-opacity, 1))}.border-red-300{--tw-border-opacity:1;border-color:rgb(252 165 165 / var(--tw-border-opacity, 1))}.border-yellow-200{--tw-border-opacity:1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.border-blue-400{--tw-border-opacity:1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.border-green-400{--tw-border-opacity:1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.border-yellow-400{--tw-border-opacity:1;border-color:rgb(250 204 21 / var(--tw-border-opacity, 1))}.border-yellow-300{--tw-border-opacity:1;border-color:rgb(253 224 71 / var(--tw-border-opacity, 1))}.border-purple-100{--tw-border-opacity:1;border-color:rgb(243 232 255 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity:1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity:1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.border-indigo-200{--tw-border-opacity:1;border-color:rgb(199 210 254 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-blue-100{--tw-bg-opacity:1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-200{--tw-bg-opacity:1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-500{--tw-bg-opacity:1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity:1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-gray-900€/95{background-color:rgb(17 24 39 / 0.95)}.bg-green-100{--tw-bg-opacity:1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-200{--tw-bg-opacity:1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity:1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity:1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-indigo-600{--tw-bg-opacity:1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1))}.bg-orange-500{--tw-bg-opacity:1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.bg-orange-600{--tw-bg-opacity:1;background-color:rgb(234 88 12 / var(--tw-bg-opacity, 1))}.bg-pink-600{--tw-bg-opacity:1;background-color:rgb(219 39 119 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity:1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-200{--tw-bg-opacity:1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}.bg-purple-500{--tw-bg-opacity:1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity:1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity:1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white€/20{background-color:rgb(255 255 255 / 0.2)}.bg-yellow-100{--tw-bg-opacity:1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity:1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity:1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity:1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-indigo-100{--tw-bg-opacity:1;background-color:rgb(224 231 255 / var(--tw-bg-opacity, 1))}.bg-orange-100{--tw-bg-opacity:1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity:1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-opacity-50{--tw-bg-opacity:0.5}.bg-opacity-90{--tw-bg-opacity:0.9}.bg-opacity-60{--tw-bg-opacity:0.6}.bg-gradient-to-b{background-image:linear-gradient(to bottom, var(--tw-gradient-stops))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-blue-400{--tw-gradient-from:#60a5fa var(--tw-gradient-from-position);--tw-gradient-to:rgb(96 165 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-50{--tw-gradient-from:#eff6ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from:#3b82f6 var(--tw-gradient-from-position);--tw-gradient-to:rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-50{--tw-gradient-from:#f0fdf4 var(--tw-gradient-from-position);--tw-gradient-to:rgb(240 253 244 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-50{--tw-gradient-from:#fff7ed var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 247 237 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-500{--tw-gradient-from:#f97316 var(--tw-gradient-from-position);--tw-gradient-to:rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-50{--tw-gradient-from:#faf5ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(250 245 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from:#9333ea var(--tw-gradient-from-position);--tw-gradient-to:rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-transparent{--tw-gradient-from:transparent var(--tw-gradient-from-position);--tw-gradient-to:rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-yellow-50{--tw-gradient-from:#fefce8 var(--tw-gradient-from-position);--tw-gradient-to:rgb(254 252 232 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-yellow-500{--tw-gradient-from:#eab308 var(--tw-gradient-from-position);--tw-gradient-to:rgb(234 179 8 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-50{--tw-gradient-from:#eef2ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(238 242 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-pink-50{--tw-gradient-from:#fdf2f8 var(--tw-gradient-from-position);--tw-gradient-to:rgb(253 242 248 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-400{--tw-gradient-from:#fbbf24 var(--tw-gradient-from-position);--tw-gradient-to:rgb(251 191 36 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-50{--tw-gradient-from:#fffbeb var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 251 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.via-blue-50{--tw-gradient-to:rgb(239 246 255 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #eff6ff var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-orange-100{--tw-gradient-to:rgb(255 237 213 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #ffedd5 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-transparent{--tw-gradient-to:rgb(0 0 0 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), transparent var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-black€/30{--tw-gradient-to:rgb(0 0 0 / 0.3) var(--tw-gradient-to-position)}.to-blue-100{--tw-gradient-to:#dbeafe var(--tw-gradient-to-position)}.to-blue-50{--tw-gradient-to:#eff6ff var(--tw-gradient-to-position)}.to-blue-500{--tw-gradient-to:#3b82f6 var(--tw-gradient-to-position)}.to-blue-600{--tw-gradient-to:#2563eb var(--tw-gradient-to-position)}.to-green-100{--tw-gradient-to:#dcfce7 var(--tw-gradient-to-position)}.to-orange-50{--tw-gradient-to:#fff7ed var(--tw-gradient-to-position)}.to-orange-600{--tw-gradient-to:#ea580c var(--tw-gradient-to-position)}.to-purple-100{--tw-gradient-to:#f3e8ff var(--tw-gradient-to-position)}.to-purple-400{--tw-gradient-to:#c084fc var(--tw-gradient-to-position)}.to-purple-50{--tw-gradient-to:#faf5ff var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.to-red-50{--tw-gradient-to:#fef2f2 var(--tw-gradient-to-position)}.to-red-500{--tw-gradient-to:#ef4444 var(--tw-gradient-to-position)}.to-indigo-100{--tw-gradient-to:#e0e7ff var(--tw-gradient-to-position)}.to-pink-100{--tw-gradient-to:#fce7f3 var(--tw-gradient-to-position)}.to-yellow-100{--tw-gradient-to:#fef9c3 var(--tw-gradient-to-position)}.to-yellow-400{--tw-gradient-to:#facc15 var(--tw-gradient-to-position)}.to-yellow-50{--tw-gradient-to:#fefce8 var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.fill-current{fill:currentColor}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-1{padding:0.25rem}.p-10{padding:2.5rem}.p-12{padding:3rem}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-1€.5{padding:0.375rem}.px-1{padding-left:0.25rem;padding-right:0.25rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-2€.5{padding-left:0.625rem;padding-right:0.625rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0€.5{padding-top:0.125rem;padding-bottom:0.125rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1€.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:0.5rem}.pb-20{padding-bottom:5rem}.pt-20{padding-top:5rem}.pt-3{padding-top:0.75rem}.pt-4{padding-top:1rem}.pb-6{padding-bottom:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.leading-5{line-height:1.25rem}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-wider{letter-spacing:0.05em}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity:1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity:1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity:1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity:1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity:1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-green-900{--tw-text-opacity:1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity:1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity:1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-purple-500{--tw-text-opacity:1;color:rgb(168 85 247 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity:1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity:1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-purple-800{--tw-text-opacity:1;color:rgb(107 33 168 / var(--tw-text-opacity, 1))}.text-purple-900{--tw-text-opacity:1;color:rgb(88 28 135 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity:1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity:1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity:1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity:1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity:1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity:1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.text-indigo-800{--tw-text-opacity:1;color:rgb(55 48 163 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity:1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-amber-900{--tw-text-opacity:1;color:rgb(120 53 15 / var(--tw-text-opacity, 1))}.line-through{-webkit-text-decoration-line:line-through;text-decoration-line:line-through}.opacity-10{opacity:0.1}.opacity-90{opacity:0.9}.opacity-0{opacity:0}.shadow{--tw-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.drop-shadow-lg{--tw-drop-shadow:drop-shadow(0 10px 8px rgb(0 0 0 / 0.04)) drop-shadow(0 4px 3px rgb(0 0 0 / 0.1));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-md{--tw-drop-shadow:drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur:blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.after€:absolute::after{content:var(--tw-content);position:absolute}.after€:left-€[2px€]::after{content:var(--tw-content);left:2px}.after€:top-€[2px€]::after{content:var(--tw-content);top:2px}.after€:h-5::after{content:var(--tw-content);height:1.25rem}.after€:w-5::after{content:var(--tw-content);width:1.25rem}.after€:rounded-full::after{content:var(--tw-content);border-radius:9999px}.after€:border::after{content:var(--tw-content);border-width:1px}.after€:border-gray-300::after{content:var(--tw-content);--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.after€:bg-white::after{content:var(--tw-content);--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.after€:transition-all::after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.after€:content-€[€'€'€]::after{--tw-content:'';content:var(--tw-content)}.hover€:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover€:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover€:border-blue-500:hover{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.hover€:border-gray-300:hover{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover€:bg-blue-200:hover{--tw-bg-opacity:1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.hover€:bg-blue-50:hover{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hover€:bg-blue-600:hover{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover€:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover€:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover€:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover€:bg-gray-300:hover{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover€:bg-gray-50:hover{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover€:bg-gray-600:hover{--tw-bg-opacity:1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.hover€:bg-gray-700:hover{--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover€:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.hover€:bg-green-200:hover{--tw-bg-opacity:1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.hover€:bg-green-600:hover{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover€:bg-green-700:hover{--tw-bg-opacity:1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover€:bg-purple-700:hover{--tw-bg-opacity:1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.hover€:bg-red-200:hover{--tw-bg-opacity:1;background-color:rgb(254 202 202 / var(--tw-bg-opacity, 1))}.hover€:bg-red-900€/50:hover{background-color:rgb(127 29 29 / 0.5)}.hover€:bg-white:hover{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hover€:bg-yellow-200:hover{--tw-bg-opacity:1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}.hover€:bg-blue-100:hover{--tw-bg-opacity:1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover€:bg-orange-200:hover{--tw-bg-opacity:1;background-color:rgb(254 215 170 / var(--tw-bg-opacity, 1))}.hover€:bg-red-100:hover{--tw-bg-opacity:1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.hover€:bg-yellow-100:hover{--tw-bg-opacity:1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.hover€:bg-green-100:hover{--tw-bg-opacity:1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.hover€:bg-opacity-20:hover{--tw-bg-opacity:0.2}.hover€:from-amber-100:hover{--tw-gradient-from:#fef3c7 var(--tw-gradient-from-position);--tw-gradient-to:rgb(254 243 199 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover€:to-yellow-100:hover{--tw-gradient-to:#fef9c3 var(--tw-gradient-to-position)}.hover€:text-blue-800:hover{--tw-text-opacity:1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.hover€:text-blue-900:hover{--tw-text-opacity:1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.hover€:text-gray-100:hover{--tw-text-opacity:1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.hover€:text-gray-200:hover{--tw-text-opacity:1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.hover€:text-gray-700:hover{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover€:text-green-900:hover{--tw-text-opacity:1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.hover€:text-red-400:hover{--tw-text-opacity:1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.hover€:text-red-800:hover{--tw-text-opacity:1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.hover€:text-red-900:hover{--tw-text-opacity:1;color:rgb(127 29 29 / var(--tw-text-opacity, 1))}.hover€:text-gray-300:hover{--tw-text-opacity:1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.hover€:text-gray-600:hover{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover€:underline:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.hover€:opacity-80:hover{opacity:0.8}.hover€:opacity-90:hover{opacity:0.9}.hover€:shadow-lg:hover{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hover€:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hover€:shadow-xl:hover{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.focus€:border-blue-500:focus{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focus€:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus€:ring-1:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focus€:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focus€:ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus€:ring-orange-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(249 115 22 / var(--tw-ring-opacity, 1))}.active€:bg-blue-800:active{--tw-bg-opacity:1;background-color:rgb(30 64 175 / var(--tw-bg-opacity, 1))}.group:hover .group-hover€:visible{visibility:visible}.group:hover .group-hover€:block{display:block}.group:hover .group-hover€:text-blue-400{--tw-text-opacity:1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.group:hover .group-hover€:text-yellow-400{--tw-text-opacity:1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.group:hover .group-hover€:opacity-100{opacity:1}.peer:checked ~ .peer-checked€:bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.peer:checked ~ .peer-checked€:bg-orange-500{--tw-bg-opacity:1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.peer:checked ~ .peer-checked€:after€:translate-x-full::after{content:var(--tw-content);--tw-translate-x:100%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked ~ .peer-checked€:after€:border-white::after{content:var(--tw-content);--tw-border-opacity:1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus ~ .peer-focus€:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:focus ~ .peer-focus€:ring-4{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.peer:focus ~ .peer-focus€:ring-orange-300{--tw-ring-opacity:1;--tw-ring-color:rgb(253 186 116 / var(--tw-ring-opacity, 1))}@media (min-width: 640px){.sm€:mx-0{margin-left:0px;margin-right:0px}.sm€:mb-4{margin-bottom:1rem}.sm€:ml-1{margin-left:0.25rem}.sm€:block{display:block}.sm€:inline{display:inline}.sm€:grid{display:grid}.sm€:min-w-0{min-width:0px}.sm€:max-w-€[100px€]{max-width:100px}.sm€:flex-none{flex:none}.sm€:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.sm€:flex-row{flex-direction:row}.sm€:items-center{align-items:center}.sm€:justify-between{justify-content:space-between}.sm€:gap-4{gap:1rem}.sm€:space-x-3 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.75rem * var(--tw-space-x-reverse));margin-left:calc(0.75rem * calc(1 - var(--tw-space-x-reverse)))}.sm€:space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.sm€:p-6{padding:1.5rem}.sm€:p-8{padding:2rem}.sm€:px-0{padding-left:0px;padding-right:0px}.sm€:px-2{padding-left:0.5rem;padding-right:0.5rem}.sm€:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm€:py-4{padding-top:1rem;padding-bottom:1rem}.sm€:text-left{text-align:left}.sm€:text-3xl{font-size:1.875rem;line-height:2.25rem}.sm€:text-4xl{font-size:2.25rem;line-height:2.5rem}.sm€:text-7xl{font-size:4.5rem;line-height:1}.sm€:text-base{font-size:1rem;line-height:1.5rem}.sm€:text-lg{font-size:1.125rem;line-height:1.75rem}.sm€:text-sm{font-size:0.875rem;line-height:1.25rem}}@media (min-width: 768px){.md€:col-span-2{grid-column:span 2 / span 2}.md€:table-cell{display:table-cell}.md€:w-96{width:24rem}.md€:max-w-€[140px€]{max-width:140px}.md€:max-w-none{max-width:none}.md€:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md€:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.md€:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}}@media (min-width: 1024px){.lg€:col-span-2{grid-column:span 2 / span 2}.lg€:inline{display:inline}.lg€:table-cell{display:table-cell}.lg€:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.lg€:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.lg€:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.lg€:grid-cols-6{grid-template-columns:repeat(6, minmax(0, 1fr))}}@media (min-width: 1280px){.xl€:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}}</style></head>
<body class="bg-gray-100 text-gray-900">
    <!-- ƒƒCƒ“ƒAƒvƒŠƒP[ƒVƒ‡ƒ“ -->
    <div id="mainApp">
        <!-- ƒgƒbƒvƒo[ -->
        <div class="fixed top-0 left-0 right-0 z-50 h-16 bg-gray-900/95 glass border-b border-gray-200">
            <div class="flex items-center justify-between h-full px-3 sm:px-6">
                <!-- ¶‘¤Fƒƒjƒ…[{ƒƒS -->
                <div class="flex items-center space-x-2 sm:space-x-3">
                    <button onclick="toggleMenu()" class="p-2 rounded-lg hover:bg-gray-800 transition-colors flex-shrink-0">
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <div class="flex items-center space-x-2">
                        <div id="companyLogo" class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0" style="background: linear-gradient(135deg, rgb(102, 126, 234) 0%, rgb(118, 75, 162) 100%);">
                            <span class="text-gray-100 font-bold">‰Á</span>
                        </div>
                        <span id="systemTitle" class="hidden lg:inline text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent whitespace-nowrap">‰Á–¿“XŠÇ—ƒVƒXƒeƒ€</span>
                    </div>
                </div>

                <!-- ’†‰›FƒXƒe[ƒ^ƒX -->
                <div class="flex-shrink-0">
                    <div class="relative">
                        <label class="hidden sm:block text-xs text-gray-400 mb-1 text-center">ƒXƒe[ƒ^ƒX</label>
                        <span id="merchantStatus" class="px-3 py-1 text-xs font-semibold rounded-full border-2 bg-green-100 text-green-800 border-green-300">ƒAƒNƒeƒBƒu</span>
                    </div>
                </div>

                <!-- ‰E‘¤F’Ê’m{ƒ†[ƒU[î•ñ -->
                <div class="flex items-center space-x-2 sm:space-x-3">
                    <!-- –{•”‚©‚ç‚Ì’Ê’mƒ{ƒ^ƒ“ -->
                    <button onclick="toggleNotificationPanel()" class="relative p-2 rounded-lg hover:bg-gray-800 transition-colors group flex-shrink-0">
                        <svg class="w-6 h-6 text-gray-400 group-hover:text-yellow-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                        <span id="notificationCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
                    </button>
                    <!-- ƒAƒ‰[ƒgEƒŠƒ}ƒCƒ“ƒ_[ƒ{ƒ^ƒ“ -->
                    <button onclick="toggleAlertPanel()" class="relative p-2 rounded-lg hover:bg-gray-800 transition-colors group flex-shrink-0">
                        <svg class="w-6 h-6 text-gray-400 group-hover:text-blue-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <span id="alertCount" class="absolute -top-1 -right-1 bg-blue-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">3</span>
                    </button>
                    <div class="text-center min-w-0">
                        <div id="userName" class="hidden sm:block text-sm text-gray-300 truncate max-w-[100px] md:max-w-none">FR251004160409</div>
                        <div id="userRole" class="ml-2 text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-800" onclick="editSalesPerson()" title="ƒNƒŠƒbƒN‚µ‚Ä•ÒW">¬ò‚İ‚ä‚«</div>
                        <input id="userRoleInput" class="hidden text-xs text-gray-900 bg-white border border-gray-300 rounded px-2 py-1 w-[120px]" onblur="saveSalesPerson()" onkeydown="if(event.key==='Enter') saveSalesPerson()">
                    </div>
                </div>
            </div>
        </div>

        <!-- ƒTƒCƒhƒƒjƒ…[ -->
        <div id="sideMenu" class="fixed left-0 top-16 bottom-0 w-64 bg-gray-900/95 glass border-r border-gray-200 transform transition-transform z-40 -translate-x-full">
            <nav class="p-4 space-y-2">
                <a href="#dashboard" onclick="showSection('dashboard'); return false;" class="flex items-center px-4 py-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    ƒ_ƒbƒVƒ…ƒ{[ƒh
                </a>
                <a href="#cases" onclick="showSection('cases'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100 relative">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                    </svg>
                    ˆÄŒŠÇ—
                    <span id="unassignedBadge" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-red-500 text-white text-xs font-bold rounded-full px-2 py-0.5 min-w-[20px] text-center">3</span>
                </a>
                <a href="#sales" onclick="showSection('sales'); return false;" class="admin-only flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100" style="display: flex;">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    ‰c‹ÆŠÇ—
                </a>
                <a href="#calendar" onclick="showSection('calendar'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    ƒJƒŒƒ“ƒ_[
                </a>
                <a href="#billing" onclick="showSection('billing'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    à–±ŠÇ—
                </a>
                <a href="#deposit" onclick="showSection('deposit'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                    </svg>
                    ƒfƒ|ƒWƒbƒg
                </a>
                <a href="#reports" onclick="showSection('reports'); return false;" class="admin-only flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100" style="display: flex;">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    ƒŒƒ|[ƒg
                </a>
                <a href="#autodelivery" onclick="showSection('autodelivery'); return false;" class="admin-only flex items-center px-4 py-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-gray-100" style="display: flex;">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                    </svg>
                    ©“®”zMİ’è
                </a>
                <a href="#company" onclick="showSection('company'); return false;" class="flex items-center px-4 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-blue-500 text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    ‰ïĞî•ñ
                </a>
                <a href="#cancel" onclick="showSection('cancel'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path>
                    </svg>
                    ƒLƒƒƒ“ƒZƒ‹\¿
                </a>
                <a href="#contract" onclick="showSection('contract'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    ¬–ñ•ñ
                </a>
                <a href="#settings" onclick="showSection('settings'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    İ’è
                </a>
                <a href="#" onclick="logout(); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-red-900/50 text-gray-400 hover:text-red-400 mt-4 border-t border-gray-700 pt-4 hover:bg-gray-800 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                    ƒƒOƒAƒEƒg
                </a>
            </nav>
        </div>

        <!-- ƒƒCƒ“ƒRƒ“ƒeƒ“ƒc -->
        <main class="pt-20 px-6" style="background: #f3f4f6; min-height: 100vh;">
            <!-- ƒ_ƒbƒVƒ…ƒ{[ƒh -->
            <div id="dashboardSection" class="section" style="display: none;">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ƒ_ƒbƒVƒ…ƒ{[ƒh</h2>
                
                <!-- “ŒvƒJ[ƒh‚Æƒ~ƒjƒJƒŒƒ“ƒ_[ -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- “ŒvƒJ[ƒh -->
                    <div class="lg:col-span-2">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-blue-100 rounded-full">
                                <svg class="h-8 w-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500">V‹KˆÄŒ</p>
                                <p class="text-2xl font-semibold text-gray-900">24</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-green-100 rounded-full">
                                <svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500">¬–ñ—¦</p>
                                <p class="text-2xl font-semibold text-gray-900">68%</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-yellow-100 rounded-full">
                                <svg class="h-8 w-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500">‘Î‰’†</p>
                                <p class="text-2xl font-semibold text-gray-900">15</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-purple-100 rounded-full">
                                <svg class="h-8 w-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500">‰c‹Æƒƒ“ƒo[</p>
                                <p class="text-2xl font-semibold text-gray-900">8</p>
                            </div>
                        </div>
                    </div>
                        </div>
                    </div>
                    
                    <!-- ƒ~ƒjƒJƒŒƒ“ƒ_[ -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">¡Œ‚Ì—\’è</h3>
                            <button onclick="showSection('calendar')" class="text-sm text-blue-600 hover:text-blue-800">‘S‚Ä•\¦</button>
                        </div>
                        <div id="miniCalendar" class="text-sm"><div class="grid grid-cols-7 gap-1 text-xs"><div class="text-center font-medium text-gray-500 py-1">“ú</div><div class="text-center font-medium text-gray-500 py-1">Œ</div><div class="text-center font-medium text-gray-500 py-1">‰Î</div><div class="text-center font-medium text-gray-500 py-1">…</div><div class="text-center font-medium text-gray-500 py-1">–Ø</div><div class="text-center font-medium text-gray-500 py-1">‹à</div><div class="text-center font-medium text-gray-500 py-1">“y</div><div></div><div></div><div></div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-01')">1</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-02')">2</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-03')">3</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-04')">4</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded bg-blue-500 text-white hover:bg-blue-600" onclick="goToDate('2025-10-05')">5</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded font-bold text-blue-600" onclick="goToDate('2025-10-06')">6</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-07')">7</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded font-bold text-blue-600" onclick="goToDate('2025-10-08')">8</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-09')">9</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-10')">10</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-11')">11</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-12')">12</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-13')">13</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-14')">14</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-15')">15</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-16')">16</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-17')">17</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-18')">18</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-19')">19</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-20')">20</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-21')">21</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-22')">22</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-23')">23</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-24')">24</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-25')">25</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-26')">26</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-27')">27</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-28')">28</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-29')">29</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-30')">30</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-31')">31</div></div></div>
                        <div class="mt-4 space-y-2">
                            <div class="flex items-center p-2 bg-blue-50 rounded">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mr-2"></div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium">“c’†—l Œ»’n’²¸</div>
                                    <div class="text-xs text-gray-500">¡“ú 14:00-15:00</div>
                                </div>
                            </div>
                            <div class="flex items-center p-2 bg-green-50 rounded">
                                <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium">²“¡—l H–ŠJn</div>
                                    <div class="text-xs text-gray-500">–¾“ú 9:00-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Å‹ß‚ÌˆÄŒ -->
                <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Å‹ß‚ÌˆÄŒ</h3>
                    <!-- ƒXƒ}ƒzF‰¡ƒXƒNƒ[ƒ‹ / ƒ^ƒuƒŒƒbƒgˆÈãFƒOƒŠƒbƒh -->
                    <div class="sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-4 flex sm:flex-none overflow-x-auto gap-3 pb-2 -mx-4 px-4 sm:mx-0 sm:px-0">
                        <!-- ˆÄŒƒJ[ƒh1 -->
                        <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow min-w-[280px] sm:min-w-0">
                            <div class="flex justify-between items-start mb-3">
                                <div class="font-semibold text-gray-900">#2024-001</div>
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">¬–ñ</span>
                            </div>
                            <div class="space-y-2">
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">ŒÚ‹q:</span>
                                    <span class="text-gray-900 font-medium">R“c‘¾˜Y</span>
                                </div>
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">’S“–:</span>
                                    <span class="text-gray-700">“c’†‰c‹Æ</span>
                                </div>
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">XV“ú:</span>
                                    <span class="text-gray-700">2024/01/15</span>
                                </div>
                            </div>
                        </div>

                        <!-- ˆÄŒƒJ[ƒh2 -->
                        <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow min-w-[280px] sm:min-w-0">
                            <div class="flex justify-between items-start mb-3">
                                <div class="font-semibold text-gray-900">#2024-002</div>
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">ƒqƒAƒŠƒ“ƒO’†</span>
                            </div>
                            <div class="space-y-2">
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">ŒÚ‹q:</span>
                                    <span class="text-gray-900 font-medium">—é–Ø‰Ôq</span>
                                </div>
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">’S“–:</span>
                                    <span class="text-gray-700">²“¡‰c‹Æ</span>
                                </div>
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">XV“ú:</span>
                                    <span class="text-gray-700">2024/01/14</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- dashboardSection‚ÌI—¹ -->

            <!-- ‰c‹ÆŠÇ—ƒZƒNƒVƒ‡ƒ“iŠÇ—Ò‚Ì‚İj -->
            <div id="salesSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">‰c‹ÆŠÇ—</h2>
                    <button onclick="openPermissionModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        V‹K‰c‹Æ’Ç‰Á
                    </button>
                </div>

                <!-- ‰c‹Æƒƒ“ƒo[ƒŠƒXƒg -->
                <div class="bg-white shadow rounded-lg">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–¼‘O</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Œ ŒÀƒŒƒxƒ‹</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">¬–ñ”</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">¬–ñ—¦</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ƒAƒNƒVƒ‡ƒ“</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">“c’†‘¾˜Y</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800">ƒŠ[ƒ_[</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">45</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">75%</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <button onclick="editPermissions('“c’†‘¾˜Y')" class="text-blue-600 hover:text-blue-900 mr-3">Œ ŒÀ•ÒW</button>
                                    <button onclick="confirmDeleteSales('“c’†‘¾˜Y')" class="text-red-600 hover:text-red-900">íœ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">²“¡‰Ôq</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">ˆê”Ê‰c‹Æ</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">28</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">62%</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <button onclick="editPermissions('²“¡‰Ôq')" class="text-blue-600 hover:text-blue-900 mr-3">Œ ŒÀ•ÒW</button>
                                    <button onclick="confirmDeleteSales('²“¡‰Ôq')" class="text-red-600 hover:text-red-900">íœ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">—é–ØŸ˜Y</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">ˆê”Ê––±</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <button onclick="editPermissions('—é–ØŸ˜Y')" class="text-blue-600 hover:text-blue-900 mr-3">Œ ŒÀ•ÒW</button>
                                    <button onclick="confirmDeleteSales('—é–ØŸ˜Y')" class="text-red-600 hover:text-red-900">íœ</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div><!-- salesSection‚ÌI—¹ -->

            <!-- ˆÄŒŠÇ—ƒZƒNƒVƒ‡ƒ“ -->
            <div id="casesSection" class="section" style="display: none;">
                <!-- –¢U‚è•ª‚¯ˆÄŒƒZƒNƒVƒ‡ƒ“ -->
                <div id="unassignedCasesSection" class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-gray-900 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                            –¢U‚è•ª‚¯ˆÄŒ
                        </h3>
                        <button onclick="openAssignmentModal()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center text-sm">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            ˆÄŒ‚ğU‚è•ª‚¯‚é
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3" id="unassignedCasesList">
                        <div class="bg-white rounded-lg border border-yellow-300 p-3 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">–¢‘Î‰</span>
                            </div>
                            <h4 class="font-bold text-sm mb-1">V‹KŒÚ‹qA</h4>
                            <p class="text-xs text-gray-600">“Œ‹“sa’J‹æ</p>
                            <p class="text-xs text-gray-600 mb-2">ŒËŒš‚ÄE’z12”N</p>
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>“o˜^: 2025-01-15 10:30</span>
                            </div>
                        </div>
                    
                        <div class="bg-white rounded-lg border border-yellow-300 p-3 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">–¢‘Î‰</span>
                            </div>
                            <h4 class="font-bold text-sm mb-1">V‹KŒÚ‹qB</h4>
                            <p class="text-xs text-gray-600">_“ŞìŒ§ìès</p>
                            <p class="text-xs text-gray-600 mb-2">ƒ}ƒ“ƒVƒ‡ƒ“E’z5”N</p>
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>“o˜^: 2025-01-15 11:45</span>
                            </div>
                        </div>
                    
                        <div class="bg-white rounded-lg border border-yellow-300 p-3 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">–¢‘Î‰</span>
                            </div>
                            <h4 class="font-bold text-sm mb-1">V‹KŒÚ‹qC</h4>
                            <p class="text-xs text-gray-600">é‹ÊŒ§‰z’Js</p>
                            <p class="text-xs text-gray-600 mb-2">ŒËŒš‚ÄE’z20”N</p>
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>“o˜^: 2025-01-15 14:00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">ˆÄŒŠÇ—</h2>
                    <div class="flex items-center space-x-2">
                        <button onclick="toggleCaseView()" class="p-2 text-gray-500 hover:text-gray-700 bg-white rounded-lg shadow">
                            <svg id="viewIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- ƒtƒBƒ‹ƒ^[E“Œvƒo[ -->
                <div class="bg-white rounded-lg p-4 mb-4 shadow">
                    <div class="flex flex-wrap items-center gap-3">
                        <!-- ƒXƒe[ƒ^ƒX•Ê“Œv -->
                        <button onclick="filterCases('all')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition">
                            <span class="text-lg font-bold" id="count-all">5</span>
                            <span class="text-xs">‘SŒ</span>
                        </button>
                        <button onclick="filterCases('–¢‘Î‰')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition">
                            <span class="text-lg font-bold" id="count-–¢‘Î‰">1</span>
                            <span class="text-xs">–¢‘Î‰</span>
                        </button>
                        <button onclick="filterCases('ƒAƒ|Ï')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition">
                            <span class="text-lg font-bold" id="count-ƒAƒ|Ï">1</span>
                            <span class="text-xs">ƒAƒ|Ï</span>
                        </button>
                        <button onclick="filterCases('Œ©Ï’ñoÏ')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition">
                            <span class="text-lg font-bold" id="count-Œ©Ï’ñoÏ">1</span>
                            <span class="text-xs">Œ©Ï’ñoÏ</span>
                        </button>
                        <button onclick="filterCases('¬–ñ')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition">
                            <span class="text-lg font-bold" id="count-¬–ñ">1</span>
                            <span class="text-xs">¬–ñ</span>
                        </button>

                        <div class="flex-1"></div>

                        <!-- ŒŸõEƒ\[ƒg -->
                        <input type="text" id="caseSearchInput" placeholder="ŒÚ‹q–¼EZŠ‚ÅŒŸõ..." class="px-3 py-2 border rounded-lg text-sm w-48" onkeyup="searchCases()">
                        <select id="caseSortSelect" onchange="sortCases()" class="px-3 py-2 border rounded-lg text-sm">
                            <option value="date_desc">“o˜^“ú‡iV‚µ‚¢‡j</option>
                            <option value="date_asc">“o˜^“ú‡iŒÃ‚¢‡j</option>
                            <option value="status">ƒXƒe[ƒ^ƒX‡</option>
                        </select>
                    </div>
                </div>

                <!-- ƒJ[ƒhƒrƒ…[ -->
                <div id="caseCardView" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(1)" data-case-id="1">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">–¢‘Î‰</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(1)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ƒƒ‚">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(1)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ƒXƒPƒWƒ…[ƒ‹">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(1)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="’S“–ƒpƒX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(1)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ƒLƒƒƒ“ƒZƒ‹\¿">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">R“c‘¾˜Y</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? ’S“–: “c’†‘¾˜Y</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">“Œ‹“s¢“c’J‹æ</p>
                    <p class="text-sm text-gray-600 mb-3">ŒËŒš‚ÄE’z15”N</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ÅI˜A—: 2024/01/15 ‰‰ñ–â‚¢‡‚í‚¹</span>
                        <span>Ÿ‰ñ—\’è: 2024/01/18 14:00 “d˜bƒtƒHƒ[</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('03-1234-5678')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('03-1234-5678')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(1)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ƒXƒe[ƒ^ƒX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(1)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            Ú×
                        </button>
                    </div>
                </div>
            
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(2)" data-case-id="2">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">ƒAƒ|Ï</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(2)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ƒƒ‚">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(2)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ƒXƒPƒWƒ…[ƒ‹">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(2)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="’S“–ƒpƒX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(2)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ƒLƒƒƒ“ƒZƒ‹\¿">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">—é–Ø‰Ôq</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? ’S“–: ²“¡‰Ôq</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">_“ŞìŒ§‰¡•ls</p>
                    <p class="text-sm text-gray-600 mb-3">ŒËŒš‚ÄE’z10”N</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ÅI˜A—: 2024/01/16 “d˜b‚ÅƒAƒ|æ“¾</span>
                        <span>Ÿ‰ñ—\’è: 2024/01/20 14:00 Œ»’n’²¸</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('045-9876-5432')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('045-9876-5432')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(2)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ƒXƒe[ƒ^ƒX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(2)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            Ú×
                        </button>
                    </div>
                </div>
            
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(3)" data-case-id="3">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">Œ©Ï’ñoÏ</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(3)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ƒƒ‚">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(3)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ƒXƒPƒWƒ…[ƒ‹">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(3)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="’S“–ƒpƒX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(3)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ƒLƒƒƒ“ƒZƒ‹\¿">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">²“¡ˆê˜Y</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? ’S“–: “c’†‘¾˜Y</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">é‹ÊŒ§‚³‚¢‚½‚Üs</p>
                    <p class="text-sm text-gray-600 mb-3">ƒAƒp[ƒgE’z20”N</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ÅI˜A—: 2024/01/14 Œ©Ï‘ƒ[ƒ‹‘—•t</span>
                        <span>Ÿ‰ñ—\’è: 2024/01/22 10:00 Œ©Ïà–¾–K–â</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('048-1111-2222')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('048-1111-2222')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(3)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ƒXƒe[ƒ^ƒX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(3)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            Ú×
                        </button>
                    </div>
                </div>
            
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(4)" data-case-id="4">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800">Œ»’²Ï</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(4)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ƒƒ‚">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(4)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ƒXƒPƒWƒ…[ƒ‹">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(4)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="’S“–ƒpƒX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(4)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ƒLƒƒƒ“ƒZƒ‹\¿">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">“c’†”üç</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? ’S“–: ²“¡‰Ôq</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">ç—tŒ§ç—ts</p>
                    <p class="text-sm text-gray-600 mb-3">ŒËŒš‚ÄE’z25”N</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ÅI˜A—: 2024/01/10 Œ»’n’²¸À{</span>
                        <span>Ÿ‰ñ—\’è: Œ©Ïì¬’†</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('043-3333-4444')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('043-3333-4444')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(4)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ƒXƒe[ƒ^ƒX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(4)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            Ú×
                        </button>
                    </div>
                </div>
            
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(5)" data-case-id="5">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">¬–ñ</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(5)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ƒƒ‚">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(5)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ƒXƒPƒWƒ…[ƒ‹">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(5)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="’S“–ƒpƒX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(5)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ƒLƒƒƒ“ƒZƒ‹\¿">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">‚‹´Œ’‘¾</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? ’S“–: “c’†‘¾˜Y</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">“Œ‹“sVh‹æ</p>
                    <p class="text-sm text-gray-600 mb-3">ƒ}ƒ“ƒVƒ‡ƒ“E’z8”N</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ÅI˜A—: 2024/01/17 Œ_–ñ’÷Œ‹</span>
                        <span>Ÿ‰ñ—\’è: 2024/01/25 H–ŠJn</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('03-5555-6666')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('03-5555-6666')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(5)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ƒXƒe[ƒ^ƒX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(5)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            Ú×
                        </button>
                    </div>
                </div>
            </div>

                <!-- ƒŠƒXƒgƒrƒ…[i‰Šú”ñ•\¦j -->
                <div id="caseListView" class="bg-white rounded-lg shadow overflow-hidden" style="display: none;">
                    <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ƒXƒe[ƒ^ƒX</th>
                                <th class="px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ŒÚ‹q–¼</th>
                                <th class="hidden md:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ZŠ</th>
                                <th class="px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">“d˜b”Ô†</th>
                                <th class="hidden lg:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ÅI˜A—</th>
                                <th class="hidden md:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">Ÿ‰ñƒAƒNƒVƒ‡ƒ“</th>
                                <th class="px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ƒAƒNƒVƒ‡ƒ“</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap">
                                    <span class="px-1 sm:px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">–¢‘Î‰</span>
                                </td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm">R“c‘¾˜Y</td>
                                <td class="hidden md:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">“Œ‹“s¢“c’J‹æ</td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500"><a href="tel:03-1234-5678">03-1234-5678</a></td>
                                <td class="hidden lg:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">1/15 –â‡‚¹</td>
                                <td class="hidden md:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">1/18 14:00 “d˜b</td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm font-medium">
                                    <button onclick="callCustomer('03-1234-5678')" class="text-green-600 hover:text-green-900 mr-2">??</button>
                                    <button onclick="showCaseDetail(1)" class="text-blue-600 hover:text-blue-900">Ú×</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap">
                                    <span class="px-1 sm:px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">ƒAƒ|Ï</span>
                                </td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm">—é–Ø‰Ôq</td>
                                <td class="hidden md:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">_“ŞìŒ§‰¡•ls</td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500"><a href="tel:045-9876-5432">045-9876-5432</a></td>
                                <td class="hidden lg:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">1/16 ƒAƒ|æ“¾</td>
                                <td class="hidden md:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">1/20 14:00 Œ»’²</td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm font-medium">
                                    <button onclick="callCustomer('045-9876-5432')" class="text-green-600 hover:text-green-900 mr-2">??</button>
                                    <button onclick="showCaseDetail(2)" class="text-blue-600 hover:text-blue-900">Ú×</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                </div>
            </div><!-- casesSection‚ÌI—¹ -->

            <!-- à–±ŠÇ—ƒZƒNƒVƒ‡ƒ“ -->
            <div id="billingSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">à–±ŠÇ—</h2>
                    <div class="flex space-x-2">
                        <button onclick="exportFinancialReport()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            CSVo—Í
                        </button>
                    </div>
                </div>

                <!-- ƒTƒ}ƒŠ[ƒJ[ƒh -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500" id="referralFeeMonth">1ŒĞ‰î—¿</p>
                                <p class="text-2xl font-bold text-gray-900" id="referralFeeAmount">\132,000</p>
                                <p class="text-xs text-gray-500" id="referralFeeCases">ˆÄŒ6Œ•ª</p>
                            </div>
                            <div class="p-3 bg-blue-100 rounded-full">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500" id="commissionMonth">1Œ¬–ñè”—¿</p>
                                <p class="text-2xl font-bold text-green-600" id="commissionAmount">\180,000</p>
                                <p class="text-xs text-gray-500" id="commissionCases">¬–ñ2Œ•ª</p>
                            </div>
                            <div class="p-3 bg-green-100 rounded-full">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500" id="profitLabel">—İŒv—˜‰v</p>
                                <p class="text-2xl font-bold text-yellow-600" id="profitAmount">\650,000</p>
                                <p class="text-xs text-gray-500" id="profitPeriod">2025”N“x</p>
                            </div>
                            <div class="p-3 bg-yellow-100 rounded-full">
                                <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500" id="roiLabel">1ŒROI</p>
                                <p class="text-2xl font-bold text-blue-600" id="roiValue">3265%</p>
                                <p class="text-xs text-gray-500" id="roiPrevious">‘OŒ: 2850%</p>
                            </div>
                            <div class="p-3 bg-red-100 rounded-full">
                                <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ƒ^ƒuƒiƒrƒQ[ƒVƒ‡ƒ“ -->
                <div class="bg-white rounded-lg shadow mb-6">
                    <div class="border-b border-gray-200">
                        <nav class="flex -mb-px">
                            <button onclick="showBillingTab('purchase')" class="billing-tab billing-tab-active px-6 py-3 border-b-2 font-medium text-sm" data-tab="purchase">
                                Ğ‰î—¿—š—ğ
                            </button>
                            <button onclick="showBillingTab('commission')" class="billing-tab px-6 py-3 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="commission">
                                ¬–ñè”—¿
                            </button>
                            <button onclick="showBillingTab('payment')" class="billing-tab px-6 py-3 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="payment">
                                x•¥—š—ğ
                            </button>
                            <button onclick="showBillingTab('analysis')" class="billing-tab px-6 py-3 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="analysis">
                                ûx•ªÍ
                            </button>
                        </nav>
                    </div>

                    <!-- Ğ‰î—¿—š—ğƒ^ƒu -->
                    <div id="purchaseTab" class="billing-tab-content p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">Ğ‰î—¿x•¥—š—ğ</h3>
                            <div class="flex items-center space-x-4">
                                <div class="text-sm bg-blue-50 px-3 py-1 rounded">
                                    <span class="text-gray-600">ƒfƒ|ƒWƒbƒgc‚:</span>
                                    <span class="font-bold text-blue-600">\440,000</span>
                                    <span class="text-gray-500">(20Œ•ª)</span>
                                </div>
                                <input type="month" value="2025-01" onchange="updateFinancialData(this.value)" class="border rounded px-3 py-1 text-sm">
                            </div>
                        </div>

                        <!-- x•¥‚¢ƒXƒPƒWƒ…[ƒ‹î•ñ -->
                        <div class="bg-blue-50 p-3 rounded-lg mb-4 text-sm">
                            <div class="flex items-center justify-between">
                                <div>
                                    <span class="font-medium text-blue-800">x•¥ğŒ:</span>
                                    <span class="text-blue-700 ml-2">Œ––’÷‚ß</span>
                                </div>
                                <div class="text-right">
                                    <span class="text-blue-700">U: —‚Œ15“ú / ŒûÀˆø—: —‚Œ27“ú</span>
                                    <span class="text-gray-600 text-xs ml-2">(“y“új‚Í—‚‰c‹Æ“ú)</span>
                                </div>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ğ‰î“ú</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ˆÄŒID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ŒÚ‹q–¼</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">•¨Œí•Ê</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">H–“à—e</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ğ‰î—¿</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">x•¥—\’è“ú</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">x•¥ó‹µ</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">¬–ñŠz/ROI</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">Ú×</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/15</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-001</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">“c’†—l</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ŒËŒš‚Ä</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ŠO•Ç“h‘•E‰®ª“h‘•</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2/15(“y)¨17(Œ)</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">¿‹‘Ò‚¿</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ŒğÂ’†</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-center">
                                            <button onclick="showCaseDetail(1)" class="text-blue-600 hover:text-blue-900">Ú×</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 bg-green-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-002</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">²“¡—l</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ˆêŒËŒš‚Ä</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ŠO•Ç“h‘•</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2/15(“y)¨17(Œ)</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">x•¥Ï</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                            <div class="text-xs">\1.2M</div>
                                            <div class="text-green-600 font-bold text-xs">3636%</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-center">
                                            <button onclick="showCaseDetail(2)" class="text-blue-600 hover:text-blue-900">Ú×</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 bg-green-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/08</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-003</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">—é–Ø—l</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ŒËŒš‚Ä</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">‰®ª•˜‚«‘Ö‚¦iŠ¢j</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2/27(–Ø)</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">x•¥Ï</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                            <div class="text-xs">\800K</div>
                                            <div class="text-green-600 font-bold text-xs">3636%</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-center">
                                            <button onclick="showCaseDetail(3)" class="text-blue-600 hover:text-blue-900">Ú×</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ¬–ñè”—¿ƒ^ƒu -->
                    <div id="commissionTab" class="billing-tab-content p-6" style="display: none;">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">¬–ñè”—¿x•¥—š—ğ</h3>
                            <div class="flex space-x-2">
                                <select class="border rounded px-3 py-1 text-sm">
                                    <option>‘S‚Ä</option>
                                    <option>x•¥Ï</option>
                                    <option>–¢•¥‚¢</option>
                                </select>
                                <input type="month" value="2025-01" class="border rounded px-3 py-1 text-sm">
                            </div>
                        </div>

                        <!-- x•¥‚¢ƒXƒPƒWƒ…[ƒ‹î•ñ -->
                        <div class="bg-yellow-50 p-3 rounded-lg mb-4 text-sm">
                            <span class="font-medium text-yellow-800">x•¥ğŒ:</span>
                            <span class="text-yellow-700">¿‹‘”­s‚©‚ç3‰c‹Æ“úˆÈ“à</span>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">¬–ñ“ú</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ˆÄŒID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ŒÚ‹q–¼</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">¬–ñ‹àŠz</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">è”—¿—¦</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">è”—¿Šz(Å)</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">x•¥Šú“ú</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">x•¥ó‹µ</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">¿‹‘</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50 bg-green-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-002</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">²“¡—l</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\1,200,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\132,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/31</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">x•¥Ï</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadInvoicePDF('INV-2025-0102')" class="text-blue-600 hover:text-blue-900">ƒ_ƒEƒ“ƒ[ƒh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 bg-green-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/08</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-003</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">—é–Ø—l</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\800,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\88,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/31</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">x•¥Ï</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadInvoicePDF('INV-2025-0103')" class="text-blue-600 hover:text-blue-900">ƒ_ƒEƒ“ƒ[ƒh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/05</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2024-845</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">‚‹´—l</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\550,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-red-600">\60,500</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/25</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">¿‹‘Ò‚¿</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="viewInvoice('INV-2025-0104')" class="text-blue-600 hover:text-blue-900">Šm”F</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024/12/28</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2024-810</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">R“c—l</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\950,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\104,500</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/15</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">x•¥Ï</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadInvoicePDF('INV-2024-1228')" class="text-blue-600 hover:text-blue-900">ƒ_ƒEƒ“ƒ[ƒh</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- x•¥—š—ğƒ^ƒu -->
                    <div id="paymentTab" class="billing-tab-content p-6" style="display: none;">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">x•¥—š—ğ</h3>
                            <div class="flex space-x-2">
                                <select class="border rounded px-3 py-1 text-sm">
                                    <option>‘S‚Ä</option>
                                    <option>Ğ‰î—¿</option>
                                    <option>¬–ñè”—¿</option>
                                    <option>‚»‚Ì‘¼</option>
                                </select>
                                <input type="month" value="2025-01" class="border rounded px-3 py-1 text-sm">
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">x•¥“ú</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">¿‹‘”Ô†</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">í•Ê</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">“à—e</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">x•¥Šz(Å)</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">x•¥•û–@</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ƒXƒe[ƒ^ƒX</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">—Ìû‘</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/15</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0156</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Ğ‰î—¿</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">ˆÄŒ#C2025-001 “c’†—liŠO•Ç“h‘•j</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">‹âsU</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0156')" class="text-blue-600 hover:text-blue-900">ƒ_ƒEƒ“ƒ[ƒh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0145</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Ğ‰î—¿</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">ˆÄŒ#C2025-002 ²“¡—liŠO•Ç“h‘•j</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">‹âsU</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0145')" class="text-blue-600 hover:text-blue-900">ƒ_ƒEƒ“ƒ[ƒh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0102</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">¬–ñè”—¿</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">²“¡—lˆÄŒ ¬–ñè”—¿</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\132,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">‹âsU</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0102')" class="text-blue-600 hover:text-blue-900">ƒ_ƒEƒ“ƒ[ƒh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/08</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0103</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">¬–ñè”—¿</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">—é–Ø—lˆÄŒ ¬–ñè”—¿</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\88,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">‹âsU</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0103')" class="text-blue-600 hover:text-blue-900">ƒ_ƒEƒ“ƒ[ƒh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/05</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0133</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Ğ‰î—¿</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">ˆÄŒ#C2024-098 ‘º“c—liƒ‚ƒ‹ƒ^ƒ‹ŠO•Çj</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">‹âsU</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0133')" class="text-blue-600 hover:text-blue-900">ƒ_ƒEƒ“ƒ[ƒh</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ûx•ªÍƒ^ƒu -->
                    <div id="analysisTab" class="billing-tab-content p-6" style="display: none;">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold">ûx•ªÍ</h3>
                            <select class="border rounded px-3 py-1 text-sm">
                                <option>2025”N1Œ</option>
                                <option>2024”N12Œ</option>
                                <option>2024”N11Œ</option>
                            </select>
                        </div>

                        <!-- ŒŠÔƒTƒ}ƒŠ[ -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-white border rounded-lg p-4">
                                <div class="text-sm text-gray-500 mb-1">”„ã‚</div>
                                <div class="text-2xl font-bold text-gray-900">\3,550,000</div>
                                <div class="text-xs text-green-600 mt-1">+12% ‘OŒ”ä</div>
                            </div>
                            <div class="bg-white border rounded-lg p-4">
                                <div class="text-sm text-gray-500 mb-1">xo‡Œv</div>
                                <div class="text-2xl font-bold text-gray-900">\625,000</div>
                                <div class="text-xs text-red-600 mt-1">+8% ‘OŒ”ä</div>
                            </div>
                            <div class="bg-white border rounded-lg p-4">
                                <div class="text-sm text-gray-500 mb-1">‘e—˜‰v</div>
                                <div class="text-2xl font-bold text-green-600">\2,925,000</div>
                                <div class="text-xs text-green-600 mt-1">+14% ‘OŒ”ä</div>
                            </div>
                            <div class="bg-white border rounded-lg p-4">
                                <div class="text-sm text-gray-500 mb-1">ROI</div>
                                <div class="text-2xl font-bold text-blue-600">468%</div>
                                <div class="text-xs text-green-600 mt-1">—D—Ç</div>
                            </div>
                        </div>

                        <!-- ûx“à–ó -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <!-- û“ü“à–ó -->
                            <div class="bg-white border rounded-lg p-4">
                                <h4 class="font-semibold text-gray-900 mb-3">û“ü“à–ó</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center">
                                            <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                            <span class="text-sm text-gray-700">H–”„ã</span>
                                        </div>
                                        <span class="text-sm font-semibold">\3,350,000</span>
                                    </div>
                                    <div class="pt-3 mt-3 border-t flex justify-between">
                                        <span class="text-sm font-semibold text-gray-700">‡Œv</span>
                                        <span class="text-sm font-bold text-green-600">\3,350,000</span>
                                    </div>
                                </div>
                            </div>

                            <!-- xo“à–ó -->
                            <div class="bg-white border rounded-lg p-4">
                                <h4 class="font-semibold text-gray-900 mb-3">xo“à–ó</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center">
                                            <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div>
                                            <span class="text-sm text-gray-700">Ğ‰î—¿</span>
                                        </div>
                                        <span class="text-sm font-semibold">\176,000</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center">
                                            <div class="w-2 h-2 bg-orange-500 rounded-full mr-2"></div>
                                            <span class="text-sm text-gray-700">¬–ñè”—¿</span>
                                        </div>
                                        <span class="text-sm font-semibold">\325,000</span>
                                    </div>
                                    <div class="pt-3 mt-3 border-t flex justify-between">
                                        <span class="text-sm font-semibold text-gray-700">‡Œv</span>
                                        <span class="text-sm font-bold text-red-600">\501,000</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ˆÄŒ•Êûx -->
                        <div class="bg-white border rounded-lg p-4">
                            <h4 class="font-semibold text-gray-900 mb-3">ˆÄŒ•ÊûxTOP5</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead class="border-b">
                                        <tr>
                                            <th class="text-left text-xs font-medium text-gray-500 uppercase pb-2">ˆÄŒ</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">Ğ‰î—¿</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">”„ã</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">è”—¿</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">—˜‰v</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">ROI</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200">
                                        <tr>
                                            <td class="py-2 text-sm text-gray-900">²“¡—lˆÄŒ</td>
                                            <td class="py-2 text-sm text-right">\22,000</td>
                                            <td class="py-2 text-sm text-right">\1,200,000</td>
                                            <td class="py-2 text-sm text-right">\132,000</td>
                                            <td class="py-2 text-sm text-right font-semibold text-green-600">\1,046,000</td>
                                            <td class="py-2 text-sm text-right font-bold text-blue-600">4755%</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 text-sm text-gray-900">—é–Ø—lˆÄŒ</td>
                                            <td class="py-2 text-sm text-right">\22,000</td>
                                            <td class="py-2 text-sm text-right">\800,000</td>
                                            <td class="py-2 text-sm text-right">\88,000</td>
                                            <td class="py-2 text-sm text-right font-semibold text-green-600">\690,000</td>
                                            <td class="py-2 text-sm text-right font-bold text-blue-600">800%</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 text-sm text-gray-900">R“c—lˆÄŒ</td>
                                            <td class="py-2 text-sm text-right">\85,000</td>
                                            <td class="py-2 text-sm text-right">\950,000</td>
                                            <td class="py-2 text-sm text-right">\95,000</td>
                                            <td class="py-2 text-sm text-right font-semibold text-green-600">\770,000</td>
                                            <td class="py-2 text-sm text-right font-bold text-blue-600">906%</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 text-sm text-gray-900">‚‹´—lˆÄŒ</td>
                                            <td class="py-2 text-sm text-right">\75,000</td>
                                            <td class="py-2 text-sm text-right">\600,000</td>
                                            <td class="py-2 text-sm text-right">\60,000</td>
                                            <td class="py-2 text-sm text-right font-semibold text-green-600">\465,000</td>
                                            <td class="py-2 text-sm text-right font-bold text-blue-600">620%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div><!-- billingSection‚ÌI—¹ -->

            <!-- ƒfƒ|ƒWƒbƒgƒZƒNƒVƒ‡ƒ“ -->
            <div id="depositSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">ƒfƒ|ƒWƒbƒgŠÇ—</h2>
                    <div class="flex space-x-2">
                        <button onclick="showDepositModal()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            ƒfƒ|ƒWƒbƒg’Ç‰Á
                        </button>
                    </div>
                </div>

                <!-- ƒfƒ|ƒWƒbƒgó‹µƒTƒ}ƒŠ[ -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white border-2 border-blue-200 rounded-lg shadow p-4">
                        <div class="text-sm text-gray-600 mb-1">ƒfƒ|ƒWƒbƒgc‚</div>
                        <div class="text-3xl font-bold text-blue-600">20/25Œ</div>
                        <div class="text-sm text-gray-500 mt-1">\440,000 c‚</div>
                    </div>
                    <div class="bg-white border rounded-lg shadow p-4">
                        <div class="text-sm text-gray-600 mb-1">—LŒøŠúŒÀ</div>
                        <div class="text-2xl font-bold text-gray-900">2025/03/31</div>
                        <div class="text-sm text-orange-600 mt-1">c‚è45“ú</div>
                    </div>
                    <div class="bg-white border rounded-lg shadow p-4">
                        <div class="text-sm text-gray-600 mb-1">Œ»İ‚Ìİ’è</div>
                        <div class="text-2xl font-bold text-green-600">ŒJ‰z</div>
                        <div class="text-sm text-gray-500 mt-1">ÅIXV: 2025/01/17</div>
                    </div>
                    <div class="bg-white border rounded-lg shadow p-4">
                        <div class="text-sm text-gray-600 mb-1">•\¦ƒ‰ƒ“ƒN</div>
                        <div class="text-2xl font-bold text-purple-600">—Dæ+1</div>
                        <div class="text-sm text-gray-500 mt-1">ƒfƒ|ƒWƒbƒg“Á“T“K—p’†</div>
                    </div>
                </div>

                <!-- ƒ‰ƒ“ƒLƒ“ƒO“Á“Tà–¾ -->
                <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow mb-6 p-6">
                    <div class="flex items-start">
                        <svg class="w-8 h-8 text-purple-600 mr-3 mt-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                        </svg>
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">ƒfƒ|ƒWƒbƒgw“ü“Á“T</h3>
                            <p class="text-sm text-gray-700 mb-3">
                                ƒfƒ|ƒWƒbƒg‚ğw“ü‚·‚é‚ÆAƒ†[ƒU[‚Ö•\¦‚³‚ê‚éƒ‰ƒ“ƒLƒ“ƒO‚ª<span class="font-bold text-purple-600">‘S‚ÄUP</span>‚³‚êA
                                ‚æ‚è—Ç‚¢ğŒ‚ÅˆÄŒ‚ª‹Ÿ‹‹‚³‚ê‚â‚·‚­‚È‚è‚Ü‚·B
                            </p>
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3">
                                <div class="flex items-start">
                                    <svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                    </svg>
                                    <div class="text-sm text-yellow-800">
                                        <p class="font-medium">ƒfƒ|ƒWƒbƒg“K—p‘ÎÛ</p>
                                        <p class="text-xs mt-1">ƒfƒ|ƒWƒbƒg‚ÍŠî–{Ğ‰î—¿\22,000‚ÌˆÄŒ‚Ì‚İ‚É“K—p‚³‚ê‚Ü‚·BƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“i\33,000j‚â•”•ª{Hi\11,000ˆÈ‰ºj‚É‚Í“K—p‚³‚ê‚Ü‚¹‚ñB</p>
                                    </div>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <div class="bg-white rounded-lg p-3 border border-purple-200">
                                    <div class="flex items-center mb-1">
                                        <svg class="w-4 h-4 text-purple-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                        </svg>
                                        <span class="text-xs font-medium text-gray-700">—Dæ•\¦</span>
                                    </div>
                                    <p class="text-xs text-gray-600">ŒŸõŒ‹‰Ê‚ÌãˆÊ‚É•\¦</p>
                                </div>
                                <div class="bg-white rounded-lg p-3 border border-purple-200">
                                    <div class="flex items-center mb-1">
                                        <svg class="w-4 h-4 text-purple-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                        </svg>
                                        <span class="text-xs font-medium text-gray-700">M—Š“xUP</span>
                                    </div>
                                    <p class="text-xs text-gray-600">‘O•¥‚¢‚ÅM—ŠŠ´Œüã</p>
                                </div>
                                <div class="bg-white rounded-lg p-3 border border-purple-200">
                                    <div class="flex items-center mb-1">
                                        <svg class="w-4 h-4 text-purple-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                        </svg>
                                        <span class="text-xs font-medium text-gray-700">ˆÄŒŠl“¾—¦UP</span>
                                    </div>
                                    <p class="text-xs text-gray-600">‹£‡‘¼Ğ‚æ‚è—DˆÊ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ŒJ‰z/•Ô‹àİ’è -->
                <div class="bg-white rounded-lg shadow mb-6 p-6">
                    <h3 class="text-lg font-semibold mb-4">ŒJ‰zE•Ô‹àİ’è</h3>
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
                        <div class="flex items-start">
                            <svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                            </svg>
                            <div class="text-sm text-yellow-800">
                                <p class="font-medium mb-1">d—v‚È‚¨’m‚ç‚¹</p>
                                <ul class="list-disc list-inside space-y-1 text-xs">
                                    <li>ƒfƒ|ƒWƒbƒg‚Ì—LŒøŠúŒÀ‚Í“ü‹à‚Ì—‚XŒ––‚Ü‚Å‚Å‚·</li>
                                    <li>•Ô‹à‚ÌUè”—¿‚Í‚¨‹q—l•‰’S‚Æ‚È‚è‚Ü‚·</li>
                                    <li>ŒJ‰z‚ğ‘I‘ğ‚·‚é‚Æ–³ŠúŒÀ‚ÉŒp‘±—˜—p‰Â”\‚Å‚·</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-700 mb-2">ŠúŒÀØ‚ê‚Ìˆ—•û–@</p>
                            <div class="flex space-x-4">
                                <label class="flex items-center">
                                    <input type="radio" name="depositHandling" value="rollover" checked="" class="mr-2">
                                    <span class="text-sm">ŒJ‰zi„§j</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="depositHandling" value="refund" class="mr-2">
                                    <span class="text-sm">•Ô‹à</span>
                                </label>
                            </div>
                        </div>
                        <button onclick="updateDepositSetting()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            İ’è‚ğ•Û‘¶
                        </button>
                    </div>
                </div>

                <!-- ƒfƒ|ƒWƒbƒgæˆø—š—ğ -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">ƒfƒ|ƒWƒbƒgæˆø—š—ğ</h3>
                        <div class="flex space-x-2">
                            <select id="depositTypeFilter" onchange="filterDepositHistory()" class="border rounded px-3 py-1 text-sm">
                                <option value="all">‘S‚Ä</option>
                                <option value="\¿">\¿’†</option>
                                <option value="”½‰f">”½‰f</option>
                                <option value="—˜—p">—˜—p</option>
                                <option value="•Ô‹à">•Ô‹à</option>
                            </select>
                            <input type="month" id="depositMonthFilter" value="2025-01" onchange="filterDepositHistory()" class="border rounded px-3 py-1 text-sm">
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">“ú•t</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">í•Ê</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ó‘Ô</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Œ”</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">‹àŠz</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">à–¾</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">cŒ”</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">—LŒøŠúŒÀ</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">‘€ì</th>
                                </tr>
                            </thead>
                            <tbody id="depositHistoryBody" class="bg-white divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50 deposit-row" data-type="\¿" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/17</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">\¿</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">“ü‹à‘Ò‚¿</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">10</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">\220,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">INV-20250117 (x•¥ŠúŒÀ:1/24)</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <button onclick="downloadInvoice('INV-20250117')" class="text-blue-600 hover:text-blue-800">¿‹‘DL</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 bg-gray-50 deposit-row" data-type="—˜—p" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/15</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">—˜—p</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">-1</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600">-\22,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600">
                                        <a href="#" onclick="showCaseDetail('C2025-001'); return false;" class="hover:underline">#C2025-001 “c’†—l</a>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">20</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/03/31</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                </tr>
                                <tr class="hover:bg-gray-50 deposit-row" data-type="—˜—p" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">—˜—p</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">-1</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600">-\22,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600">
                                        <a href="#" onclick="showCaseDetail('C2025-002'); return false;" class="hover:underline">#C2025-002 ²“¡—l</a>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">21</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/03/31</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                </tr>
                                <tr class="hover:bg-gray-50 bg-gray-50 deposit-row" data-type="”½‰f" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/05</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">”½‰f</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">+25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600">+\550,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">INV-20250101 “ü‹àŠm”F</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/03/31</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <button onclick="downloadInvoice('INV-20250101')" class="text-blue-600 hover:text-blue-800">¿‹‘DL</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 deposit-row" data-type="\¿" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/01</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">\¿</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">“ü‹àÏ</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">\550,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">INV-20250101 (“ü‹à:1/5)</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <button onclick="downloadInvoice('INV-20250101')" class="text-blue-600 hover:text-blue-800">¿‹‘DL</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 bg-gray-50 deposit-row" data-type="•Ô‹à" data-date="2024-12">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024/12/15</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">•Ô‹à</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Š®—¹</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">-3</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600">\65,450</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ŠúŒÀØ‚ê•Ô‹à(è”—¿\550·ˆø)</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">0</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024/11/30</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div><!-- depositSection‚ÌI—¹ -->

            <!-- ƒŒƒ|[ƒgƒZƒNƒVƒ‡ƒ“ -->
            <div id="reportsSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">ƒŒƒ|[ƒg</h2>
                    <div class="flex space-x-2">
                        <select id="reportPeriod" onchange="updateReports()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                            <option value="month">¡Œ</option>
                            <option value="quarter">¡l”¼Šú</option>
                            <option value="year">¡”N“x</option>
                            <option value="custom">ŠúŠÔw’è</option>
                        </select>
                        <button onclick="exportReport()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            ƒŒƒ|[ƒgo—Í
                        </button>
                    </div>
                </div>

                <!-- KPIƒTƒ}ƒŠ[ -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">‘”„ã</p>
                                <p class="text-2xl font-bold text-gray-900">\8,450,000</p>
                                <p class="text-xs text-green-600 flex items-center mt-1">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    12% ‘OŒ”ä
                                </p>
                            </div>
                            <div class="p-3 bg-blue-100 rounded-full">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">¬–ñ—¦</p>
                                <p class="text-2xl font-bold text-gray-900">68.5%</p>
                                <p class="text-xs text-green-600 flex items-center mt-1">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    5.2% ‰ü‘P
                                </p>
                            </div>
                            <div class="p-3 bg-green-100 rounded-full">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">•½‹Ï’P‰¿</p>
                                <p class="text-2xl font-bold text-gray-900">\952,000</p>
                                <p class="text-xs text-red-600 flex items-center mt-1">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    3% ‘OŒ”ä
                                </p>
                            </div>
                            <div class="p-3 bg-yellow-100 rounded-full">
                                <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">V‹KˆÄŒ</p>
                                <p class="text-2xl font-bold text-gray-900">42Œ</p>
                                <p class="text-xs text-green-600 flex items-center mt-1">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    8Œ ‘‰Á
                                </p>
                            </div>
                            <div class="p-3 bg-purple-100 rounded-full">
                                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ƒOƒ‰ƒtƒGƒŠƒA -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- ”„ã„ˆÚƒOƒ‰ƒt -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">”„ã„ˆÚ</h3>
                            <select class="text-sm border rounded px-2 py-1">
                                <option>Œ•Ê</option>
                                <option>T•Ê</option>
                                <option>“ú•Ê</option>
                            </select>
                        </div>
                        <div style="height: 200px;">
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>

                    <!-- ¬–ñ—¦„ˆÚƒOƒ‰ƒt -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">¬–ñ—¦„ˆÚ</h3>
                            <select class="text-sm border rounded px-2 py-1">
                                <option>Œ•Ê</option>
                                <option>T•Ê</option>
                            </select>
                        </div>
                        <div style="height: 200px;">
                            <canvas id="conversionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Ú×ƒe[ƒuƒ‹ -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- ‰c‹Æ•Ê¬Ñ -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b">
                            <h3 class="text-lg font-semibold text-gray-900">‰c‹Æ•Ê¬Ñ</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">‰c‹Æ–¼</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">¬–ñ”</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">¬–ñ—¦</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">”„ã</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">“c’†‘¾˜Y</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">12</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900">75%</span>
                                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                    <div class="bg-green-500 h-2 rounded-full" style="width: 75%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\3,200,000</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">²“¡‰Ôq</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">8</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900">62%</span>
                                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 62%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\2,100,000</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">—é–ØŸ˜Y</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">5</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900">45%</span>
                                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                    <div class="bg-red-500 h-2 rounded-full" style="width: 45%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\1,450,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ƒGƒŠƒA•Ê¬Ñ -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b">
                            <h3 class="text-lg font-semibold text-gray-900">ƒGƒŠƒA•Ê¬Ñ</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ƒGƒŠƒA</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ˆÄŒ”</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">¬–ñ—¦</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">”„ã</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">“Œ‹“s</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">18</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">72%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\4,200,000</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">_“ŞìŒ§</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">12</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">65%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\2,800,000</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">é‹ÊŒ§</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">8</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">58%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\1,450,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ƒŠ[ƒhƒ^ƒCƒ€•ªÍƒZƒNƒVƒ‡ƒ“ -->
                <div class="mt-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-gray-900">ƒŠ[ƒhƒ^ƒCƒ€•ªÍ</h3>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-500">•½‹Ï’l•\¦</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="showMedian" class="sr-only peer" onchange="updateLeadTimeDisplay()">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                                <span class="text-sm text-gray-500">’†‰›’l•\¦</span>
                            </div>
                        </div>

                        <!-- KPIƒJ[ƒh -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-blue-600 font-medium">–â‡‚¹ ¨ Œ»’n’²¸</p>
                                        <p class="text-2xl font-bold text-blue-900" id="leadTime1">3.2“ú</p>
                                        <p class="text-xs text-blue-600 flex items-center mt-1">
                                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                            </svg>
                                            0.5“ú ’Zk
                                        </p>
                                    </div>
                                    <div class="p-3 bg-blue-200 rounded-full">
                                        <svg class="w-6 h-6 text-blue-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-green-600 font-medium">Œ»’n’²¸ ¨ Œ©Ï’ño</p>
                                        <p class="text-2xl font-bold text-green-900" id="leadTime2">2.8“ú</p>
                                        <p class="text-xs text-green-600 flex items-center mt-1">
                                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                            </svg>
                                            0.2“ú ’Zk
                                        </p>
                                    </div>
                                    <div class="p-3 bg-green-200 rounded-full">
                                        <svg class="w-6 h-6 text-green-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-purple-600 font-medium">Œ©Ï’ño ¨ ¬–ñ</p>
                                        <p class="text-2xl font-bold text-purple-900" id="leadTime3">5.5“ú</p>
                                        <p class="text-xs text-red-600 flex items-center mt-1">
                                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                            </svg>
                                            1.2“ú ‰„’·
                                        </p>
                                    </div>
                                    <div class="p-3 bg-purple-200 rounded-full">
                                        <svg class="w-6 h-6 text-purple-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ƒŠ[ƒhƒ^ƒCƒ€ƒ`ƒƒ[ƒg -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- Œ•Ê„ˆÚƒOƒ‰ƒt -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="text-sm font-semibold text-gray-700 mb-3">Œ•ÊƒŠ[ƒhƒ^ƒCƒ€„ˆÚ</h4>
                                <div style="height: 250px;">
                                    <canvas id="leadTimeChart"></canvas>
                                </div>
                            </div>

                            <!-- ƒtƒ@ƒlƒ‹•ªÍ -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="text-sm font-semibold text-gray-700 mb-3">‰c‹Æƒtƒ@ƒlƒ‹•ªÍ</h4>
                                <div class="space-y-3">
                                    <div class="relative">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700">–â‡‚¹</span>
                                            <span class="text-sm text-gray-500">142Œ</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-8">
                                            <div class="bg-blue-500 h-8 rounded-full flex items-center justify-center text-white text-xs" style="width: 100%">
                                                100%
                                            </div>
                                        </div>
                                    </div>

                                    <div class="relative">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700">Œ»’n’²¸</span>
                                            <span class="text-sm text-gray-500">98Œ</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-8">
                                            <div class="bg-green-500 h-8 rounded-full flex items-center justify-center text-white text-xs" style="width: 69%">
                                                69% (•½‹Ï3.2“ú)
                                            </div>
                                        </div>
                                    </div>

                                    <div class="relative">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700">Œ©Ï’ño</span>
                                            <span class="text-sm text-gray-500">85Œ</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-8">
                                            <div class="bg-yellow-500 h-8 rounded-full flex items-center justify-center text-white text-xs" style="width: 60%">
                                                60% (•½‹Ï2.8“ú)
                                            </div>
                                        </div>
                                    </div>

                                    <div class="relative">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700">¬–ñ</span>
                                            <span class="text-sm text-gray-500">42Œ</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-8">
                                            <div class="bg-purple-500 h-8 rounded-full flex items-center justify-center text-white text-xs" style="width: 30%">
                                                30% (•½‹Ï5.5“ú)
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">ƒg[ƒ^ƒ‹•½‹Ï“ú”:</span>
                                        <span class="font-bold text-gray-900">11.5“ú</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ‰c‹Æ•ÊƒŠ[ƒhƒ^ƒCƒ€”äŠr -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="text-sm font-semibold text-gray-700 mb-4">‰c‹Æ•ÊƒŠ[ƒhƒ^ƒCƒ€”äŠr</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead>
                                        <tr class="text-xs text-gray-500 uppercase">
                                            <th class="text-left py-2">‰c‹Æ’S“–</th>
                                            <th class="text-center py-2">–â‡‚¹¨’²¸</th>
                                            <th class="text-center py-2">’²¸¨Œ©Ï</th>
                                            <th class="text-center py-2">Œ©Ï¨¬–ñ</th>
                                            <th class="text-center py-2">‡Œv“ú”</th>
                                            <th class="text-center py-2">¬–ñ—¦</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-sm">
                                        <tr class="border-t border-gray-200">
                                            <td class="py-3 font-medium text-gray-900">“c’†‘¾˜Y</td>
                                            <td class="text-center text-green-600 font-medium">2.5“ú</td>
                                            <td class="text-center text-green-600 font-medium">2.0“ú</td>
                                            <td class="text-center text-green-600 font-medium">4.5“ú</td>
                                            <td class="text-center font-bold text-gray-900">9.0“ú</td>
                                            <td class="text-center">
                                                <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">75%</span>
                                            </td>
                                        </tr>
                                        <tr class="border-t border-gray-200">
                                            <td class="py-3 font-medium text-gray-900">²“¡‰Ôq</td>
                                            <td class="text-center text-yellow-600 font-medium">3.0“ú</td>
                                            <td class="text-center text-yellow-600 font-medium">3.2“ú</td>
                                            <td class="text-center text-yellow-600 font-medium">5.8“ú</td>
                                            <td class="text-center font-bold text-gray-900">12.0“ú</td>
                                            <td class="text-center">
                                                <span class="px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800">62%</span>
                                            </td>
                                        </tr>
                                        <tr class="border-t border-gray-200">
                                            <td class="py-3 font-medium text-gray-900">—é–ØŸ˜Y</td>
                                            <td class="text-center text-red-600 font-medium">4.5“ú</td>
                                            <td class="text-center text-red-600 font-medium">3.8“ú</td>
                                            <td class="text-center text-red-600 font-medium">7.2“ú</td>
                                            <td class="text-center font-bold text-gray-900">15.5“ú</td>
                                            <td class="text-center">
                                                <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800">45%</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                                <p class="text-xs text-blue-800">
                                    <strong>?? ‰ü‘Pƒ|ƒCƒ“ƒg:</strong> Œ©Ï’ño‚©‚ç¬–ñ‚Ü‚Å‚ÌŠúŠÔ‚ª’·‚¢ŒXŒü‚ª‚ ‚è‚Ü‚·BƒtƒHƒ[ƒAƒbƒv‚Ì•p“x‚ğã‚°‚é‚±‚Æ‚Å¬–ñ—¦Œüã‚ªŠú‘Ò‚Å‚«‚Ü‚·B
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- reportsSection‚ÌI—¹ -->

            <!-- ƒJƒŒƒ“ƒ_[ƒZƒNƒVƒ‡ƒ“ -->
            <div id="calendarSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">ƒJƒŒƒ“ƒ_[</h2>
                    <div class="flex items-center space-x-2">
                        <button onclick="changeCalendarView('month')" class="calendar-view-btn px-3 py-1 text-sm font-medium text-blue-600 bg-blue-50 rounded">Œ</button>
                        <button onclick="changeCalendarView('week')" class="calendar-view-btn px-3 py-1 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded">T</button>
                        <button onclick="changeCalendarView('day')" class="calendar-view-btn px-3 py-1 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded">“ú</button>
                        <button onclick="addNewEvent()" class="ml-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                            </svg>
                            —\’è‚ğ’Ç‰Á
                        </button>
                    </div>
                </div>
                
                <!-- ƒJƒŒƒ“ƒ_[ƒiƒrƒQ[ƒVƒ‡ƒ“ -->
                <div class="bg-white rounded-lg shadow mb-4">
                    <div class="p-4 flex justify-between items-center border-b">
                        <button onclick="previousMonth()" class="p-2 hover:bg-gray-100 rounded">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h3 id="currentMonth" class="text-lg font-semibold text-gray-900">2025”N10Œ</h3>
                        <button onclick="nextMonth()" class="p-2 hover:bg-gray-100 rounded">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Œ•\¦ƒJƒŒƒ“ƒ_[ -->
                    <div id="calendarMonthView" class="p-4">
                        <div class="grid grid-cols-7 mb-2">
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">“ú</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">Œ</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">‰Î</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">…</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">–Ø</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">‹à</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">“y</div>
                        </div>
                        <div id="calendarGrid" style="display: grid; grid-template-columns: repeat(7, 1fr);">
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="28">
                                <div style="font-weight: 500; font-size: 14px;">28</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="29">
                                <div style="font-weight: 500; font-size: 14px;">29</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="30">
                                <div style="font-weight: 500; font-size: 14px;">30</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="1" data-full-date="2025-10-01" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">1</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="2" data-full-date="2025-10-02" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">2</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="3" data-full-date="2025-10-03" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">3</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #e0f2fe;" data-date="4" data-full-date="2025-10-04" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#bae6fd'" onmouseout="this.style.background='#e0f2fe'">
                                <div style="font-weight: 500; font-size: 14px; color: #0284c7;">4</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: #eff6ff; background: #fee2e2; border: 2px solid #3b82f6;" data-date="5" data-full-date="2025-10-05" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#dbeafe'" onmouseout="this.style.background='#eff6ff'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">5</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="6" data-full-date="2025-10-06" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">6</div>
                                
                                <div class="mt-1 space-y-1">
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-4" onclick="showEventDetail(case-4)" oncontextmenu="showEventMenu(event, case-4)" ondragstart="handleDragStart(event, case-4)" title="Œ©Ïì¬’†: undefined—l">
                                        10:00 Œ©Ïì¬’†: undefined—l
                                    </div>
                                </div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="7" data-full-date="2025-10-07" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">7</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="8" data-full-date="2025-10-08" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">8</div>
                                
                                <div class="mt-1 space-y-1">
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-1" onclick="showEventDetail(case-1)" oncontextmenu="showEventMenu(event, case-1)" ondragstart="handleDragStart(event, case-1)" title="2024/01/18 14:00 “d˜bƒtƒHƒ[: undefined—l">
                                        10:00 2024/01/18 14:00 “d˜bƒtƒHƒ[: undefined—l
                                    </div>
                                
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-2" onclick="showEventDetail(case-2)" oncontextmenu="showEventMenu(event, case-2)" ondragstart="handleDragStart(event, case-2)" title="2024/01/20 14:00 Œ»’n’²¸: undefined—l">
                                        10:00 2024/01/20 14:00 Œ»’n’²¸: undefined—l
                                    </div>
                                
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-3" onclick="showEventDetail(case-3)" oncontextmenu="showEventMenu(event, case-3)" ondragstart="handleDragStart(event, case-3)" title="2024/01/22 10:00 Œ©Ïà–¾–K–â: undefined—l">
                                        10:00 2024/01/22 10:00 Œ©Ïà–¾–K–â: undefined—l
                                    </div>
                                
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-5" onclick="showEventDetail(case-5)" oncontextmenu="showEventMenu(event, case-5)" ondragstart="handleDragStart(event, case-5)" title="2024/01/25 H–ŠJn: undefined—l">
                                        10:00 2024/01/25 H–ŠJn: undefined—l
                                    </div>
                                </div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="9" data-full-date="2025-10-09" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">9</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="10" data-full-date="2025-10-10" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">10</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #e0f2fe;" data-date="11" data-full-date="2025-10-11" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#bae6fd'" onmouseout="this.style.background='#e0f2fe'">
                                <div style="font-weight: 500; font-size: 14px; color: #0284c7;">11</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #fee2e2;" data-date="12" data-full-date="2025-10-12" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#fecaca'" onmouseout="this.style.background='#fee2e2'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">12</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #fee2e2;" data-date="13" data-full-date="2025-10-13" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#fecaca'" onmouseout="this.style.background='#fee2e2'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">13</div>
                                <div style="font-size: 10px; color: #dc2626; font-weight: 500;">ƒXƒ|[ƒc‚Ì“ú</div>
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="14" data-full-date="2025-10-14" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">14</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="15" data-full-date="2025-10-15" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">15</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="16" data-full-date="2025-10-16" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">16</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="17" data-full-date="2025-10-17" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">17</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #e0f2fe;" data-date="18" data-full-date="2025-10-18" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#bae6fd'" onmouseout="this.style.background='#e0f2fe'">
                                <div style="font-weight: 500; font-size: 14px; color: #0284c7;">18</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #fee2e2;" data-date="19" data-full-date="2025-10-19" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#fecaca'" onmouseout="this.style.background='#fee2e2'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">19</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="20" data-full-date="2025-10-20" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">20</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="21" data-full-date="2025-10-21" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">21</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="22" data-full-date="2025-10-22" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">22</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="23" data-full-date="2025-10-23" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">23</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="24" data-full-date="2025-10-24" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">24</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #e0f2fe;" data-date="25" data-full-date="2025-10-25" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#bae6fd'" onmouseout="this.style.background='#e0f2fe'">
                                <div style="font-weight: 500; font-size: 14px; color: #0284c7;">25</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #fee2e2;" data-date="26" data-full-date="2025-10-26" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#fecaca'" onmouseout="this.style.background='#fee2e2'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">26</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="27" data-full-date="2025-10-27" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">27</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="28" data-full-date="2025-10-28" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">28</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="29" data-full-date="2025-10-29" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">29</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="30" data-full-date="2025-10-30" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">30</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="31" data-full-date="2025-10-31" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">31</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="1">
                                <div style="font-weight: 500; font-size: 14px;">1</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="2">
                                <div style="font-weight: 500; font-size: 14px;">2</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="3">
                                <div style="font-weight: 500; font-size: 14px;">3</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="4">
                                <div style="font-weight: 500; font-size: 14px;">4</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="5">
                                <div style="font-weight: 500; font-size: 14px;">5</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="6">
                                <div style="font-weight: 500; font-size: 14px;">6</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="7">
                                <div style="font-weight: 500; font-size: 14px;">7</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="8">
                                <div style="font-weight: 500; font-size: 14px;">8</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- T•\¦i‰Šú‚Í”ñ•\¦j -->
                    <div id="calendarWeekView" class="p-4 hidden">
                        <div id="weekGrid" class="grid grid-cols-8 gap-0 border">
                            <!-- Week view content will be rendered here -->
                        </div>
                    </div>
                    
                    <!-- “ú•\¦i‰Šú‚Í”ñ•\¦j -->
                    <div id="calendarDayView" class="p-4 hidden">
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-4 border-b">
                                <h3 id="dayViewDate" class="text-lg font-semibold">2024”N1Œ15“úiŒj</h3>
                            </div>
                            <div id="dayTimeSlots" class="p-4">
                                <!-- Day view time slots will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –}—á -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h4 class="text-sm font-medium text-gray-700 mb-3">–}—á</h4>
                    <div class="flex flex-wrap gap-4 text-sm">
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-blue-500 rounded mr-2"></div>
                            <span>ƒqƒAƒŠƒ“ƒOEŒ»’n’²¸</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-green-500 rounded mr-2"></div>
                            <span>H–</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-yellow-500 rounded mr-2"></div>
                            <span>Œ©Ï‚à‚è’ño</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-purple-500 rounded mr-2"></div>
                            <span>ƒAƒtƒ^[ƒtƒHƒ[</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-red-500 rounded mr-2"></div>
                            <span>d—v</span>
                        </div>
                    </div>
                </div>
            </div><!-- calendarSection‚ÌI—¹ -->
            
            <!-- ©“®”zMİ’èƒZƒNƒVƒ‡ƒ“ -->
            <div id="autodeliverySection" class="section" style="display: none;">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">©“®”zMİ’è</h2>

                <div class="bg-white rounded-lg shadow p-6">
                    <!-- ˆê’â~İ’è -->
                    <div class="mb-8 p-6 bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">ˆê’â~İ’è</h3>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="autoPauseToggle" onchange="toggleAutoPause()" class="sr-only peer" checked="">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"></div>
                            </label>
                        </div>
                        <div id="pauseSettings" class="space-y-3">
                            <!-- ˆê’â~ŠJn“ú -->
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">ˆê’â~ŠJn“ú</label>
                                <input type="date" id="pauseStartDate" class="w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500">
                            </div>

                            <!-- ˆê’â~ÄŠJ“ú -->
                            <div>
                                <div class="flex items-center justify-between mb-1.5">
                                    <label class="block text-sm font-medium text-gray-700">ˆê’â~ÄŠJ“ú</label>
                                    <label class="flex items-center gap-1.5 cursor-pointer">
                                        <input type="checkbox" id="indefinitePause" onchange="toggleIndefinitePause()" class="rounded text-orange-600 focus:ring-orange-500" checked="">
                                        <span class="text-xs text-gray-600 whitespace-nowrap">–¢’è</span>
                                    </label>
                                </div>
                                <input type="text" id="pauseEndDateDisplay" class="w-full px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed text-gray-500 hidden" value="–¢’è" readonly="">
                                <input type="date" id="pauseEndDate" class="w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500">
                            </div>
                        </div>
                    </div>

                    <!-- ‘Î‰‰Â”\•¨Œí•Ê -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">‘Î‰‰Â”\•¨Œí•Ê</h3>
                        <div class="space-y-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-3">
                                ‘Î‰‰Â”\•¨Œ<span class="text-red-500">*</span>iÅ‘å‘Î‰ŠK”j
                            </label>
                            <div class="space-y-3">
                                <label class="flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                                    <input type="checkbox" class="mr-3" value="house" name="propertyType">
                                    <div class="flex-1 flex items-center">
                                        <span class="font-medium">?? ŒËŒš‚ÄZ‘î</span>
                                        <select class="ml-auto text-sm border rounded px-2 py-1">
                                            <option value="1">1ŠK</option>
                                            <option value="2">2ŠK</option>
                                            <option value="3" selected="">3ŠK</option>
                                            <option value="4">4ŠKˆÈã</option>
                                        </select>
                                        <span class="ml-1 text-sm text-gray-600">‚Ü‚Å</span>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                                    <input type="checkbox" class="mr-3" value="apartment" name="propertyType" onchange="checkLargeProperty(this)">
                                    <div class="flex-1 flex items-center">
                                        <span class="font-medium">?? ƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“</span>
                                        <select class="ml-auto text-sm border rounded px-2 py-1" onchange="checkFloorSelection(this)">
                                            <option value="1">1ŠK</option>
                                            <option value="2">2ŠK</option>
                                            <option value="3" selected="">3ŠK</option>
                                            <option value="4">4ŠK</option>
                                            <option value="5">5ŠK</option>
                                            <option value="6">6ŠK</option>
                                            <option value="7">7ŠK</option>
                                            <option value="8">8ŠK</option>
                                            <option value="9">9ŠK</option>
                                            <option value="unlimited">10ŠKˆÈã</option>
                                        </select>
                                        <span class="ml-1 text-sm text-gray-600">‚Ü‚Å</span>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                                    <input type="checkbox" class="mr-3" value="commercial" name="propertyType" onchange="checkLargeProperty(this)">
                                    <div class="flex-1 flex items-center">
                                        <span class="font-medium">?? “X•ÜE––±Š</span>
                                        <select class="ml-auto text-sm border rounded px-2 py-1" onchange="checkFloorSelection(this)">
                                            <option value="1">1ŠK</option>
                                            <option value="2">2ŠK</option>
                                            <option value="3" selected="">3ŠK</option>
                                            <option value="4">4ŠKˆÈã</option>
                                        </select>
                                        <span class="ml-1 text-sm text-gray-600">‚Ü‚Å</span>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                                    <input type="checkbox" class="mr-3" value="factory" name="propertyType" onchange="checkLargeProperty(this)">
                                    <div class="flex-1 flex items-center">
                                        <span class="font-medium">?? HêE‘qŒÉ</span>
                                        <select class="ml-auto text-sm border rounded px-2 py-1" onchange="checkFloorSelection(this)">
                                            <option value="1">1ŠK</option>
                                            <option value="2">2ŠK</option>
                                            <option value="3" selected="">3ŠK</option>
                                            <option value="4">4ŠKˆÈã</option>
                                        </select>
                                        <span class="ml-1 text-sm text-gray-600">‚Ü‚Å</span>
                                    </div>
                                </label>
                            </div>

                            <!-- ’z”N”‘Î‰”ÍˆÍ -->
                            <div class="mt-6">
                                <label class="block mb-2 text-sm font-semibold text-gray-700">’z”N”‘Î‰”ÍˆÍ <span class="text-red-500">*</span></label>
                                <div class="bg-white border rounded-lg p-4">
                                    <div class="mb-2">
                                        <p class="text-center text-lg font-medium text-gray-800">
                                            ’z<span id="ageRangeMinAuto">19</span>”N`<span id="ageRangeMaxAuto">53</span>”N‚Ü‚Å‘Î‰
                                        </p>
                                    </div>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="text-sm text-gray-600">’z”N”‰ºŒÀ</label>
                                            <input type="range" min="0" max="50" value="0" class="w-full" oninput="updateAgeRangeAuto()">
                                            <div class="flex justify-between text-xs text-gray-400 mt-1">
                                                <span>0”N</span>
                                                <span>10”N</span>
                                                <span>20”N</span>
                                                <span>30”N</span>
                                                <span>40”N</span>
                                                <span>50”N</span>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">’z”N”ãŒÀ</label>
                                            <input type="range" min="0" max="100" value="50" class="w-full" oninput="updateAgeRangeAuto()">
                                            <div class="flex justify-between text-xs text-gray-400 mt-1">
                                                <span>0”N</span>
                                                <span>20”N</span>
                                                <span>40”N</span>
                                                <span>60”N</span>
                                                <span>80”N</span>
                                                <span>100”N</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ‘Î‰H–í•Ê -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-2">{H‰ÓŠ <span class="text-red-500">*</span></h3>
                        <p class="text-sm text-gray-600 mb-2">‘Î‰‰Â”\‚ÈH–“à—e‘S‚Ä‚Éƒ`ƒFƒbƒN‚ğ“ü‚ê‚Ä‚­‚¾‚³‚¢</p>
                        <p class="text-sm text-gray-600 mb-4">‘I‘ğ‚µ‚½€–Ú‚ª©“®”zM‚ÌğŒ‚É“–‚Ä‚Í‚Ü‚Á‚½ê‡A‹LÚ‚Ì—¿‹ài¦Å”²j‚ª“K—p‚³‚ê‚Ü‚·B</p>

                        <!-- \20,000€–Ú -->
                        <div class="mb-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ŠO•Ç“h‘•" class="mr-3">
                                    <span class="flex-1">ŠO•Ç“h‘•</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ŠO•ÇƒJƒo[H–@" class="mr-3">
                                    <span class="flex-1">ŠO•ÇƒJƒo[H–@</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ŠO•Ç’£‘Ö‚¦" class="mr-3">
                                    <span class="flex-1">ŠO•Ç’£‘Ö‚¦</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ª“h‘•iŠO•ÇH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1">‰®ª“h‘•iŠO•ÇH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ã–h…iŠO•ÇH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1">‰®ã–h…iŠO•ÇH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™" class="mr-3">
                                    <span class="flex-1 text-sm">‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢" class="mr-3">
                                    <span class="flex-1">‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ªƒJƒo[H–@" class="mr-3">
                                    <span class="flex-1">‰®ªƒJƒo[H–@</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ŠO•Ç•âCiŠO•ÇH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1">ŠO•Ç•âCiŠO•ÇH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ª•âCiŠO•ÇH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1">‰®ª•âCiŠO•ÇH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ƒxƒ‰ƒ“ƒ_–h…iŠO•ÇH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1">ƒxƒ‰ƒ“ƒ_–h…iŠO•ÇH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ŠO•Ç‰J˜R‚èC‘UiŠO•ÇH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1">ŠO•Ç‰J˜R‚èC‘UiŠO•ÇH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒjiŠO•ÇH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1 text-sm">“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒjiŠO•ÇH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™jiŠO•ÇH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1 text-sm">“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™jiŠO•ÇH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ª‰J˜R‚èC‘Ui‰®ªH–ŠÜ‚Şj" class="mr-3">
                                    <span class="flex-1">‰®ª‰J˜R‚èC‘Ui‰®ªH–ŠÜ‚Şj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                            </div>
                        </div>

                        <!-- \10,000€–Ú -->
                        <div class="mb-6">
                            <p class="text-sm text-gray-600 mb-2">ˆÈ‰º‚Ì’P•iˆË—Š‚Í‘ŠŒ©Ï‚à‚è‚Ì—¿‹à‚ğÅ”²‚«•\¦‚µ‚Ä‚¨‚è‚Ü‚·B</p>
                            <p class="text-sm text-gray-600 mb-3">¦1ĞĞ‰î‚Í‚·‚×‚Ä\20,000‚Æ‚È‚è‚Ü‚·</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ª“h‘•’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">‰®ª“h‘•’P•i</span>
                                    <span class="text-sm font-semibold text-green-600">\10,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ã–h…’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">‰®ã–h…’P•i</span>
                                    <span class="text-sm font-semibold text-green-600">\10,000</span>
                                </label>
                            </div>
                        </div>

                        <!-- \5,000€–Ú -->
                        <div class="mb-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ŠO•Ç•âC’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">ŠO•Ç•âC’P•i</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ª•âC’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">‰®ª•âC’P•i</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ƒxƒ‰ƒ“ƒ_–h…’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">ƒxƒ‰ƒ“ƒ_–h…’P•i</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ŠO•Ç‰J˜R‚èC‘U’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">ŠO•Ç‰J˜R‚èC‘U’P•i</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="‰®ª‰J˜R‚èC‘U’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">‰®ª‰J˜R‚èC‘U’P•i</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- “Áê‘Î‰€–Úi”CˆÓj -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">“Áê‘Î‰€–Úi”CˆÓj</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? Õ”ME’f”M“h—¿’ñˆÄ‰Â”\">
                                <span class="text-sm">?? Õ”ME’f”M“h—¿’ñˆÄ‰Â”\</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? —§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]">
                                <span class="text-sm">?? —§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â">
                                <span class="text-sm">?? ‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ƒGƒNƒXƒeƒŠƒAi’ëE’“ÔêEŠO\j">
                                <span class="text-sm">?? ƒGƒNƒXƒeƒŠƒAi’ëE’“ÔêEŠO\j</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ‘¾—zŒõƒpƒlƒ‹’E’…i“P‹ŠÜ‚Şj">
                                <span class="text-sm">?? ‘¾—zŒõƒpƒlƒ‹’E’…i“P‹ŠÜ‚Şj</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ’ñŒgæƒ[ƒ“—L‚è">
                                <span class="text-sm">?? ’ñŒgæƒ[ƒ“—L‚è</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ƒNƒŒƒWƒbƒgƒJ[ƒh•¥‚¢‰Â">
                                <span class="text-sm">?? ƒNƒŒƒWƒbƒgƒJ[ƒh•¥‚¢‰Â</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg">
                                <span class="text-sm">?? ‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? •¬‹à\¿ƒTƒ|[ƒg">
                                <span class="text-sm">?? •¬‹à\¿ƒTƒ|[ƒg</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? Œš’z‹–‰ÂØ">
                                <span class="text-sm">?? Œš’z‹–‰ÂØ</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="? ŒõG”}“h—¿’ñˆÄ‰Â">
                                <span class="text-sm">? ŒõG”}“h—¿’ñˆÄ‰Â</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? •ªŠ„•¥‚¢ƒvƒ‰ƒ“—L">
                                <span class="text-sm">?? •ªŠ„•¥‚¢ƒvƒ‰ƒ“—L</span>
                            </label>
                        </div>
                    </div>

                    <!-- ‘Î‰ƒGƒŠƒA‘I‘ğ -->
                    <div class="mb-8">
                        <div class="bg-blue-600 text-white px-4 py-2 rounded-t-lg">
                            <h3 class="text-lg font-semibold">‘Î‰ƒGƒŠƒA‘I‘ğ</h3>
                        </div>
                        <div class="border border-t-0 rounded-b-lg p-4">
                            <p class="text-sm text-gray-600 mb-4">ƒT[ƒrƒX’ñ‹Ÿ‰Â”\‚ÈƒGƒŠƒA‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢iÅ‘å5‚Â‚Ü‚Åj</p>

                            <!-- ‘I‘ğó‹µƒTƒ}ƒŠ[ -->
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <span class="text-sm text-gray-600">‘I‘ğÏ‚İ“s“¹•{Œ§F</span>
                                        <span id="selectedPrefCount" class="font-bold text-lg ml-2">5</span>
                                        <span class="text-sm text-gray-600">/ 5</span>
                                    </div>
                                    <div>
                                        <span class="text-sm text-gray-600">‘I‘ğÏ‚İs‹æ’¬‘ºF</span>
                                        <span id="selectedCityCount" class="font-bold text-lg ml-2">0</span>
                                    </div>
                                </div>
                            </div>

                            <!-- “s“¹•{Œ§‘I‘ğ -->
                            <div class="mb-6">
                                <h4 class="text-md font-medium mb-3">“s“¹•{Œ§‘I‘ğiÅ‘å5‚Â‚Ü‚Åj</h4>
                                <div id="prefectureGrid" class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                    <!-- JavaScript Vide“®“I¶¬‚³‚ê‚é -->
                                </div>
                            </div>

                            <!-- STEP 1: “s“¹•{Œ§‚ğ‘I‘ğ -->
                            <div id="step1Area" class="mb-6">
                                <h4 class="text-md font-medium mb-3">STEP 1: “s“¹•{Œ§‚ğ‘I‘ğiÅ‘å5“s“¹•{Œ§j</h4>
                                <div id="allPrefecturesGrid" class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2">
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="–kŠC“¹" onclick="togglePrefecture('–kŠC“¹')">
                    –kŠC“¹
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ÂXŒ§" onclick="togglePrefecture('ÂXŒ§')">
                    ÂXŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ŠâèŒ§" onclick="togglePrefecture('ŠâèŒ§')">
                    ŠâèŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="‹{éŒ§" onclick="togglePrefecture('‹{éŒ§')">
                    ‹{éŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="H“cŒ§" onclick="togglePrefecture('H“cŒ§')">
                    H“cŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="RŒ`Œ§" onclick="togglePrefecture('RŒ`Œ§')">
                    RŒ`Œ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="•Ÿ“‡Œ§" onclick="togglePrefecture('•Ÿ“‡Œ§')">
                    •Ÿ“‡Œ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ˆïéŒ§" onclick="togglePrefecture('ˆïéŒ§')">
                    ˆïéŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="“È–ØŒ§" onclick="togglePrefecture('“È–ØŒ§')">
                    “È–ØŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ŒQ”nŒ§" onclick="togglePrefecture('ŒQ”nŒ§')">
                    ŒQ”nŒ§
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="é‹ÊŒ§" onclick="togglePrefecture('é‹ÊŒ§')">
                    é‹ÊŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ç—tŒ§" onclick="togglePrefecture('ç—tŒ§')">
                    ç—tŒ§
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="“Œ‹“s" onclick="togglePrefecture('“Œ‹“s')">
                    “Œ‹“s
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="_“ŞìŒ§" onclick="togglePrefecture('_“ŞìŒ§')">
                    _“ŞìŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="VŠƒŒ§" onclick="togglePrefecture('VŠƒŒ§')">
                    VŠƒŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="•xRŒ§" onclick="togglePrefecture('•xRŒ§')">
                    •xRŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ÎìŒ§" onclick="togglePrefecture('ÎìŒ§')">
                    ÎìŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="•ŸˆäŒ§" onclick="togglePrefecture('•ŸˆäŒ§')">
                    •ŸˆäŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="R—œŒ§" onclick="togglePrefecture('R—œŒ§')">
                    R—œŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="’·–ìŒ§" onclick="togglePrefecture('’·–ìŒ§')">
                    ’·–ìŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="Šò•ŒŒ§" onclick="togglePrefecture('Šò•ŒŒ§')">
                    Šò•ŒŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="Ã‰ªŒ§" onclick="togglePrefecture('Ã‰ªŒ§')">
                    Ã‰ªŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ˆ¤’mŒ§" onclick="togglePrefecture('ˆ¤’mŒ§')">
                    ˆ¤’mŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="OdŒ§" onclick="togglePrefecture('OdŒ§')">
                    OdŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture=" ‰êŒ§" onclick="togglePrefecture(' ‰êŒ§')">
                     ‰êŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="‹“s•{" onclick="togglePrefecture('‹“s•{')">
                    ‹“s•{
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="‘åã•{" onclick="togglePrefecture('‘åã•{')">
                    ‘åã•{
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="•ºŒÉŒ§" onclick="togglePrefecture('•ºŒÉŒ§')">
                    •ºŒÉŒ§
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="“Ş—ÇŒ§" onclick="togglePrefecture('“Ş—ÇŒ§')">
                    “Ş—ÇŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="˜a‰ÌRŒ§" onclick="togglePrefecture('˜a‰ÌRŒ§')">
                    ˜a‰ÌRŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="’¹æŒ§" onclick="togglePrefecture('’¹æŒ§')">
                    ’¹æŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="“‡ªŒ§" onclick="togglePrefecture('“‡ªŒ§')">
                    “‡ªŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="‰ªRŒ§" onclick="togglePrefecture('‰ªRŒ§')">
                    ‰ªRŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="L“‡Œ§" onclick="togglePrefecture('L“‡Œ§')">
                    L“‡Œ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="RŒûŒ§" onclick="togglePrefecture('RŒûŒ§')">
                    RŒûŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="“¿“‡Œ§" onclick="togglePrefecture('“¿“‡Œ§')">
                    “¿“‡Œ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ìŒ§" onclick="togglePrefecture('ìŒ§')">
                    ìŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ˆ¤•QŒ§" onclick="togglePrefecture('ˆ¤•QŒ§')">
                    ˆ¤•QŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="‚’mŒ§" onclick="togglePrefecture('‚’mŒ§')">
                    ‚’mŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="•Ÿ‰ªŒ§" onclick="togglePrefecture('•Ÿ‰ªŒ§')">
                    •Ÿ‰ªŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="²‰êŒ§" onclick="togglePrefecture('²‰êŒ§')">
                    ²‰êŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="’·èŒ§" onclick="togglePrefecture('’·èŒ§')">
                    ’·èŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ŒF–{Œ§" onclick="togglePrefecture('ŒF–{Œ§')">
                    ŒF–{Œ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="‘å•ªŒ§" onclick="togglePrefecture('‘å•ªŒ§')">
                    ‘å•ªŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="‹{èŒ§" onclick="togglePrefecture('‹{èŒ§')">
                    ‹{èŒ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="­™“‡Œ§" onclick="togglePrefecture('­™“‡Œ§')">
                    ­™“‡Œ§
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="‰«“êŒ§" onclick="togglePrefecture('‰«“êŒ§')">
                    ‰«“êŒ§
                </button>
            </div>
                            </div>

                            <!-- STEP 2: s‹æ’¬‘º‚ğ‘I‘ğ -->
                            <div id="citySelectionArea" class="mb-6">
                                <h4 class="text-md font-medium mb-3">STEP 2: s‹æ’¬‘º‚ğ‘I‘ğ</h4>
                                <div id="cityListContainer" class="space-y-4">
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">“Œ‹“s</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 53 ‘I‘ğ’†
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('“Œ‹“s', this.checked)">
                                <span class="ml-2 text-sm font-medium">‚·‚×‚Ä‘I‘ğ</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ç‘ã“c‹æ" onchange="toggleCity('“Œ‹“s', 'ç‘ã“c‹æ', this.checked)">
                                    <span class="ml-2 text-sm">ç‘ã“c‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’†‰›‹æ" onchange="toggleCity('“Œ‹“s', '’†‰›‹æ', this.checked)">
                                    <span class="ml-2 text-sm">’†‰›‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="`‹æ" onchange="toggleCity('“Œ‹“s', '`‹æ', this.checked)">
                                    <span class="ml-2 text-sm">`‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Vh‹æ" onchange="toggleCity('“Œ‹“s', 'Vh‹æ', this.checked)">
                                    <span class="ml-2 text-sm">Vh‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•¶‹‹æ" onchange="toggleCity('“Œ‹“s', '•¶‹‹æ', this.checked)">
                                    <span class="ml-2 text-sm">•¶‹‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘ä“Œ‹æ" onchange="toggleCity('“Œ‹“s', '‘ä“Œ‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‘ä“Œ‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="–n“c‹æ" onchange="toggleCity('“Œ‹“s', '–n“c‹æ', this.checked)">
                                    <span class="ml-2 text-sm">–n“c‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="]“Œ‹æ" onchange="toggleCity('“Œ‹“s', ']“Œ‹æ', this.checked)">
                                    <span class="ml-2 text-sm">]“Œ‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•iì‹æ" onchange="toggleCity('“Œ‹“s', '•iì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">•iì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="–Ú•‹æ" onchange="toggleCity('“Œ‹“s', '–Ú•‹æ', this.checked)">
                                    <span class="ml-2 text-sm">–Ú•‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘å“c‹æ" onchange="toggleCity('“Œ‹“s', '‘å“c‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‘å“c‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¢“c’J‹æ" onchange="toggleCity('“Œ‹“s', '¢“c’J‹æ', this.checked)">
                                    <span class="ml-2 text-sm">¢“c’J‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="a’J‹æ" onchange="toggleCity('“Œ‹“s', 'a’J‹æ', this.checked)">
                                    <span class="ml-2 text-sm">a’J‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’†–ì‹æ" onchange="toggleCity('“Œ‹“s', '’†–ì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">’†–ì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="™•À‹æ" onchange="toggleCity('“Œ‹“s', '™•À‹æ', this.checked)">
                                    <span class="ml-2 text-sm">™•À‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="–L“‡‹æ" onchange="toggleCity('“Œ‹“s', '–L“‡‹æ', this.checked)">
                                    <span class="ml-2 text-sm">–L“‡‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="–k‹æ" onchange="toggleCity('“Œ‹“s', '–k‹æ', this.checked)">
                                    <span class="ml-2 text-sm">–k‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="rì‹æ" onchange="toggleCity('“Œ‹“s', 'rì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">rì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="”Â‹´‹æ" onchange="toggleCity('“Œ‹“s', '”Â‹´‹æ', this.checked)">
                                    <span class="ml-2 text-sm">”Â‹´‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="—û”n‹æ" onchange="toggleCity('“Œ‹“s', '—û”n‹æ', this.checked)">
                                    <span class="ml-2 text-sm">—û”n‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘«—§‹æ" onchange="toggleCity('“Œ‹“s', '‘«—§‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‘«—§‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Š‹ü‹æ" onchange="toggleCity('“Œ‹“s', 'Š‹ü‹æ', this.checked)">
                                    <span class="ml-2 text-sm">Š‹ü‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="]ŒËì‹æ" onchange="toggleCity('“Œ‹“s', ']ŒËì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">]ŒËì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="”ª‰¤qs" onchange="toggleCity('“Œ‹“s', '”ª‰¤qs', this.checked)">
                                    <span class="ml-2 text-sm">”ª‰¤qs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="—§ìs" onchange="toggleCity('“Œ‹“s', '—§ìs', this.checked)">
                                    <span class="ml-2 text-sm">—§ìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•‘ –ìs" onchange="toggleCity('“Œ‹“s', '•‘ –ìs', this.checked)">
                                    <span class="ml-2 text-sm">•‘ –ìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="O‘és" onchange="toggleCity('“Œ‹“s', 'O‘és', this.checked)">
                                    <span class="ml-2 text-sm">O‘és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Â”~s" onchange="toggleCity('“Œ‹“s', 'Â”~s', this.checked)">
                                    <span class="ml-2 text-sm">Â”~s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•{’†s" onchange="toggleCity('“Œ‹“s', '•{’†s', this.checked)">
                                    <span class="ml-2 text-sm">•{’†s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="º“‡s" onchange="toggleCity('“Œ‹“s', 'º“‡s', this.checked)">
                                    <span class="ml-2 text-sm">º“‡s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’²•zs" onchange="toggleCity('“Œ‹“s', '’²•zs', this.checked)">
                                    <span class="ml-2 text-sm">’²•zs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’¬“cs" onchange="toggleCity('“Œ‹“s', '’¬“cs', this.checked)">
                                    <span class="ml-2 text-sm">’¬“cs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¬‹àˆäs" onchange="toggleCity('“Œ‹“s', '¬‹àˆäs', this.checked)">
                                    <span class="ml-2 text-sm">¬‹àˆäs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¬•½s" onchange="toggleCity('“Œ‹“s', '¬•½s', this.checked)">
                                    <span class="ml-2 text-sm">¬•½s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“ú–ìs" onchange="toggleCity('“Œ‹“s', '“ú–ìs', this.checked)">
                                    <span class="ml-2 text-sm">“ú–ìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“Œ‘ºRs" onchange="toggleCity('“Œ‹“s', '“Œ‘ºRs', this.checked)">
                                    <span class="ml-2 text-sm">“Œ‘ºRs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘•ª›s" onchange="toggleCity('“Œ‹“s', '‘•ª›s', this.checked)">
                                    <span class="ml-2 text-sm">‘•ª›s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘—§s" onchange="toggleCity('“Œ‹“s', '‘—§s', this.checked)">
                                    <span class="ml-2 text-sm">‘—§s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•Ÿ¶s" onchange="toggleCity('“Œ‹“s', '•Ÿ¶s', this.checked)">
                                    <span class="ml-2 text-sm">•Ÿ¶s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="]s" onchange="toggleCity('“Œ‹“s', ']s', this.checked)">
                                    <span class="ml-2 text-sm">]s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“Œ‘å˜as" onchange="toggleCity('“Œ‹“s', '“Œ‘å˜as', this.checked)">
                                    <span class="ml-2 text-sm">“Œ‘å˜as</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="´£s" onchange="toggleCity('“Œ‹“s', '´£s', this.checked)">
                                    <span class="ml-2 text-sm">´£s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“Œ‹v—¯•Äs" onchange="toggleCity('“Œ‹“s', '“Œ‹v—¯•Äs', this.checked)">
                                    <span class="ml-2 text-sm">“Œ‹v—¯•Äs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•‘ ‘ºRs" onchange="toggleCity('“Œ‹“s', '•‘ ‘ºRs', this.checked)">
                                    <span class="ml-2 text-sm">•‘ ‘ºRs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘½–€s" onchange="toggleCity('“Œ‹“s', '‘½–€s', this.checked)">
                                    <span class="ml-2 text-sm">‘½–€s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ˆîés" onchange="toggleCity('“Œ‹“s', 'ˆîés', this.checked)">
                                    <span class="ml-2 text-sm">ˆîés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰H‘ºs" onchange="toggleCity('“Œ‹“s', '‰H‘ºs', this.checked)">
                                    <span class="ml-2 text-sm">‰H‘ºs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚ ‚«‚é–ìs" onchange="toggleCity('“Œ‹“s', '‚ ‚«‚é–ìs', this.checked)">
                                    <span class="ml-2 text-sm">‚ ‚«‚é–ìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¼“Œ‹s" onchange="toggleCity('“Œ‹“s', '¼“Œ‹s', this.checked)">
                                    <span class="ml-2 text-sm">¼“Œ‹s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•ä’¬" onchange="toggleCity('“Œ‹“s', '•ä’¬', this.checked)">
                                    <span class="ml-2 text-sm">•ä’¬</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“ú‚Ìo’¬" onchange="toggleCity('“Œ‹“s', '“ú‚Ìo’¬', this.checked)">
                                    <span class="ml-2 text-sm">“ú‚Ìo’¬</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="wŒ´‘º" onchange="toggleCity('“Œ‹“s', 'wŒ´‘º', this.checked)">
                                    <span class="ml-2 text-sm">wŒ´‘º</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰œ‘½–€’¬" onchange="toggleCity('“Œ‹“s', '‰œ‘½–€’¬', this.checked)">
                                    <span class="ml-2 text-sm">‰œ‘½–€’¬</span>
                                </label>
                            
                        </div>
                    </div>
                
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">é‹ÊŒ§</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 49 ‘I‘ğ’†
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('é‹ÊŒ§', this.checked)">
                                <span class="ml-2 text-sm font-medium">‚·‚×‚Ä‘I‘ğ</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚Üs¼‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚Üs¼‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚Üs¼‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚Üs–k‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚Üs–k‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚Üs–k‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚Üs‘å‹{‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚Üs‘å‹{‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚Üs‘å‹{‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚ÜsŒ©À‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚ÜsŒ©À‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚ÜsŒ©À‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚Üs’†‰›‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚Üs’†‰›‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚Üs’†‰›‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚Üs÷‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚Üs÷‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚Üs÷‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚Üs‰Y˜a‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚Üs‰Y˜a‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚Üs‰Y˜a‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚Üs“ì‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚Üs“ì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚Üs“ì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚Üs—Î‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚Üs—Î‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚Üs—Î‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚³‚¢‚½‚ÜsŠâ’Î‹æ" onchange="toggleCity('é‹ÊŒ§', '‚³‚¢‚½‚ÜsŠâ’Î‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‚³‚¢‚½‚ÜsŠâ’Î‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ì‰zs" onchange="toggleCity('é‹ÊŒ§', 'ì‰zs', this.checked)">
                                    <span class="ml-2 text-sm">ì‰zs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ŒF’Js" onchange="toggleCity('é‹ÊŒ§', 'ŒF’Js', this.checked)">
                                    <span class="ml-2 text-sm">ŒF’Js</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìŒûs" onchange="toggleCity('é‹ÊŒ§', 'ìŒûs', this.checked)">
                                    <span class="ml-2 text-sm">ìŒûs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="s“cs" onchange="toggleCity('é‹ÊŒ§', 's“cs', this.checked)">
                                    <span class="ml-2 text-sm">s“cs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’•ƒs" onchange="toggleCity('é‹ÊŒ§', '’•ƒs', this.checked)">
                                    <span class="ml-2 text-sm">’•ƒs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Š‘òs" onchange="toggleCity('é‹ÊŒ§', 'Š‘òs', this.checked)">
                                    <span class="ml-2 text-sm">Š‘òs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="”Ñ”\s" onchange="toggleCity('é‹ÊŒ§', '”Ñ”\s', this.checked)">
                                    <span class="ml-2 text-sm">”Ñ”\s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰Á{s" onchange="toggleCity('é‹ÊŒ§', '‰Á{s', this.checked)">
                                    <span class="ml-2 text-sm">‰Á{s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="–{¯s" onchange="toggleCity('é‹ÊŒ§', '–{¯s', this.checked)">
                                    <span class="ml-2 text-sm">–{¯s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“Œ¼Rs" onchange="toggleCity('é‹ÊŒ§', '“Œ¼Rs', this.checked)">
                                    <span class="ml-2 text-sm">“Œ¼Rs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="t“ú•”s" onchange="toggleCity('é‹ÊŒ§', 't“ú•”s', this.checked)">
                                    <span class="ml-2 text-sm">t“ú•”s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‹·Rs" onchange="toggleCity('é‹ÊŒ§', '‹·Rs', this.checked)">
                                    <span class="ml-2 text-sm">‹·Rs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰H¶s" onchange="toggleCity('é‹ÊŒ§', '‰H¶s', this.checked)">
                                    <span class="ml-2 text-sm">‰H¶s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ƒ‘ƒs" onchange="toggleCity('é‹ÊŒ§', 'ƒ‘ƒs', this.checked)">
                                    <span class="ml-2 text-sm">ƒ‘ƒs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="[’Js" onchange="toggleCity('é‹ÊŒ§', '[’Js', this.checked)">
                                    <span class="ml-2 text-sm">[’Js</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ã”ös" onchange="toggleCity('é‹ÊŒ§', 'ã”ös', this.checked)">
                                    <span class="ml-2 text-sm">ã”ös</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘‰Ás" onchange="toggleCity('é‹ÊŒ§', '‘‰Ás', this.checked)">
                                    <span class="ml-2 text-sm">‘‰Ás</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰z’Js" onchange="toggleCity('é‹ÊŒ§', '‰z’Js', this.checked)">
                                    <span class="ml-2 text-sm">‰z’Js</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="˜ns" onchange="toggleCity('é‹ÊŒ§', '˜ns', this.checked)">
                                    <span class="ml-2 text-sm">˜ns</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ŒË“cs" onchange="toggleCity('é‹ÊŒ§', 'ŒË“cs', this.checked)">
                                    <span class="ml-2 text-sm">ŒË“cs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“üŠÔs" onchange="toggleCity('é‹ÊŒ§', '“üŠÔs', this.checked)">
                                    <span class="ml-2 text-sm">“üŠÔs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’©‰às" onchange="toggleCity('é‹ÊŒ§', '’©‰às', this.checked)">
                                    <span class="ml-2 text-sm">’©‰às</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="u–Øs" onchange="toggleCity('é‹ÊŒ§', 'u–Øs', this.checked)">
                                    <span class="ml-2 text-sm">u–Øs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="˜aŒõs" onchange="toggleCity('é‹ÊŒ§', '˜aŒõs', this.checked)">
                                    <span class="ml-2 text-sm">˜aŒõs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="VÀs" onchange="toggleCity('é‹ÊŒ§', 'VÀs', this.checked)">
                                    <span class="ml-2 text-sm">VÀs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰±ìs" onchange="toggleCity('é‹ÊŒ§', '‰±ìs', this.checked)">
                                    <span class="ml-2 text-sm">‰±ìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‹vŠìs" onchange="toggleCity('é‹ÊŒ§', '‹vŠìs', this.checked)">
                                    <span class="ml-2 text-sm">‹vŠìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="–k–{s" onchange="toggleCity('é‹ÊŒ§', '–k–{s', this.checked)">
                                    <span class="ml-2 text-sm">–k–{s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="”ª’ªs" onchange="toggleCity('é‹ÊŒ§', '”ª’ªs', this.checked)">
                                    <span class="ml-2 text-sm">”ª’ªs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•xmŒ©s" onchange="toggleCity('é‹ÊŒ§', '•xmŒ©s', this.checked)">
                                    <span class="ml-2 text-sm">•xmŒ©s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="O‹½s" onchange="toggleCity('é‹ÊŒ§', 'O‹½s', this.checked)">
                                    <span class="ml-2 text-sm">O‹½s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="˜@“cs" onchange="toggleCity('é‹ÊŒ§', '˜@“cs', this.checked)">
                                    <span class="ml-2 text-sm">˜@“cs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="âŒËs" onchange="toggleCity('é‹ÊŒ§', 'âŒËs', this.checked)">
                                    <span class="ml-2 text-sm">âŒËs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Kès" onchange="toggleCity('é‹ÊŒ§', 'Kès', this.checked)">
                                    <span class="ml-2 text-sm">Kès</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’ßƒ–“‡s" onchange="toggleCity('é‹ÊŒ§', '’ßƒ–“‡s', this.checked)">
                                    <span class="ml-2 text-sm">’ßƒ–“‡s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“ú‚s" onchange="toggleCity('é‹ÊŒ§', '“ú‚s', this.checked)">
                                    <span class="ml-2 text-sm">“ú‚s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‹gìs" onchange="toggleCity('é‹ÊŒ§', '‹gìs', this.checked)">
                                    <span class="ml-2 text-sm">‹gìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚Ó‚¶‚İ–ìs" onchange="toggleCity('é‹ÊŒ§', '‚Ó‚¶‚İ–ìs', this.checked)">
                                    <span class="ml-2 text-sm">‚Ó‚¶‚İ–ìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="”’‰ªs" onchange="toggleCity('é‹ÊŒ§', '”’‰ªs', this.checked)">
                                    <span class="ml-2 text-sm">”’‰ªs</span>
                                </label>
                            
                        </div>
                    </div>
                
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">_“ŞìŒ§</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 44 ‘I‘ğ’†
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('_“ŞìŒ§', this.checked)">
                                <span class="ml-2 text-sm font-medium">‚·‚×‚Ä‘I‘ğ</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls’ßŒ©‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls’ßŒ©‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls’ßŒ©‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls_“Şì‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls_“Şì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls_“Şì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls¼‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls¼‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls¼‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls’†‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls’†‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls’†‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls“ì‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls“ì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls“ì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls•Û“yƒP’J‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls•Û“yƒP’J‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls•Û“yƒP’J‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•lsˆéq‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•lsˆéq‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•lsˆéq‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls‹à‘ò‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls‹à‘ò‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls‹à‘ò‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls`–k‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls`–k‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls`–k‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•lsŒË’Ë‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•lsŒË’Ë‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•lsŒË’Ë‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls`“ì‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls`“ì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls`“ì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•lsˆ®‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•lsˆ®‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•lsˆ®‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls—Î‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls—Î‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls—Î‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls£’J‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls£’J‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls£’J‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls‰h‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls‰h‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls‰h‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•lsò‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•lsò‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•lsò‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•lsÂ—t‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•lsÂ—t‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•lsÂ—t‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡•ls“s’}‹æ" onchange="toggleCity('_“ŞìŒ§', '‰¡•ls“s’}‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‰¡•ls“s’}‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìèsìè‹æ" onchange="toggleCity('_“ŞìŒ§', 'ìèsìè‹æ', this.checked)">
                                    <span class="ml-2 text-sm">ìèsìè‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìèsK‹æ" onchange="toggleCity('_“ŞìŒ§', 'ìèsK‹æ', this.checked)">
                                    <span class="ml-2 text-sm">ìèsK‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìès’†Œ´‹æ" onchange="toggleCity('_“ŞìŒ§', 'ìès’†Œ´‹æ', this.checked)">
                                    <span class="ml-2 text-sm">ìès’†Œ´‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìès‚’Ã‹æ" onchange="toggleCity('_“ŞìŒ§', 'ìès‚’Ã‹æ', this.checked)">
                                    <span class="ml-2 text-sm">ìès‚’Ã‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìès‘½–€‹æ" onchange="toggleCity('_“ŞìŒ§', 'ìès‘½–€‹æ', this.checked)">
                                    <span class="ml-2 text-sm">ìès‘½–€‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìès‹{‘O‹æ" onchange="toggleCity('_“ŞìŒ§', 'ìès‹{‘O‹æ', this.checked)">
                                    <span class="ml-2 text-sm">ìès‹{‘O‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìès–ƒ¶‹æ" onchange="toggleCity('_“ŞìŒ§', 'ìès–ƒ¶‹æ', this.checked)">
                                    <span class="ml-2 text-sm">ìès–ƒ¶‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘Š–ÍŒ´s—Î‹æ" onchange="toggleCity('_“ŞìŒ§', '‘Š–ÍŒ´s—Î‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‘Š–ÍŒ´s—Î‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘Š–ÍŒ´s’†‰›‹æ" onchange="toggleCity('_“ŞìŒ§', '‘Š–ÍŒ´s’†‰›‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‘Š–ÍŒ´s’†‰›‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘Š–ÍŒ´s“ì‹æ" onchange="toggleCity('_“ŞìŒ§', '‘Š–ÍŒ´s“ì‹æ', this.checked)">
                                    <span class="ml-2 text-sm">‘Š–ÍŒ´s“ì‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰¡{‰ês" onchange="toggleCity('_“ŞìŒ§', '‰¡{‰ês', this.checked)">
                                    <span class="ml-2 text-sm">‰¡{‰ês</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•½’Ës" onchange="toggleCity('_“ŞìŒ§', '•½’Ës', this.checked)">
                                    <span class="ml-2 text-sm">•½’Ës</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Š™‘qs" onchange="toggleCity('_“ŞìŒ§', 'Š™‘qs', this.checked)">
                                    <span class="ml-2 text-sm">Š™‘qs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“¡‘òs" onchange="toggleCity('_“ŞìŒ§', '“¡‘òs', this.checked)">
                                    <span class="ml-2 text-sm">“¡‘òs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¬“cŒ´s" onchange="toggleCity('_“ŞìŒ§', '¬“cŒ´s', this.checked)">
                                    <span class="ml-2 text-sm">¬“cŒ´s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Šƒ–ès" onchange="toggleCity('_“ŞìŒ§', 'Šƒ–ès', this.checked)">
                                    <span class="ml-2 text-sm">Šƒ–ès</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="€qs" onchange="toggleCity('_“ŞìŒ§', '€qs', this.checked)">
                                    <span class="ml-2 text-sm">€qs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="O‰Ys" onchange="toggleCity('_“ŞìŒ§', 'O‰Ys', this.checked)">
                                    <span class="ml-2 text-sm">O‰Ys</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="`–ìs" onchange="toggleCity('_“ŞìŒ§', '`–ìs', this.checked)">
                                    <span class="ml-2 text-sm">`–ìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Œú–Øs" onchange="toggleCity('_“ŞìŒ§', 'Œú–Øs', this.checked)">
                                    <span class="ml-2 text-sm">Œú–Øs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘å˜as" onchange="toggleCity('_“ŞìŒ§', '‘å˜as', this.checked)">
                                    <span class="ml-2 text-sm">‘å˜as</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ˆÉ¨Œ´s" onchange="toggleCity('_“ŞìŒ§', 'ˆÉ¨Œ´s', this.checked)">
                                    <span class="ml-2 text-sm">ˆÉ¨Œ´s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ŠC˜V–¼s" onchange="toggleCity('_“ŞìŒ§', 'ŠC˜V–¼s', this.checked)">
                                    <span class="ml-2 text-sm">ŠC˜V–¼s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ÀŠÔs" onchange="toggleCity('_“ŞìŒ§', 'ÀŠÔs', this.checked)">
                                    <span class="ml-2 text-sm">ÀŠÔs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“ì‘«•¿s" onchange="toggleCity('_“ŞìŒ§', '“ì‘«•¿s', this.checked)">
                                    <span class="ml-2 text-sm">“ì‘«•¿s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ˆ»£s" onchange="toggleCity('_“ŞìŒ§', 'ˆ»£s', this.checked)">
                                    <span class="ml-2 text-sm">ˆ»£s</span>
                                </label>
                            
                        </div>
                    </div>
                
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">“Ş—ÇŒ§</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 12 ‘I‘ğ’†
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('“Ş—ÇŒ§', this.checked)">
                                <span class="ml-2 text-sm font-medium">‚·‚×‚Ä‘I‘ğ</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“Ş—Çs" onchange="toggleCity('“Ş—ÇŒ§', '“Ş—Çs', this.checked)">
                                    <span class="ml-2 text-sm">“Ş—Çs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘å˜a‚“cs" onchange="toggleCity('“Ş—ÇŒ§', '‘å˜a‚“cs', this.checked)">
                                    <span class="ml-2 text-sm">‘å˜a‚“cs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘å˜aŒSRs" onchange="toggleCity('“Ş—ÇŒ§', '‘å˜aŒSRs', this.checked)">
                                    <span class="ml-2 text-sm">‘å˜aŒSRs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“V—s" onchange="toggleCity('“Ş—ÇŒ§', '“V—s', this.checked)">
                                    <span class="ml-2 text-sm">“V—s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Š€Œ´s" onchange="toggleCity('“Ş—ÇŒ§', 'Š€Œ´s', this.checked)">
                                    <span class="ml-2 text-sm">Š€Œ´s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="÷ˆäs" onchange="toggleCity('“Ş—ÇŒ§', '÷ˆäs', this.checked)">
                                    <span class="ml-2 text-sm">÷ˆäs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ŒÜŠs" onchange="toggleCity('“Ş—ÇŒ§', 'ŒÜŠs', this.checked)">
                                    <span class="ml-2 text-sm">ŒÜŠs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ŒäŠs" onchange="toggleCity('“Ş—ÇŒ§', 'ŒäŠs', this.checked)">
                                    <span class="ml-2 text-sm">ŒäŠs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¶‹îs" onchange="toggleCity('“Ş—ÇŒ§', '¶‹îs', this.checked)">
                                    <span class="ml-2 text-sm">¶‹îs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ås" onchange="toggleCity('“Ş—ÇŒ§', 'Ås', this.checked)">
                                    <span class="ml-2 text-sm">Ås</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Š‹és" onchange="toggleCity('“Ş—ÇŒ§', 'Š‹és', this.checked)">
                                    <span class="ml-2 text-sm">Š‹és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰F‘És" onchange="toggleCity('“Ş—ÇŒ§', '‰F‘És', this.checked)">
                                    <span class="ml-2 text-sm">‰F‘És</span>
                                </label>
                            
                        </div>
                    </div>
                
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">•ºŒÉŒ§</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 37 ‘I‘ğ’†
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('•ºŒÉŒ§', this.checked)">
                                <span class="ml-2 text-sm font-medium">‚·‚×‚Ä‘I‘ğ</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs“Œ“å‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs“Œ“å‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs“Œ“å‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs“å‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs“å‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs“å‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs•ºŒÉ‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs•ºŒÉ‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs•ºŒÉ‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs’·“c‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs’·“c‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs’·“c‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs{–‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs{–‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs{–‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs‚…‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs‚…‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs‚…‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs–k‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs–k‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs–k‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs’†‰›‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs’†‰›‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs’†‰›‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="_ŒËs¼‹æ" onchange="toggleCity('•ºŒÉŒ§', '_ŒËs¼‹æ', this.checked)">
                                    <span class="ml-2 text-sm">_ŒËs¼‹æ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•P˜Hs" onchange="toggleCity('•ºŒÉŒ§', '•P˜Hs', this.checked)">
                                    <span class="ml-2 text-sm">•P˜Hs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“òès" onchange="toggleCity('•ºŒÉŒ§', '“òès', this.checked)">
                                    <span class="ml-2 text-sm">“òès</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="–¾Îs" onchange="toggleCity('•ºŒÉŒ§', '–¾Îs', this.checked)">
                                    <span class="ml-2 text-sm">–¾Îs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¼‹{s" onchange="toggleCity('•ºŒÉŒ§', '¼‹{s', this.checked)">
                                    <span class="ml-2 text-sm">¼‹{s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="F–{s" onchange="toggleCity('•ºŒÉŒ§', 'F–{s', this.checked)">
                                    <span class="ml-2 text-sm">F–{s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ˆ°‰®s" onchange="toggleCity('•ºŒÉŒ§', 'ˆ°‰®s', this.checked)">
                                    <span class="ml-2 text-sm">ˆ°‰®s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ˆÉ’Os" onchange="toggleCity('•ºŒÉŒ§', 'ˆÉ’Os', this.checked)">
                                    <span class="ml-2 text-sm">ˆÉ’Os</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‘Š¶s" onchange="toggleCity('•ºŒÉŒ§', '‘Š¶s', this.checked)">
                                    <span class="ml-2 text-sm">‘Š¶s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="–L‰ªs" onchange="toggleCity('•ºŒÉŒ§', '–L‰ªs', this.checked)">
                                    <span class="ml-2 text-sm">–L‰ªs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰ÁŒÃìs" onchange="toggleCity('•ºŒÉŒ§', '‰ÁŒÃìs', this.checked)">
                                    <span class="ml-2 text-sm">‰ÁŒÃìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ô•äs" onchange="toggleCity('•ºŒÉŒ§', 'Ô•äs', this.checked)">
                                    <span class="ml-2 text-sm">Ô•äs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¼˜es" onchange="toggleCity('•ºŒÉŒ§', '¼˜es', this.checked)">
                                    <span class="ml-2 text-sm">¼˜es</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="•ó’Ës" onchange="toggleCity('•ºŒÉŒ§', '•ó’Ës', this.checked)">
                                    <span class="ml-2 text-sm">•ó’Ës</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="O–Øs" onchange="toggleCity('•ºŒÉŒ§', 'O–Øs', this.checked)">
                                    <span class="ml-2 text-sm">O–Øs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚»s" onchange="toggleCity('•ºŒÉŒ§', '‚»s', this.checked)">
                                    <span class="ml-2 text-sm">‚»s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ì¼s" onchange="toggleCity('•ºŒÉŒ§', 'ì¼s', this.checked)">
                                    <span class="ml-2 text-sm">ì¼s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="¬–ìs" onchange="toggleCity('•ºŒÉŒ§', '¬–ìs', this.checked)">
                                    <span class="ml-2 text-sm">¬–ìs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="O“cs" onchange="toggleCity('•ºŒÉŒ§', 'O“cs', this.checked)">
                                    <span class="ml-2 text-sm">O“cs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰Á¼s" onchange="toggleCity('•ºŒÉŒ§', '‰Á¼s', this.checked)">
                                    <span class="ml-2 text-sm">‰Á¼s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’O”gÂRs" onchange="toggleCity('•ºŒÉŒ§', '’O”gÂRs', this.checked)">
                                    <span class="ml-2 text-sm">’O”gÂRs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="—{•ƒs" onchange="toggleCity('•ºŒÉŒ§', '—{•ƒs', this.checked)">
                                    <span class="ml-2 text-sm">—{•ƒs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’O”gs" onchange="toggleCity('•ºŒÉŒ§', '’O”gs', this.checked)">
                                    <span class="ml-2 text-sm">’O”gs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="“ì‚ ‚í‚¶s" onchange="toggleCity('•ºŒÉŒ§', '“ì‚ ‚í‚¶s', this.checked)">
                                    <span class="ml-2 text-sm">“ì‚ ‚í‚¶s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’©—ˆs" onchange="toggleCity('•ºŒÉŒ§', '’©—ˆs', this.checked)">
                                    <span class="ml-2 text-sm">’©—ˆs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="’W˜Hs" onchange="toggleCity('•ºŒÉŒ§', '’W˜Hs', this.checked)">
                                    <span class="ml-2 text-sm">’W˜Hs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="³ˆ¾s" onchange="toggleCity('•ºŒÉŒ§', '³ˆ¾s', this.checked)">
                                    <span class="ml-2 text-sm">³ˆ¾s</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‰Á“Œs" onchange="toggleCity('•ºŒÉŒ§', '‰Á“Œs', this.checked)">
                                    <span class="ml-2 text-sm">‰Á“Œs</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="‚½‚Â‚Ìs" onchange="toggleCity('•ºŒÉŒ§', '‚½‚Â‚Ìs', this.checked)">
                                    <span class="ml-2 text-sm">‚½‚Â‚Ìs</span>
                                </label>
                            
                        </div>
                    </div>
                </div>
                            </div>

                            <!-- STEP 3: —DæƒGƒŠƒA‚ğİ’è -->
                            <div id="priorityArea" class="hidden mb-6">
                                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 sm:p-6">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-3 gap-2">
                                        <h4 class="font-semibold text-sm sm:text-lg leading-tight">
                                            STEP 3: —DæƒGƒŠƒA‚ğİ’è
                                            <span class="block sm:inline sm:ml-1 text-xs sm:text-base font-normal text-gray-600">
                                                iÅ‘å3ƒGƒŠƒAj
                                            </span>
                                        </h4>
                                        <span class="text-orange-500 font-semibold text-base sm:text-lg">
                                            <span id="selectedPriorityCount">2</span> / 3 ‘I‘ğ’†
                                        </span>
                                    </div>
                                    <p class="text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4">“Á‚É’—Í‚µ‚½‚¢ƒGƒŠƒA‚ğÅ‘å3‚Â‚Ü‚Å‘I‘ğ‚Å‚«‚Ü‚·</p>
                                    <div id="prioritySelectionList" class="space-y-3 sm:space-y-4">
                                        <!-- —DæƒGƒŠƒA‘I‘ğƒŠƒXƒg‚ª‚±‚±‚É¶¬‚³‚ê‚éiŒ§‚²‚Æ‚ÉƒJ[ƒhŒ`®j -->
                                    </div>
                                </div>
                            </div>

                            <!-- ƒGƒŠƒA‘I‘ğŠ®—¹ƒ{ƒ^ƒ“ƒZƒNƒVƒ‡ƒ“íœ -->
                        </div>
                    </div>

                    <div class="flex justify-end pb-20 relative z-10">
                        <button type="button" id="saveAutodeliveryBtn" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 min-h-[48px] cursor-pointer relative z-20 active:bg-blue-800">
                            İ’è‚ğ•Û‘¶
                        </button>
                    </div>
                </div>
            </div>

            <!-- ‰ïĞî•ñƒZƒNƒVƒ‡ƒ“ -->
            <div id="companySection" class="section" style="display: block;">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">‰ïĞî•ñ</h2>
                        <p class="text-sm text-gray-600 mt-1">ÀÛ‚É‚¨‹q—l‚É•\¦‚³‚ê‚éÚ×î•ñ‚É‚È‚è‚Ü‚·</p>
                    </div>
                    <button onclick="previewCompanyInfo()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                        </svg>
                        ƒvƒŒƒrƒ…[
                    </button>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <!-- ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹İ’è -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹</h3>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center relative" id="mainVisualUploadArea">
                            <input type="file" id="mainVisualInput" class="hidden" accept="image/*" onchange="handleMainVisualUpload(event)">
                            <div id="mainVisualPreview" class="">
                                <img id="mainVisualImage" src="https://drive.google.com/thumbnail?id=1USsRV4DxxSk0NCbwB_JsOrepMQ6jF4a2&amp;sz=w1000" alt="ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹" class="max-w-full h-48 mx-auto object-cover rounded">
                                <button onclick="removeMainVisual()" class="mt-2 px-4 py-2 text-red-600 hover:text-red-800 border border-red-300 rounded">íœ</button>
                            </div>
                            <div id="mainVisualPlaceholder" class="hidden">
                                <svg class="mx-auto h-12 w-12 text-gray-400 mb-3" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                                <p class="text-sm text-gray-600 mb-2">ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹‰æ‘œ‚ğƒAƒbƒvƒ[ƒh</p>
                                <button onclick="document.getElementById('mainVisualInput').click()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                    ‰æ‘œ‚ğ‘I‘ğ
                                </button>
                                <p class="text-xs text-gray-500 mt-2">„§: 1920x600px ˆÈã</p>
                            </div>
                        </div>
                    </div>

                    <!-- {H–—á -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">{H–—á</h3>
                        <button onclick="addConstructionExample()" class="mb-4 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">
                            {H–—á‚ğ’Ç‰Á
                        </button>
                        <div id="constructionExamplesList" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- {H–—á‚ª“®“I‚É’Ç‰Á‚³‚ê‚é -->
                        <div class="border rounded-lg p-4" id="example_loaded_0">
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="{Hƒ^ƒCƒgƒ‹i—áFŒËŒš‚ÄŠO•Ç“h‘•j" value="ŒËŒš‚Ä‚QF" onchange="updateConstructionExample('example_loaded_0', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">’z”N”</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="20" onchange="updateConstructionExample('example_loaded_0', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">”N</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">{H‹àŠzi–œ‰~j</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="150" onchange="updateConstructionExample('example_loaded_0', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">–œ‰~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="{H“à—ei—áFƒVƒŠƒRƒ““h—¿‚É‚æ‚é3‰ñ“h‚èAFåò‚¹‚Æ‰˜‚ê‚ğ‰ğÁj" onchange="updateConstructionExample('example_loaded_0', 'content', this.value)">ƒVƒŠƒRƒ“3‰ñ“h‚è</textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{H‘OiBeforej</label>
                                    <img src="https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="{H‘O">
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{HŒãiAfterj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="{HŒã">
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('example_loaded_0')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    ‚±‚Ì–—á‚ğíœ
                                </button>
                            </div>
                        </div><div class="border rounded-lg p-4" id="example_loaded_1">
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="{Hƒ^ƒCƒgƒ‹i—áFŒËŒš‚ÄŠO•Ç“h‘•j" value="’z45”N" onchange="updateConstructionExample('example_loaded_1', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">’z”N”</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="50" onchange="updateConstructionExample('example_loaded_1', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">”N</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">{H‹àŠzi–œ‰~j</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="250" onchange="updateConstructionExample('example_loaded_1', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">–œ‰~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="{H“à—ei—áFƒVƒŠƒRƒ““h—¿‚É‚æ‚é3‰ñ“h‚èAFåò‚¹‚Æ‰˜‚ê‚ğ‰ğÁj" onchange="updateConstructionExample('example_loaded_1', 'content', this.value)">ƒtƒb‘f3‰ñ“h‚è</textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{H‘OiBeforej</label>
                                    <img src="https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="{H‘O">
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{HŒãiAfterj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="{HŒã">
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('example_loaded_1')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    ‚±‚Ì–—á‚ğíœ
                                </button>
                            </div>
                        </div><div class="border rounded-lg p-4" id="example_loaded_2">
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="{Hƒ^ƒCƒgƒ‹i—áFŒËŒš‚ÄŠO•Ç“h‘•j" value="‰®ª•Ç“h‘•" onchange="updateConstructionExample('example_loaded_2', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">’z”N”</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="40" onchange="updateConstructionExample('example_loaded_2', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">”N</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">{H‹àŠzi–œ‰~j</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="130" onchange="updateConstructionExample('example_loaded_2', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">–œ‰~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="{H“à—ei—áFƒVƒŠƒRƒ““h—¿‚É‚æ‚é3‰ñ“h‚èAFåò‚¹‚Æ‰˜‚ê‚ğ‰ğÁj" onchange="updateConstructionExample('example_loaded_2', 'content', this.value)">ŒõG”}ƒtƒb‘f</textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{H‘OiBeforej</label>
                                    <img src="https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="{H‘O">
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{HŒãiAfterj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="{HŒã">
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('example_loaded_2')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    ‚±‚Ì–—á‚ğíœ
                                </button>
                            </div>
                        </div><div class="border rounded-lg p-4" id="example_loaded_3">
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="{Hƒ^ƒCƒgƒ‹i—áFŒËŒš‚ÄŠO•Ç“h‘•j" value="ƒXƒ}ƒz‚Å‚à" onchange="updateConstructionExample('example_loaded_3', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">’z”N”</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="200" onchange="updateConstructionExample('example_loaded_3', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">”N</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">{H‹àŠzi–œ‰~j</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="1000" onchange="updateConstructionExample('example_loaded_3', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">–œ‰~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="{H“à—ei—áFƒVƒŠƒRƒ““h—¿‚É‚æ‚é3‰ñ“h‚èAFåò‚¹‚Æ‰˜‚ê‚ğ‰ğÁj" onchange="updateConstructionExample('example_loaded_3', 'content', this.value)"></textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{H‘OiBeforej</label>
                                    <img src="https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="{H‘O">
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{HŒãiAfterj</label>
                                    <img src="https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="{HŒã">
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('example_loaded_3')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    ‚±‚Ì–—á‚ğíœ
                                </button>
                            </div>
                        </div></div>
                    </div>

                    <!-- Ê^ƒMƒƒƒ‰ƒŠ[ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">Ê^ƒMƒƒƒ‰ƒŠ[</h3>
                        <div id="photoGalleryList" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                            <div class="relative group gallery-item" id="gallery_loaded_0">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ1">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_0')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_1">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ2">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_1')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_2">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ3">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_2')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_3">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ4">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_3')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_4">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ5">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_4')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_5">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ6">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_5')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_6">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ7">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_6')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_7">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ8">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_7')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_8">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ9">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_8')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_9">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ10">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_9')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_10">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ11">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_10')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500" onclick="document.getElementById('galleryUpload').click()">
                                <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                </svg>
                                <span class="text-sm text-gray-500">‰æ‘œ‚ğ’Ç‰Á</span>
                            </div>
                            <!-- ƒMƒƒƒ‰ƒŠ[‰æ‘œ‚ª“®“I‚É’Ç‰Á‚³‚ê‚é -->
                        </div>
                        <input type="file" id="galleryUpload" accept="image/*" multiple="" style="display: none;" onchange="handleGalleryUpload(event)">
                    </div>

                    <!-- ‰ïĞŠî–{î•ñ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">Šî–{î•ñ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‰ïĞ–¼ <span class="text-red-500">*</span></label>
                                <input type="text" id="companyName" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: Š”®‰ïĞ‚­‚ç‚×‚é“h‘•" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‰ïĞ–¼ƒJƒi <span class="text-red-500">*</span></label>
                                <input type="text" id="companyNameKana" class="w-full px-3 py-2 border rounded-lg" placeholder="ƒJƒ^ƒJƒi‚Å“ü—Í" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‰®†</label>
                                <input type="text" id="tradeName" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: ‚­‚ç‚×‚éƒyƒCƒ“ƒg" value="" onchange="updateTradeNameDisplay()">

                                <!-- ‰®†•\¦ƒIƒvƒVƒ‡ƒ“ -->
                                <div class="mt-3 p-3 bg-gray-50 rounded-lg" id="tradeNameDisplayOptions" style="display: none;">
                                    <label class="block text-xs font-medium text-gray-700 mb-2">‰ïĞ–¼‚Ì•\¦•û–@</label>
                                    <div class="space-y-2">
                                        <!-- ƒpƒ^[ƒ“1FĞ–¼•\¦ -->
                                        <label class="flex items-center p-2 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                            <input type="radio" name="tradeNameDisplay" value="company" class="mr-2" checked="" onchange="updateCompanyNameDisplay()">
                                            <div>
                                                <span class="text-xs font-medium">ƒpƒ^[ƒ“1FĞ–¼•\¦</span>
                                                <div class="text-xs text-gray-600 mt-0.5">—á: Š”®‰ïĞ‚­‚ç‚×‚é“h‘•</div>
                                            </div>
                                        </label>

                                        <!-- ƒpƒ^[ƒ“2F‰®†•\¦ -->
                                        <label class="flex items-center p-2 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                            <input type="radio" name="tradeNameDisplay" value="trade" class="mr-2" onchange="updateCompanyNameDisplay()">
                                            <div>
                                                <span class="text-xs font-medium">ƒpƒ^[ƒ“2F‰®†•\¦</span>
                                                <div class="text-xs text-gray-600 mt-0.5">—á: ‚­‚ç‚×‚éƒyƒCƒ“ƒg</div>
                                            </div>
                                        </label>

                                        <!-- ƒpƒ^[ƒ“3F—¼•û•\¦ -->
                                        <label class="flex items-center p-2 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                            <input type="radio" name="tradeNameDisplay" value="both" class="mr-2" onchange="updateCompanyNameDisplay()">
                                            <div>
                                                <span class="text-xs font-medium">ƒpƒ^[ƒ“3F—¼•û•\¦</span>
                                                <div class="text-xs text-gray-600 mt-0.5">—á: Š”®‰ïĞ‚­‚ç‚×‚é“h‘•b‚­‚ç‚×‚éƒyƒCƒ“ƒg</div>
                                            </div>
                                        </label>

                                        <!-- ƒpƒ^[ƒ“3‚ÌƒJƒXƒ^ƒ}ƒCƒYƒIƒvƒVƒ‡ƒ“ -->
                                        <div id="bothDisplayOptions" class="ml-6 p-2 bg-blue-50 rounded-lg" style="display: none;">
                                            <h4 class="text-xs font-semibold text-gray-700 mb-2">ƒJƒXƒ^ƒ}ƒCƒYƒIƒvƒVƒ‡ƒ“</h4>

                                            <!-- •\¦‡˜ -->
                                            <div class="mb-2">
                                                <label class="flex items-center">
                                                    <input type="checkbox" id="reverseOrder" class="mr-2" onchange="updateCompanyNameDisplay()">
                                                    <span class="text-xs">‡”Ô‚ğ“ü‚ê‘Ö‚¦‚é</span>
                                                </label>
                                                <div class="text-xs text-gray-500 ml-6">¨ ‚­‚ç‚×‚éƒyƒCƒ“ƒgbŠ”®‰ïĞ‚­‚ç‚×‚é“h‘•</div>
                                            </div>

                                            <!-- •¶šƒTƒCƒY -->
                                            <div>
                                                <label class="flex items-center">
                                                    <input type="checkbox" id="smallerSecond" class="mr-2" onchange="updateCompanyNameDisplay()">
                                                    <span class="text-xs">Œã‚ë‚Ì•¶š‚ğ¬‚³‚­‚·‚éi85%ƒTƒCƒYj</span>
                                                </label>
                                                <div class="text-xs text-gray-500 ml-6">¨ ‘å‚«‚¢•¶šb<span style="font-size:85%">¬‚³‚¢•¶š</span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‰®†ƒJƒi</label>
                                <input type="text" id="tradeNameKana" class="w-full px-3 py-2 border rounded-lg" placeholder="ƒJƒ^ƒJƒi‚Å“ü—Í" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‘ã•\Ò–¼ <span class="text-red-500">*</span></label>
                                <input type="text" id="representative" class="w-full px-3 py-2 border rounded-lg" placeholder="‘ã•\Ò–¼‚ğ“ü—Í" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‘ã•\Ò–¼ƒJƒi <span class="text-red-500">*</span></label>
                                <input type="text" id="representativeKana" class="w-full px-3 py-2 border rounded-lg" placeholder="ƒJƒ^ƒJƒi‚Å“ü—Í" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">—X•Ö”Ô† <span class="text-red-500">*</span></label>
                                <input type="text" id="zipCode" class="w-full px-3 py-2 border rounded-lg" placeholder="123-4567" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ZŠ <span class="text-red-500">*</span></label>
                                <input type="text" id="address" class="w-full px-3 py-2 border rounded-lg" placeholder="“Œ‹“s`‹æÂR1-1-1" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">“d˜b”Ô† <span class="text-red-500">*</span></label>
                                <input type="text" id="phone" class="w-full px-3 py-2 border rounded-lg" placeholder="03-1234-5678" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ƒEƒFƒuƒTƒCƒgURL</label>
                                <input type="text" id="website" class="w-full px-3 py-2 border rounded-lg" placeholder="https://example.com" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">İ—§”NŒ</label>
                                <input type="text" id="established" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: 2010”N4Œ" value="">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">PR•¶ <span class="text-red-500">*</span></label>
                                <textarea id="prText" class="w-full px-3 py-2 border rounded-lg resize-y" rows="10" placeholder="‰ïĞ‚Ì“Á’¥‚âPR•¶‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢" style="min-height: 200px; height: 352px;"></textarea>
                                <p class="text-xs text-gray-500 mt-1 text-right">
                                    <span id="prTextCharCount">197</span>•¶š
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- x“Xî•ñ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">x“Xî•ñ</h3>
                        <div id="branchList"><div id="branch-1" class="border rounded-lg p-4 mb-3 bg-gray-50">
                            <div class="flex justify-between items-start mb-3">
                                <h4 class="font-medium text-gray-700">x“X 1</h4>
                                <button onclick="removeBranch(1)" class="text-red-600 hover:text-red-800">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">x“X–¼</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: ‰¡•lx“X" value="–¼ŒÃ‰®x“X" onchange="updateBranch(1, 'name', this.value)">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">x“XZŠ</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: _“ŞìŒ§‰¡•ls..." value="–¼ŒÃ‰®1-1" onchange="updateBranch(1, 'address', this.value)">
                                </div>
                            </div>
                        </div><div id="branch-2" class="border rounded-lg p-4 mb-3 bg-gray-50">
                            <div class="flex justify-between items-start mb-3">
                                <h4 class="font-medium text-gray-700">x“X 2</h4>
                                <button onclick="removeBranch(2)" class="text-red-600 hover:text-red-800">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">x“X–¼</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: ‰¡•lx“X" value="–kŠC“¹" onchange="updateBranch(2, 'name', this.value)">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">x“XZŠ</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: _“ŞìŒ§‰¡•ls..." value="–Ô‘–1-1" onchange="updateBranch(2, 'address', this.value)">
                                </div>
                            </div>
                        </div></div>
                        <button onclick="addBranch()" class="mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium">+ x“X‚ğ’Ç‰Á</button>
                    </div>

                    <!-- ˜A—æî•ñ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">˜A—æî•ñ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">¿‹—pƒ[ƒ‹ƒAƒhƒŒƒX <span class="text-red-500">*</span></label>
                                <input type="email" id="billingEmail" class="w-full px-3 py-2 border rounded-lg" placeholder="billing@example.com" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‰c‹Æ—pƒ[ƒ‹ƒAƒhƒŒƒX <span class="text-red-500">*</span></label>
                                <input type="email" id="salesEmail" class="w-full px-3 py-2 border rounded-lg" placeholder="sales@company.co.jp" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‰c‹Æ’S“–Ò–¼ <span class="text-red-500">*</span></label>
                                <input type="text" id="salesPersonName" class="w-full px-3 py-2 border rounded-lg" placeholder="‰c‹Æ’S“–Ò‚Ì–¼‚ğ“ü—Í" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‰c‹Æ’S“–ÒƒJƒi <span class="text-red-500">*</span></label>
                                <input type="text" id="salesPersonKana" class="w-full px-3 py-2 border rounded-lg" placeholder="ƒ„ƒ}ƒ_ ƒ^ƒƒE" value="">
                            </div>
                        </div>
                    </div>

                    <!-- –‹ÆÚ× -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">–‹ÆÚ×</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">]‹Æˆõ” <span class="text-red-500">*</span></label>
                                <select id="employees" class="w-full px-3 py-2 border rounded-lg">
                                    <option value="">‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢</option>
                                    <option value="1-2">1`2–¼</option>
                                    <option value="3-5">3`5–¼</option>
                                    <option value="6-10">6`10–¼</option>
                                    <option value="11+">11–¼ˆÈã</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">”„ã‹K–Í <span class="text-red-500">*</span></label>
                                <select id="salesScale" class="w-full px-3 py-2 border rounded-lg">
                                    <option value="">‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢</option>
                                    <option value="under-10m">1,000–œ‰~–¢–</option>
                                    <option value="10m-30m">1,000–œ‰~`3,000–œ‰~</option>
                                    <option value="30m-50m">3,000–œ‰~`5,000–œ‰~</option>
                                    <option value="50m-100m">5,000–œ‰~`1‰­‰~</option>
                                    <option value="100m-300m">1‰­‰~`3‰­‰~</option>
                                    <option value="over-300m">3‰­‰~ˆÈã</option>
                                </select>
                            </div>
                        </div>
                    </div>


                    <!-- ‘Î‰ƒGƒŠƒA -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">‘Î‰ƒGƒŠƒA</h3>
                        <p class="text-sm text-gray-600 mb-3">¦ ©“®”zMİ’è‚©‚ç©“®“I‚É”½‰f‚³‚ê‚Ü‚·</p>

                        <!-- ©“®”½‰f•\¦ -->
                        <div id="companyAreaAuto" class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                            <div id="companyAreaDisplay">
                                <!-- “s“¹•{Œ§ -->
                                <div class="p-4 border-b border-gray-100">
                                    <div class="flex items-center mb-3">
                                        <span class="text-lg mr-2">??</span>
                                        <h4 class="text-sm font-semibold text-gray-800">‘Î‰“s“¹•{Œ§</h4>
                                    </div>
                                    <div id="companyPrefecturesDisplay" class="flex flex-wrap gap-2"><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            “Œ‹“s
                        </span><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            é‹ÊŒ§
                        </span><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            _“ŞìŒ§
                        </span><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            “Ş—ÇŒ§
                        </span><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            •ºŒÉŒ§
                        </span></div>
                                </div>

                                <!-- s‹æ’¬‘º -->
                                <div class="p-4 border-b border-gray-100 bg-gray-50">
                                    <div class="flex items-center mb-3">
                                        <span class="text-lg mr-2">???</span>
                                        <h4 class="text-sm font-semibold text-gray-800">‘Î‰s‹æ’¬‘º</h4>
                                    </div>
                                    <div id="companyCitiesDisplay" class="flex flex-wrap gap-1.5 max-h-64 overflow-y-auto p-2 bg-white rounded border border-gray-200"><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            {"type":"compressed"
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            "full":"ç‘ã“c‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’†‰›‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            `‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Vh‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •¶‹‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘ä“Œ‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            –n“c‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ]“Œ‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •iì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            –Ú•‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘å“c‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¢“c’J‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            a’J‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’†–ì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ™•À‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            –L“‡‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            –k‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            rì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ”Â‹´‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            —û”n‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘«—§‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Š‹ü‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ]ŒËì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ”ª‰¤qs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            —§ìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •‘ –ìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            O‘és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Â”~s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •{’†s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            º“‡s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’²•zs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’¬“cs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¬‹àˆäs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¬•½s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “ú–ìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “Œ‘ºRs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘•ª›s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘—§s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •Ÿ¶s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ]s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “Œ‘å˜as
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ´£s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “Œ‹v—¯•Äs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •‘ ‘ºRs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘½–€s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ˆîés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰H‘ºs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚ ‚«‚é–ìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¼“Œ‹s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •ä’¬
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “ú‚Ìo’¬
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            wŒ´‘º
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰œ‘½–€’¬
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚Üs¼‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚Üs–k‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚Üs‘å‹{‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚ÜsŒ©À‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚Üs’†‰›‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚Üs÷‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚Üs‰Y˜a‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚Üs“ì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚Üs—Î‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚³‚¢‚½‚ÜsŠâ’Î‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ì‰zs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ŒF’Js
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìŒûs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            s“cs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’•ƒs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Š‘òs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ”Ñ”\s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰Á{s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            –{¯s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “Œ¼Rs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            t“ú•”s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‹·Rs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰H¶s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ƒ‘ƒs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            [’Js
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ã”ös
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘‰Ás
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰z’Js
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ˜ns
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ŒË“cs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “üŠÔs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’©‰às
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            u–Øs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ˜aŒõs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            VÀs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰±ìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‹vŠìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            –k–{s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ”ª’ªs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •xmŒ©s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            O‹½s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ˜@“cs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            âŒËs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Kès
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’ßƒ–“‡s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “ú‚s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‹gìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚Ó‚¶‚İ–ìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ”’‰ªs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls’ßŒ©‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls_“Şì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls¼‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls’†‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls“ì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls•Û“yƒP’J‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•lsˆéq‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls‹à‘ò‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls`–k‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•lsŒË’Ë‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls`“ì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•lsˆ®‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls—Î‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls£’J‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls‰h‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•lsò‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•lsÂ—t‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡•ls“s’}‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìèsìè‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìèsK‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìès’†Œ´‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìès‚’Ã‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìès‘½–€‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìès‹{‘O‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìès–ƒ¶‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘Š–ÍŒ´s—Î‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘Š–ÍŒ´s’†‰›‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘Š–ÍŒ´s“ì‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰¡{‰ês
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •½’Ës
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Š™‘qs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “¡‘òs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¬“cŒ´s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Šƒ–ès
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            €qs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            O‰Ys
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            `–ìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Œú–Øs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘å˜as
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ˆÉ¨Œ´s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ŠC˜V–¼s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ÀŠÔs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “ì‘«•¿s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ˆ»£s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “Ş—Çs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘å˜a‚“cs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘å˜aŒSRs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “V—s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Š€Œ´s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ÷ˆäs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ŒÜŠs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ŒäŠs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¶‹îs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ås
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Š‹és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰F‘És
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs“Œ“å‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs“å‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs•ºŒÉ‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs’·“c‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs{–‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs‚…‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs–k‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs’†‰›‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            _ŒËs¼‹æ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •P˜Hs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “òès
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            –¾Îs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¼‹{s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            F–{s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ˆ°‰®s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ˆÉ’Os
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‘Š¶s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            –L‰ªs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰ÁŒÃìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ô•äs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¼˜es
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            •ó’Ës
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            O–Øs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚»s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ì¼s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ¬–ìs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            O“cs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰Á¼s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’O”gÂRs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            —{•ƒs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’O”gs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            “ì‚ ‚í‚¶s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’©—ˆs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ’W˜Hs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ³ˆ¾s
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‰Á“Œs
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ‚½‚Â‚Ìs"}
                        </span></div>
                                </div>

                                <!-- —DæƒGƒŠƒA -->
                                <div class="p-4">
                                    <div class="flex items-center mb-3">
                                        <span class="text-lg mr-2">?</span>
                                        <h4 class="text-sm font-semibold text-gray-800">—DæƒGƒŠƒA</h4>
                                    </div>
                                    <div id="companyPrioritiesDisplay" class="flex flex-wrap gap-2"><span class="inline-flex items-center gap-1 px-4 py-2 bg-gradient-to-r from-amber-400 to-yellow-400 text-amber-900 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-shadow">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                            </svg>
                            ˆ¤’mŒ§_–¼ŒÃ‰®s“Œ‹æ
                        </span><span class="inline-flex items-center gap-1 px-4 py-2 bg-gradient-to-r from-amber-400 to-yellow-400 text-amber-900 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-shadow">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                            </svg>
                            “Ş—ÇŒ§_“Ş—Çs
                        </span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ‘Î‰H–“à—e -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">‘Î‰H–“à—e</h3>
                        <p class="text-sm text-gray-600 mb-3">¦ ©“®”zMİ’è‚©‚ç©“®“I‚É”½‰f‚³‚ê‚Ü‚·</p>

                        <!-- ©“®”½‰f•\¦ -->
                        <div id="companyConstructionAuto" class="bg-white border border-gray-200 rounded-lg p-4">
                            <div id="companyConstructionDisplay" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">ŠO•Ç“h‘•</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">???</span>
                            <span class="text-sm font-medium text-gray-700">ŠO•ÇƒJƒo[H–@</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">ŠO•Ç’£‘Ö‚¦</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">‰®ª“h‘•</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">?</span>
                            <span class="text-sm font-medium text-gray-700">‰®ã–h…</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">???</span>
                            <span class="text-sm font-medium text-gray-700">‰®ªƒJƒo[H–@</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">ŠO•Ç•âC</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">???</span>
                            <span class="text-sm font-medium text-gray-700">‰®ª•âC</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">ƒxƒ‰ƒ“ƒ_–h…</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">?</span>
                            <span class="text-sm font-medium text-gray-700">ŠO•Ç‰J˜R‚èC‘U</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒj</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™j</span>
                        </div></div>
                        </div>
                    </div>

                    <!-- ƒAƒs[ƒ‹ƒ|ƒCƒ“ƒgi©“®”zMİ’è‚©‚ç©“®”½‰fj -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ƒAƒs[ƒ‹ƒ|ƒCƒ“ƒg</h3>
                        <p class="text-sm text-gray-600 mb-3">¦ ©“®”zMİ’è‚©‚ç©“®“I‚É”½‰f‚³‚ê‚Ü‚·</p>

                        <!-- ©“®”½‰f•\¦ -->
                        <div id="companyAppealPointsAuto" class="bg-white border border-gray-200 rounded-lg p-4">
                            <div id="companyAppealPointsDisplay" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? Õ”ME’f”M“h—¿’ñˆÄ‰Â”\</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? —§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ƒGƒNƒXƒeƒŠƒAi’ëE’“ÔêEŠO\j</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ‘¾—zŒõƒpƒlƒ‹’E’…i“P‹ŠÜ‚Şj</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ’ñŒgæƒ[ƒ“—L‚è</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ƒNƒŒƒWƒbƒgƒJ[ƒh•¥‚¢‰Â</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? •¬‹à\¿ƒTƒ|[ƒg</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? Œš’z‹–‰ÂØ</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">? ŒõG”}“h—¿’ñˆÄ‰Â</span>
                            </div></div>
                        </div>
                    </div>

                    <!-- •Û—L‘Ši -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">•Û—L‘Ši</h3>
                        <p class="text-sm text-gray-600 mb-4">ŠY“–‚·‚é‘Ši‚ğ‚·‚×‚Ä‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢i•¡”‘I‘ğ‰Âj</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4">
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ˆê‹‰“h‘•‹Z”\m" class="mr-3">
                                <span class="text-sm">ˆê‹‰“h‘•‹Z”\m</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="“ñ‹‰“h‘•‹Z”\m" class="mr-3">
                                <span class="text-sm">“ñ‹‰“h‘•‹Z”\m</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="‘«ê‘g—§ì‹Æå”CÒ" class="mr-3">
                                <span class="text-sm">‘«ê‘g—§ì‹Æå”CÒ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="Î–Èì‹Æå”CÒ" class="mr-3">
                                <span class="text-sm">Î–ÈiƒAƒXƒxƒXƒgjì‹Æå”CÒ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ŠO•Çf’fm" class="mr-3">
                                <span class="text-sm">ŠO•Çf’fm</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ŠO•Ç—ò‰»f’fm" class="mr-3">
                                <span class="text-sm">ŠO•Ç—ò‰»f’fm</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ŠO•ÇƒAƒhƒoƒCƒU[" class="mr-3">
                                <span class="text-sm">ŠO•ÇƒAƒhƒoƒCƒU[</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="‰®ªf’fm" class="mr-3">
                                <span class="text-sm">‰®ªf’fm</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="‰J˜R‚èf’fm" class="mr-3">
                                <span class="text-sm">‰J˜R‚èf’fm</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="‘‰ü’z‘Š’kˆõ" class="mr-3">
                                <span class="text-sm">‘‰ü’z‘Š’kˆõ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="‘æ“ñí“d‹CH–m" class="mr-3">
                                <span class="text-sm">‘æ“ñí“d‹CH–m</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="—L‹@—nÜì‹Æå”CÒ" class="mr-3">
                                <span class="text-sm">—L‹@—nÜì‹Æå”CÒ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ˆê‹‰–h…{H‹Z”\m" class="mr-3">
                                <span class="text-sm">ˆê‹‰–h…{H‹Z”\m</span>
                            </label>
                        </div>
                        <!-- ‚»‚Ì‘¼‚Ì‘Ši‚ğ’Ç‰Á -->
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">‚»‚Ì‘¼‚Ì‘Ši</label>
                            <div class="flex gap-2" id="customQualifications">
                                <input type="text" id="customQualificationInput" class="flex-1 px-3 py-2 border rounded-lg" placeholder="‚»‚Ì‘¼‚Ì‘Ši‚ğ“ü—Í">
                                <button onclick="addCustomQualification()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                    ’Ç‰Á
                                </button>
                            </div>
                            <div id="customQualificationsList" class="mt-3 flex flex-wrap gap-2"></div>
                        </div>
                    </div>

                    <!-- ‰Á“ü•ÛŒ¯ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">‰Á“ü•ÛŒ¯</h3>
                        <p class="text-sm text-gray-600 mb-4">‰Á“ü‚µ‚Ä‚¢‚é•ÛŒ¯‚ğ‚·‚×‚Ä‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢i•¡”‘I‘ğ‰Âj</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4">
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="H–•ÛŒ¯" class="mr-3">
                                <span class="text-sm">H–•ÛŒ¯</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="”…Ó”C•ÛŒ¯" class="mr-3">
                                <span class="text-sm">”…Ó”C•ÛŒ¯</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="ƒŠƒtƒH[ƒ€àêár•ÛŒ¯" class="mr-3">
                                <span class="text-sm">ƒŠƒtƒH[ƒ€àêár•ÛŒ¯</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="ŒšİH–•ÛŒ¯" class="mr-3">
                                <span class="text-sm">ŒšİH–•ÛŒ¯</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="¿•‰‹ÆÒ”…Ó”C•ÛŒ¯" class="mr-3">
                                <span class="text-sm">¿•‰‹ÆÒ”…Ó”C•ÛŒ¯</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="¶Y•¨”…Ó”C•ÛŒ¯" class="mr-3">
                                <span class="text-sm">¶Y•¨”…Ó”C•ÛŒ¯iPL•ÛŒ¯j</span>
                            </label>
                        </div>
                        <!-- ‚»‚Ì‘¼‚Ì•ÛŒ¯‚ğ’Ç‰Á -->
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">‚»‚Ì‘¼‚Ì•ÛŒ¯</label>
                            <div class="flex gap-2" id="customInsurance">
                                <input type="text" id="customInsuranceInput" class="flex-1 px-3 py-2 border rounded-lg" placeholder="‚»‚Ì‘¼‚Ì•ÛŒ¯‚ğ“ü—Í">
                                <button onclick="addCustomInsurance()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                    ’Ç‰Á
                                </button>
                            </div>
                            <div id="customInsuranceList" class="mt-3 flex flex-wrap gap-2"></div>
                        </div>
                    </div>

                    <!-- •Û‘¶ƒ{ƒ^ƒ“ -->
                    <div class="flex justify-end mt-8 gap-3">
                        <button onclick="resetCompanyInfo()" class="px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium">
                            ƒŠƒZƒbƒg
                        </button>
                        <button onclick="saveCompanyInfo()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                            </svg>
                            •ÏX‚ğ•Û‘¶
                        </button>
                    </div>
                </div>
            </div>

            <!-- ƒLƒƒƒ“ƒZƒ‹\¿ƒZƒNƒVƒ‡ƒ“ -->
            <div id="cancelSection" class="section" style="display: none;">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">ƒLƒƒƒ“ƒZƒ‹\¿</h2>
                        <p class="text-sm text-gray-600 mt-1">ˆÄŒ‚ÌƒLƒƒƒ“ƒZƒ‹——R‚ğ‘I‘ğ‚µ‚Ä\¿‚µ‚Ä‚­‚¾‚³‚¢</p>
                    </div>
                </div>

                <!-- ŒŸõƒo[ -->
                <div class="bg-white rounded-lg shadow p-4 mb-6">
                    <!-- Šî–{ŒŸõ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                        <div class="lg:col-span-2">
                            <input type="text" id="cancelSearchInput" placeholder="ŒÚ‹q–¼E“d˜b”Ô†EZŠ‚ÅŒŸõi•”•ªˆê’vj" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-blue-500" onkeyup="searchCancelCases()">
                        </div>
                        <div>
                            <select id="cancelAssigneeFilter" class="w-full px-4 py-2 border rounded-lg" onchange="searchCancelCases()">
                                <option value="">’S“–Ò‚ÅŒŸõ</option>
                                <option value="self">©•ª‚ÌˆÄŒ</option>
                                <option value="“c’†‘¾˜Y">“c’†‘¾˜Y</option>
                                <option value="²“¡‰Ôq">²“¡‰Ôq</option>
                                <option value="—é–Øˆê˜Y">—é–Øˆê˜Y</option>
                                <option value="‚‹´‚İ‚ä‚«">‚‹´‚İ‚ä‚«</option>
                                <option value="ˆÉ“¡Œ’">ˆÉ“¡Œ’</option>
                                <option value="–¢Š„“–">–¢Š„“–</option>
                            </select>
                        </div>
                    </div>

                    <!-- ŠúŠÔŒŸõ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="flex items-center gap-2">
                            <label class="text-xs text-gray-600">—¬“üŠúŠÔ</label>
                            <input type="date" id="cancelStartDate" class="px-3 py-2 border rounded-lg" onchange="searchCancelCases()">
                            <span class="text-xs text-gray-600">`</span>
                            <input type="date" id="cancelEndDate" class="px-3 py-2 border rounded-lg" onchange="searchCancelCases()">
                        </div>
                        <div class="flex items-center justify-end">
                            <button onclick="searchCancelCases()" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                ŒŸõ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ˆÄŒˆê—— -->
                <div id="cancelCasesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6">
                    <!-- ˆÄŒƒJ[ƒh‚ª“®“I‚É•\¦‚³‚ê‚é -->
                </div>

                <!-- ƒLƒƒƒ“ƒZƒ‹\¿ƒtƒH[ƒ€iƒ‚[ƒ_ƒ‹j -->
                <div id="cancelModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                    <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-4">ƒLƒƒƒ“ƒZƒ‹——R‚Ì‘I‘ğ</h3>
                            <div id="cancelQuestionContainer">
                                <!-- ¿–â‚ª“®“I‚É•\¦‚³‚ê‚é -->
                            </div>
                            <div id="cancelAIResponse" class="hidden mt-6 p-4 bg-blue-50 rounded-lg">
                                <h4 class="font-semibold text-gray-800 mb-2">AI¶¬‚Ì\¿•¶</h4>
                                <div id="cancelAIText" class="text-gray-700 whitespace-pre-wrap"></div>
                                <div class="mt-4 flex gap-3">
                                    <button onclick="submitCancelRequest()" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                        ‚±‚Ì“à—e‚Å\¿
                                    </button>
                                    <button onclick="regenerateCancelText()" class="px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">
                                        Ä¶¬
                                    </button>
                                </div>
                            </div>
                            <button onclick="closeCancelModal()" class="mt-4 text-gray-500 hover:text-gray-700">
                                ƒLƒƒƒ“ƒZƒ‹
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ¬–ñ•ñƒZƒNƒVƒ‡ƒ“ -->
            <div id="contractSection" class="section" style="display: none;">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">¬–ñ•ñ</h2>
                        <p class="text-sm text-gray-600 mt-1">¬–ñ‚µ‚½ˆÄŒ‚ÌÚ×‚ğ•ñ‚µ‚Ä‚­‚¾‚³‚¢</p>
                    </div>
                </div>

                <!-- ŒŸõƒo[ -->
                <div class="bg-white rounded-lg shadow p-4 mb-6">
                    <!-- Šî–{ŒŸõ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                        <div class="lg:col-span-2">
                            <input type="text" id="contractSearchInput" placeholder="ŒÚ‹q–¼E“d˜b”Ô†EZŠ‚ÅŒŸõi•”•ªˆê’vj" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-blue-500" onkeyup="searchContractCases()">
                        </div>
                        <div>
                            <select id="contractAssigneeFilter" class="w-full px-4 py-2 border rounded-lg" onchange="searchContractCases()">
                                <option value="">’S“–Ò‚ÅŒŸõ</option>
                                <option value="self">©•ª‚ÌˆÄŒ</option>
                                <option value="“c’†‘¾˜Y">“c’†‘¾˜Y</option>
                                <option value="²“¡‰Ôq">²“¡‰Ôq</option>
                                <option value="—é–Øˆê˜Y">—é–Øˆê˜Y</option>
                                <option value="‚‹´‚İ‚ä‚«">‚‹´‚İ‚ä‚«</option>
                                <option value="ˆÉ“¡Œ’">ˆÉ“¡Œ’</option>
                                <option value="–¢Š„“–">–¢Š„“–</option>
                            </select>
                        </div>
                    </div>

                    <!-- ŠúŠÔŒŸõ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="flex items-center gap-2">
                            <label class="text-xs text-gray-600">—¬“üŠúŠÔ</label>
                            <input type="date" id="contractStartDate" class="px-3 py-2 border rounded-lg" onchange="searchContractCases()">
                            <span class="text-xs text-gray-600">`</span>
                            <input type="date" id="contractEndDate" class="px-3 py-2 border rounded-lg" onchange="searchContractCases()">
                        </div>
                        <div class="flex items-center justify-end">
                            <button onclick="searchContractCases()" class="px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                ŒŸõ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ˆÄŒˆê—— -->
                <div id="contractCasesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6">
                    <!-- ˆÄŒƒJ[ƒh‚ª“®“I‚É•\¦‚³‚ê‚é -->
                </div>

                <!-- ¬–ñ•ñƒ‚[ƒ_ƒ‹ -->
                <div id="contractModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                    <div class="bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto relative">
                        <!-- •Â‚¶‚éƒ{ƒ^ƒ“i‰Eãj -->
                        <button onclick="closeContractModal()" class="absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 transition-colors z-10">
                            <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>

                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-4">¬–ñ•ñ</h3>

                            <!-- ŒÚ‹qî•ñ•\¦ -->
                            <div id="contractCustomerInfo" class="hidden mb-4 p-4 bg-blue-50 rounded-lg">
                                <div class="text-lg font-semibold" id="contractCustomerName"></div>
                                <div class="text-gray-600" id="contractCustomerAddress"></div>
                            </div>

                            <!-- ¿–âƒtƒF[ƒY -->
                            <div id="contractQuestionContainer">
                                <!-- ¿–â‚ª“®“I‚É•\¦‚³‚ê‚é -->
                            </div>

                            <!-- ƒtƒH[ƒ€ƒtƒF[ƒY -->
                            <div id="contractFormPhase" class="hidden">
                                <form id="contractReportForm">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <!-- Œ_–ñ‹àŠz -->
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Œ_–ñ‹àŠziÅj</label>
                                            <div class="flex items-center">
                                                <span class="mr-2">\</span>
                                                <input type="number" id="contractAmount" class="flex-1 px-3 py-2 border rounded-lg" placeholder="1234567" min="0" step="1" required="">
                                                <span class="ml-2">‰~</span>
                                            </div>
                                        </div>

                                        <!-- Š®H“ú -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2" id="completionDateLabel">Š®H—\’è“ú</label>
                                            <input type="date" id="completionDate" class="w-full px-3 py-2 border rounded-lg" required="">
                                        </div>

                                        <!-- ’…‹à“ú -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2" id="paymentDateLabel">’…‹à—\’è“ú</label>
                                            <input type="date" id="paymentDate" class="w-full px-3 py-2 border rounded-lg" required="">
                                        </div>

                                        <!-- ‘ÎÛ•¨Œí•Ê -->
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">‘ÎÛ•¨Œí•Ê</label>

                                            <!-- •¨Œƒ^ƒCƒvi•¡”‘I‘ğ‰Âj -->
                                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-3">
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="ŒËŒš‚Ä" class="mr-2">
                                                    <span>ŒËŒš‚Ä</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="ƒAƒp[ƒg" class="mr-2">
                                                    <span>ƒAƒp[ƒg</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="ƒ}ƒ“ƒVƒ‡ƒ“" class="mr-2">
                                                    <span>ƒ}ƒ“ƒVƒ‡ƒ“</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="“X•Ü" class="mr-2">
                                                    <span>“X•Ü</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="––±Š" class="mr-2">
                                                    <span>––±Š</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="Hê" class="mr-2">
                                                    <span>Hê</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="‘qŒÉ" class="mr-2">
                                                    <span>‘qŒÉ</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="‚»‚Ì‘¼" class="mr-2" onchange="toggleOtherPropertyDetails()">
                                                    <span>‚»‚Ì‘¼</span>
                                                </label>
                                            </div>
                                            <input type="text" id="otherPropertyDetails" class="w-full px-3 py-2 border rounded-lg hidden" placeholder="‚»‚Ì‘¼‚Ì•¨Œí•Ê‚ğ“ü—Í">

                                            <!-- ŠK”‘I‘ğ -->
                                            <div class="mt-3">
                                                <label class="block text-xs text-gray-600 mb-1">ŠK”</label>
                                                <select id="buildingFloors" class="w-full px-3 py-2 border rounded-lg">
                                                    <option value="">‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢</option>
                                                    <option value="1F">1F</option>
                                                    <option value="2F">2F</option>
                                                    <option value="3F">3F</option>
                                                    <option value="4F">4F</option>
                                                    <option value="5F">5F</option>
                                                    <option value="6F">6F</option>
                                                    <option value="7F">7F</option>
                                                    <option value="8F">8F</option>
                                                    <option value="9F">9F</option>
                                                    <option value="10FˆÈã">10FˆÈã</option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- {H“à—e -->
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">{H“à—ei•¡”‘I‘ğ‰Âj</label>
                                            <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-3">
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ŠO•Ç“h‘•" class="mr-2">
                                                    <span>ŠO•Ç“h‘•</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ŠO•ÇƒJƒo[H–@" class="mr-2">
                                                    <span>ŠO•ÇƒJƒo[H–@</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ŠO•Ç’£‘Ö‚¦" class="mr-2">
                                                    <span>ŠO•Ç’£‘Ö‚¦</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="‰®ª“h‘•" class="mr-2">
                                                    <span>‰®ª“h‘•</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="‰®ã–h…" class="mr-2">
                                                    <span>‰®ã–h…</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="‰®ª•˜‚«‘Ö‚¦iƒXƒŒ[ƒgEƒKƒ‹ƒoj" class="mr-2">
                                                    <span>‰®ª•˜‚«‘Ö‚¦iƒXƒŒ[ƒgEƒKƒ‹ƒoj</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="‰®ª•˜‚«‘Ö‚¦iŠ¢j" class="mr-2">
                                                    <span>‰®ª•˜‚«‘Ö‚¦iŠ¢j</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="‰®ªƒJƒo[H–@" class="mr-2">
                                                    <span>‰®ªƒJƒo[H–@</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ŠO•Ç•âC" class="mr-2">
                                                    <span>ŠO•Ç•âC</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="‰®ª•âC" class="mr-2">
                                                    <span>‰®ª•âC</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ƒxƒ‰ƒ“ƒ_–h…" class="mr-2">
                                                    <span>ƒxƒ‰ƒ“ƒ_–h…</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="‰J˜R‚èC‘U" class="mr-2">
                                                    <span>‰J˜R‚èC‘U</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒj" class="mr-2">
                                                    <span>“à‘•…‰ñ‚è</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="“à‘•i°EƒNƒƒX“™j" class="mr-2">
                                                    <span>“à‘•i°EƒNƒƒX“™j</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="‚»‚Ì‘¼" class="mr-2" onchange="toggleOtherWorkDetails()">
                                                    <span>‚»‚Ì‘¼</span>
                                                </label>
                                            </div>
                                            <textarea id="workDetails" class="w-full px-3 py-2 border rounded-lg hidden" rows="3" placeholder="‚»‚Ì‘¼‚Ì{H“à—e‚ğ“ü—Í"></textarea>
                                        </div>

                                        <!-- Œ©Ï‘ƒAƒbƒvƒ[ƒh -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Œ©Ï‘</label>
                                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                                                <input type="file" id="estimateFile" accept="image/*,application/pdf" class="hidden" onchange="handleFileUpload(event, 'estimate')">
                                                <div id="estimatePreview" class="mb-2">
                                                    <svg class="w-12 h-12 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                                    </svg>
                                                </div>
                                                <button type="button" onclick="document.getElementById('estimateFile').click()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                                    ƒtƒ@ƒCƒ‹‚ğ‘I‘ğ
                                                </button>
                                                <p class="text-xs text-gray-500 mt-2">‰æ‘œ‚Ü‚½‚ÍPDF</p>
                                            </div>
                                        </div>

                                        <!-- —Ìû‘ƒAƒbƒvƒ[ƒh -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">—Ìû‘</label>
                                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                                                <input type="file" id="receiptFile" accept="image/*,application/pdf" class="hidden" onchange="handleFileUpload(event, 'receipt')">
                                                <div id="receiptPreview" class="mb-2">
                                                    <svg class="w-12 h-12 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                                    </svg>
                                                </div>
                                                <button type="button" onclick="document.getElementById('receiptFile').click()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                                    ƒtƒ@ƒCƒ‹‚ğ‘I‘ğ
                                                </button>
                                                <p class="text-xs text-gray-500 mt-2">‰æ‘œ‚Ü‚½‚ÍPDF</p>
                                            </div>
                                        </div>

                                        <!-- ”õl -->
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">”õl</label>
                                            <textarea id="contractNotes" class="w-full px-3 py-2 border rounded-lg" rows="3" placeholder="“Á‹L–€‚ª‚ ‚ê‚Î“ü—Í"></textarea>
                                        </div>
                                    </div>

                                    <div class="mt-6 flex justify-center">
                                        <button type="submit" class="px-8 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium">
                                            ¬–ñ•ñ‚ğ‘—M
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- İ’èƒZƒNƒVƒ‡ƒ“ -->
            <div id="settingsSection" class="section" style="display: none;">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">İ’è</h2>
                
                <!-- ƒ^ƒuƒiƒrƒQ[ƒVƒ‡ƒ“ -->
                <!-- ƒ^ƒu‚ğíœ‚µ‚Ä1ƒy[ƒW“‡ -->
                
                <!-- ƒvƒƒtƒB[ƒ‹î•ñ -->
                <div id="profileSection">
                    <div class="bg-white shadow rounded-lg p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">ƒvƒƒtƒB[ƒ‹î•ñ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">–¼</label>
                                <input type="text" id="profileName" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="“c’†‘¾˜Y">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">“d˜b”Ô†</label>
                                <input type="tel" id="profilePhone" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="090-1234-5678">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ƒ[ƒ‹ƒAƒhƒŒƒX</label>
                                <input type="email" id="profileEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="tanaka@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">LINE ID</label>
                                <input type="text" id="profileLineId" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="@tanaka_taro">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ’Ê’mEƒAƒ‰[ƒgİ’è -->
                <div id="notificationSection" class="mt-6">
                    <div class="bg-white shadow rounded-lg p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">’Ê’mEƒAƒ‰[ƒgİ’è</h3>
                        
                        <!-- ’Ê’m•û–@ -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">’Ê’m•û–@</h4>
                            <div class="space-y-3">
                                <label class="flex items-center justify-between">
                                    <span class="text-sm text-gray-700">ƒ[ƒ‹’Ê’m</span>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="notifyEmail" class="toggle-switch" checked="">
                                        <button onclick="testNotification('email')" class="ml-3 text-xs text-blue-600 hover:text-blue-800">ƒeƒXƒg‘—M</button>
                                    </div>
                                </label>
                                <label class="flex items-center justify-between">
                                    <span class="text-sm text-gray-700">SMS’Ê’m</span>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="notifySms" class="toggle-switch">
                                        <button onclick="testNotification('sms')" class="ml-3 text-xs text-blue-600 hover:text-blue-800">ƒeƒXƒg‘—M</button>
                                    </div>
                                </label>
                                <label class="flex items-center justify-between">
                                    <span class="text-sm text-gray-700">LINE’Ê’m</span>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="notifyLine" class="toggle-switch">
                                        <button onclick="testNotification('line')" class="ml-3 text-xs text-blue-600 hover:text-blue-800">ƒeƒXƒg‘—M</button>
                                    </div>
                                </label>
                                <label class="flex items-center justify-between">
                                    <span class="text-sm text-gray-700">ƒuƒ‰ƒEƒU’Ê’m</span>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="notifyBrowser" class="toggle-switch" checked="">
                                        <button onclick="testNotification('browser')" class="ml-3 text-xs text-blue-600 hover:text-blue-800">ƒeƒXƒg‘—M</button>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- ’Ê’mí•Ê -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">’Ê’mí•Ê</h4>
                            <div class="space-y-3">
                                <!-- ƒAƒ|ƒCƒ“ƒgƒŠƒ}ƒCƒ“ƒ_[ -->
                                <div class="border rounded-lg p-3 bg-gray-50 group relative">
                                    <label class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">??</span>
                                            <span class="text-sm font-medium text-gray-700">Œ»’²‘O“úƒŠƒ}ƒCƒ“ƒ_[</span>
                                            <span class="ml-1 text-gray-400 cursor-help">?</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="time" id="appointmentAlertTime" value="18:00" class="px-2 py-1 border rounded text-sm">
                                            <input type="checkbox" id="appointmentReminder" class="toggle-switch" checked="" onchange="updateAlertSetting('appointment_reminder', this.checked)">
                                        </div>
                                    </label>
                                    <div class="absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-10 whitespace-nowrap">
                                        Œ»’n’²¸‚Ì‘O“ú‚É’Ê’m‚µ‚Ü‚·
                                    </div>
                                </div>

                                <!-- ‰Ë“dƒŠƒ}ƒCƒ“ƒ_[ -->
                                <div class="border rounded-lg p-3 bg-gray-50 group relative">
                                    <label class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">??</span>
                                            <span class="text-sm font-medium text-gray-700">‰Ë“dƒŠƒ}ƒCƒ“ƒ_[</span>
                                            <span class="ml-1 text-gray-400 cursor-help">?</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="time" id="callAlertTime" value="10:00" class="px-2 py-1 border rounded text-sm">
                                            <input type="checkbox" id="callReminder" class="toggle-switch" checked="" onchange="updateAlertSetting('call_reminder', this.checked)">
                                        </div>
                                    </label>
                                    <div class="absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-10 whitespace-nowrap">
                                        –¢‘Î‰ˆÄŒ‚Ì—‚“ú‚É’Ê’m‚µ‚Ü‚·
                                    </div>
                                </div>

                                <!-- Œ©ÏƒtƒHƒ[ -->
                                <div class="border rounded-lg p-3 bg-gray-50 group relative">
                                    <label class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">??</span>
                                            <span class="text-sm font-medium text-gray-700">Œ©ÏƒtƒHƒ[ƒAƒbƒv</span>
                                            <span class="ml-1 text-gray-400 cursor-help">?</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="number" id="followupDays" value="7" min="1" max="30" class="w-16 px-2 py-1 border rounded text-sm">
                                            <span class="text-sm text-gray-600">“úŒã</span>
                                            <input type="checkbox" id="estimateFollowup" class="toggle-switch" checked="" onchange="updateAlertSetting('estimate_followup', this.checked)">
                                        </div>
                                    </label>
                                    <div class="absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-10 whitespace-nowrap">
                                        Œ©Ï’ñoŒã‚É©“®‚ÅƒtƒHƒ[’Ê’m‚µ‚Ü‚·
                                    </div>
                                </div>

                                <!-- “ü‹àŠm”F -->
                                <div class="border rounded-lg p-3 bg-gray-50 group relative">
                                    <label class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">??</span>
                                            <span class="text-sm font-medium text-gray-700">“ü‹àŠm”FƒAƒ‰[ƒg</span>
                                            <span class="ml-1 text-gray-400 cursor-help">?</span>
                                        </div>
                                        <input type="checkbox" id="paymentAlert" class="toggle-switch" checked="" onchange="updateAlertSetting('payment_alert', this.checked)">
                                    </label>
                                    <div class="absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-10 whitespace-nowrap">
                                        “ü‹à—\’è“ú‚É©“®‚Å’Ê’m‚µ‚Ü‚·
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ’Ê’mŠÔE‹x“úİ’è -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">’Ê’mŠÔE‹x“úİ’è</h4>
                            <div class="space-y-4">
                                <!-- ‹x“úİ’è -->
                                <div class="border rounded-lg p-4 bg-gray-50">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enableHolidays" onchange="toggleHolidaySettings()" checked="">
                                        <span class="ml-2 text-sm font-medium text-gray-700">?? ‹x“úİ’èiƒ`ƒFƒbƒN‚µ‚½—j“ú‚Í’Ê’m‚³‚ê‚Ü‚¹‚ñj</span>
                                    </label>
                                    <div id="holidaySettings" class="mt-3 flex flex-wrap gap-3">
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayMon" class="mr-2">
                                            <span class="text-sm">Œ</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayTue" class="mr-2">
                                            <span class="text-sm">‰Î</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayWed" class="mr-2">
                                            <span class="text-sm">…</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayThu" class="mr-2">
                                            <span class="text-sm">–Ø</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayFri" class="mr-2">
                                            <span class="text-sm">‹à</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidaySat" class="mr-2" checked="">
                                            <span class="text-sm font-medium text-blue-600">“y</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidaySun" class="mr-2" checked="">
                                            <span class="text-sm font-medium text-red-600">“ú</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- ’Ê’m§ŒÀŠÔ -->
                                <div class="border rounded-lg p-4 bg-gray-50">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enableQuietHours" onchange="toggleQuietHours()" checked="">
                                        <span class="ml-2 text-sm font-medium text-gray-700">?? ’Ê’m‚ğ§ŒÀ‚·‚éŠÔ‘Ñ</span>
                                    </label>
                                    <div id="quietHoursSettings" class="mt-3 space-y-2">
                                        <div class="flex items-center space-x-2">
                                            <input type="time" id="quietStart" value="22:00" class="px-3 py-2 border border-gray-300 rounded-lg">
                                            <span class="text-sm text-gray-500">‚©‚ç</span>
                                            <input type="time" id="quietEnd" value="08:00" class="px-3 py-2 border border-gray-300 rounded-lg">
                                            <span class="text-sm text-gray-500">‚Ü‚Å</span>
                                        </div>
                                        <p class="text-xs text-gray-500">‚±‚ÌŠÔ‘Ñ‚Í’Ê’m‚ğ‘—M‚µ‚Ü‚¹‚ñ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- “‡•Û‘¶ƒ{ƒ^ƒ“ -->
                    <div class="mt-6 flex justify-end">
                        <button onclick="saveAllSettings()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">
                            İ’è‚ğ•Û‘¶
                        </button>
                    </div>
                </div>
            </div>
        </main></div><!-- settingsSection‚ÌI—¹ -->
    

    <!-- Œ ŒÀİ’èƒ‚[ƒ_ƒ‹ -->
    <div id="permissionModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mb-4">
                <h3 class="text-lg font-bold text-gray-900" id="modalTitle">‰c‹ÆŒ ŒÀİ’è</h3>
                <p class="text-sm text-gray-500 mt-1">‰c‹Æ’S“–Ò‚ÌŒ ŒÀ‚ğÚ×‚Éİ’è‚Å‚«‚Ü‚·</p>
            </div>
            <!-- V‹K’Ç‰Á‚Ì“ü—ÍƒtƒB[ƒ‹ƒh -->
            <div id="newSalesFields" class="mb-6 hidden">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">–¼ <span class="text-red-500">*</span></label>
                        <input type="text" id="newSalesName" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="—áFR“c‘¾˜Y">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ƒ[ƒ‹ƒAƒhƒŒƒX <span class="text-red-500">*</span></label>
                        <input type="email" id="newSalesEmail" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="example@company.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">“d˜b”Ô†</label>
                        <input type="tel" id="newSalesPhone" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="090-1234-5678">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">–ğE</label>
                        <select id="newSalesRole" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="ˆê”Ê‰c‹Æ">ˆê”Ê‰c‹Æ</option>
                            <option value="ƒŠ[ƒ_[">ƒŠ[ƒ_[</option>
                            <option value="ˆê”Ê––±">ˆê”Ê––±</option>
                            <option value="Œ»êŠÄ“Â">Œ»êŠÄ“Â</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Œ ŒÀƒvƒŠƒZƒbƒg</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setPreset('office')" class="preset-btn px-4 py-2 border rounded-lg hover:bg-gray-50">ˆê”Ê––±</button>
                    <button onclick="setPreset('standard')" class="preset-btn px-4 py-2 border rounded-lg hover:bg-gray-50">ˆê”Ê‰c‹Æ</button>
                    <button onclick="setPreset('leader')" class="preset-btn px-4 py-2 border rounded-lg hover:bg-gray-50">ƒŠ[ƒ_[</button>
                    <button onclick="setPreset('admin')" class="preset-btn px-4 py-2 border rounded-lg hover:bg-gray-50">•›ŠÇ—Ò</button>
                </div>
            </div>

            <h3 class="text-sm font-medium text-gray-700 mb-3">ƒJƒXƒ^ƒ€İ’è</h3>
            <div class="permission-grid mb-6">
                <!-- ˆÄŒŠÖ˜A -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">ˆÄŒŠÖ˜A</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.view.all">
                            <span class="ml-2">‘¼’S“–Ò‚ÌˆÄŒ‰{——</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ‘¼‚Ì’S“–Ò‚ÌˆÄŒ‚à‰{——‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.edit">
                            <span class="ml-2">‘¼’S“–Ò‚ÌˆÄŒ•ÒW</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ‘¼‚Ì’S“–Ò‚ÌˆÄŒ‚à•ÒW‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.hide">
                            <span class="ml-2">ˆÄŒ”ñ•\¦‰»</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ”CˆÓ‚ÌˆÄŒ‚ğˆê“I‚É”ñ•\¦‚É‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.delete">
                            <span class="ml-2">ˆÄŒíœi24ŠÔˆÈ“àj</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                Œë“ü—Í‚µ‚½ˆÄŒ‚ğ24ŠÔˆÈ“à‚ÉŒÀ‚èíœ‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.cancel">
                            <span class="ml-2">ƒLƒƒƒ“ƒZƒ‹\¿</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ©•ª‚ª’S“–‚·‚éˆÄŒ‚ÌƒLƒƒƒ“ƒZƒ‹\¿‚ğs‚¦‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.contract">
                            <span class="ml-2">¬–ñ•ñ</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ©•ª‚ª’S“–‚·‚éˆÄŒ‚Ì¬–ñ•ñ‚ğ“o˜^‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                    </div>
                </div>

                <!-- ©“®”zMİ’è -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">©“®”zMİ’è</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="automail.view">
                            <span class="ml-2">”zMğŒ‰{——</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ©“®”zM‚Ìİ’è‚ğ‰{——‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="automail.edit">
                            <span class="ml-2">”zMğŒ•ÒW</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ©“®”zM‚ÌğŒ‚ğ•ÒW‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                    </div>
                </div>

                <!-- à–±î•ñ -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">à–±î•ñ</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="finance.view">
                            <span class="ml-2">”„ã‰{——</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ”„ãEà–±î•ñ‚ğ‰{——‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="finance.export">
                            <span class="ml-2">ƒf[ƒ^ƒGƒNƒXƒ|[ƒg</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                à–±ƒf[ƒ^‚ğCSVo—Í‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                    </div>
                </div>

                <!-- ƒŒƒ|[ƒgE‰c‹ÆŠÇ— -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">ƒŒƒ|[ƒgE‰c‹ÆŠÇ—</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="report.self">
                            <span class="ml-2">ƒŒƒ|[ƒg‰{——i©•ª‚Ì¬Ñ‚Ì‚İj</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ©•ª‚Ì¬ÑƒŒƒ|[ƒg‚ğ‰{——‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="report.all">
                            <span class="ml-2">‘S‘ÌƒŒƒ|[ƒg‰{——</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ‘S‰c‹Æ’S“–Ò‚Ì¬Ñ‚ğ‰{——‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="report.export">
                            <span class="ml-2">ƒŒƒ|[ƒgCSVo—Í</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ƒŒƒ|[ƒgƒf[ƒ^‚ğCSVo—Í‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="sales.manage">
                            <span class="ml-2">‰c‹Æ’S“–ÒŠÇ—</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ‰c‹Æ’S“–Ò‚ğ’Ç‰ÁEíœ‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                    </div>
                </div>

                <!-- ‰ïĞî•ñ -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">‰ïĞî•ñ</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="company.view">
                            <span class="ml-2">‰ïĞî•ñ‰{——</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ‰ïĞî•ñ‚ğ‰{——‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="company.edit">
                            <span class="ml-2">‰ïĞî•ñC³</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ‰ïĞî•ñ‚ğ•ÒW‚Å‚«‚éŒ ŒÀ
                            </span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="flex justify-end space-x-3">
                <button onclick="closePermissionModal()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                    ƒLƒƒƒ“ƒZƒ‹
                </button>
                <button onclick="savePermissions()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    •Û‘¶
                </button>
            </div>
        </div>
    </div>
    <!-- mainApp end -->

    <!-- ƒAƒ‰[ƒg’Ê’mƒpƒlƒ‹ -->
    <!-- –{•”‚©‚ç‚Ì’Ê’mƒpƒlƒ‹ -->
    <div id="notificationPanel" class="fixed top-20 right-4 w-96 max-h-[600px] bg-white rounded-lg shadow-2xl hidden z-50 overflow-hidden">
        <div class="bg-gradient-to-r from-yellow-500 to-orange-600 text-white p-4">
            <div class="flex items-center justify-between">
                <h3 class="font-bold text-lg flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                    </svg>
                    –{•”‚©‚ç‚Ì’Ê’m
                </h3>
                <button onclick="toggleNotificationPanel()" class="hover:bg-white hover:bg-opacity-20 rounded-lg p-1">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>

        <div class="overflow-y-auto max-h-[500px]">
            <div id="notificationList" class="p-4">
                <p class="text-gray-500 text-center py-8">V‚µ‚¢’Ê’m‚Í‚ ‚è‚Ü‚¹‚ñ</p>
            </div>
        </div>
    </div>

    <!-- ƒAƒ‰[ƒgEƒŠƒ}ƒCƒ“ƒ_[ƒpƒlƒ‹ -->
    <div id="alertPanel" class="fixed top-20 right-4 w-96 max-h-[600px] bg-white rounded-lg shadow-2xl hidden z-50 overflow-hidden">
        <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4">
            <div class="flex items-center justify-between">
                <h3 class="font-bold text-lg flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                    </svg>
                    ƒAƒ‰[ƒgEƒŠƒ}ƒCƒ“ƒ_[
                </h3>
                <button onclick="toggleAlertPanel()" class="hover:bg-white hover:bg-opacity-20 rounded-lg p-1">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>

        <div class="overflow-y-auto max-h-[500px]">
            <!-- ¡“ú‚Ìƒ^ƒXƒN -->
            <div class="border-b">
                <div class="p-4">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                        ¡“ú‚Ìƒ^ƒXƒN
                    </h4>
                    <div id="todayTasks" class="space-y-2">
                        <!-- “®“I‚É¶¬ -->
                    </div>
                </div>
            </div>

            <!-- –¾“ú‚Ì—\’è -->
            <div class="border-b">
                <div class="p-4">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                        –¾“ú‚Ì—\’è
                    </h4>
                    <div id="tomorrowTasks" class="space-y-2">
                        <!-- “®“I‚É¶¬ -->
                    </div>
                </div>
            </div>

            <!-- ©“®ƒAƒ‰[ƒg -->
            <div class="border-b">
                <div class="p-4">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
                        ©“®ƒŠƒ}ƒCƒ“ƒ_[
                    </h4>
                    <div id="autoAlerts" class="space-y-2">
                        <!-- “®“I‚É¶¬ -->
                    </div>
                </div>
            </div>

            <!-- ƒAƒNƒVƒ‡ƒ“ƒ{ƒ^ƒ“ -->
            <div class="p-4 bg-gray-50">
                <button onclick="showSection('settings'); setTimeout(() =&gt; { document.getElementById('notificationSection').scrollIntoView({ behavior: 'smooth' }); }, 100)" class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                    ƒAƒ‰[ƒgİ’è‚ğŠJ‚­
                </button>
            </div>
        </div>
    </div>


    <!-- ‰ïĞî•ñƒvƒŒƒrƒ…[ƒ‚[ƒ_ƒ‹ -->
    <div id="companyPreviewModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto hidden">
        <div class="relative min-h-screen py-12 px-4">
            <div class="relative bg-white rounded-2xl max-w-6xl mx-auto shadow-2xl">
                <!-- ƒ‚[ƒ_ƒ‹ƒwƒbƒ_[ -->
                <div class="sticky top-0 bg-white rounded-t-2xl border-b z-10">
                    <div class="flex justify-between items-center p-6">
                        <h2 class="text-2xl font-bold text-gray-900">‰ïĞî•ñƒvƒŒƒrƒ…[</h2>
                        <div class="flex items-center gap-4">
                            <button onclick="togglePreviewSettings()" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </button>
                            <button onclick="closePreviewModal()" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- •\¦İ’èƒpƒlƒ‹ -->
                    <div id="previewSettings" class="hidden border-t bg-gray-50 p-4">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3">•\¦€–Ú‚Ìİ’è</h3>

                        <!-- ƒƒCƒ“ƒZƒNƒVƒ‡ƒ“iÀÛ‚Ì•\¦‡j -->
                        <div class="mb-3">
                            <h4 class="text-xs font-semibold text-gray-600 mb-2">•\¦ƒZƒNƒVƒ‡ƒ“</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('prText')">
                                    <span>‰ïĞ‚Ì“Á’¥</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('examples')">
                                    <span>{H–—á</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('contact')">
                                    <span>‚¨–â‚¢‡‚í‚¹</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('areas')">
                                    <span>‘Î‰ƒGƒŠƒA</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('services')">
                                    <span>‘Î‰H–</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('gallery')">
                                    <span>Ê^ƒMƒƒƒ‰ƒŠ[</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('insurance')">
                                    <span>‰Á“ü•ÛŒ¯</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('features')">
                                    <span>“–Ğ‚Ì‹­‚İ</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('qualifications')">
                                    <span>•Û—L‘Ši</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('reviews')">
                                    <span>‚¨‹q—l‚Ìº</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('basicInfo')">
                                    <span>‰ïĞŠT—v</span>
                                </label>
                            </div>
                        </div>

                        <!-- ‰ïĞŠT—v‚ÌÚ×€–Ú -->
                        <div>
                            <h4 class="text-xs font-semibold text-gray-600 mb-2">‰ïĞŠT—v‚Ì•\¦€–Ú</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" id="showCompanyName" checked="" onchange="toggleBasicInfoField('companyName')">
                                    <span>‰ïĞ–¼</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" id="showRepresentative" checked="" onchange="toggleBasicInfoField('representative')">
                                    <span>‘ã•\Ò</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" id="showAddress" checked="" onchange="toggleBasicInfoField('address')">
                                    <span>ZŠE’n}</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" id="showEstablished" checked="" onchange="toggleBasicInfoField('established')">
                                    <span>İ—§”N</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ƒvƒŒƒrƒ…[ƒRƒ“ƒeƒ“ƒc -->
                <div class="px-4 sm:px-6 py-6">
                    <!-- ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹ƒZƒNƒVƒ‡ƒ“ -->
                    <div id="mainVisualSection" class="relative mb-12 overflow-hidden" style="display: block;">
                        <div class="relative" style="height: 500px; overflow: hidden; cursor: move;" id="mainVisualContainer">
                            <img id="previewMainVisual" src="https://drive.google.com/thumbnail?id=1USsRV4DxxSk0NCbwB_JsOrepMQ6jF4a2&amp;sz=w1000" alt="" class="w-full h-full object-cover" style="object-position: center;" draggable="false">
                            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/30" style="pointer-events: none; background: linear-gradient(transparent, transparent, rgba(0, 0, 0, 0));"></div>

                            <!-- ‰ïĞ–¼‚Æî•ñ‚ğƒI[ƒo[ƒŒƒC -->
                            <div class="absolute bottom-0 left-0 right-0 p-4 sm:p-8 text-white">
                                <h1 id="previewCompanyNameOverlay" class="text-5xl sm:text-7xl font-bold mb-2 drop-shadow-lg text-center sm:text-left whitespace-nowrap overflow-hidden text-ellipsis text-gray-800" style="min-width: 0px; color: rgb(31, 41, 55);">Š”®‰ïĞ‚ ‚½‚é</h1>
                                <p id="previewTaglineOverlay" class="text-lg sm:text-3xl mb-4 drop-shadow-md text-center sm:text-left text-gray-800" style="color: rgb(31, 41, 55);">ƒtƒ@ƒCƒ“ƒeƒbƒN‚ÍAŠÖ¼ˆê‰~‚ÅŠO•ÇE‰®ª“h‘•A–h…H–AƒŠƒtƒH[ƒ€‚ğèŠ|‚¯‚é“h‘•EƒŠƒtƒH[ƒ€‰ïĞ‚Å‚·</p>
                                <div class="flex flex-wrap gap-4 text-gray-800" style="color: rgb(31, 41, 55);">
                                    <div class="flex items-center bg-white/20 backdrop-blur px-4 py-2 rounded-full text-gray-800" style="color: rgb(31, 41, 55);">
                                        <svg class="w-5 h-5 mr-2 text-gray-800" fill="currentColor" viewBox="0 0 20 20" style="color: rgb(31, 41, 55);">
                                            <path d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm3 1h6v4H7V5zm6 6H7v2h6v-2z" class="text-gray-800" style="color: rgb(31, 41, 55);"></path>
                                        </svg>
                                        <span id="previewEstablishedOverlay" class="text-gray-800" style="color: rgb(31, 41, 55);">2010”N4Œ</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ’²®ƒRƒ“ƒgƒ[ƒ‹ƒgƒOƒ‹ƒ{ƒ^ƒ“ -->
                        <button onclick="toggleImageControls()" class="absolute top-4 right-4 bg-white rounded-lg shadow-lg p-2 hover:bg-gray-50 transition" title="‰æ‘œ’²®">
                            <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
                            </svg>
                        </button>

                        <!-- ’²®ƒRƒ“ƒgƒ[ƒ‹ƒpƒlƒ‹ -->
                        <div id="visualControls" class="absolute top-14 right-4 bg-white rounded-lg shadow-lg p-3 hidden">
                            <div class="text-sm font-medium text-gray-700 mb-2">‰æ‘œ’²®</div>
                            <div class="space-y-3">
                                <div>
                                    <label class="text-xs text-gray-600">ˆÊ’u’²®</label>
                                    <div class="grid grid-cols-3 gap-1 w-32 mx-auto mt-2">
                                        <div></div>
                                        <button onclick="adjustImagePosition('up')" class="p-2 hover:bg-gray-100 rounded" title="ã‚ÉˆÚ“®">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
                                        </button>
                                        <div></div>
                                        <button onclick="adjustImagePosition('left')" class="p-2 hover:bg-gray-100 rounded" title="¶‚ÉˆÚ“®">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                                        </button>
                                        <button onclick="adjustImagePosition('center')" class="p-2 hover:bg-gray-100 rounded" title="’†‰›‚ÉƒŠƒZƒbƒg">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3" stroke-width="2"></circle></svg>
                                        </button>
                                        <button onclick="adjustImagePosition('right')" class="p-2 hover:bg-gray-100 rounded" title="‰E‚ÉˆÚ“®">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                                        </button>
                                        <div></div>
                                        <button onclick="adjustImagePosition('down')" class="p-2 hover:bg-gray-100 rounded" title="‰º‚ÉˆÚ“®">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                        </button>
                                        <div></div>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600">ƒY[ƒ€</label>
                                    <input type="range" id="imageZoom" min="100" max="150" value="100" class="w-full" onchange="adjustImageZoom(this.value)">
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600">–¾‚é‚³</label>
                                    <input type="range" id="imageOpacity" min="20" max="100" value="70" class="w-full" onchange="adjustImageOpacity(this.value)">
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 block mb-1">•¶šF</label>
                                    <div class="flex gap-2">
                                        <button id="textColorWhite" onclick="adjustTextColor('white')" class="flex-1 px-3 py-1.5 bg-gray-800 text-white text-xs rounded hover:bg-gray-700 transition border-2 border-gray-800">
                                            ”’
                                        </button>
                                        <button id="textColorBlack" onclick="adjustTextColor('black')" class="flex-1 px-3 py-1.5 bg-white text-gray-800 text-xs rounded hover:bg-gray-100 transition border-2 border-blue-500">
                                            •
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ƒq[ƒ[ƒZƒNƒVƒ‡ƒ“iƒƒCƒ“ƒrƒWƒ…ƒAƒ‹‚ª‚È‚¢ê‡j -->
                    <div id="heroSection" class="relative bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-12 mb-12 text-white overflow-hidden" style="display: none;">
                        <div class="absolute inset-0 bg-black opacity-10"></div>
                        <div class="relative z-10">
                            <h1 id="previewCompanyNameHero" class="text-2xl sm:text-4xl font-bold mb-2 text-center sm:text-left">Š”®‰ïĞ‚ ‚½‚é</h1>
                            <p id="previewTaglineHero" class="text-base sm:text-lg opacity-90 text-center sm:text-left">ƒtƒ@ƒCƒ“ƒeƒbƒN‚ÍAŠÖ¼ˆê‰~‚ÅŠO•ÇE‰®ª“h‘•A–h…H–AƒŠƒtƒH[ƒ€‚ğèŠ|‚¯‚é“h‘•EƒŠƒtƒH[ƒ€‰ïĞ‚Å‚·</p>
                            <div class="flex flex-wrap gap-4 mt-6">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm3 1h6v4H7V5zm6 6H7v2h6v-2z"></path>
                                    </svg>
                                    <span id="previewEstablishedHero">2010”N4Œ</span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>ÀÑ1000ŒˆÈã</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="p-8">
                    <!-- ‰ïĞ‚Ì“Á’¥E‹­‚İi‘I‚Î‚ê‚é——Rj -->
                    <div id="preview-prText" class="mb-12">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-yellow-500 mr-3 rounded"></span>
                            ‰ïĞ‚Ì“Á’¥E‹­‚İ
                        </h3>
                        <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-8 border border-yellow-200">
                            <p id="previewPrText" class="text-gray-700 leading-relaxed">ƒtƒ@ƒCƒ“ƒeƒbƒN‚ÍAŠÖ¼ˆê‰~‚ÅŠO•ÇE‰®ª“h‘•A–h…H–AƒŠƒtƒH[ƒ€‚ğèŠ|‚¯‚é“h‘•EƒŠƒtƒH[ƒ€‰ïĞ‚Å‚·B‘ã•\Ò©‚ç‚ª’¼ÚŒ©Ï‚à‚è‚ğs‚¤u–{•¨‚Ì©Ğ{Hv‚ğ“O’ê‚µA’†ŠÔƒ}[ƒWƒ“‚ğ”rœ‚·‚é‚±‚Æ‚Å‚•i¿‚È‚ª‚ç“K³‰¿Ši‚ğÀŒ»B“Æ©‚Ì3DH–@‚É‚æ‚éˆÓ ƒTƒCƒfƒBƒ“ƒO‚ÌÄŒ»“h‘•‚â‘½F“h‚è•ª‚¯ƒfƒUƒCƒ“‚È‚ÇA‚‚¢‹Zp—Í‚Å‚¨‹q—l‚Ì‚±‚¾‚í‚è‚ğ×•”‚Ü‚ÅÄŒ»B’·Šú•ÛØ‚Æ’š”J‚ÈƒAƒtƒ^[ƒƒ“ƒeƒiƒ“ƒX‚Å{HŒã‚àˆÀS‚ª‘±‚«‚Ü‚·B</p>
                        </div>
                    </div>

                    <!-- 1. {H–—áƒZƒNƒVƒ‡ƒ“iÅ‰‚ÉÀÑ‚ğŒ©‚¹‚éj -->
                    <div id="preview-examples" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-pink-600 mr-3 rounded"></span>
                            {H–—á
                        </h3>
                        <!-- ƒJƒ‹[ƒZƒ‹ƒRƒ“ƒeƒi -->
                        <div class="relative">
                            <!-- ¶–îˆó -->
                            <button onclick="scrollExamples('left')" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-50 transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>
                            <!-- {H–—áƒJƒ‹[ƒZƒ‹ -->
                            <div id="examplesCarousel" class="overflow-hidden">
                                <div id="previewExamplesList" class="flex gap-4 transition-transform duration-300" style="transform: translateX(-2224px);">
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z20”N ŒËŒš‚Ä‚QF</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                150–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ƒVƒŠƒRƒ“3‰ñ“h‚è</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z50”N ’z45”N</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                250–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ƒtƒb‘f3‰ñ“h‚è</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z40”N ‰®ª•Ç“h‘•</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                130–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ŒõG”}ƒtƒb‘f</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z200”N ƒXƒ}ƒz‚Å‚à</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                1,000–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">Ú×î•ñ</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z20”N ŒËŒš‚Ä‚QF</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                150–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ƒVƒŠƒRƒ“3‰ñ“h‚è</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z50”N ’z45”N</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                250–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ƒtƒb‘f3‰ñ“h‚è</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z40”N ‰®ª•Ç“h‘•</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                130–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ŒõG”}ƒtƒb‘f</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z200”N ƒXƒ}ƒz‚Å‚à</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                1,000–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">Ú×î•ñ</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z20”N ŒËŒš‚Ä‚QF</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                150–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ƒVƒŠƒRƒ“3‰ñ“h‚è</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z50”N ’z45”N</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                250–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ƒtƒb‘f3‰ñ“h‚è</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z40”N ‰®ª•Ç“h‘•</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                130–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ŒõG”}ƒtƒb‘f</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000', '{H‘O')">
                                            <img src="https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000', '{HŒã')">
                                            <img src="https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">’z200”N ƒXƒ}ƒz‚Å‚à</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                1,000–œ‰~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">Ú×î•ñ</p>
                            </div>
                        </div>
                    </div>
                            </div>
                            <!-- ‰E–îˆó -->
                            <button onclick="scrollExamples('right')" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-50 transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>
                        <!-- ƒCƒ“ƒWƒP[ƒ^[ -->
                        <div id="examplesIndicators" class="flex justify-center gap-1 mt-4">
                            <button onclick="goToExample(0)" class="w-2 h-2 rounded-full transition bg-blue-600"></button>
                        
                            <button onclick="goToExample(1)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToExample(2)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToExample(3)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                        </div>
                    </div>

                    <!-- 2. ‚¨‹q—l‚ÌºiM—Š«‚ğ‚‚ß‚éj -->
                    <div id="preview-reviews" class="mb-12 bg-gradient-to-br from-purple-50 via-blue-50 to-purple-50 rounded-2xl p-8" style="display: block;">
                        <div class="mb-4">
                            <h3 class="text-xl font-bold text-gray-900 mb-2 inline-flex items-center">
                                <span class="w-1 h-6 bg-gradient-to-b from-purple-600 to-blue-600 mr-3 rounded"></span>
                                ‚¨‹q—l‚Ìº
                            </h3>
                        </div>

                        <!-- ƒJƒ‹[ƒZƒ‹ƒRƒ“ƒeƒi -->
                        <div class="relative max-w-2xl mx-auto">
                            <!-- ¶–îˆó -->
                            <button onclick="scrollReviews('left')" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-12 z-10 bg-white shadow-lg rounded-full p-3 hover:bg-gray-50 transition">
                                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>

                            <!-- ƒNƒ`ƒRƒ~ƒJƒ‹[ƒZƒ‹ -->
                            <div id="reviewCarousel" class="overflow-hidden px-4">
                                <div id="previewReviewsList" class="flex transition-transform duration-300" style="transform: translateX(0px);">
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">5.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">’š”J‚È‘Î‰‚ÅˆÀS‚µ‚Ä‚¨”C‚¹‚Å‚«‚Ü‚µ‚½BŒ©Ï‚à‚è‚à–¾Šm‚ÅA’Ç‰Á—¿‹à‚È‚­—\’è’Ê‚è‚ÉŠ®¬‚µ‚Ü‚µ‚½B</p>

                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">“Œ‹“s Y—l</div>
                                        <div class="text-xs text-gray-500 mt-1">2024”N1Œ</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        ’¼Ú‚¢‚½‚¾‚¢‚½º
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 text-gray-300" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">4.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">El‚³‚ñ‚Ì‹Zp‚ª‚‚­Adã‚ª‚è‚É–‘«‚µ‚Ä‚¢‚Ü‚·B‹ß—×‚Ö‚Ì”z—¶‚à‚µ‚Á‚©‚è‚µ‚Ä‚¢‚Ü‚µ‚½B</p>

                            
                                <div class="mb-6 flex justify-center">
                                    <img src="data:image/svg+xml,%3Csvg xmlns=" http:="" www.w3.org="" 2000="" svg"="" width="150" height="100" %3e%3crect="" fill="%23ddd" %3e%3ctext="" x="50%25" y="50%25" font-family="Arial" font-size="14" text-anchor="middle" dy=".3em" %3e150x100%3c="" text%3e%3c="" svg%3e"="" class="h-32 rounded-lg object-cover shadow-md" alt="{HÊ^">
                                </div>
                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">_“ŞìŒ§ T—l</div>
                                        <div class="text-xs text-gray-500 mt-1">2024”N2Œ</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        ’¼Ú‚¢‚½‚¾‚¢‚½º
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">5.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">15”N‘O‚ÉŒš‚Ä‚½‰Æ‚ÌŠO•Ç‚ªFåò‚¹‚Ä‚«‚½‚Ì‚ÅˆË—Š‚µ‚Ü‚µ‚½B•¡”Ğ‚©‚çŒ©Ï‚à‚è‚ğæ‚è‚Ü‚µ‚½‚ªAà–¾‚ªˆê”Ô’š”J‚ÅˆÀSŠ´‚ª‚ ‚è‚Ü‚µ‚½B</p>

                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">ç—tŒ§ M—l</div>
                                        <div class="text-xs text-gray-500 mt-1">2024”N2Œ</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        ’¼Ú‚¢‚½‚¾‚¢‚½º
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">5.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">El‚³‚ñ‚Ìˆ¥A‚©‚çn‚Ü‚èA–ˆ“ú‚Ìì‹Æ•ñA‹ß—×‚Ö‚Ì”z—¶‚È‚ÇA‚·‚×‚Ä‚É‚¨‚¢‚Ä–‘«‚Å‚µ‚½B</p>

                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">é‹ÊŒ§ K—l</div>
                                        <div class="text-xs text-gray-500 mt-1">2024”N3Œ</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        ’¼Ú‚¢‚½‚¾‚¢‚½º
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 text-gray-300" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">4.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">Œ©Ï‚à‚è‚ª–¾Šm‚ÅA’Ç‰Á—¿‹à‚à‚È‚­—\’è’Ê‚è‚ÉI‚í‚è‚Ü‚µ‚½Bdã‚ª‚è‚àŠú‘ÒˆÈã‚Å‚·B</p>

                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">“Œ‹“s S—l</div>
                                        <div class="text-xs text-gray-500 mt-1">2024”N3Œ</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        ’¼Ú‚¢‚½‚¾‚¢‚½º
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                            </div>

                            <!-- ‰E–îˆó -->
                            <button onclick="scrollReviews('right')" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-12 z-10 bg-white shadow-lg rounded-full p-3 hover:bg-gray-50 transition">
                                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>

                        <!-- ƒCƒ“ƒWƒP[ƒ^[ -->
                        <div id="reviewIndicators" class="flex justify-center gap-2 mt-6">
                            <button onclick="goToReview(0)" class="w-3 h-3 rounded-full transition bg-blue-600 scale-125"></button>
                        
                            <button onclick="goToReview(1)" class="w-3 h-3 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToReview(2)" class="w-3 h-3 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToReview(3)" class="w-3 h-3 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToReview(4)" class="w-3 h-3 rounded-full transition bg-gray-300"></button>
                        </div>
                    </div>

                    <!-- 10. ‚¨–â‚¢‡‚í‚¹ƒZƒNƒVƒ‡ƒ“iÅICTAj -->
                    <div id="preview-contact" class="mb-12">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-purple-600 mr-3 rounded"></span>
                            ‚¨–â‚¢‡‚í‚¹
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-600">‚¨“d˜b‚Å‚Ì‚¨–â‚¢‡‚í‚¹</p>
                                        <p class="text-lg font-semibold text-gray-900">0120-XXX-XXX</p>
                                        <p class="text-xs text-gray-500">ó•tŠÔ: 9:00-18:00i”N’†–³‹xj</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <div class="overflow-hidden min-w-0">
                                        <p class="text-sm text-gray-600">ƒ[ƒ‹‚Å‚Ì‚¨–â‚¢‡‚í‚¹</p>
                                        <p class="text-sm sm:text-base font-semibold text-gray-900 break-all">info@gaihekikuraberu.com</p>
                                        <p class="text-xs text-gray-500">24ŠÔó•t’†</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 9‚Â‚Ì“Á“TÚ×ƒZƒNƒVƒ‡ƒ“ -->
                    <div class="mb-12 bg-gradient-to-br from-orange-50 via-orange-100 to-red-50 rounded-2xl p-10">
                        <div class="text-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">?? ¡‚¾‚¯I9‚Â‚Ì–³—¿“Á“T</h3>
                            <p class="text-sm text-gray-600">ŠúŠÔŒÀ’èƒLƒƒƒ“ƒy[ƒ“À{’†I</p>
                        </div>

                        <div class="max-w-4xl mx-auto mb-6 px-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- “Á“T1: –³—¿“_ŒŸ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">–³—¿“_ŒŸ</h4>
                                            <p class="text-xs text-gray-600">ƒvƒ‚Ì–Ú‚ÅŠO•ÇE‰®ª‚ğ“O’êƒ`ƒFƒbƒNI‚¨‰Æ‚Ìó‘Ô‚ğÚ×‚É•ñ</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T2: ƒGƒŠƒAÅ’á‰¿Ši•ÛØ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ƒGƒŠƒAÅ’á‰¿Ši•ÛØ</h4>
                                            <p class="text-xs text-gray-600">’nˆæÅˆÀ’l‚ğ‚¨–ñ‘©I‘¼Ğ‚æ‚è‚‚¯‚ê‚Î’lˆø‚«‘Î‰</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T3: ‚¨’lˆø‚«ŒğÂ‘ãs -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">‚¨’lˆø‚«ŒğÂ‘ãs</h4>
                                            <p class="text-xs text-gray-600">‘¼ĞŒ©Ï‚à‚è‚ğ‚¨‚¿‚È‚çA‘ã‚í‚è‚ÉŒğÂ‚µ‚ÄÅˆÀ’l‚ğÀŒ»</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T4: •¬‹à\¿ƒTƒ|[ƒg -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">•¬‹à\¿ƒTƒ|[ƒg</h4>
                                            <p class="text-xs text-gray-600">Å‘å10?70–œ‰~IŠeí•¬‹à‚Ì\¿è‘±‚«‚ğŠ®‘SƒTƒ|[ƒg</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T5: ‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">???</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg</h4>
                                            <p class="text-xs text-gray-600">‘ä•—EáŠQ“™‚Ì‘¹ŠQ‚É‰ÎĞ•ÛŒ¯“K—p‰Â”\I–³—¿‚Å’²¸</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T6: ‚¨’f‚è‘ãsƒT[ƒrƒX -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">‚¨’f‚è‘ãsƒT[ƒrƒX</h4>
                                            <p class="text-xs text-gray-600">¬–ñ‚Ì‘¼Ğ‚Ö‚Ì‚¨’f‚è‚à‘ãs‰Â”\I–Ê“|‚È‚â‚èæ‚è•s—v</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T7: –³—¿‚¨“d˜bƒTƒ|[ƒg -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">–³—¿‚¨“d˜bƒTƒ|[ƒg</h4>
                                            <p class="text-xs text-gray-600">H–Š®—¹Œã‚àˆÀSI365“ú“d˜bƒTƒ|[ƒg‚Å‚¨”Y‚İ‰ğŒˆ</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T8: –K–â‹ÆÒƒ}ƒjƒ…ƒAƒ‹i’æ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">–K–â‹ÆÒƒ}ƒjƒ…ƒAƒ‹i’æ</h4>
                                            <p class="text-xs text-gray-600">ˆ«“¿‹ÆÒ‚ÌèŒû‚â‘Îˆ–@‚ğŠ®‘S‰ğàIˆÀSƒKƒCƒh</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T9: ‚¨—F’BĞ‰îƒLƒƒƒ“ƒy[ƒ“ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">‚¨—F’BĞ‰îƒLƒƒƒ“ƒy[ƒ“</h4>
                                            <p class="text-xs text-gray-600">Ğ‰î‚Å‘o•û‚É“Á“TIÅ‘å30,000‰~•ª‚ÌƒMƒtƒgƒJ[ƒh</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-6">
                            <button class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-10 py-4 rounded-lg hover:shadow-xl transition font-bold text-lg transform hover:scale-105">
                                ¡‚·‚®–³—¿Œ©Ï‚à‚è‚ğˆË—Š‚·‚é
                            </button>
                            <p class="text-xs text-gray-500 mt-2">¦24ŠÔˆÈ“à‚É‚²˜A—‚¢‚½‚µ‚Ü‚·</p>
                        </div>
                    </div>



                    <!-- 8. ‘Î‰ƒGƒŠƒAƒZƒNƒVƒ‡ƒ“ -->
                    <div id="preview-areas" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-orange-600 mr-3 rounded"></span>
                            ‘Î‰ƒGƒŠƒA
                        </h3>
                        <div class="bg-white rounded-xl p-6 border border-gray-200">
                            <div id="previewCitiesContainer"></div>
                        </div>
                    </div>

                    <!-- 4. ‘Î‰‰Â”\‚ÈH–iƒT[ƒrƒX“à—ej -->
                    <div id="preview-services" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-green-600 mr-3 rounded"></span>
                            ‘Î‰‰Â”\‚ÈH–
                        </h3>
                        <div id="previewServicesList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">ŠO•Ç“h‘•</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium text-gray-800">ŠO•ÇƒJƒo[H–@</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">ŠO•Ç’£‘Ö‚¦</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">‰®ª“h‘•</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">‰®ã–h…</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium text-gray-800">‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">‰®ªƒJƒo[H–@</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">ŠO•Ç•âC</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium text-gray-800">‰®ª•âC</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">ƒxƒ‰ƒ“ƒ_–h…</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">?</span>
                            <span class="text-sm font-medium text-gray-800">ŠO•Ç‰J˜R‚èC‘U</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">?</span>
                            <span class="text-sm font-medium text-gray-800">“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒj</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">?</span>
                            <span class="text-sm font-medium text-gray-800">“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™j</span>
                        </div></div>
                    </div>

                    <!-- CTAƒ{ƒ^ƒ“i1‰ñ–Újíœ -->
                    <div class="hidden">
                        <div class="text-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">?? ¡‚¾‚¯I9‚Â‚Ì–³—¿“Á“T</h3>
                            <p class="text-sm text-gray-600">ŠúŠÔŒÀ’èƒLƒƒƒ“ƒy[ƒ“À{’†I</p>
                        </div>

                        <div class="max-w-4xl mx-auto mb-6 px-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- “Á“T1: –³—¿“_ŒŸ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">–³—¿“_ŒŸ</h4>
                                            <p class="text-xs text-gray-600">ƒvƒ‚Ì–Ú‚ÅŠO•ÇE‰®ª‚ğ“O’êƒ`ƒFƒbƒNI‚¨‰Æ‚Ìó‘Ô‚ğÚ×‚É•ñ</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T2: ƒGƒŠƒAÅ’á‰¿Ši•ÛØ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ƒGƒŠƒAÅ’á‰¿Ši•ÛØ</h4>
                                            <p class="text-xs text-gray-600">’nˆæÅˆÀ’l‚ğ‚¨–ñ‘©I‘¼Ğ‚æ‚è‚‚¯‚ê‚Î’lˆø‚«‘Î‰</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T3: ‚¨’lˆø‚«ŒğÂ‘ãs -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">‚¨’lˆø‚«ŒğÂ‘ãs</h4>
                                            <p class="text-xs text-gray-600">‘¼ĞŒ©Ï‚à‚è‚ğ‚¨‚¿‚È‚çA‘ã‚í‚è‚ÉŒğÂ‚µ‚ÄÅˆÀ’l‚ğÀŒ»</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T4: •¬‹à\¿ƒTƒ|[ƒg -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">•¬‹à\¿ƒTƒ|[ƒg</h4>
                                            <p class="text-xs text-gray-600">Å‘å10?70–œ‰~IŠeí•¬‹à‚Ì\¿è‘±‚«‚ğŠ®‘SƒTƒ|[ƒg</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T5: ‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">???</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg</h4>
                                            <p class="text-xs text-gray-600">‘ä•—EáŠQ“™‚Ì‘¹ŠQ‚É‰ÎĞ•ÛŒ¯“K—p‰Â”\I–³—¿‚Å’²¸</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T6: ‚¨’f‚è‘ãsƒT[ƒrƒX -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">‚¨’f‚è‘ãsƒT[ƒrƒX</h4>
                                            <p class="text-xs text-gray-600">¬–ñ‚Ì‘¼Ğ‚Ö‚Ì‚¨’f‚è‚à‘ãs‰Â”\I–Ê“|‚È‚â‚èæ‚è•s—v</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T8: –K–â‹ÆÒƒ}ƒjƒ…ƒAƒ‹ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">–K–â‹ÆÒƒ}ƒjƒ…ƒAƒ‹i’æ</h4>
                                            <p class="text-xs text-gray-600">ˆ«“¿‹ÆÒ‚ÌèŒû‚â‘Îˆ–@‚ğŠ®‘S‰ğàIˆÀSƒKƒCƒh</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T7: –³—¿‚¨“d˜bƒTƒ|[ƒg -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">–³—¿‚¨“d˜bƒTƒ|[ƒg</h4>
                                            <p class="text-xs text-gray-600">H–Š®—¹Œã‚àˆÀSI365“ú“d˜bƒTƒ|[ƒg‚Å‚¨”Y‚İ‰ğŒˆ</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- “Á“T8: ‚¨—F’BĞ‰îƒLƒƒƒ“ƒy[ƒ“ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">‚¨—F’BĞ‰îƒLƒƒƒ“ƒy[ƒ“</h4>
                                            <p class="text-xs text-gray-600">Ğ‰î‚Å‘o•û‚É“Á“TIÅ‘å30,000‰~•ª‚ÌƒMƒtƒgƒJ[ƒh</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <button class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-10 py-4 rounded-lg hover:shadow-xl transition font-bold text-lg transform hover:scale-105">
                                ¡‚·‚®–³—¿Œ©Ï‚à‚è‚ğˆË—Š‚·‚é
                            </button>
                            <p class="text-xs text-gray-500 mt-2">¦24ŠÔˆÈ“à‚É‚²˜A—‚¢‚½‚µ‚Ü‚·</p>
                        </div>
                    </div>

                    <!-- 5. Ê^ƒMƒƒƒ‰ƒŠ[ƒZƒNƒVƒ‡ƒ“id–‚Ì—lqj -->
                    <div id="preview-gallery" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-purple-600 mr-3 rounded"></span>
                            •Û—L‘Ši
                        </h3>
                        <div id="qualificationsList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ˆê‹‰“h‘•‹Z”\m</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">“ñ‹‰“h‘•‹Z”\m</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">‘«ê‘g—§ì‹Æå”CÒ</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">Î–Èì‹Æå”CÒ</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ŠO•Çf’fm</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ŠO•Ç—ò‰»f’fm</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ŠO•ÇƒAƒhƒoƒCƒU[</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">‰®ªf’fm</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">‰J˜R‚èf’fm</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">‘‰ü’z‘Š’kˆõ</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">‘æ“ñí“d‹CH–m</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">—L‹@—nÜì‹Æå”CÒ</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ˆê‹‰–h…{H‹Z”\m</span>
                    </div></div>
                    </div>

                    <div id="preview-insurance" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-indigo-600 mr-3 rounded"></span>
                            ‰Á“ü•ÛŒ¯
                        </h3>
                        <div id="insuranceList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">H–•ÛŒ¯</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">”…Ó”C•ÛŒ¯</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ƒŠƒtƒH[ƒ€àêár•ÛŒ¯</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ŒšİH–•ÛŒ¯</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">¿•‰‹ÆÒ”…Ó”C•ÛŒ¯</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">¶Y•¨”…Ó”C•ÛŒ¯</span>
                    </div></div>
                    </div>

                    <!-- CTAƒ{ƒ^ƒ“i2‰ñ–Új -->
                    <div class="text-center py-8 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-3">ˆÀS‚Ì•ÛØ‘Ì§‚Å‚¨‹q—l‚ğƒTƒ|[ƒg</h3>
                        <button class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg hover:shadow-lg transition font-semibold">
                            ‚Ü‚¸‚Í–³—¿‘Š’k‚©‚ç
                        </button>
                    </div>

                    <!-- 7. “–Ğ‚Ì‹­‚İi“Á•Ê‚ÈƒƒŠƒbƒgj -->
                    <div id="preview-features" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-orange-600 mr-3 rounded"></span>
                            “–Ğ‚Ì‹­‚İ
                        </h3>
                        <div id="previewFeaturesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">Õ”ME’f”M“h—¿’ñˆÄ‰Â”\</h4>
                    </div><div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">ƒGƒNƒXƒeƒŠƒAi’ëE’“ÔêEŠO\j</h4>
                    </div><div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">‘¾—zŒõƒpƒlƒ‹’E’…i“P‹ŠÜ‚Şj</h4>
                    </div><div class="bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">’ñŒgæƒ[ƒ“—L‚è</h4>
                    </div><div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">ƒNƒŒƒWƒbƒgƒJ[ƒh•¥‚¢‰Â</h4>
                    </div><div class="bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg</h4>
                    </div><div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">•¬‹à\¿ƒTƒ|[ƒg</h4>
                    </div><div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">Œš’z‹–‰ÂØ</h4>
                    </div><div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">?</div>
                        <h4 class="font-semibold text-gray-900 mb-1">ŒõG”}“h—¿’ñˆÄ‰Â</h4>
                    </div></div>
                    </div>

                    <!-- 6. •Û—L‘ŠiE‰Á“ü•ÛŒ¯iˆÀSŠ´j -->
                    <div id="preview-qualifications" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-indigo-600 mr-3 rounded"></span>
                            Ê^ƒMƒƒƒ‰ƒŠ[
                        </h3>

                        <!-- ƒJƒ‹[ƒZƒ‹ƒRƒ“ƒeƒi -->
                        <div class="relative">
                            <!-- ¶–îˆó -->
                            <button onclick="scrollGallery('left')" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-50 transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>

                            <!-- ƒMƒƒƒ‰ƒŠ[ƒJƒ‹[ƒZƒ‹ -->
                            <div id="galleryCarousel" class="overflow-hidden">
                                <div id="previewGalleryList" class="flex gap-4 transition-transform duration-300" style="transform: translateX(-6688px);">
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ1')">
                        <img src="https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ1" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ2')">
                        <img src="https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ2" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ3')">
                        <img src="https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ3" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ4')">
                        <img src="https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ4" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ5')">
                        <img src="https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ5" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ6')">
                        <img src="https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ6" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ7')">
                        <img src="https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ7" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ8')">
                        <img src="https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ8" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ9')">
                        <img src="https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ9" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ10')">
                        <img src="https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ10" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ11')">
                        <img src="https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ11" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ1')">
                        <img src="https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ1" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ2')">
                        <img src="https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ2" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ3')">
                        <img src="https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ3" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ4')">
                        <img src="https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ4" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ5')">
                        <img src="https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ5" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ6')">
                        <img src="https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ6" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ7')">
                        <img src="https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ7" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ8')">
                        <img src="https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ8" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ9')">
                        <img src="https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ9" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ10')">
                        <img src="https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ10" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ11')">
                        <img src="https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ11" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ1')">
                        <img src="https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ1" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ2')">
                        <img src="https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ2" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ3')">
                        <img src="https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ3" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ4')">
                        <img src="https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ4" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ5')">
                        <img src="https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ5" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ6')">
                        <img src="https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ6" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ7')">
                        <img src="https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ7" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ8')">
                        <img src="https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ8" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ9')">
                        <img src="https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ9" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ10')">
                        <img src="https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ10" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ11')">
                        <img src="https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ11" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                </div>
                            </div>

                            <!-- ‰E–îˆó -->
                            <button onclick="scrollGallery('right')" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-50 transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>

                        <!-- ƒCƒ“ƒWƒP[ƒ^[ -->
                        <div id="galleryIndicators" class="flex justify-center gap-1 mt-4">
                        <button onclick="goToGalleryImage(0)" class="w-2 h-2 rounded-full transition bg-blue-600"></button>
                    
                        <button onclick="goToGalleryImage(1)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(2)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(3)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(4)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(5)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(6)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(7)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(8)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(9)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(10)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    </div>
                    </div>

                    <!-- 9. ‰ïĞŠT—viM—Š«‚Ì•â‹­j -->
                    <div id="preview-basicInfo" class="mb-12">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-blue-600 mr-3 rounded"></span>
                            ‰ïĞŠT—v
                        </h3>
                        <div class="bg-gray-50 rounded-xl p-8">
                            <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div id="basicInfo-companyName">
                                    <dt class="text-sm font-medium text-gray-600">‰ïĞ–¼</dt>
                                    <dd id="previewCompanyNameFull" class="mt-1 text-base sm:text-lg text-gray-900 break-words">Š”®‰ïĞ‚ ‚½‚é</dd>
                                </div>
                                <div id="basicInfo-representative">
                                    <dt class="text-sm font-medium text-gray-600">‘ã•\Ò</dt>
                                    <dd id="previewRepresentative" class="mt-1 text-lg text-gray-900">¬òƒˆê</dd>
                                </div>
                                <div id="basicInfo-address">
                                    <dt class="text-sm font-medium text-gray-600">Šİ’n</dt>
                                    <dd id="previewAddress" class="mt-1 text-lg text-gray-900">§2250024 _“ŞìŒ§‰¡•lsÂ—t‹æsƒP”ö’¬537-3</dd>
                                </div>
                                <div id="basicInfo-established">
                                    <dt class="text-sm font-medium text-gray-600">İ—§</dt>
                                    <dd id="previewEstablishedDate" class="mt-1 text-lg text-gray-900">2010”N4Œ</dd>
                                </div>
                            </dl>
                        </div>
                        <!-- Googleƒ}ƒbƒv–„‚ß‚İ -->
                        <div class="mt-4" id="basicInfo-map">
                            <h4 class="text-sm font-medium text-gray-600 mb-2">ƒAƒNƒZƒX</h4>
                            <div id="googleMapContainer" class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                    <iframe width="100%" height="100%" frameborder="0" style="border:0" src="https://www.google.com/maps?q=%E3%80%922250024%20%E7%A5%9E%E5%A5%88%E5%B7%9D%E7%9C%8C%E6%A8%AA%E6%B5%9C%E5%B8%82%E9%9D%92%E8%91%89%E5%8C%BA%E5%B8%82%E3%82%B1%E5%B0%BE%E7%94%BA537-3&amp;output=embed" allowfullscreen="">
                    </iframe>
                </div>
                        </div>
                        <!-- x“Xƒ}ƒbƒvƒRƒ“ƒeƒi[ -->
                        <div id="branchMapsContainer" class="mt-6" style="display: block;">
                        <h4 class="text-sm font-medium text-gray-600 mb-3 mt-4">x“Xî•ñ</h4>
                        <div class="space-y-4">
                    </div><div class="border rounded-lg p-4 bg-gray-50">
                            <h5 class="text-lg font-semibold text-gray-800 mb-2">–¼ŒÃ‰®x“X</h5>
                            <p class="text-sm text-gray-600 mb-3">
                                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                –¼ŒÃ‰®1-1
                            </p>
                            <div class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                                <iframe width="100%" height="100%" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&amp;q=%E5%90%8D%E5%8F%A4%E5%B1%8B1-1&amp;zoom=16&amp;language=ja" allowfullscreen="">
                                </iframe>
                            </div>
                        </div><div class="border rounded-lg p-4 bg-gray-50">
                            <h5 class="text-lg font-semibold text-gray-800 mb-2">–kŠC“¹</h5>
                            <p class="text-sm text-gray-600 mb-3">
                                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                –Ô‘–1-1
                            </p>
                            <div class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                                <iframe width="100%" height="100%" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&amp;q=%E7%B6%B2%E8%B5%B01-1&amp;zoom=16&amp;language=ja" allowfullscreen="">
                                </iframe>
                            </div>
                        </div><div></div></div>
                    </div>

                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-600">‚¨“d˜b‚Å‚Ì‚¨–â‚¢‡‚í‚¹</p>
                                        <p class="text-lg font-semibold text-gray-900">0120-XXX-XXX</p>
                                        <p class="text-xs text-gray-500">ó•tŠÔ: 9:00-18:00i”N’†–³‹xj</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <div class="overflow-hidden min-w-0">
                                        <p class="text-sm text-gray-600">ƒ[ƒ‹‚Å‚Ì‚¨–â‚¢‡‚í‚¹</p>
                                        <p class="text-sm sm:text-base font-semibold text-gray-900 break-all">info@gaihekikuraberu.com</p>
                                        <p class="text-xs text-gray-500">24ŠÔó•t’†</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Å‰º•”CTA -->
                    <div class="text-center py-8 border-t">
                        <h3 class="text-2xl font-bold text-gray-900 mb-4">¡‚·‚®–³—¿Œ©Ï‚à‚è‚ğˆË—Š</h3>
                        <p class="text-gray-600 mb-6">‚¨‹CŒy‚É‚¨–â‚¢‡‚í‚¹‚­‚¾‚³‚¢</p>
                        <button class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 py-4 rounded-lg hover:shadow-xl transition text-lg font-semibold">
                            –³—¿Œ©Ï‚à‚è‚ğˆË—Š‚·‚é
                        </button>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    

    <script>
        // ƒƒjƒ…[ƒgƒOƒ‹‹@”\
        function toggleMenu() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                sidebar.classList.toggle('-translate-x-full');
            }
        }

        // ƒ†[ƒU[ó‘ÔŠÇ—
        let currentUser = 'ŠÇ—Ò';

        // x“Xî•ñŠÇ—
        window.branches = [];
        let branchIdCounter = 0;

        // x“X’Ç‰Á
        function addBranch() {
            const branchId = ++branchIdCounter;
            const branch = {
                id: branchId,
                name: '',
                address: ''
            };
            window.branches.push(branch);

            const branchList = document.getElementById('branchList');
            const branchDiv = document.createElement('div');
            branchDiv.id = `branch-${branchId}`;
            branchDiv.className = 'border rounded-lg p-4 mb-3 bg-gray-50';
            branchDiv.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h4 class="font-medium text-gray-700">x“X ${branchId}</h4>
                    <button onclick="removeBranch(${branchId})" class="text-red-600 hover:text-red-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </button>
                </div>
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">x“X–¼</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: ‰¡•lx“X"
                               onchange="updateBranch(${branchId}, 'name', this.value)">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ZŠ</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: _“ŞìŒ§‰¡•ls..."
                               onchange="updateBranch(${branchId}, 'address', this.value)">
                    </div>
                </div>
            `;
            branchList.appendChild(branchDiv);
        }

        // x“Xî•ñXV
        function updateBranch(branchId, field, value) {
            const branch = window.branches.find(b => b.id === branchId);
            if (branch) {
                branch[field] = value;
                updateBranchMaps();
            }
        }

        // x“Xíœ
        function removeBranch(branchId) {
            window.branches = window.branches.filter(b => b.id !== branchId);
            const branchDiv = document.getElementById(`branch-${branchId}`);
            if (branchDiv) {
                branchDiv.remove();
            }
            updateBranchMaps();
        }

        // x“Xƒ}ƒbƒvXV
        function updateBranchMaps() {
            // ƒvƒŒƒrƒ…[‚Ìx“Xƒ}ƒbƒv‚ğXV
            const branchMapsContainer = document.getElementById('branchMapsContainer');
            if (branchMapsContainer) {
                const validBranches = window.branches.filter(b => b.name && b.address);
                if (validBranches.length > 0) {
                    branchMapsContainer.innerHTML = `
                        <h4 class="text-sm font-medium text-gray-600 mb-3 mt-4">x“Xî•ñ</h4>
                        <div class="space-y-4">
                    `;
                    validBranches.forEach((branch, index) => {
                        const mapDiv = document.createElement('div');
                        mapDiv.className = 'border rounded-lg p-4 bg-gray-50';
                        mapDiv.innerHTML = `
                            <h5 class="text-lg font-semibold text-gray-800 mb-2">${branch.name}</h5>
                            <p class="text-sm text-gray-600 mb-3">
                                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                ${branch.address}
                            </p>
                            <div class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                                <iframe
                                    width="100%"
                                    height="100%"
                                    frameborder="0"
                                    style="border:0"
                                    src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${encodeURIComponent(branch.address)}&zoom=16&language=ja"
                                    allowfullscreen>
                                </iframe>
                            </div>
                        `;
                        branchMapsContainer.appendChild(mapDiv);
                    });
                    const closeDiv = document.createElement('div');
                    closeDiv.innerHTML = '</div>';
                    branchMapsContainer.appendChild(closeDiv);
                    branchMapsContainer.style.display = 'block';
                } else {
                    branchMapsContainer.style.display = 'none';
                }
            }
        }
        let userRole = 'admin';

        // ƒƒOƒCƒ“ˆ—
        // GAS API‚ÌURLienv-loader.js‚©‚çæ“¾j
        const GAS_URL = ENV.GAS_URL;

        // ƒXƒe[ƒ^ƒX‚ğƒXƒvƒŒƒbƒhƒV[ƒg‚©‚ç“Ç‚İ‚ŞŠÖ”
        async function loadMerchantStatus(merchantId) {
            try {
                const result = await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_status_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const script = document.createElement('script');

                    window[callbackName] = (data) => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        resolve(data);
                    };

                    script.src = `${GAS_URL}?action=getMerchantStatus&merchantId=${encodeURIComponent(merchantId)}&callback=${callbackName}`;
                    script.onerror = (error) => {
                        console.error('[loadMerchantStatus] Error:', error);
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        reject(new Error('JSONP request failed'));
                    };
                    document.body.appendChild(script);
                });

                if (result.success) {
                    const statusSpan = document.getElementById('merchantStatus');
                    if (statusSpan) {
                        // ƒXƒvƒŒƒbƒhƒV[ƒg‚ÌƒXƒe[ƒ^ƒX‚ğ‚»‚Ì‚Ü‚Ü•\¦iƒAƒNƒeƒBƒuAˆê’â~A‹x~j
                        let displayStatus = result.status || '‹x~';

                        // ³‹K‰»i”O‚Ì‚½‚ßj
                        if (displayStatus === '‰Ò“­’†' || displayStatus === 'active') {
                            displayStatus = 'ƒAƒNƒeƒBƒu';
                        } else if (displayStatus === 'ˆê’â~’†' || displayStatus === 'paused') {
                            displayStatus = 'ˆê’â~';
                        }

                        statusSpan.textContent = displayStatus;

                        // ƒXƒe[ƒ^ƒX‚É‰‚¶‚½F‚ğİ’è
                        statusSpan.classList.remove('bg-green-100', 'text-green-800', 'border-green-300');
                        statusSpan.classList.remove('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
                        statusSpan.classList.remove('bg-gray-100', 'text-gray-800', 'border-gray-300');
                        statusSpan.classList.remove('bg-red-100', 'text-red-800', 'border-red-300');

                        if (displayStatus === 'ƒAƒNƒeƒBƒu') {
                            statusSpan.classList.add('bg-green-100', 'text-green-800', 'border-green-300');
                        } else if (displayStatus === 'ˆê’â~') {
                            statusSpan.classList.add('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
                        } else if (displayStatus === '‹x~') {
                            statusSpan.classList.add('bg-red-100', 'text-red-800', 'border-red-300');
                        } else {
                            statusSpan.classList.add('bg-gray-100', 'text-gray-800', 'border-gray-300');
                        }
                    }
                }
            } catch (error) {
                console.error('[loadMerchantStatus] Error:', error);
            }
        }

        // ƒwƒbƒ_[‚ÌƒXƒe[ƒ^ƒX•\¦‚ğXV‚·‚éŠÖ”
        function updateHeaderStatus(status) {
            const statusSpan = document.getElementById('merchantStatus');
            if (!statusSpan) return;

            // ³‹K‰»
            let displayStatus = status;
            if (displayStatus === '‰Ò“­’†' || displayStatus === 'active') {
                displayStatus = 'ƒAƒNƒeƒBƒu';
            } else if (displayStatus === 'ˆê’â~’†' || displayStatus === 'paused') {
                displayStatus = 'ˆê’â~';
            }

            statusSpan.textContent = displayStatus;

            // ƒXƒe[ƒ^ƒX‚É‰‚¶‚½F‚ğİ’è
            statusSpan.classList.remove('bg-green-100', 'text-green-800', 'border-green-300');
            statusSpan.classList.remove('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
            statusSpan.classList.remove('bg-gray-100', 'text-gray-800', 'border-gray-300');
            statusSpan.classList.remove('bg-red-100', 'text-red-800', 'border-red-300');

            if (displayStatus === 'ƒAƒNƒeƒBƒu') {
                statusSpan.classList.add('bg-green-100', 'text-green-800', 'border-green-300');
            } else if (displayStatus === 'ˆê’â~') {
                statusSpan.classList.add('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
            } else if (displayStatus === '‹x~') {
                statusSpan.classList.add('bg-red-100', 'text-red-800', 'border-red-300');
            } else {
                statusSpan.classList.add('bg-gray-100', 'text-gray-800', 'border-gray-300');
            }

            console.log('[updateHeaderStatus] Updated status to:', displayStatus);
        }

        // ‰Á–¿“Xƒf[ƒ^‚ğæ“¾‚·‚éŠÖ”
        async function fetchMerchantData(merchantId) {
            console.log('[fetchMerchantData] Fetching data for:', merchantId);
            try {
                // JSONP ‚Åƒf[ƒ^æ“¾
                const result = await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_data_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const script = document.createElement('script');

                    window[callbackName] = (data) => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        resolve(data);
                    };

                    script.src = `${GAS_URL}?action=getMerchantData&merchantId=${encodeURIComponent(merchantId)}&callback=${callbackName}`;
                    script.onerror = () => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        reject(new Error('JSONP request failed'));
                    };
                    document.body.appendChild(script);
                });

                console.log('[fetchMerchantData] Response:', result);
                console.log('[fetchMerchantData] result.success:', result.success);
                console.log('[fetchMerchantData] result.data:', result.data);
                console.log('[fetchMerchantData] result.error:', result.error);

                if (result.success && result.data) {
                    window.merchantData = result.data;
                    window.merchantId = merchantId; // merchantId‚àƒZƒbƒg

                    // ‰c‹Æ’S“–Ò–¼‚ğ–¾¦“I‚É’ŠoiX—ñj
                    const salesPersonName = result.data['‰c‹Æ’S“–Ò–¼'] || result.data.salesPersonName || result.data.sales_person_name || '';
                    if (salesPersonName) {
                        window.merchantData.salesPerson = salesPersonName;
                        console.log('[fetchMerchantData] Sales person extracted:', salesPersonName);
                    }

                    console.log('[fetchMerchantData] Merchant data loaded:', window.merchantData);
                    console.log('[fetchMerchantData] merchantId set to:', window.merchantId);
                    console.log('[fetchMerchantData] salesPerson:', window.merchantData.salesPerson);
                } else {
                    console.warn('[fetchMerchantData] No data returned - success:', result.success, 'data:', result.data);
                    window.merchantData = {};
                }
            } catch (error) {
                console.error('[fetchMerchantData] Error:', error);
                window.merchantData = {};
            }
        }

        // ”Ä—pGAS APIŒÄ‚Ño‚µiJSONPj
        async function callGasApi(action, params = {}) {
            console.log('[callGasApi] Calling action:', action, 'with params:', params);
            return new Promise((resolve, reject) => {
                const callbackName = 'jsonp_' + action + '_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                const script = document.createElement('script');

                window[callbackName] = (data) => {
                    delete window[callbackName];
                    if (script.parentNode) {
                        script.parentNode.removeChild(script);
                    }
                    resolve(data);
                };

                const queryParams = new URLSearchParams({
                    action: action,
                    callback: callbackName,
                    ...params
                });

                script.src = `${window.ENV.GAS_URL}?${queryParams.toString()}`;
                script.onerror = () => {
                    delete window[callbackName];
                    if (script.parentNode) {
                        script.parentNode.removeChild(script);
                    }
                    reject(new Error('Script load error'));
                };

                document.body.appendChild(script);
            });
        }

        // ‰c‹Æ’S“–Ò–¼•ÒW
        function editSalesPerson() {
            const userRoleDiv = document.getElementById('userRole');
            const userRoleInput = document.getElementById('userRoleInput');

            userRoleInput.value = userRoleDiv.textContent;
            userRoleDiv.classList.add('hidden');
            userRoleInput.classList.remove('hidden');
            userRoleInput.focus();
            userRoleInput.select();
        }

        // ‰c‹Æ’S“–Ò–¼•Û‘¶
        async function saveSalesPerson() {
            const userRoleDiv = document.getElementById('userRole');
            const userRoleInput = document.getElementById('userRoleInput');
            const newSalesPerson = userRoleInput.value.trim();

            if (!newSalesPerson) {
                alert('‰c‹Æ’S“–Ò–¼‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢');
                return;
            }

            try {
                // JSONP ‚Åƒf[ƒ^•Û‘¶
                const result = await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_sales_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const script = document.createElement('script');

                    window[callbackName] = (data) => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        resolve(data);
                    };

                    script.src = `${GAS_URL}?action=updateSalesPerson&merchantId=${encodeURIComponent(currentUser)}&salesPerson=${encodeURIComponent(newSalesPerson)}&callback=${callbackName}`;
                    script.onerror = () => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        reject(new Error('JSONP request failed'));
                    };
                    document.body.appendChild(script);
                });

                if (result.success) {
                    // ¬Œ÷ - •\¦‚ğXV
                    userRoleDiv.textContent = newSalesPerson;
                    if (window.merchantData) {
                        window.merchantData.salesPerson = newSalesPerson;
                    }
                } else {
                    // ¸”s - Œ³‚É–ß‚·
                    console.error('Save failed:', result.error);
                }
            } catch (error) {
                console.error('Save error:', error);
            }

            // “ü—Í—“‚ğ”ñ•\¦AƒeƒLƒXƒg‚ğ•\¦
            userRoleInput.classList.add('hidden');
            userRoleDiv.classList.remove('hidden');
        }

        // ƒ[ƒ‹•\¦XV
        function updateRoleDisplay() {
            // ƒ†[ƒU[–¼‚Æƒ[ƒ‹‚ğ•\¦
            document.getElementById('userName').textContent = currentUser;

            // ‰c‹Æ’S“–Ò–¼‚ğ•\¦iwindow.merchantData‚ÌX—ñ‚©‚çæ“¾j
            let salesPerson = '‰c‹Æ’S“–Ò–¢İ’è';
            if (window.merchantData && window.merchantData.salesPerson) {
                salesPerson = window.merchantData.salesPerson;
            }
            document.getElementById('userRole').textContent = salesPerson;
            
            // Œ ŒÀ‚É‰‚¶‚ÄUI‚ğ•ÏX
            if (userRole === 'admin') {
                // ŠÇ—Ò: ‚·‚×‚Ä•\¦A‡Œn‚Ì”zF
                document.getElementById('systemTitle').textContent = '‰Á–¿“XŠÇ—ƒVƒXƒeƒ€';
                document.getElementById('companyLogo').style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                document.getElementById('userRole').className = 'ml-2 text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-800';
            } else {
                // ‰c‹Æ: Šî–{‹@”\‚Ì‚İAÂŒn‚Ì”zF
                document.getElementById('systemTitle').textContent = '‰Á–¿“XŠÇ—ƒVƒXƒeƒ€';
                document.getElementById('companyLogo').style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
                document.getElementById('userRole').className = 'ml-2 text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800';
            }
            
            // ŠÇ—Òê—pƒƒjƒ…[‚Ì•\¦§Œä
            const adminElements = document.querySelectorAll('.admin-only');
            adminElements.forEach(el => {
                el.style.display = userRole === 'admin' ? 'flex' : 'none';
            });
            
            // ƒŠ[ƒ_[ê—p—v‘f‚ª‚ ‚ê‚ÎŠÇ—Ò‚Ì‚İ•\¦
            const leaderElements = document.querySelectorAll('.leader-only');
            leaderElements.forEach(el => {
                el.style.display = userRole === 'admin' ? 'flex' : 'none';
            });
        }

        // ’Ê’mŒ ŒÀƒŠƒNƒGƒXƒg
        // ’Ê’m‹–‰ÂƒŠƒNƒGƒXƒg‚ğƒAƒ‰[ƒgƒpƒlƒ‹“à‚É“‡
        window.requestNotificationPermission = function() {
            if ('Notification' in window && Notification.permission !== 'granted') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        showNotification('’Ê’mİ’è', 'ƒuƒ‰ƒEƒU’Ê’m‚ğ—LŒø‚É‚µ‚Ü‚µ‚½', 'success');
                    } else {
                        showInAppNotification('’Ê’mİ’è', 'ƒuƒ‰ƒEƒU’Ê’m‚Í–³Œø‚Å‚·', 'warning');
                    }
                });
            }
        }

        // ƒAƒ‰[ƒgƒpƒlƒ‹‚ğŠJ‚­‚É’Ê’m‹–‰Â‚ğŠm”F
        function checkNotificationPermission() {
            if ('Notification' in window && Notification.permission === 'default') {
                const alertPanel = document.getElementById('alertPanel');
                if (alertPanel && !alertPanel.classList.contains('hidden')) {
                    // ’Ê’m‹–‰Âƒoƒi[‚ğ•\¦
                    const banner = document.createElement('div');
                    banner.className = 'bg-yellow-100 border-l-4 border-yellow-500 p-3 m-3';
                    banner.innerHTML = `
                        <div class="flex items-center justify-between">
                            <span class="text-sm">?? ƒuƒ‰ƒEƒU’Ê’m‚ğ—LŒø‚É‚µ‚Ü‚·‚©H</span>
                            <button onclick="requestNotificationPermission(); this.parentElement.parentElement.remove()"
                                    class="text-sm bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600">
                                —LŒø‚É‚·‚é
                            </button>
                        </div>
                    `;
                    alertPanel.insertBefore(banner, alertPanel.firstChild.nextSibling);
                }
            }
        }

        // ©“®”zMİ’è‚Ì•Û‘¶
        async function saveAutoDeliverySettings() {
            console.log('[saveAutoDeliverySettings] Function called');
            const saveBtn = document.getElementById('saveAutodeliveryBtn');
            const originalText = saveBtn ? saveBtn.innerHTML : '';

            try {
                // ƒ{ƒ^ƒ“‚ğƒ[ƒfƒBƒ“ƒOó‘Ô‚É
                if (saveBtn) {
                    saveBtn.disabled = true;
                    saveBtn.innerHTML = '<svg class="animate-spin inline-block w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>•Û‘¶’†...';
                }

                console.log('[saveAutoDeliverySettings] Collecting data...');
                const autoDeliveryData = collectAutoDeliveryData();
                console.log('[saveAutoDeliverySettings] Data collected:', autoDeliveryData);

                if (!autoDeliveryData) {
                    alert('ƒGƒ‰[: •K{€–Ú‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢');
                    return;
                }

                console.log('[saveAutoDeliverySettings] Sending data:', autoDeliveryData);

                // ‰ïĞî•ñ‚Æ“¯‚¶•û®‚ÅPOST‘—M
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: JSON.stringify({
                        action: 'updateMerchantData',
                        merchantId: window.merchantId,
                        data: autoDeliveryData
                    })
                });

                console.log('[saveAutoDeliverySettings] Response status:', response.status);
                const result = await response.json();
                console.log('[saveAutoDeliverySettings] Result:', result);

                if (result.success) {
                    // ¬Œ÷: ƒ`ƒFƒbƒNƒ}[ƒN‚ğ•\¦
                    if (saveBtn) {
                        saveBtn.innerHTML = '<svg class="inline-block w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>•Û‘¶Š®—¹';
                    }

                    setTimeout(() => {
                        alert('•Û‘¶Š®—¹: ©“®”zMİ’è‚ğ•Û‘¶‚µ‚Ü‚µ‚½');
                    }, 300);

                    resetAutodeliveryChanged();

                    // ƒXƒe[ƒ^ƒX‚ª•ÏX‚³‚ê‚½ê‡Aƒwƒbƒ_[‚Ì•\¦‚ğ‘¦À‚ÉXV
                    console.log('[saveAutoDeliverySettings] autoDeliveryData.status:', autoDeliveryData.status);
                    if (autoDeliveryData.status) {
                        console.log('[saveAutoDeliverySettings] Calling updateHeaderStatus with:', autoDeliveryData.status);
                        updateHeaderStatus(autoDeliveryData.status);
                    } else {
                        console.warn('[saveAutoDeliverySettings] No status in autoDeliveryData');
                    }

                    // 2•bŒã‚Éƒ{ƒ^ƒ“‚ğŒ³‚É–ß‚·
                    setTimeout(() => {
                        if (saveBtn) {
                            saveBtn.innerHTML = originalText;
                            saveBtn.disabled = false;
                        }
                    }, 2000);
                } else {
                    alert('ƒGƒ‰[: ' + (result.error || '•Û‘¶‚É¸”s‚µ‚Ü‚µ‚½'));
                }
            } catch (error) {
                console.error('[saveAutoDeliverySettings] Error:', error);
                alert('ƒGƒ‰[: •Û‘¶’†‚ÉƒGƒ‰[‚ª”­¶‚µ‚Ü‚µ‚½: ' + error.message);
            } finally {
                // ƒGƒ‰[‚Í‚·‚®‚ÉŒ³‚É–ß‚·
                if (saveBtn && saveBtn.disabled) {
                    setTimeout(() => {
                        saveBtn.innerHTML = originalText;
                        saveBtn.disabled = false;
                    }, 500);
                }
            }
        }

        // ©“®”zMİ’èƒf[ƒ^‚ğûW
        function collectAutoDeliveryData() {
            // •¨Œí•ÊiautodeliverySection‚ÉŒÀ’èj
            const propertyTypes = Array.from(document.querySelectorAll('#autodeliverySection input[name="propertyType"]:checked'))
                .map(cb => {
                    const typeMap = {
                        'house': 'ŒËŒš‚ÄZ‘î',
                        'apartment': 'ƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“',
                        'commercial': '“X•ÜE––±Š',
                        'factory': 'HêE‘qŒÉ'
                    };
                    return typeMap[cb.value];
                });

            // •¨Œí•Ê‚ª1‚Â‚à‘I‘ğ‚³‚ê‚Ä‚¢‚È‚¢ê‡‚ÍƒGƒ‰[
            if (propertyTypes.length === 0) {
                alert('ƒGƒ‰[: ‘Î‰‰Â”\•¨Œí•Ê‚ğÅ’á1‚Â‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢');
                return null;
            }

            // Å‘å‘Î‰ŠK”
            const selects = document.querySelectorAll('#autodeliverySection select');
            const maxFloorsList = [];
            const typeNames = ['ŒËŒš‚ÄZ‘î', 'ƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“', '“X•ÜE––±Š', 'HêE‘qŒÉ'];
            selects.forEach((select, idx) => {
                if (propertyTypes.includes(typeNames[idx])) {
                    // select—v‘f‚Ì‘I‘ğ‚³‚ê‚½option‚ÌƒeƒLƒXƒg‚ğæ“¾
                    const selectedOption = select.options[select.selectedIndex];
                    const optionText = selectedOption ? selectedOption.text : select.value;
                    maxFloorsList.push(`${typeNames[idx]}(${optionText}‚Ü‚Å)`);
                }
            });

            // ’z”N””ÍˆÍ
            const ageSliders = document.querySelectorAll('#autodeliverySection input[type="range"]');
            const ageMin = ageSliders[0] ? parseInt(ageSliders[0].value) : 0;
            const ageMax = ageSliders[1] ? parseInt(ageSliders[1].value) : 50;

            // {H‰ÓŠiŠ®‘Sˆê’v‚Å•Û‘¶jiautodeliverySection‚ÉŒÀ’èj
            const constructionTypes = Array.from(document.querySelectorAll('#autodeliverySection input[name="constructionTypes"]:checked'))
                .map(cb => cb.value);

            // “Áê‘Î‰€–ÚiŠ®‘Sˆê’v‚Å•Û‘¶jiautodeliverySection‚ÉŒÀ’èj
            const specialServices = Array.from(document.querySelectorAll('#autodeliverySection input[name="specialServices"]:checked'))
                .map(cb => cb.value);

            // ‘Î‰“s“¹•{Œ§Es‹æ’¬‘º
            const prefectures = areaSelectionData.prefectures.join(',');

            // s‹æ’¬‘º‚ğJSONˆ³kŒ`®‚Å•Û‘¶iƒXƒvƒV‚Æ“¯‚¶Œ`®j
            const allCities = [];
            Object.entries(areaSelectionData.cities).forEach(([pref, cities]) => {
                allCities.push(...cities);
            });
            const citiesStr = JSON.stringify({
                type: "compressed",
                full: allCities.join(','),
                preview: allCities.slice(0, 100).join(',') + (allCities.length > 100 ? '...' : '')
            });

            // —DæƒGƒŠƒA: ƒAƒ“ƒ_[ƒXƒRƒAŒ`®‚Ì‚Ü‚Ü•Û‘¶iƒXƒvƒV‚ÌŒ`®‚É‡‚í‚¹‚éj
            const priorities = areaSelectionData.priorities.join(',');

            // ˆê’â~İ’èƒf[ƒ^
            const autoPauseToggle = document.getElementById('autoPauseToggle');
            const pauseStartDate = document.getElementById('pauseStartDate');
            const pauseEndDate = document.getElementById('pauseEndDate');
            const indefinitePause = document.getElementById('indefinitePause');

            const pauseFlag = autoPauseToggle ? autoPauseToggle.checked : false;
            const pauseStart = pauseFlag && pauseStartDate ? pauseStartDate.value : '';
            const pauseEnd = pauseFlag && pauseEndDate && !indefinitePause.checked ? pauseEndDate.value : '';
            const isIndefinite = pauseFlag && indefinitePause && indefinitePause.checked;

            // ˆê’â~ƒoƒŠƒf[ƒVƒ‡ƒ“
            if (pauseFlag) {
                // ˆê’â~ON‚Ìê‡AŠJn“ú‚Í•K{
                if (!pauseStart) {
                    showNotification('ƒGƒ‰[', 'ˆê’â~ŠJn“ú‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢', 'error');
                    return null;
                }
                // ÄŠJ—\’è“ú‚à•K{i–¢’èƒ`ƒFƒbƒN‚ªOFF‚Ìê‡j
                if (!isIndefinite && !pauseEnd) {
                    showNotification('ƒGƒ‰[', 'ˆê’â~ÄŠJ—\’è“ú‚ğ“ü—Í‚·‚é‚©Au–¢’èv‚Éƒ`ƒFƒbƒN‚ğ“ü‚ê‚Ä‚­‚¾‚³‚¢', 'error');
                    return null;
                }
            }

            // ƒXƒe[ƒ^ƒX‚ÌŒˆ’è
            // - ˆê’â~OFF ¨ ƒAƒNƒeƒBƒu
            // - ˆê’â~ON + ŠJn“ú‚ª–¢—ˆ ¨ ƒAƒNƒeƒBƒuiƒXƒPƒWƒ…[ƒ‹—\–ñj
            // - ˆê’â~ON + ŠJn“ú‚ª¡“úˆÈ‘O + ÄŠJ“ú–¢’è ¨ ‹x~
            // - ˆê’â~ON + ŠJn“ú‚ª¡“úˆÈ‘O + ÄŠJ“ú‚ ‚è ¨ ˆê’â~
            let status = 'ƒAƒNƒeƒBƒu';
            if (pauseFlag && pauseStart) {
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const startDate = new Date(pauseStart);
                startDate.setHours(0, 0, 0, 0);

                // ŠJn“ú‚ª¡“ú‚Ü‚½‚Í‰ß‹‚Ìê‡‚Ì‚İƒXƒe[ƒ^ƒX•ÏX
                if (startDate <= today) {
                    status = isIndefinite ? '‹x~' : 'ˆê’â~';
                }
                // ŠJn“ú‚ª–¢—ˆ‚Ìê‡‚ÍƒAƒNƒeƒBƒu‚Ì‚Ü‚Üi—\–ñó‘Ôj
            }

            return {
                // GAS‚ÌupdateMerchantData‚ÅŠú‘Ò‚·‚éƒtƒB[ƒ‹ƒh–¼‚É‡‚í‚¹‚é
                propertyTypes: propertyTypes.join(','),               // ‘Î‰•¨Œí•Ê
                maxFloors: maxFloorsList.join(','),                    // Å‘å‘Î‰ŠK”
                buildingAge: `{min=${ageMin}, max=${ageMax}}`,        // ’z”N”‘Î‰”ÍˆÍ
                constructionTypes: constructionTypes.join(','),        // ‘Î‰H–í•Êi{H‰ÓŠ—ñ‚É•Û‘¶j
                specialServices: specialServices.join(','),           // “Áê‘Î‰€–Ú
                prefectures: prefectures,                             // ‘Î‰“s“¹•{Œ§
                cities: citiesStr,                                    // ‘Î‰s‹æ’¬‘º
                priorityAreas: priorities,                            // —DæƒGƒŠƒA
                // ˆê’â~İ’è
                status: status,                                       // ƒXƒe[ƒ^ƒX (AJ—ñ)
                pauseFlag: pauseFlag ? 'TRUE' : 'FALSE',             // ˆê’â~ƒtƒ‰ƒO (AO—ñ)
                pauseStartDate: pauseStart || '',                     // ˆê’â~ŠJn“ú (AP—ñ)
                pauseEndDate: isIndefinite ? '–¢’è' : (pauseEnd || '') // ˆê’â~ÄŠJ—\’è“ú (AQ—ñ)
            };
        }

        // ‰®†•\¦ƒIƒvƒVƒ‡ƒ“‚Ì•\¦/”ñ•\¦
        function updateTradeNameDisplay() {
            const tradeName = document.getElementById('tradeName').value;
            const tradeNameOptions = document.getElementById('tradeNameDisplayOptions');

            if (tradeName && tradeName.trim() !== '') {
                tradeNameOptions.style.display = 'block';
            } else {
                tradeNameOptions.style.display = 'none';
            }
        }

        // ‹ŒŠÖ”–¼‚ÌŒİŠ·«ˆÛ
        function updateBranchDisplay() {
            updateTradeNameDisplay();
        }

        // ‰ïĞ–¼•\¦‚ğXV
        function updateCompanyNameDisplay() {
            // —¼•û•\¦ƒIƒvƒVƒ‡ƒ“‚Ì•\¦/”ñ•\¦
            const displayOption = document.querySelector('input[name="tradeNameDisplay"]:checked')?.value;
            const bothOptions = document.getElementById('bothDisplayOptions');

            if (displayOption === 'both' && bothOptions) {
                bothOptions.style.display = 'block';
            } else if (bothOptions) {
                bothOptions.style.display = 'none';
            }
        }

        // ©“®•Û‘¶
        async function autoSave() {
            // •Û‘¶ƒCƒ“ƒWƒP[ƒ^[‚ğ•\¦
            const saveIndicator = document.querySelector('#companySection .text-green-500');
            if (saveIndicator) {
                saveIndicator.parentElement.parentElement.style.opacity = '0.5';
            }

            // ‰æ‘œƒAƒbƒvƒ[ƒhˆ—iƒƒCƒ“ƒrƒWƒ…ƒAƒ‹j
            if (mainVisualData && mainVisualFileName) {
                try {
                    console.log('[autoSave] Uploading main visual...');
                    const response = await fetch(GAS_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'text/plain' },
                        body: JSON.stringify({
                            action: 'companyinfo_uploadImage',
                            merchantId: window.merchantId,
                            base64Data: mainVisualData,
                            fileName: mainVisualFileName,
                            imageType: 'main-visual'
                        })
                    });
                    const result = await response.json();
                    console.log('[autoSave] Main visual response:', result);
                    if (result.success) {
                        mainVisualUrl = result.url;
                        console.log('[autoSave] Main visual uploaded:', result.url);
                    } else {
                        console.error('[autoSave] Main visual upload failed:', result.error);
                    }
                } catch (error) {
                    console.error('[autoSave] Main visual upload error:', error);
                }
            }

            // ‰æ‘œƒAƒbƒvƒ[ƒhˆ—iÊ^ƒMƒƒƒ‰ƒŠ[j
            const uploadedGalleryUrls = [];
            if (galleryFilesToUpload.length > 0) {
                try {
                    console.log('[autoSave] Uploading gallery images:', galleryFilesToUpload.length);
                    for (const file of galleryFilesToUpload) {
                        const response = await fetch(GAS_URL, {
                            method: 'POST',
                            headers: { 'Content-Type': 'text/plain' },
                            body: JSON.stringify({
                                action: 'companyinfo_uploadImage',
                                merchantId: window.merchantId,
                                base64Data: file.base64Data,
                                fileName: file.fileName,
                                imageType: 'gallery'
                            })
                        });
                        const result = await response.json();
                        if (result.success) {
                            console.log('[autoSave] Gallery image uploaded:', result.url);
                            uploadedGalleryUrls.push(result.url);
                        }
                    }
                    // ƒAƒbƒvƒ[ƒhŠ®—¹ŒãA”z—ñ‚ğƒNƒŠƒA
                    galleryFilesToUpload = [];
                } catch (error) {
                    console.error('[autoSave] Gallery upload error:', error);
                }
            }

            // {H–—á‚ÌƒAƒbƒvƒ[ƒhˆ—
            if (constructionExamples && constructionExamples.length > 0) {
                try {
                    console.log('[autoSave] Uploading construction examples:', constructionExamples.length);
                    for (const example of constructionExamples) {
                        // ‰æ‘œ‚ª‚ ‚éê‡‚Ì‚İƒAƒbƒvƒ[ƒh
                        if (example.beforeImage || example.afterImage) {
                            const response = await fetch(GAS_URL, {
                                method: 'POST',
                                headers: { 'Content-Type': 'text/plain' },
                                body: JSON.stringify({
                                    action: 'saveConstructionExample',
                                    merchantId: window.merchantId,
                                    exampleData: {
                                        title: example.title,
                                        buildingAge: example.buildingAge,
                                        price: example.price,
                                        content: example.content,
                                        beforeImage: example.beforeImage,
                                        afterImage: example.afterImage
                                    }
                                })
                            });
                            const result = await response.json();
                            if (result.success) {
                                console.log('[autoSave] Construction example saved:', result.exampleId);
                            } else {
                                console.error('[autoSave] Construction example save failed:', result.error);
                            }
                        }
                    }
                } catch (error) {
                    console.error('[autoSave] Construction example upload error:', error);
                }
            }

            // ƒtƒH[ƒ€‚©‚çƒf[ƒ^‚ğûW
            // ¦ƒXƒvƒŒƒbƒhƒV[ƒg‚Ì—ñ‚Æ‚Ì‘Î‰:
            // C—ñ: ‰ïĞ–¼, D—ñ: ‰ïĞ–¼ƒJƒi, E—ñ: ‰®†, F—ñ: ‰®†ƒJƒi
            // G—ñ: ‘ã•\Ò–¼, H—ñ: ‘ã•\Ò–¼ƒJƒi, I—ñ: —X•Ö”Ô†, J—ñ: ZŠ
            // K—ñ: “d˜b”Ô†, L—ñ: ƒEƒFƒuƒTƒCƒgURL, M—ñ: İ—§”NŒ, N—ñ: PRƒeƒLƒXƒg
            // O—ñ: x“X–¼, P—ñ: x“XZŠ
            // V—ñ: ¿‹—pƒ[ƒ‹ƒAƒhƒŒƒX, W—ñ: ‰c‹Æ—pƒ[ƒ‹ƒAƒhƒŒƒX
            // X—ñ: ‰c‹Æ’S“–Ò–¼, Y—ñ: ‰c‹Æ’S“–ÒƒJƒi
            // Z—ñ: ]‹Æˆõ”, AA—ñ: ”„ã‹K–Í
            // AR—ñ: ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹, AS—ñ: Ê^ƒMƒƒƒ‰ƒŠ[
            // AT—ñ: •Û—L‘Ši, AU—ñ: ‰Á“ü•ÛŒ¯

            const formData = {
                // Šî–{î•ñ
                companyName: document.getElementById('companyName')?.value || '', // C—ñ: ‰ïĞ–¼
                companyNameKana: document.getElementById('companyNameKana')?.value || '', // D—ñ: ‰ïĞ–¼ƒJƒi
                tradeName: document.getElementById('tradeName')?.value || '', // E—ñ: ‰®†
                tradeNameKana: document.getElementById('tradeNameKana')?.value || '', // F—ñ: ‰®†ƒJƒi
                representative: document.getElementById('representative')?.value || '', // G—ñ: ‘ã•\Ò–¼
                representativeKana: document.getElementById('representativeKana')?.value || '', // H—ñ: ‘ã•\Ò–¼ƒJƒi
                postalCode: document.getElementById('zipCode')?.value || '', // I—ñ: —X•Ö”Ô†
                address: document.getElementById('address')?.value || '', // J—ñ: ZŠ
                phone: document.getElementById('phone')?.value || '', // K—ñ: “d˜b”Ô†
                website: document.getElementById('website')?.value || '', // L—ñ: ƒEƒFƒuƒTƒCƒgURL
                established: document.getElementById('established')?.value || '', // M—ñ: İ—§”NŒ
                prText: document.getElementById('prText')?.value || '', // N—ñ: PRƒeƒLƒXƒg

                // O—ñ: x“X–¼, P—ñ: x“XZŠ
                branchName: (window.branches || []).map(b => b.name).filter(v => v).join('A') || '',
                branchAddress: (window.branches || []).map(b => b.address).filter(v => v).join('A') || '',

                // V—ñ: ¿‹—pƒ[ƒ‹ƒAƒhƒŒƒX, W—ñ: ‰c‹Æ—pƒ[ƒ‹ƒAƒhƒŒƒX
                // X—ñ: ‰c‹Æ’S“–Ò–¼, Y—ñ: ‰c‹Æ’S“–ÒƒJƒi
                billingEmail: document.getElementById('billingEmail')?.value || '',
                salesEmail: document.getElementById('salesEmail')?.value || '',
                salesPersonName: document.getElementById('salesPersonName')?.value || '',
                salesPersonKana: document.getElementById('salesPersonKana')?.value || '',

                // Z—ñ: ]‹Æˆõ”, AA—ñ: ”„ã‹K–Í
                employees: document.getElementById('employees')?.value || '',
                salesScale: document.getElementById('salesScale')?.value || '',

                // AT—ñ: •Û—L‘Ši, AU—ñ: ‰Á“ü•ÛŒ¯iƒJƒXƒ^ƒ€€–Ú‚àŠÜ‚ß‚éj
                qualifications: (() => {
                    const checked = Array.from(document.querySelectorAll('input[name="qualifications"]:checked')).map(cb => cb.value);
                    const custom = Array.from(document.querySelectorAll('#customQualificationsList > div > span')).map(el => el.textContent.trim());
                    return [...checked, ...custom].filter(v => v).join(',') || '';
                })(),
                insurance: (() => {
                    const checked = Array.from(document.querySelectorAll('input[name="insurance"]:checked')).map(cb => cb.value);
                    const custom = Array.from(document.querySelectorAll('#customInsuranceList > div > span')).map(el => el.textContent.trim());
                    return [...checked, ...custom].filter(v => v).join(',') || '';
                })()
            };

            // ‰æ‘œURL‚ğ’Ç‰ÁiƒAƒbƒvƒ[ƒhÏ‚İ‚Ìê‡j
            if (mainVisualUrl) {
                formData['ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹'] = mainVisualUrl; // AR—ñ: ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹
                console.log('[autoSave] Added main visual to formData:', mainVisualUrl);
            }

            // ƒvƒŒƒrƒ…[İ’è‚ğƒvƒŒƒrƒ…[ƒV[ƒg‚É•Û‘¶
            try {
                const previewData = {
                    imagePositionX: imagePositionX,
                    imagePositionY: imagePositionY,
                    imageZoom: currentZoom,
                    imageBrightness: document.getElementById('imageOpacity')?.value || 70,
                    textColor: currentTextColor
                };

                const previewResponse = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify({
                        action: 'savePreviewSettings',
                        merchantId: window.merchantId,
                        previewSettings: previewData
                    })
                });
                const previewResult = await previewResponse.json();
                console.log('[autoSave] Preview settings saved:', previewResult);
            } catch (error) {
                console.error('[autoSave] Preview settings save error:', error);
            }

            // ƒMƒƒƒ‰ƒŠ[URL‚ğ’Ç‰ÁiŠù‘¶URL‚Í•Û‘¶‚ÉÅV‚ğæ“¾j
            if (uploadedGalleryUrls.length > 0) {
                try {
                    // ƒXƒvƒŒƒbƒhƒV[ƒg‚©‚çÅV‚ÌÊ^ƒMƒƒƒ‰ƒŠ[URL‚ğæ“¾
                    const merchantDataResponse = await fetch(GAS_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'text/plain' },
                        body: JSON.stringify({
                            action: 'getMerchantData',
                            merchantId: window.merchantId
                        })
                    });
                    const merchantDataResult = await merchantDataResponse.json();
                    const existingGalleryUrls = merchantDataResult.data?.['Ê^ƒMƒƒƒ‰ƒŠ[']
                        ? merchantDataResult.data['Ê^ƒMƒƒƒ‰ƒŠ['].split(',').map(url => url.trim()).filter(url => url)
                        : [];

                    const allGalleryUrls = [...existingGalleryUrls, ...uploadedGalleryUrls].slice(0, 20);
                    formData['Ê^ƒMƒƒƒ‰ƒŠ['] = allGalleryUrls.join(','); // AS—ñ: Ê^ƒMƒƒƒ‰ƒŠ[
                    console.log('[autoSave] Added gallery to formData:', allGalleryUrls.length, 'images (', existingGalleryUrls.length, 'existing +', uploadedGalleryUrls.length, 'new)');
                } catch (error) {
                    console.error('[autoSave] Failed to get existing gallery:', error);
                    // ƒGƒ‰[‚ÍV‚µ‚¢URL‚Ì‚İ•Û‘¶
                    formData['Ê^ƒMƒƒƒ‰ƒŠ['] = uploadedGalleryUrls.join(',');
                }
            }

            try {
                console.log('[•Û‘¶] ‘—Mƒf[ƒ^:', formData);
                console.log('[•Û‘¶] merchantId:', window.merchantId);

                // GAS‚É•Û‘¶ƒŠƒNƒGƒXƒg‚ğ‘—M
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: JSON.stringify({
                        action: 'updateMerchantData',
                        merchantId: window.merchantId,
                        data: formData
                    })
                });

                const result = await response.json();
                console.log('[•Û‘¶] GASƒŒƒXƒ|ƒ“ƒX:', result);

                if (result.success) {
                    console.log('? •Û‘¶Š®—¹');
                    console.log('•Û‘¶‚µ‚½€–Ú”:', Object.keys(formData).length);

                    // •Û‘¶ƒCƒ“ƒWƒP[ƒ^[‚ğŒ³‚É–ß‚·
                    if (saveIndicator) {
                        setTimeout(() => {
                            saveIndicator.parentElement.parentElement.style.opacity = '1';
                        }, 500);
                    }
                } else {
                    console.error('? •Û‘¶ƒGƒ‰[:', result.error);
                    showNotification('ƒGƒ‰[', '•Û‘¶‚É¸”s‚µ‚Ü‚µ‚½', 'error');
                }
            } catch (error) {
                console.error('? ’ÊMƒGƒ‰[:', error);
                // ƒGƒ‰[‚àŒ©‚½–Ú‚ğŒ³‚É–ß‚·
                if (saveIndicator) {
                    saveIndicator.parentElement.parentElement.style.opacity = '1';
                }
            }
        }

        // ‰ïĞî•ñ‚Ì•Û‘¶
        async function saveCompanyInfo() {
            console.log('[saveCompanyInfo] •Û‘¶ŠJn');
            console.log('[saveCompanyInfo] GAS_URL:', GAS_URL);
            console.log('[saveCompanyInfo] window.merchantId:', window.merchantId);

            if (!window.merchantId) {
                alert('ƒGƒ‰[: merchantId‚ªİ’è‚³‚ê‚Ä‚¢‚Ü‚¹‚ñBƒƒOƒCƒ“‚µ’¼‚µ‚Ä‚­‚¾‚³‚¢B');
                console.error('[saveCompanyInfo] merchantId‚ª–¢İ’è');
                return;
            }

            const saveButton = event.target.closest('button');
            if (!saveButton) {
                console.error('[saveCompanyInfo] •Û‘¶ƒ{ƒ^ƒ“‚ªŒ©‚Â‚©‚è‚Ü‚¹‚ñ');
                return;
            }

            saveButton.disabled = true;
            const originalHTML = saveButton.innerHTML;
            saveButton.innerHTML = '<svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> •Û‘¶’†...';

            try {
                const result = await autoSave();
                console.log('[saveCompanyInfo] •Û‘¶Œ‹‰Ê:', result);
                showNotification('•Û‘¶Š®—¹', '‰ïĞî•ñ‚ğ•Û‘¶‚µ‚Ü‚µ‚½');
            } catch (error) {
                console.error('[saveCompanyInfo] ƒGƒ‰[:', error);
                showNotification('ƒGƒ‰[', '•Û‘¶‚É¸”s‚µ‚Ü‚µ‚½: ' + error.message, 'error');
            } finally {
                saveButton.disabled = false;
                saveButton.innerHTML = originalHTML;
            }
        }

        // ‰ïĞî•ñ‚ÌƒŠƒZƒbƒg
        function resetCompanyInfo() {
            if (confirm('“ü—Í“à—e‚ğƒŠƒZƒbƒg‚µ‚ÄAƒXƒvƒŒƒbƒhƒV[ƒg‚©‚çÄ“Ç‚İ‚İ‚µ‚Ü‚·‚©H')) {
                if (window.merchantData) {
                    loadMerchantData(window.merchantId, window.merchantData);
                    showNotification('ƒŠƒZƒbƒgŠ®—¹', 'ÅV‚Ìƒf[ƒ^‚ğ“Ç‚İ‚İ‚Ü‚µ‚½');
                }
            }
        }

        // ƒJƒXƒ^ƒ€‘Ši‚ğ’Ç‰Á
        function addCustomQualification() {
            const input = document.getElementById('customQualificationInput');
            const value = input.value.trim();

            if (value) {
                const list = document.getElementById('customQualificationsList');
                const tag = document.createElement('div');
                tag.className = 'inline-flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm';
                tag.innerHTML = `
                    <span>${value}</span>
                    <button onclick="this.parentElement.remove()" class="ml-2 text-blue-600 hover:text-blue-800">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                `;
                list.appendChild(tag);
                input.value = '';
            }
        }

        // ƒJƒXƒ^ƒ€•ÛŒ¯‚ğ’Ç‰Á
        function addCustomInsurance() {
            const input = document.getElementById('customInsuranceInput');
            const value = input.value.trim();

            if (value) {
                const list = document.getElementById('customInsuranceList');
                const tag = document.createElement('div');
                tag.className = 'inline-flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm';
                tag.innerHTML = `
                    <span>${value}</span>
                    <button onclick="this.parentElement.remove()" class="ml-2 text-green-600 hover:text-green-800">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                `;
                list.appendChild(tag);
                input.value = '';
            }
        }

        // ‰ïĞî•ñ‚ÌƒvƒŒƒrƒ…[
        function previewCompanyInfo() {
            // “ü—Í’l‚ğæ“¾
            const companySection = document.getElementById('companySection');
            const companyName = companySection.querySelector('input[placeholder*="Š”®‰ïĞ"]').value || 'Š”®‰ïĞ‚­‚ç‚×‚é“h‘•';
            const tradeName = document.getElementById('tradeName').value;
            const displayOption = document.querySelector('input[name="tradeNameDisplay"]:checked')?.value || 'company';
            const representative = companySection.querySelector('input[placeholder="‘ã•\Ò–¼‚ğ“ü—Í"]')?.value || '-';
            const zipCode = companySection.querySelector('input[placeholder="123-4567"]')?.value || '';
            const address = companySection.querySelector('input[placeholder="“Œ‹“s`‹æÂR1-1-1"]')?.value ||
                           companySection.querySelector('label:has-text("ZŠ") + input')?.value ||
                           companySection.querySelector('label:has-text("Šİ’n") + input')?.value || '-';
            const established = companySection.querySelector('input[placeholder="2010”N4Œ"]')?.value || '2010”N4Œ';
            const prText = companySection.querySelector('textarea[placeholder*="PR•¶"]')?.value ||
                          companySection.querySelector('textarea[rows="4"]')?.value ||
                          '’nˆæ–§’…‚Å15”NˆÈãAŠm‚©‚È‹Zp‚Æ’š”J‚Èd–‚ÅŠF—l‚Ì‘åØ‚ÈZ‚Ü‚¢‚ğç‚è‚Ü‚·BŒ©Ï‚à‚è‚©‚ç{H‚Ü‚Å©ĞˆêŠÑ‘Ì§‚ÅA’†ŠÔƒ}[ƒWƒ“‚È‚µ‚Ì“K³‰¿Ši‚ğ‚²’ñ‹ŸBƒAƒtƒ^[ƒtƒHƒ[‚à–œ‘S‚Å‚·B';

            // ‰ïĞ–¼‚Ì•\¦‚ğŒˆ’è
            let displayName = companyName;
            let displayHtml = companyName; // HTML—piƒTƒCƒY’²®ŠÜ‚Şj

            if (tradeName && tradeName.trim() !== '') {
                const reverseOrder = document.getElementById('reverseOrder')?.checked || false;
                const smallerSecond = document.getElementById('smallerSecond')?.checked || false;

                switch(displayOption) {
                    case 'trade':
                        displayName = tradeName;
                        displayHtml = tradeName;
                        break;
                    case 'both':
                        if (reverseOrder) {
                            displayName = `${tradeName}b${companyName}`;
                            if (smallerSecond) {
                                displayHtml = `${tradeName}b<span style="font-size:85%">${companyName}</span>`;
                            } else {
                                displayHtml = displayName;
                            }
                        } else {
                            displayName = `${companyName}b${tradeName}`;
                            if (smallerSecond) {
                                displayHtml = `${companyName}b<span style="font-size:85%">${tradeName}</span>`;
                            } else {
                                displayHtml = displayName;
                            }
                        }
                        break;
                    case 'company':
                    default:
                        displayName = companyName;
                        displayHtml = companyName;
                        break;
                }
            }

            // ƒvƒŒƒrƒ…[‚É”½‰f
            const setElementText = (id, text) => {
                const element = document.getElementById(id);
                if (element) element.textContent = text;
            };

            const setElementHtml = (id, html) => {
                const element = document.getElementById(id);
                if (element) element.innerHTML = html;
            };

            // ‰ïĞ–¼‚ÍHTML‚Æ‚µ‚Äİ’èiƒtƒHƒ“ƒgƒTƒCƒY•ÏX‚ğ”½‰f‚·‚é‚½‚ßj
            setElementHtml('previewCompanyName', displayHtml);
            setElementHtml('previewCompanyNameHero', displayHtml);
            setElementHtml('previewCompanyNameOverlay', displayHtml);
            setElementHtml('previewCompanyNameFull', displayHtml);
            setElementText('previewRepresentative', representative);

            // Šİ’n‚ğ•\¦i—X•Ö”Ô†‚àŠÜ‚ß‚éj
            const fullAddress = zipCode ? `§${zipCode} ${address}` : address;
            setElementText('previewAddress', fullAddress);

            setElementText('previewEstablishedDate', established);

            // PR•¶‚ğ•\¦
            setElementText('previewPrText', prText);

            // ƒLƒƒƒbƒ`ƒtƒŒ[ƒY‚ğPR•¶‚ÌÅ‰‚Ìˆê•¶‚©‚ç’Šoi‹å“_‚Ü‚Å‚ÅØ‚éj
            const firstSentence = prText.split('B')[0];
            const tagline = firstSentence || 'M—Š‚ÆÀÑ‚ÌŠO•Ç“h‘•ê–å“X';
            setElementText('previewTagline', tagline || 'M—Š‚ÆÀÑ‚ÌŠO•Ç“h‘•ê–å“X');
            setElementText('previewTaglineHero', tagline || 'M—Š‚ÆÀÑ‚ÌŠO•Ç“h‘•ê–å“X');
            setElementText('previewTaglineOverlay', tagline || 'M—Š‚ÆÀÑ‚ÌŠO•Ç“h‘•ê–å“X');

            setElementText('previewEstablishedHero', established);
            setElementText('previewEstablishedOverlay', established);

            // ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹‚ªƒAƒbƒvƒ[ƒh‚³‚ê‚Ä‚¢‚éê‡‚Í•\¦
            if (mainVisualData || mainVisualUrl) {
                document.getElementById('previewMainVisual').src = mainVisualData || mainVisualUrl;
                document.getElementById('mainVisualSection').style.display = 'block';
                document.getElementById('heroSection').style.display = 'none';
            } else {
                document.getElementById('mainVisualSection').style.display = 'none';
                document.getElementById('heroSection').style.display = 'block';
            }

            // ‘Ši‚ğ•\¦
            const qualificationsList = document.getElementById('qualificationsList');
            if (qualificationsList) {
                qualificationsList.innerHTML = '';
                // ƒ`ƒFƒbƒN‚³‚ê‚½‘Ši‚ğæ“¾
                const checkedQualifications = companySection.querySelectorAll('input[name="qualifications"]:checked');
                checkedQualifications.forEach(qual => {
                    const div = document.createElement('div');
                    div.className = 'bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center';
                    div.innerHTML = `
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">${qual.value}</span>
                    `;
                    qualificationsList.appendChild(div);
                });
                // ƒJƒXƒ^ƒ€‘Ši‚ğ’Ç‰Á
                const customQuals = document.querySelectorAll('#customQualificationsList > div');
                customQuals.forEach(qual => {
                    const qualText = qual.querySelector('span').textContent;
                    const div = document.createElement('div');
                    div.className = 'bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center';
                    div.innerHTML = `
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">${qualText}</span>
                    `;
                    qualificationsList.appendChild(div);
                });
                // ‘Ši‚ª‚ ‚éê‡‚Ì‚İƒZƒNƒVƒ‡ƒ“‚ğ•\¦
                const qualSection = document.getElementById('preview-qualifications');
                if (qualSection) {
                    qualSection.style.display = qualificationsList.children.length > 0 ? 'block' : 'none';
                }
            }

            // •ÛŒ¯‚ğ•\¦
            const insuranceList = document.getElementById('insuranceList');
            if (insuranceList) {
                insuranceList.innerHTML = '';
                // ƒ`ƒFƒbƒN‚³‚ê‚½•ÛŒ¯‚ğæ“¾
                const checkedInsurance = companySection.querySelectorAll('input[name="insurance"]:checked');
                checkedInsurance.forEach(ins => {
                    const div = document.createElement('div');
                    div.className = 'bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center';
                    div.innerHTML = `
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">${ins.value}</span>
                    `;
                    insuranceList.appendChild(div);
                });
                // ƒJƒXƒ^ƒ€•ÛŒ¯‚ğ’Ç‰Á
                const customInsurance = document.querySelectorAll('#customInsuranceList > div');
                customInsurance.forEach(ins => {
                    const insText = ins.querySelector('span').textContent;
                    const div = document.createElement('div');
                    div.className = 'bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center';
                    div.innerHTML = `
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">${insText}</span>
                    `;
                    insuranceList.appendChild(div);
                });
                // •ÛŒ¯‚ª‚ ‚éê‡‚Ì‚İƒZƒNƒVƒ‡ƒ“‚ğ•\¦
                const insSection = document.getElementById('preview-insurance');
                if (insSection) {
                    insSection.style.display = insuranceList.children.length > 0 ? 'block' : 'none';
                }
            }

            // ‘Î‰‰Â”\‚ÈH–‚ğ•\¦
            const previewServicesList = document.getElementById('previewServicesList');
            const serviceIconMap = {
                'ŠO•Ç“h‘•': '??',
                'ŠO•ÇƒJƒo[H–@': '???',
                'ŠO•Ç’£‘Ö‚¦': '??',
                '‰®ª“h‘•iŠO•ÇH–ŠÜ‚Şj': '??',
                '‰®ã–h…iŠO•ÇH–ŠÜ‚Şj': '??',
                '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™': '???',
                '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢': '??',
                '‰®ªƒJƒo[H–@': '??',
                'ŠO•Ç•âCiŠO•ÇH–ŠÜ‚Şj': '??',
                '‰®ª•âCiŠO•ÇH–ŠÜ‚Şj': '???',
                'ƒxƒ‰ƒ“ƒ_–h…iŠO•ÇH–ŠÜ‚Şj': '??'
            };

            if (previewServicesList) {
                previewServicesList.innerHTML = '';
                const checkedServices = document.querySelectorAll('input[name="constructionTypes"]:checked');

                if (checkedServices.length > 0) {
                    checkedServices.forEach(service => {
                        const serviceName = service.value;

                        // ’P•i€–Úi’A‚µ1ĞĞ‰î‚Í’è‰¿j‚ğƒvƒŒƒrƒ…[‚©‚çœŠO
                        if (serviceName.includes('i’A‚µ1ĞĞ‰î‚Í’è‰¿j')) {
                            return;
                        }

                        // •\¦–¼‚©‚çiŠO•ÇH–ŠÜ‚Şj‚ğíœ
                        const displayName = serviceName.replace('iŠO•ÇH–ŠÜ‚Şj', '');
                        const icon = serviceIconMap[serviceName] || '?';
                        const div = document.createElement('div');
                        div.className = 'bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition';
                        div.innerHTML = `
                            <span class="text-2xl mr-2">${icon}</span>
                            <span class="text-sm font-medium text-gray-800">${displayName}</span>
                        `;
                        previewServicesList.appendChild(div);
                    });
                    document.getElementById('preview-services').style.display = 'block';
                } else {
                    document.getElementById('preview-services').style.display = 'none';
                }
            }

            // ‘Î‰ƒGƒŠƒA‚ğ•\¦
            const previewCitiesContainer = document.getElementById('previewCitiesContainer');

            if (previewCitiesContainer && areaSelectionData && areaSelectionData.prefectures) {
                previewCitiesContainer.innerHTML = '';

                areaSelectionData.prefectures.forEach((pref, index) => {
                    const cities = areaSelectionData.cities[pref];
                    if (cities && cities.length > 0) {
                        const prefDiv = document.createElement('div');
                        prefDiv.className = index < areaSelectionData.prefectures.length - 1 ? 'mb-6 pb-6 border-b border-gray-200' : 'mb-0';
                        prefDiv.innerHTML = `
                            <div class="flex items-center mb-3">
                                <span class="text-base font-bold text-blue-600">${pref}</span>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                ${cities.map(city => `<span class="px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg text-sm transition">${city}</span>`).join('')}
                            </div>
                        `;
                        previewCitiesContainer.appendChild(prefDiv);
                    }
                });

                // ‘Î‰ƒGƒŠƒA‚ª‚ ‚éê‡‚Ì‚İƒZƒNƒVƒ‡ƒ“‚ğ•\¦
                const areasSection = document.getElementById('preview-areas');
                if (areasSection) {
                    areasSection.style.display = areaSelectionData.prefectures.length > 0 ? 'block' : 'none';
                }
            }

            // “Áê‘Î‰€–Ú‚ğ•\¦
            const previewFeaturesList = document.getElementById('previewFeaturesList');
            if (previewFeaturesList) {
                previewFeaturesList.innerHTML = '';
                const checkedSpecialServices = document.querySelectorAll('input[name="specialServices"]:checked');
                const excludeItems = ['—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]', '‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â'];

                const colors = [
                    'from-blue-50 to-blue-100',
                    'from-purple-50 to-purple-100',
                    'from-green-50 to-green-100',
                    'from-pink-50 to-pink-100',
                    'from-yellow-50 to-yellow-100',
                    'from-indigo-50 to-indigo-100'
                ];

                let colorIndex = 0;
                checkedSpecialServices.forEach(service => {
                    const serviceText = service.value;
                    // œŠO€–Ú‚ğƒXƒLƒbƒv
                    if (excludeItems.some(item => serviceText.includes(item))) {
                        return;
                    }

                    // ŠG•¶š‚ÆƒeƒLƒXƒg‚ğ•ª—£
                    const parts = serviceText.split(' ');
                    const emoji = parts[0];
                    const text = parts.slice(1).join(' ');

                    const div = document.createElement('div');
                    div.className = `bg-gradient-to-br ${colors[colorIndex % colors.length]} rounded-xl p-4`;
                    div.innerHTML = `
                        <div class="text-3xl mb-2">${emoji}</div>
                        <h4 class="font-semibold text-gray-900 mb-1">${text}</h4>
                    `;
                    previewFeaturesList.appendChild(div);
                    colorIndex++;
                });

                // ‹­‚İ‚ª‚ ‚éê‡‚Ì‚İƒZƒNƒVƒ‡ƒ“‚ğ•\¦
                const featuresSection = document.getElementById('preview-features');
                if (featuresSection) {
                    featuresSection.style.display = previewFeaturesList.children.length > 0 ? 'block' : 'none';
                }
            }

            // ƒ‚[ƒ_ƒ‹‚ğ•\¦
            document.getElementById('companyPreviewModal').classList.remove('hidden');

            // ƒhƒ‰ƒbƒO‹@”\‚ğ‰Šú‰»
            setTimeout(initImageDrag, 100);

            // Googleƒ}ƒbƒv‚ğ“Ç‚İ‚İ
            setTimeout(loadGoogleMap, 200);

            // Ê^ƒMƒƒƒ‰ƒŠ[‚Æ{H–—á‚Ì•\¦‚ğXV
            updateGalleryDisplay();
            updateConstructionExamplesDisplay();
            updateReviewsList();
        }

        // ƒvƒŒƒrƒ…[ƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
        function closePreviewModal() {
            document.getElementById('companyPreviewModal').classList.add('hidden');
        }

        // ƒvƒŒƒrƒ…[İ’èƒpƒlƒ‹‚Ì•\¦Ø‚è‘Ö‚¦
        function togglePreviewSettings() {
            const settings = document.getElementById('previewSettings');
            settings.classList.toggle('hidden');
        }

        // ƒvƒŒƒrƒ…[ƒZƒNƒVƒ‡ƒ“‚Ì•\¦Ø‚è‘Ö‚¦
        function togglePreviewSection(sectionName) {
            const section = document.getElementById('preview-' + sectionName);
            if (section) {
                section.classList.toggle('hidden');
            }

            // ‰ïĞŠT—vƒZƒNƒVƒ‡ƒ“‚Ìê‡AÚ×İ’è‚Ì•\¦‚àØ‚è‘Ö‚¦
            if (sectionName === 'basicInfo') {
                const detailSettings = document.getElementById('basicInfoDetailSettings');
                if (detailSettings) {
                    if (section && section.classList.contains('hidden')) {
                        detailSettings.style.display = 'none';
                    } else {
                        detailSettings.style.display = 'block';
                    }
                }
            }
        }

        // ‰ïĞŠT—v‚ÌŒÂ•ÊƒtƒB[ƒ‹ƒh‚Ì•\¦Ø‚è‘Ö‚¦
        function toggleBasicInfoField(fieldName) {
            const field = document.getElementById('basicInfo-' + fieldName);
            if (field) {
                field.classList.toggle('hidden');
            }
        }

        // ’z”N””ÍˆÍ‚ÌXVi‰ïĞî•ñ—pj
        function updateAgeRange() {
            const minSlider = document.querySelector('#companySection input[type="range"][min="0"][max="50"]');
            const maxSlider = document.querySelector('#companySection input[type="range"][min="0"][max="100"]');
            if (minSlider && maxSlider) {
                const minElement = document.getElementById('ageRangeMin');
                const maxElement = document.getElementById('ageRangeMax');
                if (minElement) minElement.textContent = minSlider.value;
                if (maxElement) maxElement.textContent = maxSlider.value;
            }
        }

        // ’z”N””ÍˆÍ‚ÌXVi©“®”zMİ’è—pj
        function updateAgeRangeAuto() {
            const minSlider = document.querySelector('#autodeliverySection input[type="range"][min="0"][max="50"]');
            const maxSlider = document.querySelector('#autodeliverySection input[type="range"][min="0"][max="100"]');
            if (minSlider && maxSlider) {
                const minValue = parseInt(minSlider.value);
                const maxValue = parseInt(maxSlider.value);

                // ‰ºŒÀ‚ªãŒÀ‚ğ’´‚¦‚½ê‡AãŒÀ‚ğ‰ºŒÀ‚É‡‚í‚¹‚é
                if (minValue > maxValue) {
                    maxSlider.value = minValue;
                }

                // ãŒÀ‚ª‰ºŒÀ‚ğ‰º‰ñ‚Á‚½ê‡A‰ºŒÀ‚ğãŒÀ‚É‡‚í‚¹‚é
                if (maxValue < minValue) {
                    minSlider.value = maxValue;
                }

                const minElement = document.getElementById('ageRangeMinAuto');
                const maxElement = document.getElementById('ageRangeMaxAuto');
                if (minElement) minElement.textContent = minSlider.value;
                if (maxElement) maxElement.textContent = maxSlider.value;
            }
        }

        // ƒT[ƒrƒXƒJ[ƒh‚ÌØ‚è‘Ö‚¦
        function toggleServiceCard(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            const card = element.querySelector('div');

            if (checkbox.checked) {
                checkbox.checked = false;
                card.classList.remove('border-blue-500', 'bg-blue-50');
            } else {
                checkbox.checked = true;
                card.classList.add('border-blue-500', 'bg-blue-50');
            }
        }

        // –ß‚éƒ{ƒ^ƒ“
        function goBack() {
            showSection('dashboard');
        }

        // •\¦E”ñ•\¦‚ÌØ‚è‘Ö‚¦
        function toggleVisibility(button) {
            const icon = button.querySelector('svg');
            const parent = button.closest('.border');

            if (parent.classList.contains('opacity-50')) {
                parent.classList.remove('opacity-50');
                icon.innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                `;
            } else {
                parent.classList.add('opacity-50');
                icon.innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
                `;
            }
        }

        // ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹ƒAƒbƒvƒ[ƒhˆ—iƒvƒŒƒrƒ…[‚Ì‚İA•Û‘¶‚ÍŒã‚Åj
        let mainVisualData = null;
        let mainVisualFileName = null;
        let mainVisualUrl = null;
        function handleMainVisualUpload(event) {
            const file = event.target.files[0];
            if (file) {
                mainVisualFileName = file.name;
                const reader = new FileReader();
                reader.onload = function(e) {
                    mainVisualData = e.target.result;
                    // ƒvƒŒƒrƒ…[•\¦‚Ì‚İ
                    document.getElementById('mainVisualImage').src = mainVisualData;
                    document.getElementById('mainVisualPreview').classList.remove('hidden');
                    document.getElementById('mainVisualPlaceholder').classList.add('hidden');
                    console.log('[handleMainVisualUpload] Image ready for upload on save');
                };
                reader.readAsDataURL(file);
            }
        }

        // ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹íœ
        function removeMainVisual() {
            mainVisualData = null;
            document.getElementById('mainVisualPreview').classList.add('hidden');
            document.getElementById('mainVisualPlaceholder').classList.remove('hidden');
            document.getElementById('mainVisualInput').value = '';
        }

        // ‰æ‘œˆÊ’u’²®
        let imagePositionX = 50;
        let imagePositionY = 50;
        let currentZoom = 100;
        let currentTextColor = 'white';

        function adjustImagePosition(position) {
            const image = document.getElementById('previewMainVisual');
            if (image) {
                const step = 5; // 5%‚¸‚ÂˆÚ“®
                switch(position) {
                    case 'up':
                        imagePositionY = Math.max(0, imagePositionY - step);
                        break;
                    case 'down':
                        imagePositionY = Math.min(100, imagePositionY + step);
                        break;
                    case 'left':
                        imagePositionX = Math.max(0, imagePositionX - step);
                        break;
                    case 'right':
                        imagePositionX = Math.min(100, imagePositionX + step);
                        break;
                    case 'center':
                        imagePositionX = 50;
                        imagePositionY = 50;
                        break;
                }
                updateImagePosition();
            }
        }

        function updateImagePosition() {
            const image = document.getElementById('previewMainVisual');
            if (image) {
                image.style.objectPosition = `${imagePositionX}% ${imagePositionY}%`;
            }
        }

        // ƒhƒ‰ƒbƒO‚Å‰æ‘œˆÊ’u‚ğ’²®
        let isDragging = false;
        let startX, startY;
        let startPosX, startPosY;

        function initImageDrag() {
            const container = document.getElementById('mainVisualContainer');
            const image = document.getElementById('previewMainVisual');

            if (!container || !image) return;

            // Šù‘¶‚ÌƒCƒxƒ“ƒgƒŠƒXƒi[‚ğíœ
            const newContainer = container.cloneNode(true);
            container.parentNode.replaceChild(newContainer, container);

            newContainer.addEventListener('mousedown', (e) => {
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                startPosX = imagePositionX;
                startPosY = imagePositionY;
                newContainer.style.cursor = 'grabbing';
                e.preventDefault();
            });

            // mousemove‚ÆmouseupƒCƒxƒ“ƒg‚Íˆê“x‚¾‚¯’Ç‰Á
            if (!window.imageDragListenersAdded) {
                window.imageDragListenersAdded = true;

                document.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;

                    const containerRect = document.getElementById('mainVisualContainer')?.getBoundingClientRect();
                    if (!containerRect) return;

                    // ƒ}ƒEƒX‚ÌˆÚ“®—Ê‚ğŒvZ
                    const deltaX = (e.clientX - startX) / containerRect.width * 100;
                    const deltaY = (e.clientY - startY) / containerRect.height * 100;

                    // ‰¡•ûŒü‚ÌˆÚ“®iŠ´“x‚ğ’²®‚µ‚ÄˆÚ“®‚µ‚â‚·‚­‚·‚éj
                    const sensitivityX = 1.0;
                    imagePositionX = Math.max(0, Math.min(100, startPosX - deltaX * sensitivityX));

                    // c•ûŒü‚ÌˆÚ“®
                    const sensitivityY = 1.0;
                    imagePositionY = Math.max(0, Math.min(100, startPosY - deltaY * sensitivityY));

                    updateImagePosition();
                });

                document.addEventListener('mouseup', () => {
                    if (isDragging) {
                        isDragging = false;
                        const newContainer = document.getElementById('mainVisualContainer');
                        if (newContainer) newContainer.style.cursor = 'move';
                    }
                });
            }
        }

        // ‰æ‘œƒY[ƒ€’²®
        function adjustImageZoom(value) {
            const image = document.getElementById('previewMainVisual');
            if (image) {
                currentZoom = parseInt(value);
                const scale = currentZoom / 100;
                image.style.transform = `scale(${scale})`;
                // ƒY[ƒ€•ÏXŒã‚àˆÊ’u‚ÍˆÛ
            }
        }

        // ‰æ‘œ–¾“x’²®
        function adjustImageOpacity(value) {
            const overlay = document.querySelector('#mainVisualSection .absolute.inset-0');
            if (overlay) {
                const opacity = (100 - value) / 100;
                overlay.style.background = `linear-gradient(to bottom, transparent, transparent, rgba(0,0,0,${opacity * 0.5}))`;
            }
        }

        // ‰æ‘œ’²®ƒpƒlƒ‹‚Ì•\¦Ø‚è‘Ö‚¦
        function toggleImageControls() {
            const controls = document.getElementById('visualControls');
            if (controls) {
                controls.classList.toggle('hidden');
            }
        }

        // •¶šFØ‚è‘Ö‚¦
        function adjustTextColor(color) {
            currentTextColor = color;
            const overlayTexts = document.querySelectorAll('#mainVisualSection .absolute.bottom-0 *');

            overlayTexts.forEach(el => {
                if (color === 'black') {
                    el.style.color = '#1f2937';
                    el.classList.remove('text-white');
                    el.classList.add('text-gray-800');
                } else {
                    el.style.color = 'white';
                    el.classList.remove('text-gray-800');
                    el.classList.add('text-white');
                }
            });

            // ƒ{ƒ^ƒ“‚ÌŒ©‚½–Ú‚ğXV
            const whiteBtn = document.getElementById('textColorWhite');
            const blackBtn = document.getElementById('textColorBlack');

            if (color === 'white') {
                whiteBtn.classList.add('border-blue-500');
                whiteBtn.classList.remove('border-gray-800');
                blackBtn.classList.remove('border-blue-500');
                blackBtn.classList.add('border-gray-300');
            } else {
                blackBtn.classList.add('border-blue-500');
                blackBtn.classList.remove('border-gray-300');
                whiteBtn.classList.remove('border-blue-500');
                whiteBtn.classList.add('border-gray-800');
            }
        }

        // ƒMƒƒƒ‰ƒŠ[‰æ‘œ”z—ñ
        let galleryImages = [];
        let galleryFilesToUpload = []; // •Û‘¶ƒ{ƒ^ƒ“‰Ÿ‰º‚ÉƒAƒbƒvƒ[ƒh‚·‚éƒtƒ@ƒCƒ‹

        // ƒhƒ‰ƒbƒO&ƒhƒƒbƒvİ’è
        function setupGalleryDragDrop() {
            const galleryList = document.getElementById('photoGalleryList');
            if (!galleryList) return;

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                galleryList.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                galleryList.addEventListener(eventName, () => {
                    galleryList.classList.add('border-blue-500', 'bg-blue-50');
                }, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                galleryList.addEventListener(eventName, () => {
                    galleryList.classList.remove('border-blue-500', 'bg-blue-50');
                }, false);
            });

            galleryList.addEventListener('drop', (e) => {
                const dt = e.dataTransfer;
                const files = dt.files;
                handleGalleryFiles(files);
            }, false);
        }

        // ƒtƒ@ƒCƒ‹ˆ—‚ğ‹¤’Ê‰»
        function handleGalleryFiles(files) {
            const galleryList = document.getElementById('photoGalleryList');
            const currentImages = galleryList.querySelectorAll('.gallery-item').length;

            if (currentImages >= 20) {
                showNotification('Ê^ƒMƒƒƒ‰ƒŠ[ãŒÀ', 'Ê^ƒMƒƒƒ‰ƒŠ[‚ÍÅ‘å20–‡‚Ü‚Å‚Å‚·B‚±‚êˆÈã’Ç‰Á‚Å‚«‚Ü‚¹‚ñB', 'error');
                return;
            }

            const remainingSlots = 20 - currentImages;
            const filesToAdd = Array.from(files).slice(0, remainingSlots);

            if (files.length > remainingSlots) {
                showNotification('Ê^ƒMƒƒƒ‰ƒŠ[§ŒÀ', `c‚è${remainingSlots}–‡‚Ü‚Å’Ç‰Á‰Â”\‚Å‚·BÅ‰‚Ì${remainingSlots}–‡‚Ì‚İ’Ç‰Á‚µ‚Ü‚·B`, 'warning');
            }

            filesToAdd.forEach(file => {
                if (file && file.type.startsWith('image/')) {
                    const imageId = 'gallery_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const localUrl = URL.createObjectURL(file);
                    const addButton = galleryList.querySelector('.border-dashed');

                    const imageDiv = document.createElement('div');
                    imageDiv.className = 'relative group gallery-item';
                    imageDiv.id = imageId;
                    imageDiv.innerHTML = `
                        <img src="${localUrl}" class="w-full h-24 object-cover rounded-lg" alt="${file.name}">
                        <button type="button" onclick="removeGalleryImage('${imageId}')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    `;

                    galleryList.insertBefore(imageDiv, addButton);

                    const reader = new FileReader();
                    reader.onload = function(e) {
                        galleryFilesToUpload.push({
                            id: imageId,
                            base64Data: e.target.result,
                            fileName: file.name
                        });
                        console.log('[handleGalleryFiles] File ready for upload on save:', file.name);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // ƒMƒƒƒ‰ƒŠ[‰æ‘œ’Ç‰ÁiƒvƒŒƒrƒ…[‚Ì‚İA•Û‘¶‚ÍŒã‚Åj
        function handleGalleryUpload(event) {
            handleGalleryFiles(event.target.files);
            event.target.value = '';
        }


        // ƒMƒƒƒ‰ƒŠ[ƒf[ƒ^‚ğ•Û‘¶
        async function saveGalleryData() {
            try {
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: JSON.stringify({
                        action: 'saveGalleryData',
                        merchantId: window.merchantId,
                        galleryData: galleryImages
                    })
                });

                const result = await response.json();
                if (!result.success) {
                    console.error('ƒMƒƒƒ‰ƒŠ[•Û‘¶ƒGƒ‰[:', result.error);
                }
            } catch (error) {
                console.error('ƒMƒƒƒ‰ƒŠ[•Û‘¶’ÊMƒGƒ‰[:', error);
            }
        }

        // ƒMƒƒƒ‰ƒŠ[‰æ‘œ‚ğíœ
        function removeGalleryImage(imageId) {
            const element = document.getElementById(imageId);
            if (element) {
                element.remove();
                galleryImages = galleryImages.filter(img => img.id !== imageId);
                showNotification('íœŠ®—¹', 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ‚ğíœ‚µ‚Ü‚µ‚½');
                updateGalleryPreview();
            }
        }

        // ƒJƒ‹[ƒZƒ‹ŠÇ—•Ï”
        let currentGalleryIndex = 0;
        let currentExampleIndex = 0;

        // ƒvƒŒƒrƒ…[‚ÌƒMƒƒƒ‰ƒŠ[‚ğXViƒJƒ‹[ƒZƒ‹®j
        function updateGalleryPreview() {
            const previewGalleryList = document.getElementById('previewGalleryList');
            const indicators = document.getElementById('galleryIndicators');

            if (previewGalleryList && galleryImages.length > 0) {
                // –³ŒÀƒ‹[ƒv—p‚É•¡»‚ğì¬
                const extendedImages = [...galleryImages, ...galleryImages, ...galleryImages];

                previewGalleryList.innerHTML = extendedImages.map((img, index) => `
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('${img.src}', '${img.name || 'ƒMƒƒƒ‰ƒŠ[‰æ‘œ'}')">
                        <img src="${img.src}" alt="${img.name}" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                `).join('');

                // ƒCƒ“ƒWƒP[ƒ^[¶¬
                if (indicators) {
                    indicators.innerHTML = galleryImages.map((_, index) => `
                        <button onclick="goToGalleryImage(${index})" class="w-2 h-2 rounded-full transition ${index === currentGalleryIndex % galleryImages.length ? 'bg-blue-600' : 'bg-gray-300'}"></button>
                    `).join('');
                }

                document.getElementById('preview-gallery').style.display = 'block';
                currentGalleryIndex = galleryImages.length; // –³ŒÀƒ‹[ƒv‚Ì’†‰›‚©‚çŠJn
                updateGalleryCarouselPosition();
            } else {
                document.getElementById('preview-gallery').style.display = 'none';
            }
        }

        // ƒMƒƒƒ‰ƒŠ[ƒJƒ‹[ƒZƒ‹ƒXƒNƒ[ƒ‹
        function scrollGallery(direction) {
            if (galleryImages.length === 0) return;

            if (direction === 'left') {
                currentGalleryIndex--;
            } else {
                currentGalleryIndex++;
            }

            updateGalleryCarouselPosition();
        }

        // “Á’è‚ÌƒMƒƒƒ‰ƒŠ[‰æ‘œ‚ÖˆÚ“®
        function goToGalleryImage(index) {
            currentGalleryIndex = index + galleryImages.length;
            updateGalleryCarouselPosition();
        }

        // ƒMƒƒƒ‰ƒŠ[ƒJƒ‹[ƒZƒ‹ˆÊ’uXV
        function updateGalleryCarouselPosition() {
            const carousel = document.getElementById('previewGalleryList');
            const indicators = document.getElementById('galleryIndicators');

            if (carousel && galleryImages.length > 0) {
                const cardWidth = 288 + 16; // w-72 (18rem) + gap-4 (1rem)
                const offset = galleryImages.length * cardWidth;

                // –³ŒÀƒ‹[ƒv‚Ì‚½‚ß‚ÌˆÊ’u’²®
                const position = -currentGalleryIndex * cardWidth - offset;
                carousel.style.transform = `translateX(${position}px)`;

                // ƒXƒ€[ƒY‚È–³ŒÀƒ‹[ƒv
                if (currentGalleryIndex < 0) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentGalleryIndex = galleryImages.length - 1;
                        const newPosition = -currentGalleryIndex * cardWidth - offset;
                        carousel.style.transform = `translateX(${newPosition}px)`;
                        setTimeout(() => {
                            carousel.style.transition = 'transform 300ms';
                        }, 50);
                    }, 300);
                } else if (currentGalleryIndex >= galleryImages.length * 2) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentGalleryIndex = galleryImages.length;
                        const newPosition = -currentGalleryIndex * cardWidth - offset;
                        carousel.style.transform = `translateX(${newPosition}px)`;
                        setTimeout(() => {
                            carousel.style.transition = 'transform 300ms';
                        }, 50);
                    }, 300);
                }

                // ƒCƒ“ƒWƒP[ƒ^[XV
                if (indicators) {
                    const actualIndex = ((currentGalleryIndex % galleryImages.length) + galleryImages.length) % galleryImages.length;
                    indicators.querySelectorAll('button').forEach((btn, index) => {
                        btn.className = `w-2 h-2 rounded-full transition ${index === actualIndex ? 'bg-blue-600' : 'bg-gray-300'}`;
                    });
                }
            }
        }

        // {H–—á”z—ñ
        let constructionExamples = [];
        let exampleIdCounter = 0;

        // {H–—á‚ğ’Ç‰Á
        function addConstructionExample() {
            const exampleId = 'example_' + (++exampleIdCounter);
            const examplesList = document.getElementById('constructionExamplesList');

            const newExample = {
                id: exampleId,
                title: '',
                buildingAge: '',
                content: '',
                price: '',
                beforeImage: null,
                afterImage: null
            };
            constructionExamples.push(newExample);

            const exampleDiv = document.createElement('div');
            exampleDiv.className = 'border rounded-lg p-4';
            exampleDiv.id = exampleId;
            exampleDiv.innerHTML = `
                <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="{Hƒ^ƒCƒgƒ‹i—áFŒËŒš‚ÄŠO•Ç“h‘•j" onchange="updateConstructionExample('${exampleId}', 'title', this.value)">
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <div>
                        <label class="text-xs text-gray-600 mb-1 block">’z”N”</label>
                        <div class="flex items-center">
                            <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" onchange="updateConstructionExample('${exampleId}', 'buildingAge', this.value)">
                            <span class="ml-2 text-sm text-gray-600">”N</span>
                        </div>
                    </div>
                    <div>
                        <label class="text-xs text-gray-600 mb-1 block">{H‹àŠzi–œ‰~j</label>
                        <div class="flex items-center">
                            <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" onchange="updateConstructionExample('${exampleId}', 'price', this.value)">
                            <span class="ml-2 text-sm text-gray-600">–œ‰~</span>
                        </div>
                    </div>
                </div>
                <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="{H“à—ei—áFƒVƒŠƒRƒ““h—¿‚É‚æ‚é3‰ñ“h‚èAFåò‚¹‚Æ‰˜‚ê‚ğ‰ğÁj" onchange="updateConstructionExample('${exampleId}', 'content', this.value)"></textarea>

                <!-- ƒrƒtƒH[ƒAƒtƒ^[‰æ‘œ -->
                <div class="grid grid-cols-2 gap-4 mb-2">
                    <div>
                        <label class="text-xs font-semibold text-gray-600 mb-1 block">{H‘OiBeforej</label>
                        <input type="file" id="beforeImage_${exampleId}" accept="image/*" style="display: none;" onchange="handleExampleImage('${exampleId}', 'before', event)">
                        <div id="beforePreview_${exampleId}" class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500" onclick="document.getElementById('beforeImage_${exampleId}').click()">
                            <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <span class="text-xs text-gray-500">ƒNƒŠƒbƒN‚µ‚Ä‰æ‘œ‚ğ‘I‘ğ</span>
                        </div>
                    </div>
                    <div>
                        <label class="text-xs font-semibold text-gray-600 mb-1 block">{HŒãiAfterj</label>
                        <input type="file" id="afterImage_${exampleId}" accept="image/*" style="display: none;" onchange="handleExampleImage('${exampleId}', 'after', event)">
                        <div id="afterPreview_${exampleId}" class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500" onclick="document.getElementById('afterImage_${exampleId}').click()">
                            <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <span class="text-xs text-gray-500">ƒNƒŠƒbƒN‚µ‚Ä‰æ‘œ‚ğ‘I‘ğ</span>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end">
                    <button onclick="removeConstructionExample('${exampleId}')" class="text-red-600 hover:text-red-800 text-sm">
                        <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        ‚±‚Ì–—á‚ğíœ
                    </button>
                </div>
            `;

            examplesList.appendChild(exampleDiv);
        }

        // {H–—á‚ğXV
        function updateConstructionExample(exampleId, field, value) {
            const example = constructionExamples.find(e => e.id === exampleId);
            if (example) {
                example[field] = value;
                updateExamplesPreview();
            }
        }

        // {H–—á‚Ì‰æ‘œ‚ğˆ—
        function handleExampleImage(exampleId, type, event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const example = constructionExamples.find(ex => ex.id === exampleId);
                    if (example) {
                        if (type === 'before') {
                            example.beforeImage = e.target.result;
                            // ƒvƒŒƒrƒ…[‚ğ‰æ‘œ‚É’u‚«Š·‚¦
                            const preview = document.getElementById(`beforePreview_${exampleId}`);
                            if (preview) {
                                preview.innerHTML = `<img src="${e.target.result}" class="w-full h-32 object-cover rounded" alt="{H‘O">`;
                            }
                        } else {
                            example.afterImage = e.target.result;
                            // ƒvƒŒƒrƒ…[‚ğ‰æ‘œ‚É’u‚«Š·‚¦
                            const preview = document.getElementById(`afterPreview_${exampleId}`);
                            if (preview) {
                                preview.innerHTML = `<img src="${e.target.result}" class="w-full h-32 object-cover rounded" alt="{HŒã">`;
                            }
                        }
                        updateExamplesPreview();
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        // {H–—á‚ğíœ
        function removeConstructionExample(exampleId) {
            const element = document.getElementById(exampleId);
            if (element) {
                element.remove();
                constructionExamples = constructionExamples.filter(e => e.id !== exampleId);
                showNotification('íœŠ®—¹', '{H–—á‚ğíœ‚µ‚Ü‚µ‚½');
                updateExamplesPreview();
            }
        }

        // ƒvƒŒƒrƒ…[‚Ì{H–—á‚ğXViƒJƒ‹[ƒZƒ‹®j
        function updateExamplesPreview() {
            const previewExamplesList = document.getElementById('previewExamplesList');
            const indicators = document.getElementById('examplesIndicators');

            if (previewExamplesList) {
                const validExamples = constructionExamples.filter(e => (e.title || e.content) && (e.beforeImage || e.afterImage));

                if (validExamples.length > 0) {
                    // –³ŒÀƒ‹[ƒv—p‚É•¡»‚ğì¬
                    const extendedExamples = [...validExamples, ...validExamples, ...validExamples];

                    previewExamplesList.innerHTML = extendedExamples.map(example => `
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                ${(example.beforeImage && example.afterImage) ? `
                                    <!-- ƒrƒtƒH[ƒAƒtƒ^[”äŠr -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('${example.beforeImage}', '{H‘O')">
                                            <img src="${example.beforeImage}" alt="{H‘O" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('${example.afterImage}', '{HŒã')">
                                            <img src="${example.afterImage}" alt="{HŒã" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                ` : (example.beforeImage || example.afterImage) ? `
                                    <!-- •Ğ•û‚Ì‚İ‚Ì‰æ‘œ -->
                                    <div class="relative cursor-pointer" onclick="openImageModal('${example.beforeImage || example.afterImage}', '${example.beforeImage ? '{H‘O' : '{HŒã'}')">
                                        <img src="${example.beforeImage || example.afterImage}" alt="${example.beforeImage ? '{H‘O' : '{HŒã'}" class="w-full h-48 object-cover hover:opacity-90 transition">
                                    </div>
                                ` : ''}
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">${example.title ? `${example.buildingAge ? `’z${example.buildingAge}”N ` : ''}${example.title}` : '{H–—á'}</h4>
                                    ${example.price ? `
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">H–‹àŠz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                ${Number(example.price).toLocaleString()}–œ‰~
                                            </span>
                                        </div>
                                    ` : ''}
                                </div>
                                <p class="text-sm text-gray-600">${example.content || 'Ú×î•ñ'}</p>
                            </div>
                        </div>
                    `).join('');

                    // ƒCƒ“ƒWƒP[ƒ^[¶¬
                    if (indicators) {
                        indicators.innerHTML = validExamples.map((_, index) => `
                            <button onclick="goToExample(${index})" class="w-2 h-2 rounded-full transition ${index === currentExampleIndex % validExamples.length ? 'bg-blue-600' : 'bg-gray-300'}"></button>
                        `).join('');
                    }

                    document.getElementById('preview-examples').style.display = 'block';
                    currentExampleIndex = validExamples.length;
                    updateExamplesCarouselPosition();
                } else {
                    document.getElementById('preview-examples').style.display = 'none';
                }
            }
        }

        // {H–—áƒJƒ‹[ƒZƒ‹ƒXƒNƒ[ƒ‹
        function scrollExamples(direction) {
            const validExamples = constructionExamples.filter(e => (e.title || e.content) && (e.beforeImage || e.afterImage));
            if (validExamples.length === 0) return;

            if (direction === 'left') {
                currentExampleIndex--;
            } else {
                currentExampleIndex++;
            }

            updateExamplesCarouselPosition();
        }

        // “Á’è‚Ì{H–—á‚ÖˆÚ“®
        function goToExample(index) {
            const validExamples = constructionExamples.filter(e => (e.title || e.content) && (e.beforeImage || e.afterImage));
            currentExampleIndex = index + validExamples.length;
            updateExamplesCarouselPosition();
        }

        // {H–—áƒJƒ‹[ƒZƒ‹ˆÊ’uXV
        function updateExamplesCarouselPosition() {
            const carousel = document.getElementById('previewExamplesList');
            const indicators = document.getElementById('examplesIndicators');
            const validExamples = constructionExamples.filter(e => (e.title || e.content) && (e.beforeImage || e.afterImage));

            if (carousel && validExamples.length > 0) {
                const cardWidth = carousel.firstElementChild ? carousel.firstElementChild.offsetWidth + 16 : 400;
                const offset = validExamples.length * cardWidth;

                // –³ŒÀƒ‹[ƒv‚Ì‚½‚ß‚ÌˆÊ’u’²®
                const position = -currentExampleIndex * cardWidth - offset;
                carousel.style.transform = `translateX(${position}px)`;

                // ƒXƒ€[ƒY‚È–³ŒÀƒ‹[ƒv
                if (currentExampleIndex < 0) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentExampleIndex = validExamples.length - 1;
                        const newPosition = -currentExampleIndex * cardWidth - offset;
                        carousel.style.transform = `translateX(${newPosition}px)`;
                        setTimeout(() => {
                            carousel.style.transition = 'transform 300ms';
                        }, 50);
                    }, 300);
                } else if (currentExampleIndex >= validExamples.length * 2) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentExampleIndex = validExamples.length;
                        const newPosition = -currentExampleIndex * cardWidth - offset;
                        carousel.style.transform = `translateX(${newPosition}px)`;
                        setTimeout(() => {
                            carousel.style.transition = 'transform 300ms';
                        }, 50);
                    }, 300);
                }

                // ƒCƒ“ƒWƒP[ƒ^[XV
                if (indicators) {
                    const actualIndex = ((currentExampleIndex % validExamples.length) + validExamples.length) % validExamples.length;
                    indicators.querySelectorAll('button').forEach((btn, index) => {
                        btn.className = `w-2 h-2 rounded-full transition ${index === actualIndex ? 'bg-blue-600' : 'bg-gray-300'}`;
                    });
                }
            }
        }

        // ƒGƒŠƒA‘I‘ğŠÖ˜AŠÖ”
        const areaSelectionData = {
            prefectures: [],
            cities: {},
            priorities: [],
            totalCount: 0
        };
        const maxPrefectures = 5;
        const maxPriorityAreas = 3;

        // “s“¹•{Œ§ƒŠƒXƒg
        const allPrefectures = [
            '–kŠC“¹', 'ÂXŒ§', 'ŠâèŒ§', '‹{éŒ§', 'H“cŒ§', 'RŒ`Œ§', '•Ÿ“‡Œ§',
            'ˆïéŒ§', '“È–ØŒ§', 'ŒQ”nŒ§', 'é‹ÊŒ§', 'ç—tŒ§', '“Œ‹“s', '_“ŞìŒ§',
            'VŠƒŒ§', '•xRŒ§', 'ÎìŒ§', '•ŸˆäŒ§', 'R—œŒ§', '’·–ìŒ§', 'Šò•ŒŒ§',
            'Ã‰ªŒ§', 'ˆ¤’mŒ§', 'OdŒ§', ' ‰êŒ§', '‹“s•{', '‘åã•{', '•ºŒÉŒ§',
            '“Ş—ÇŒ§', '˜a‰ÌRŒ§', '’¹æŒ§', '“‡ªŒ§', '‰ªRŒ§', 'L“‡Œ§', 'RŒûŒ§',
            '“¿“‡Œ§', 'ìŒ§', 'ˆ¤•QŒ§', '‚’mŒ§', '•Ÿ‰ªŒ§', '²‰êŒ§', '’·èŒ§',
            'ŒF–{Œ§', '‘å•ªŒ§', '‹{èŒ§', '­™“‡Œ§', '‰«“êŒ§'
        ];

        // s‹æ’¬‘ºƒf[ƒ^ƒx[ƒX
        // s‹æ’¬‘ºƒf[ƒ^ƒx[ƒXiå—v11“s•{Œ§‚ÌŠ®‘Sƒf[ƒ^j
        const cityDatabase = {
            '“Œ‹“s': [
                'ç‘ã“c‹æ', '’†‰›‹æ', '`‹æ', 'Vh‹æ', '•¶‹‹æ', '‘ä“Œ‹æ',
                '–n“c‹æ', ']“Œ‹æ', '•iì‹æ', '–Ú•‹æ', '‘å“c‹æ', '¢“c’J‹æ',
                'a’J‹æ', '’†–ì‹æ', '™•À‹æ', '–L“‡‹æ', '–k‹æ', 'rì‹æ',
                '”Â‹´‹æ', '—û”n‹æ', '‘«—§‹æ', 'Š‹ü‹æ', ']ŒËì‹æ',
                '”ª‰¤qs', '—§ìs', '•‘ –ìs', 'O‘és', 'Â”~s', '•{’†s',
                'º“‡s', '’²•zs', '’¬“cs', '¬‹àˆäs', '¬•½s', '“ú–ìs',
                '“Œ‘ºRs', '‘•ª›s', '‘—§s', '•Ÿ¶s', ']s', '“Œ‘å˜as',
                '´£s', '“Œ‹v—¯•Äs', '•‘ ‘ºRs', '‘½–€s', 'ˆîés', '‰H‘ºs',
                '‚ ‚«‚é–ìs', '¼“Œ‹s', '•ä’¬', '“ú‚Ìo’¬', 'wŒ´‘º', '‰œ‘½–€’¬'
            ],
            '_“ŞìŒ§': [
                '‰¡•ls’ßŒ©‹æ', '‰¡•ls_“Şì‹æ', '‰¡•ls¼‹æ', '‰¡•ls’†‹æ',
                '‰¡•ls“ì‹æ', '‰¡•ls•Û“yƒP’J‹æ', '‰¡•lsˆéq‹æ', '‰¡•ls‹à‘ò‹æ',
                '‰¡•ls`–k‹æ', '‰¡•lsŒË’Ë‹æ', '‰¡•ls`“ì‹æ', '‰¡•lsˆ®‹æ',
                '‰¡•ls—Î‹æ', '‰¡•ls£’J‹æ', '‰¡•ls‰h‹æ', '‰¡•lsò‹æ',
                '‰¡•lsÂ—t‹æ', '‰¡•ls“s’}‹æ', 'ìèsìè‹æ', 'ìèsK‹æ',
                'ìès’†Œ´‹æ', 'ìès‚’Ã‹æ', 'ìès‘½–€‹æ', 'ìès‹{‘O‹æ',
                'ìès–ƒ¶‹æ', '‘Š–ÍŒ´s—Î‹æ', '‘Š–ÍŒ´s’†‰›‹æ', '‘Š–ÍŒ´s“ì‹æ',
                '‰¡{‰ês', '•½’Ës', 'Š™‘qs', '“¡‘òs', '¬“cŒ´s', 'Šƒ–ès',
                '€qs', 'O‰Ys', '`–ìs', 'Œú–Øs', '‘å˜as', 'ˆÉ¨Œ´s',
                'ŠC˜V–¼s', 'ÀŠÔs', '“ì‘«•¿s', 'ˆ»£s'
            ],
            'é‹ÊŒ§': [
                '‚³‚¢‚½‚Üs¼‹æ', '‚³‚¢‚½‚Üs–k‹æ', '‚³‚¢‚½‚Üs‘å‹{‹æ', '‚³‚¢‚½‚ÜsŒ©À‹æ',
                '‚³‚¢‚½‚Üs’†‰›‹æ', '‚³‚¢‚½‚Üs÷‹æ', '‚³‚¢‚½‚Üs‰Y˜a‹æ', '‚³‚¢‚½‚Üs“ì‹æ',
                '‚³‚¢‚½‚Üs—Î‹æ', '‚³‚¢‚½‚ÜsŠâ’Î‹æ', 'ì‰zs', 'ŒF’Js', 'ìŒûs',
                's“cs', '’•ƒs', 'Š‘òs', '”Ñ”\s', '‰Á{s', '–{¯s',
                '“Œ¼Rs', 't“ú•”s', '‹·Rs', '‰H¶s', 'ƒ‘ƒs', '[’Js',
                'ã”ös', '‘‰Ás', '‰z’Js', '˜ns', 'ŒË“cs', '“üŠÔs',
                '’©‰às', 'u–Øs', '˜aŒõs', 'VÀs', '‰±ìs', '‹vŠìs',
                '–k–{s', '”ª’ªs', '•xmŒ©s', 'O‹½s', '˜@“cs', 'âŒËs',
                'Kès', '’ßƒ–“‡s', '“ú‚s', '‹gìs', '‚Ó‚¶‚İ–ìs', '”’‰ªs'
            ],
            'ç—tŒ§': [
                'ç—ts’†‰›‹æ', 'ç—ts‰ÔŒ©ì‹æ', 'ç—tsˆî–Ñ‹æ', 'ç—tsá—t‹æ',
                'ç—ts—Î‹æ', 'ç—ts”ü•l‹æ', '’¶qs', 'sìs', '‘D‹´s',
                'ŠÙRs', '–ØX’Ãs', '¼ŒËs', '–ì“cs', '–ÎŒ´s', '¬“cs',
                '²‘qs', '“Œ‹às', 'ˆ®s', 'Ku–ìs', '”s', 'Ÿ‰Ys',
                'sŒ´s', '—¬Rs', '”ªç‘ãs', '‰ä‘·qs', 'Š›ìs', 'Š™ƒP’Js',
                'ŒN’Ãs', '•x’Ãs', '‰YˆÀs', 'lŠX“¹s', '‘³ƒP‰Ys', '”ªŠXs',
                'ˆó¼s', '”’ˆäs', '•x—¢s', '“ì–[‘s', '‘xºs', 'æs',
                'R•s', '‚¢‚·‚İs', '‘å–Ô”’—¢s'
            ],
            'Šò•ŒŒ§': [
                'Šò•Œs', '‘åŠ_s', '‚Rs', '‘½¡Œ©s', 'ŠÖs', '’†’Ãìs',
                '”ü”Zs', '˜Qs', '‰H“‡s', 'Œb“ßs', '”ü”Z‰Á–Îs', '“yŠòs',
                'Še–±Œ´s', '‰Â™s', 'RŒ§s', '•äs', '”ò‘Ës', '–{‘ƒs',
                'ŒSãs', '‰º˜Cs', 'ŠC’Ãs'
            ],
            'ˆ¤’mŒ§': [
                '–¼ŒÃ‰®sçí‹æ', '–¼ŒÃ‰®s“Œ‹æ', '–¼ŒÃ‰®s–k‹æ', '–¼ŒÃ‰®s¼‹æ',
                '–¼ŒÃ‰®s’†‘º‹æ', '–¼ŒÃ‰®s’†‹æ', '–¼ŒÃ‰®sº˜a‹æ', '–¼ŒÃ‰®s•ä‹æ',
                '–¼ŒÃ‰®s”M“c‹æ', '–¼ŒÃ‰®s’†ì‹æ', '–¼ŒÃ‰®s`‹æ', '–¼ŒÃ‰®s“ì‹æ',
                '–¼ŒÃ‰®sçR‹æ', '–¼ŒÃ‰®s—Î‹æ', '–¼ŒÃ‰®s–¼“Œ‹æ', '–¼ŒÃ‰®s“V”’‹æ',
                '–L‹´s', '‰ªès', 'ˆê‹{s', '£ŒËs', '”¼“cs', 't“úˆäs',
                '–Lìs', '’Ã“‡s', '•É“ìs', 'Š ’Js', '–L“cs', 'ˆÀés',
                '¼”ös', 'Š—ŒSs', 'Œ¢Rs', 'íŠŠs', ']“ìs', '¬–qs',
                'ˆî‘òs', 'Vés', '“ŒŠCs', '‘å•{s', '’m‘½s', '’m—§s',
                '”ö’£ˆ®s', '‚•ls', 'Šâ‘qs', '–L–¾s', '“úis', '“cŒ´s',
                'ˆ¤¼s', '´{s', '–k–¼ŒÃ‰®s', '–í•xs', '‚İ‚æ‚µs', '‚ ‚Üs',
                '’·‹vès'
            ],
            '‘åã•{': [
                '‘åãs“s“‡‹æ', '‘åãs•Ÿ“‡‹æ', '‘åãsŸ‰Ô‹æ', '‘åãs¼‹æ',
                '‘åãs`‹æ', '‘åãs‘å³‹æ', '‘åãs“V‰¤›‹æ', '‘åãs˜Q‘¬‹æ',
                '‘åãs¼—„ì‹æ', '‘åãs“Œ—„ì‹æ', '‘åãs“Œ¬‹æ', '‘åãs¶–ì‹æ',
                '‘åãsˆ®‹æ', '‘åãsé“Œ‹æ', '‘åãsˆ¢”{–ì‹æ', '‘åãsZ‹g‹æ',
                '‘åãs“ŒZ‹g‹æ', '‘åãs¼¬‹æ', '‘åãs—„ì‹æ', '‘åãs’ßŒ©‹æ',
                '‘åãsZ”V]‹æ', '‘åãs•½–ì‹æ', '‘åãs–k‹æ', '‘åãs’†‰›‹æ',
                'äsä‹æ', 'äs’†‹æ', 'äs“Œ‹æ', 'äs¼‹æ', 'äs“ì‹æ',
                'äs–k‹æ', 'äs”üŒ´‹æ', 'Šİ˜a“cs', '–L’†s', '’r“cs',
                '“cs', 'ò‘å’Ãs', '‚’Îs', 'ŠL’Ës', 'çŒûs', '–‡•ûs',
                'ˆï–Øs', '”ª”ös', 'ò²–ìs', '•x“c—Ñs', 'Q‰®ìs', '‰Í“à’·–ìs',
                '¼Œ´s', '‘å“Œs', '˜aòs', '–¥–Ês', '”Œ´s', '‰H‰g–ìs',
                '–å^s', 'Û’Ãs', '‚Îs', '“¡ˆä›s', '“Œ‘åãs', 'ò“ìs',
                'lŠ“ës', 'Œğ–ìs', '‘åã‹·Rs', 'ã“ìs'
            ],
            '‹“s•{': [
                '‹“ss–k‹æ', '‹“ssã‹‹æ', '‹“ss¶‹‹æ', '‹“ss’†‹‹æ',
                '‹“ss“ŒR‹æ', '‹“ss‰º‹‹æ', '‹“ss“ì‹æ', '‹“ss‰E‹‹æ',
                '‹“ss•šŒ©‹æ', '‹“ssR‰È‹æ', '‹“ss¼‹‹æ', '•Ÿ’mRs',
                '•‘’ßs', 'ˆ»•”s', '‰F¡s', '‹{’Ãs', '‹T‰ªs', 'é—zs',
                'Œü“ús', '’·‰ª‹s', '”ª”¦s', '‹“c•Ós', '‹’OŒãs', '“ì’Os',
                '–Ø’Ãìs'
            ],
            '•ºŒÉŒ§': [
                '_ŒËs“Œ“å‹æ', '_ŒËs“å‹æ', '_ŒËs•ºŒÉ‹æ', '_ŒËs’·“c‹æ',
                '_ŒËs{–‹æ', '_ŒËs‚…‹æ', '_ŒËs–k‹æ', '_ŒËs’†‰›‹æ',
                '_ŒËs¼‹æ', '•P˜Hs', '“òès', '–¾Îs', '¼‹{s', 'F–{s',
                'ˆ°‰®s', 'ˆÉ’Os', '‘Š¶s', '–L‰ªs', '‰ÁŒÃìs', 'Ô•äs',
                '¼˜es', '•ó’Ës', 'O–Øs', '‚»s', 'ì¼s', '¬–ìs',
                'O“cs', '‰Á¼s', '’O”gÂRs', '—{•ƒs', '’O”gs', '“ì‚ ‚í‚¶s',
                '’©—ˆs', '’W˜Hs', '³ˆ¾s', '‰Á“Œs', '‚½‚Â‚Ìs'
            ],
            '“Ş—ÇŒ§': [
                '“Ş—Çs', '‘å˜a‚“cs', '‘å˜aŒSRs', '“V—s', 'Š€Œ´s', '÷ˆäs',
                'ŒÜŠs', 'ŒäŠs', '¶‹îs', 'Ås', 'Š‹és', '‰F‘És'
            ],
            'ˆ¤•QŒ§': [
                '¼Rs', '¡¡s', '‰F˜a“‡s', '”ª”¦•ls', 'V‹•ls', '¼ğs',
                '‘åFs', 'ˆÉ—\s', 'l‘’†‰›s', '¼—\s', '“Œ‰·s'
            ]
        };

        // ƒfƒtƒHƒ‹ƒg‚Ìs‹æ’¬‘ºƒŠƒXƒgiå—v10sj- ‰Á–¿“X“o˜^ƒVƒXƒeƒ€‚Æ“¯Šú
        const defaultCities = {
            '–kŠC“¹': ['D–ys', '”ŸŠÙs', '¬’Ms', 'ˆ®ìs', 'º—–s', '‹ú˜Hs', '‘ÑLs', '–kŒ©s', '—[’£s', 'ŠâŒ©‘òs'],
            'ÂXŒ§': ['ÂXs', 'O‘Os', '”ªŒËs', '•Îs', 'ŒÜŠìŒ´s', '\˜a“cs', 'O‘òs', '‚Ş‚Âs', '‚Â‚ª‚és', '•½ìs'],
            'ŠâèŒ§': ['·‰ªs', '‹{ŒÃs', '‘å‘D“ns', '‰ÔŠªs', '–kãs', '‹vœs', '‰“–ìs', 'ˆêŠÖs', '—¤‘O‚“cs', 'Š˜Îs'],
            '‹{éŒ§': ['å‘äsÂ—t‹æ', 'å‘äs‹{é–ì‹æ', 'å‘äsá—Ñ‹æ', 'å‘äs‘¾”’‹æ', 'å‘äsò‹æ', 'ÎŠªs', '‰–â}s', '‹CåÀs', '”’Îs', '–¼æs'],
            'H“cŒ§': ['H“cs', '”\‘ãs', '‰¡ès', '‘åŠÙs', '’j­s', '“’‘òs', '­Šps', '—R—˜–{‘‘s', 'Šƒãs', '‘åås'],
            'RŒ`Œ§': ['RŒ`s', '•Ä‘òs', '’ß‰ªs', 'ğ“cs', 'V¯s', 'Š¦‰Í]s', 'ãRs', '‘ºRs', '’·ˆäs', '“V“¶s'],
            '•Ÿ“‡Œ§': ['•Ÿ“‡s', '‰ï’Ãá¼s', 'ŒSRs', '‚¢‚í‚«s', '”’‰Ís', '{‰êìs', 'Šì‘½•ûs', '‘Š”ns', '“ñ–{¼s', '“c‘ºs']
        };

        // s‹æ’¬‘º‚Ìæ“¾i‰Á–¿“X“o˜^ƒVƒXƒeƒ€‚Æ“¯‚¶ƒƒWƒbƒNj
        function getCitiesForPrefecture(prefecture) {
            // ‚Ü‚¸Š®‘Sƒf[ƒ^‚ğŠm”F
            if (cityDatabase[prefecture]) {
                return cityDatabase[prefecture];
            }
            // ƒfƒtƒHƒ‹ƒg‚Ìå—v10s‚ğ•Ô‚·
            if (defaultCities[prefecture]) {
                return defaultCities[prefecture];
            }
            // ŠY“–‚È‚µ‚Ìê‡‚Íu‘Sˆæv
            return ['‘Sˆæ'];
        }

        // ƒy[ƒW“Ç‚İ‚İ‚É“s“¹•{Œ§ƒ{ƒ^ƒ“‚ğ¶¬
        document.addEventListener('DOMContentLoaded', function() {
            initializeAreaSelection();
        });

        // ƒGƒŠƒA‘I‘ğ‚ğ‰Šú‰»
        function initializeAreaSelection() {
            const grid = document.getElementById('allPrefecturesGrid');
            if (!grid) return;

            grid.innerHTML = allPrefectures.map(pref => `
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm"
                        data-prefecture="${pref}"
                        onclick="togglePrefecture('${pref}')">
                    ${pref}
                </button>
            `).join('');
        }

        // “s“¹•{Œ§‘I‘ğƒgƒOƒ‹
        function togglePrefecture(prefecture) {
            const button = document.querySelector(`[data-prefecture="${prefecture}"]`);
            const isSelected = button.classList.contains('selected');

            if (isSelected) {
                // ‘I‘ğ‰ğœ
                button.classList.remove('selected', 'bg-blue-500', 'text-white');
                button.classList.add('bg-white');
                areaSelectionData.prefectures = areaSelectionData.prefectures.filter(p => p !== prefecture);
                delete areaSelectionData.cities[prefecture];
                areaSelectionData.priorities = areaSelectionData.priorities.filter(p => !p.startsWith(prefecture));
            } else {
                // ‘I‘ğãŒÀƒ`ƒFƒbƒN
                if (areaSelectionData.prefectures.length >= maxPrefectures) {
                    showNotification('ãŒÀ‚ğ’´‚¦‚Ü‚µ‚½', `“s“¹•{Œ§‚ÍÅ‘å${maxPrefectures}‚Â‚Ü‚Å‘I‘ğ‰Â”\‚Å‚·`);
                    return;
                }
                // ‘I‘ğ’Ç‰Á
                button.classList.add('selected', 'bg-blue-500', 'text-white');
                button.classList.remove('bg-white');
                areaSelectionData.prefectures.push(prefecture);
                // ƒfƒtƒHƒ‹ƒg‚Å‘Ss‹æ’¬‘º‚ğ‘I‘ğ
                areaSelectionData.cities[prefecture] = getCitiesForPrefecture(prefecture);
            }

            updateAreaSelectionUI();
        }

        // ƒGƒŠƒA‘I‘ğUIXV
        function updateAreaSelectionUI() {
            // ƒJƒEƒ“ƒgXV
            const prefCountEl = document.getElementById('selectedPrefCount');
            const cityCountEl = document.getElementById('selectedCityCount');

            if (prefCountEl) {
                prefCountEl.textContent = areaSelectionData.prefectures.length;
            }

            const totalCities = Object.values(areaSelectionData.cities).reduce((sum, cities) => sum + cities.length, 0);
            if (cityCountEl) {
                cityCountEl.textContent = totalCities;
            }
            areaSelectionData.totalCount = totalCities;

            // s‹æ’¬‘º‘I‘ğƒGƒŠƒA‚Ì•\¦/”ñ•\¦
            const cityArea = document.getElementById('citySelectionArea');
            if (cityArea) {
                if (areaSelectionData.prefectures.length > 0) {
                    cityArea.classList.remove('hidden');
                    updateCitySelectionArea();
                } else {
                    cityArea.classList.add('hidden');
                }
            }

            // —DæƒGƒŠƒAİ’è‚Ì•\¦/”ñ•\¦
            const priorityArea = document.getElementById('priorityArea');
            if (priorityArea) {
                if (totalCities > 0) {
                    priorityArea.classList.remove('hidden');
                    updatePriorityArea();
                } else {
                    priorityArea.classList.add('hidden');
                }
            }

            // Šm”Fƒ{ƒ^ƒ“‚Ì—LŒø/–³Œø
            const confirmBtn = document.getElementById('areaConfirmBtn');
            if (confirmBtn) {
                confirmBtn.disabled = areaSelectionData.prefectures.length === 0;
            }
        }

        // s‹æ’¬‘º‘I‘ğƒGƒŠƒAXV
        function updateCitySelectionArea() {
            const cityContainer = document.getElementById('cityListContainer');
            if (!cityContainer) return;

            cityContainer.innerHTML = areaSelectionData.prefectures.map(prefecture => {
                const allCities = getCitiesForPrefecture(prefecture);
                const selectedCities = areaSelectionData.cities[prefecture] || [];

                return `
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">${prefecture}</h5>
                                <span class="text-sm text-gray-600">
                                    ${selectedCities.length} / ${allCities.length} ‘I‘ğ’†
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox"
                                       ${selectedCities.length === allCities.length ? 'checked' : ''}
                                       onchange="toggleAllCities('${prefecture}', this.checked)">
                                <span class="ml-2 text-sm font-medium">‚·‚×‚Ä‘I‘ğ</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            ${allCities.map(city => `
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox"
                                           value="${city}"
                                           ${selectedCities.includes(city) ? 'checked' : ''}
                                           onchange="toggleCity('${prefecture}', '${city}', this.checked)">
                                    <span class="ml-2 text-sm">${city}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // s‹æ’¬‘º‘I‘ğƒgƒOƒ‹
        function toggleCity(prefecture, city, checked) {
            if (!areaSelectionData.cities[prefecture]) {
                areaSelectionData.cities[prefecture] = [];
            }

            if (checked) {
                if (!areaSelectionData.cities[prefecture].includes(city)) {
                    areaSelectionData.cities[prefecture].push(city);
                }
            } else {
                areaSelectionData.cities[prefecture] = areaSelectionData.cities[prefecture].filter(c => c !== city);
                // —DæƒGƒŠƒA‚©‚ç‚àíœ
                const priorityKey = `${prefecture}_${city}`;
                areaSelectionData.priorities = areaSelectionData.priorities.filter(p => p !== priorityKey);
            }

            updateAreaSelectionUI();
        }

        // ‘Ss‹æ’¬‘º‘I‘ğØ‚è‘Ö‚¦
        function toggleAllCities(prefecture, checked) {
            const allCities = getCitiesForPrefecture(prefecture);

            if (checked) {
                areaSelectionData.cities[prefecture] = [...allCities];
            } else {
                areaSelectionData.cities[prefecture] = [];
                // —DæƒGƒŠƒA‚©‚ç‚àíœ
                areaSelectionData.priorities = areaSelectionData.priorities.filter(
                    p => !p.startsWith(prefecture + '_')
                );
            }

            updateCitySelectionArea();
            updateAreaSelectionUI();
        }

        // —DæƒGƒŠƒAXV
        function updatePriorityArea() {
            const listContainer = document.getElementById('prioritySelectionList');
            if (!listContainer) return;

            // ƒJƒEƒ“ƒ^[XV‚ÍtogglePriorityArea“à‚Ås‚¤‚Ì‚Å‚±‚±‚Å‚Í•s—v

            // “s“¹•{Œ§‚²‚Æ‚ÉƒOƒ‹[ƒv‰»
            const groupedByPref = {};
            Object.keys(areaSelectionData.cities).forEach(pref => {
                if (!groupedByPref[pref]) {
                    groupedByPref[pref] = [];
                }
                areaSelectionData.cities[pref].forEach(city => {
                    groupedByPref[pref].push({
                        key: `${pref}_${city}`,
                        city: city
                    });
                });
            });

            if (Object.keys(groupedByPref).length === 0) {
                listContainer.innerHTML = '<p class="text-gray-500 text-sm">s‹æ’¬‘º‚ğ‘I‘ğ‚·‚é‚ÆA—DæƒGƒŠƒA‚Ìİ’è‚ª‰Â”\‚É‚È‚è‚Ü‚·</p>';
                return;
            }

            // Œ§‚²‚Æ‚ÉƒJ[ƒhŒ`®‚Å•\¦iƒ‚ƒoƒCƒ‹‘Î‰j
            listContainer.innerHTML = `
                <div class="border border-gray-200 rounded-lg bg-white p-3 sm:p-4">
                    <h5 class="font-semibold text-sm sm:text-base mb-3 flex items-center">
                        <span class="text-red-500 mr-2">??</span>
                        <span class="flex-1">‘I‘ğ‰Â”\‚ÈƒGƒŠƒA</span>
                        <span class="text-xs sm:text-sm text-gray-600">‘S${Object.values(groupedByPref).reduce((sum, cities) => sum + cities.length, 0)}ƒGƒŠƒA</span>
                    </h5>
                    <div class="space-y-3 sm:space-y-4 max-h-96 overflow-y-auto">
                        ${Object.entries(groupedByPref).map(([pref, cities]) => `
                            <div class="bg-gray-50 rounded-lg p-2 sm:p-3">
                                <h6 class="font-medium text-xs sm:text-sm mb-2 flex items-center text-gray-700">
                                    <span class="text-red-500 mr-1 sm:mr-2">??</span>
                                    ${pref}
                                </h6>
                                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1.5 sm:gap-2 ml-0 sm:ml-6">
                                    ${cities.map(city => `
                                        <label class="flex items-center p-1.5 sm:p-2 bg-white hover:bg-yellow-50 rounded cursor-pointer text-xs sm:text-sm transition-colors">
                                            <input type="checkbox"
                                                   class="w-4 h-4 sm:w-auto sm:h-auto"
                                                   value="${city.key}"
                                                   ${areaSelectionData.priorities.includes(city.key) ? 'checked' : ''}
                                                   onchange="togglePriorityArea('${city.key}', this.checked)">
                                            <span class="ml-1.5 sm:ml-2 leading-tight">${city.city}</span>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // —DæƒGƒŠƒAƒgƒOƒ‹
        function togglePriorityArea(areaKey, checked) {
            console.log('togglePriorityArea called:', areaKey, checked, 'current priorities:', areaSelectionData.priorities.length);

            if (checked) {
                // 3‚ÂˆÈã‘I‘ğ‚³‚ê‚Ä‚¢‚éê‡‚Í‘I‘ğ‚ğ–h‚®
                if (areaSelectionData.priorities.length >= 3) {
                    showNotification('ãŒÀ‚ğ’´‚¦‚Ü‚µ‚½', '—DæƒGƒŠƒA‚ÍÅ‘å3‚Â‚Ü‚Å‘I‘ğ‰Â”\‚Å‚·');
                    // ƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ğŒ³‚É–ß‚·
                    setTimeout(() => {
                        const checkbox = document.querySelector(`input[value="${areaKey}"]`);
                        if (checkbox) {
                            checkbox.checked = false;
                        }
                    }, 0);
                    return;
                }
                if (!areaSelectionData.priorities.includes(areaKey)) {
                    areaSelectionData.priorities.push(areaKey);
                }
            } else {
                areaSelectionData.priorities = areaSelectionData.priorities.filter(p => p !== areaKey);
            }

            console.log('After update, priorities:', areaSelectionData.priorities.length, areaSelectionData.priorities);

            // —DæƒGƒŠƒAƒJƒEƒ“ƒ^[‚ğXV
            const selectedCount = document.getElementById('selectedPriorityCount');
            if (selectedCount) {
                selectedCount.textContent = areaSelectionData.priorities.length;

                // ƒJƒEƒ“ƒ^[‚ÌŒ©‚½–Ú‚àXVi‘I‘ğ”‚É‰‚¶‚ÄF‚ğ•ÏXj
                const countContainer = selectedCount.parentElement;
                if (countContainer) {
                    if (areaSelectionData.priorities.length >= 3) {
                        countContainer.classList.add('text-red-600');
                        countContainer.classList.remove('text-orange-500');
                    } else if (areaSelectionData.priorities.length > 0) {
                        countContainer.classList.add('text-orange-500');
                        countContainer.classList.remove('text-red-600');
                    } else {
                        countContainer.classList.remove('text-red-600', 'text-orange-500');
                    }
                }
            } else {
                console.error('selectedPriorityCount element not found!');
            }

            // ƒŠƒXƒg‚ğÄ•`‰æiƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚Ìó‘Ô‚ğ”½‰fj
            updatePriorityArea();
        }

        // ƒGƒŠƒA‘I‘ğ‚ğƒŠƒZƒbƒg
        function resetAreaSelection() {
            areaSelectionData.prefectures = [];
            areaSelectionData.cities = {};
            areaSelectionData.priorities = [];
            areaSelectionData.totalCount = 0;

            // ƒ{ƒ^ƒ“‚Ìó‘Ô‚ğƒŠƒZƒbƒg
            document.querySelectorAll('[data-prefecture]').forEach(button => {
                button.classList.remove('selected', 'bg-blue-500', 'text-white');
                button.classList.add('bg-white');
            });

            // —DæƒGƒŠƒAƒJƒEƒ“ƒ^[‚àƒŠƒZƒbƒg
            const selectedCount = document.getElementById('selectedPriorityCount');
            if (selectedCount) {
                selectedCount.textContent = '0';
                const countContainer = selectedCount.parentElement;
                if (countContainer) {
                    countContainer.classList.remove('text-red-600', 'text-orange-500');
                }
            }

            updateAreaSelectionUI();
        }

        // ƒGƒŠƒA‘I‘ğ‚ğŠm’è
        function confirmAreaSelection() {
            showNotification('¬Œ÷', `${areaSelectionData.prefectures.length}“s“¹•{Œ§A${areaSelectionData.totalCount}s‹æ’¬‘º‚ğ‘I‘ğ‚µ‚Ü‚µ‚½`);
        }

        // s‹æ’¬‘ºƒŠƒXƒg‚ğXV
        function updateCityList() {
            const cityListElement = document.getElementById('cityList');
            let html = '';

            selectedPrefectures.forEach(pref => {
                if (cityData[pref]) {
                    cityData[pref].forEach(city => {
                        html += `
                            <label class="flex items-center p-2 bg-white border rounded hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" data-city="${city}" name="manual-city" value="${city}" class="mr-2" onchange="updateCompanyAreaDisplay();">
                                <span class="text-sm">${city}</span>
                            </label>
                        `;
                    });
                }
            });

            cityListElement.innerHTML = html || '<p class="text-gray-500 text-center py-4">“s“¹•{Œ§‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢</p>';
        }

        // —DæƒGƒŠƒA‚ÌØ‚è‘Ö‚¦
        // ŒÃ‚¢togglePriorityAreaŠÖ”‚ÍíœiV‚µ‚¢ƒo[ƒWƒ‡ƒ“‚ğã‚Å’è‹`Ï‚İj

        // updatePriorityAreasDisplayŠÖ”‚Ííœ

        // ‘S“s“¹•{Œ§‚ğ•\¦
        function showAllPrefectures() {
            const container = event.target.parentElement.querySelector('.grid');
            container.innerHTML = allPrefectures.map(pref => `
                <label class="flex items-center p-2 bg-white border rounded cursor-pointer hover:bg-blue-50">
                    <input type="checkbox" name="prefecture" value="${pref}" class="mr-2" onchange="updateSelectedAreas()"
                           ${selectedPrefectures.includes(pref) ? 'checked' : ''}>
                    <span class="text-sm">${pref}</span>
                </label>
            `).join('');
            event.target.textContent = '•Â‚¶‚é';
            event.target.onclick = () => location.reload();
        }

        // s‹æ’¬‘ºŒŸõ
        function searchCities(query) {
            const cityListElement = document.getElementById('cityList');
            const allButtons = cityListElement.querySelectorAll('button');

            allButtons.forEach(button => {
                const cityName = button.textContent.replace('? ', '');
                if (cityName.toLowerCase().includes(query.toLowerCase())) {
                    button.style.display = '';
                } else {
                    button.style.display = 'none';
                }
            });
        }

        // ‰ïĞî•ñ‚ÌƒGƒŠƒA•\¦‚ğXV
        function updateCompanyAreaDisplay() {
            const displayElement = document.getElementById('companyAreaDisplay');
            if (!displayElement) return;

            let html = '';

            // “s“¹•{Œ§
            if (selectedPrefectures.length > 0) {
                html += `
                    <div>
                        <p class="text-sm font-medium text-gray-700 mb-2">‘Î‰“s“¹•{Œ§</p>
                        <div class="flex flex-wrap gap-2">
                            ${selectedPrefectures.map(pref =>
                                `<span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">${pref}</span>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }

            // ‘I‘ğ‚³‚ê‚½s‹æ’¬‘º‚ğ•\¦iè“®İ’è‚Ìê‡j
            const manualCities = document.querySelectorAll('input[name="manual-city"]:checked');
            if (manualCities.length > 0) {
                html += `
                    <div>
                        <p class="text-sm font-medium text-gray-700 mb-2">‘Î‰s‹æ’¬‘º</p>
                        <div class="flex flex-wrap gap-2">
                            ${Array.from(manualCities).map(checkbox =>
                                `<span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">${checkbox.value}</span>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }

            displayElement.innerHTML = html || '<p class="text-gray-500">ƒGƒŠƒA‚ª‘I‘ğ‚³‚ê‚Ä‚¢‚Ü‚¹‚ñ</p>';
        }

        // ©“®”zMİ’è‚ğ•Û‘¶
        // ƒGƒŠƒAİ’è‚Ì“¯ŠúØ‚è‘Ö‚¦
        function toggleAreaSync() {
            const isSync = document.getElementById('syncAreaSettings').checked;
            const autoDiv = document.getElementById('companyAreaAuto');
            const manualDiv = document.getElementById('companyAreaManual');

            if (isSync) {
                autoDiv.classList.remove('hidden');
                manualDiv.classList.add('hidden');
            } else {
                autoDiv.classList.add('hidden');
                manualDiv.classList.remove('hidden');
            }
        }

        // H–“à—eİ’è‚Ì“¯ŠúØ‚è‘Ö‚¦
        function toggleConstructionSync() {
            const isSync = document.getElementById('syncConstructionSettings').checked;
            const autoDiv = document.getElementById('companyConstructionAuto');
            const manualDiv = document.getElementById('companyConstructionManual');

            if (isSync) {
                autoDiv.classList.remove('hidden');
                manualDiv.classList.add('hidden');
            } else {
                autoDiv.classList.add('hidden');
                manualDiv.classList.remove('hidden');
            }
        }

        // ‰ïĞî•ñ—p‚Ì‘S“s“¹•{Œ§•\¦
        function showAllCompanyPrefectures() {
            const container = event.target.parentElement.querySelector('.grid');
            container.innerHTML = allPrefectures.map(pref => `
                <label class="flex items-center p-2 bg-white border rounded cursor-pointer hover:bg-blue-50">
                    <input type="checkbox" name="company-prefecture" value="${pref}" class="mr-2">
                    <span class="text-sm">${pref}</span>
                </label>
            `).join('');
            event.target.textContent = '•Â‚¶‚é';
            event.target.onclick = () => location.reload();
        }


        // ƒNƒ`ƒRƒ~ŠÇ—ŠÖ”
        let collectedReviews = [
            {
                id: 1,
                rating: 5,
                source: '©Ğ',
                content: '’š”J‚È‘Î‰‚ÅˆÀS‚µ‚Ä‚¨”C‚¹‚Å‚«‚Ü‚µ‚½BŒ©Ï‚à‚è‚à–¾Šm‚ÅA’Ç‰Á—¿‹à‚È‚­—\’è’Ê‚è‚ÉŠ®¬‚µ‚Ü‚µ‚½B',
                customer: '“Œ‹“s Y—l',
                date: '2024”N1Œ',
                collectedDate: '2024/01/15',
                visible: true,
                image: null
            },
            {
                id: 2,
                rating: 4,
                source: '©Ğ',
                content: 'El‚³‚ñ‚Ì‹Zp‚ª‚‚­Adã‚ª‚è‚É–‘«‚µ‚Ä‚¢‚Ü‚·B‹ß—×‚Ö‚Ì”z—¶‚à‚µ‚Á‚©‚è‚µ‚Ä‚¢‚Ü‚µ‚½B',
                customer: '_“ŞìŒ§ T—l',
                date: '2024”N2Œ',
                collectedDate: '2024/02/01',
                visible: true,
                image: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="150" height="100"%3E%3Crect width="100%25" height="100%25" fill="%23ddd"/%3E%3Ctext x="50%25" y="50%25" font-family="Arial" font-size="14" fill="%23999" text-anchor="middle" dy=".3em"%3E150x100%3C/text%3E%3C/svg%3E'
            },
            {
                id: 3,
                rating: 5,
                source: '©Ğ',
                content: '15”N‘O‚ÉŒš‚Ä‚½‰Æ‚ÌŠO•Ç‚ªFåò‚¹‚Ä‚«‚½‚Ì‚ÅˆË—Š‚µ‚Ü‚µ‚½B•¡”Ğ‚©‚çŒ©Ï‚à‚è‚ğæ‚è‚Ü‚µ‚½‚ªAà–¾‚ªˆê”Ô’š”J‚ÅˆÀSŠ´‚ª‚ ‚è‚Ü‚µ‚½B',
                customer: 'ç—tŒ§ M—l',
                date: '2024”N2Œ',
                collectedDate: '2024/02/10',
                visible: true,
                image: null
            },
            {
                id: 4,
                rating: 5,
                source: '©Ğ',
                content: 'El‚³‚ñ‚Ìˆ¥A‚©‚çn‚Ü‚èA–ˆ“ú‚Ìì‹Æ•ñA‹ß—×‚Ö‚Ì”z—¶‚È‚ÇA‚·‚×‚Ä‚É‚¨‚¢‚Ä–‘«‚Å‚µ‚½B',
                customer: 'é‹ÊŒ§ K—l',
                date: '2024”N3Œ',
                collectedDate: '2024/03/05',
                visible: true,
                image: null
            },
            {
                id: 5,
                rating: 4,
                source: '©Ğ',
                content: 'Œ©Ï‚à‚è‚ª–¾Šm‚ÅA’Ç‰Á—¿‹à‚à‚È‚­—\’è’Ê‚è‚ÉI‚í‚è‚Ü‚µ‚½Bdã‚ª‚è‚àŠú‘ÒˆÈã‚Å‚·B',
                customer: '“Œ‹“s S—l',
                date: '2024”N3Œ',
                collectedDate: '2024/03/10',
                visible: true,
                image: null
            },
            {
                id: 6,
                rating: 5,
                source: '©Ğ',
                content: '‰®ª‚ÆŠO•Ç‚Ì“¯{H‚ğ‚¨Šè‚¢‚µ‚Ü‚µ‚½BHŠú‚à’Zk‚Å‚«Adã‚ª‚è‚à‘å•Ï–‘«‚µ‚Ä‚¢‚Ü‚·B',
                customer: '_“ŞìŒ§ A—l',
                date: '2024”N3Œ',
                collectedDate: '2024/03/15',
                visible: false,
                image: null
            }
        ];

        // ƒJƒ‹[ƒZƒ‹ŠÇ—
        let currentReviewIndex = 0;

        // ƒNƒ`ƒRƒ~ƒŠƒXƒg‚ğXV
        function updateReviewsList() {
            const reviewsList = document.getElementById('reviewsList');
            if (reviewsList) {
                reviewsList.innerHTML = collectedReviews.map(review => `
                    <div class="border rounded-lg p-4 bg-white" data-review-id="${review.id}">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center">
                                <div class="flex text-yellow-400 mr-2">
                                    ${Array(5).fill(0).map((_, i) => `
                                        <svg class="w-4 h-4 ${i < review.rating ? 'fill-current' : 'text-gray-300'}" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                                        </svg>
                                    `).join('')}
                                </div>
                                <span class="text-sm text-gray-600">${review.rating}.0</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs bg-gray-100 px-2 py-1 rounded">${review.source === '©Ğ' ? '©Ğ' : review.source + 'QÆ'}</span>
                                <label class="flex items-center">
                                    <input type="checkbox" ${review.visible ? 'checked' : ''} onchange="toggleReviewVisibility(${review.id})" class="mr-1">
                                    <span class="text-xs text-gray-600">•\¦</span>
                                </label>
                            </div>
                        </div>
                        <p class="text-sm text-gray-800 mb-2">${review.content}</p>
                        ${review.image ? `
                            <div class="mb-2">
                                <img src="${review.image}" class="h-20 rounded object-cover" alt="{HÊ^">
                            </div>
                        ` : ''}
                        <div class="flex justify-between items-center text-xs text-gray-500">
                            <span>${review.customer} / ${review.date}</span>
                            <span>ûW“ú: ${review.collectedDate}</span>
                        </div>
                    </div>
                `).join('');

                // •\¦Œ”‚ğXV
                const visibleCount = collectedReviews.filter(r => r.visible).length;
                const countElement = document.getElementById('visibleReviewCount');
                if (countElement) countElement.textContent = visibleCount;
            }
            updatePreviewReviews();
        }

        // ƒNƒ`ƒRƒ~‚Ì•\¦/”ñ•\¦Ø‚è‘Ö‚¦
        function toggleReviewVisibility(reviewId) {
            const review = collectedReviews.find(r => r.id === reviewId);
            if (review) {
                review.visible = !review.visible;
                updateReviewsList();
            }
        }

        // ƒvƒŒƒrƒ…[‚ÌƒNƒ`ƒRƒ~‚ğXVi1–‡‚¸‚Â’†‰›•\¦j
        function updatePreviewReviews() {
            const previewReviewsList = document.getElementById('previewReviewsList');
            const indicators = document.getElementById('reviewIndicators');

            if (previewReviewsList) {
                const visibleReviews = collectedReviews.filter(r => r.visible);

                if (visibleReviews.length > 0) {
                    // ƒJƒ‹[ƒZƒ‹ƒJ[ƒh‚ğ¶¬i1–‡‚¸‚Â‘S•‚Å•\¦j
                    previewReviewsList.innerHTML = visibleReviews.map((review, index) => `
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    ${Array(5).fill(0).map((_, i) => `
                                        <svg class="w-6 h-6 ${i < review.rating ? 'fill-current' : 'text-gray-300'}" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                                        </svg>
                                    `).join('')}
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">${review.rating}.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">${review.content}</p>

                            ${review.image ? `
                                <div class="mb-6 flex justify-center">
                                    <img src="${review.image}" class="h-32 rounded-lg object-cover shadow-md" alt="{HÊ^">
                                </div>
                            ` : ''}

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">${review.customer}</div>
                                        <div class="text-xs text-gray-500 mt-1">${review.date}</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        ${review.source === '©Ğ' ? '’¼Ú‚¢‚½‚¾‚¢‚½º' : review.source + '‚æ‚è'}
                                    </span>
                                </div>
                            </div>
                        </div>
                    `).join('');

                    // ƒCƒ“ƒWƒP[ƒ^[‚ğ¶¬
                    if (indicators) {
                        indicators.innerHTML = visibleReviews.map((_, index) => `
                            <button onclick="goToReview(${index})" class="w-3 h-3 rounded-full transition ${index === 0 ? 'bg-blue-600 scale-125' : 'bg-gray-300'}"></button>
                        `).join('');
                    }

                    document.getElementById('preview-reviews').style.display = 'block';
                    currentReviewIndex = 0; // Å‰‚ÌƒŒƒrƒ…[‚©‚çŠJn
                    updateCarouselPosition();
                } else {
                    document.getElementById('preview-reviews').style.display = 'none';
                }
            }
        }

        // ƒJƒ‹[ƒZƒ‹ƒXƒNƒ[ƒ‹i–³ŒÀƒ‹[ƒvj
        function scrollReviews(direction) {
            const visibleReviews = collectedReviews.filter(r => r.visible);
            if (visibleReviews.length === 0) return;

            if (direction === 'left') {
                currentReviewIndex--;
            } else {
                currentReviewIndex++;
            }

            updateCarouselPosition();
        }

        // “Á’è‚ÌƒNƒ`ƒRƒ~‚ÖˆÚ“®
        function goToReview(index) {
            const visibleReviews = collectedReviews.filter(r => r.visible);
            currentReviewIndex = index + visibleReviews.length;
            updateCarouselPosition();
        }

        // ƒJƒ‹[ƒZƒ‹ˆÊ’u‚ğXVi1–‡‚¸‚Â’†‰›•\¦j
        function updateCarouselPosition() {
            const carousel = document.getElementById('previewReviewsList');
            const indicators = document.getElementById('reviewIndicators');
            const visibleReviews = collectedReviews.filter(r => r.visible);

            if (carousel && visibleReviews.length > 0) {
                // ÀÛ‚ÌƒCƒ“ƒfƒbƒNƒX‚ğŒvZ
                const actualIndex = ((currentReviewIndex % visibleReviews.length) + visibleReviews.length) % visibleReviews.length;

                // ƒJƒ‹[ƒZƒ‹‘S‘Ì‚Ì•‚ğæ“¾
                const carouselWidth = carousel.parentElement.offsetWidth;
                const cardWidth = carousel.firstElementChild ? carousel.firstElementChild.offsetWidth : carouselWidth;

                // ’†‰›‚É”z’u‚·‚é‚½‚ß‚ÌˆÊ’u‚ğŒvZ
                const position = -(actualIndex * cardWidth);
                carousel.style.transform = `translateX(${position}px)`;

                // ƒCƒ“ƒWƒP[ƒ^[XV
                if (indicators) {
                    indicators.querySelectorAll('button').forEach((btn, index) => {
                        btn.className = `w-3 h-3 rounded-full transition ${index === actualIndex ? 'bg-blue-600 scale-125' : 'bg-gray-300'}`;
                    });
                }
            }
        }

        // ‰Šú‰»‚ÉƒNƒ`ƒRƒ~ƒŠƒXƒg‚ğ•\¦
        setTimeout(() => {
            updateReviewsList();
        }, 100);

        // ‰ïĞî•ñƒZƒNƒVƒ‡ƒ“‚Ì‰Šú‰»i•Û‘¶ƒ{ƒ^ƒ“•û®‚É•ÏXj
        document.addEventListener('DOMContentLoaded', () => {
            const companySection = document.getElementById('companySection');
            if (companySection) {
                console.log('[‰ïĞî•ñ] ƒZƒNƒVƒ‡ƒ“‰Šú‰»Š®—¹ - •Û‘¶ƒ{ƒ^ƒ“•û®‚ğg—p');

                // ƒJƒXƒ^ƒ€‘Ši“ü—Í‚ÌEnterƒL[‘Î‰
                const customQualInput = document.getElementById('customQualificationInput');
                if (customQualInput) {
                    customQualInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            addCustomQualification();
                        }
                    });
                }

                // ƒJƒXƒ^ƒ€•ÛŒ¯“ü—Í‚ÌEnterƒL[‘Î‰
                const customInsInput = document.getElementById('customInsuranceInput');
                if (customInsInput) {
                    customInsInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            addCustomInsurance();
                        }
                    });
                }

                // PR•¶‚Ì•¶š”ƒJƒEƒ“ƒ^[
                const prTextArea = document.getElementById('prText');
                const prTextCharCount = document.getElementById('prTextCharCount');
                if (prTextArea && prTextCharCount) {
                    // ‰Šú•\¦
                    prTextCharCount.textContent = prTextArea.value.length;

                    // “ü—Í‚ÌƒJƒEƒ“ƒgXV‚ÆƒeƒLƒXƒgƒGƒŠƒA‚Ì‚‚³©“®’²®
                    prTextArea.addEventListener('input', (e) => {
                        const length = e.target.value.length;
                        prTextCharCount.textContent = length;

                        // ƒeƒLƒXƒgƒGƒŠƒA‚Ì‚‚³‚ğ“à—e‚É‡‚í‚¹‚Ä©“®’²®
                        e.target.style.height = 'auto';
                        e.target.style.height = Math.max(200, e.target.scrollHeight) + 'px';
                    });
                }
            }
        });

        // ƒT[ƒrƒXƒJ[ƒh‚ÌƒgƒOƒ‹‹@”\
        function toggleServiceCard(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            const card = element.querySelector('div');

            checkbox.checked = !checkbox.checked;

            if (checkbox.checked) {
                card.classList.add('bg-blue-50', 'border-blue-500');
                card.classList.remove('bg-white');
            } else {
                card.classList.remove('bg-blue-50', 'border-blue-500');
                card.classList.add('bg-white');
            }
        }

        // Googleƒ}ƒbƒv‚ğ–„‚ß‚İ
        function loadGoogleMap() {
            const mapContainer = document.getElementById('googleMapContainer');
            const address = document.getElementById('previewAddress')?.textContent || '';

            if (!mapContainer) return;

            if (address && address !== '-') {
                const encodedAddress = encodeURIComponent(address);
                // Google Maps Embed API‚ğg—pi’Êí‚ÍAPIƒL[‚ª•K—v‚Å‚·‚ªAƒVƒ“ƒvƒ‹‚Èiframe–„‚ß‚İ‚ğg—pj
                const mapHtml = `
                    <iframe
                        width="100%"
                        height="100%"
                        frameborder="0"
                        style="border:0"
                        src="https://www.google.com/maps?q=${encodedAddress}&output=embed"
                        allowfullscreen>
                    </iframe>
                `;
                mapContainer.innerHTML = mapHtml;
            } else {
                mapContainer.innerHTML = `
                    <div class="w-full h-full flex items-center justify-center text-gray-500 bg-gray-100">
                        <div class="text-center">
                            <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <p class="text-sm">Šİ’nî•ñ‚ªİ’è‚³‚ê‚Ä‚¢‚Ü‚¹‚ñ</p>
                        </div>
                    </div>
                `;
            }
        }

        // ’Ê’m•\¦
        function showNotification(title, body, type = 'info') {
            // ƒuƒ‰ƒEƒU’Ê’m
            if (Notification.permission === 'granted') {
                new Notification(title, {
                    body: body,
                    icon: '/favicon.ico',
                    badge: '/favicon.ico'
                });
            }

            // ƒCƒ“ƒAƒvƒŠ’Ê’m‚à•\¦
            showInAppNotification(title, body, type);
        }

        // ƒCƒ“ƒAƒvƒŠ’Ê’m
        function showInAppNotification(title, body, type = 'info') {
            const colors = {
                'info': 'bg-blue-500',
                'success': 'bg-green-500',
                'warning': 'bg-yellow-500',
                'error': 'bg-red-500'
            };

            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 ${colors[type]} text-white px-6 py-4 rounded-lg shadow-lg z-[60] animate-slide-in`;
            notification.innerHTML = `
                <div class="flex items-start gap-3">
                    <div class="flex-1">
                        <div class="font-semibold">${title}</div>
                        <div class="text-sm opacity-90">${body}</div>
                    </div>
                    <button onclick="this.closest('div').remove()" class="hover:opacity-70">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `;
            document.body.appendChild(notification);

            // 5•bŒã‚É©“®‚ÅÁ‹
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.classList.add('animate-slide-out');
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }

        // ƒAƒ‰[ƒgƒpƒlƒ‹‚Ì•\¦/”ñ•\¦
        function toggleAlertPanel() {
            const panel = document.getElementById('alertPanel');
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                loadAlerts();
                updateTotalBadgeCount();
            } else {
                panel.classList.add('hidden');
            }
        }

        // –{•”‚©‚ç‚Ì’Ê’mƒpƒlƒ‹Ø‚è‘Ö‚¦
        function toggleNotificationPanel() {
            const panel = document.getElementById('notificationPanel');
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                loadNotifications();
            } else {
                panel.classList.add('hidden');
            }
        }

        // –{•”‚©‚ç‚Ì’Ê’m‚ğ“Ç‚İ‚Şi¡ŒãÀ‘•j
        function loadNotifications() {
            // TODO: GAS‚©‚ç–{•”’Ê’m‚ğæ“¾
            console.log('Loading notifications from headquarters...');
        }

        // ‰Á–¿“XƒXƒe[ƒ^ƒXXV
        // updateMerchantStatusŠÖ”‚ÍíœiƒXƒe[ƒ^ƒX‚Í“Ç‚İæ‚èê—pAƒXƒvƒŒƒbƒhƒV[ƒg‚©‚ç“®“Iæ“¾j

        // ƒoƒbƒWƒJƒEƒ“ƒg‚ğ“‡XV
        function updateTotalBadgeCount() {
            // –¢Š„“–ˆÄŒ”‚ğæ“¾
            const unassignedBadge = document.getElementById('unassignedBadge');
            const unassignedCount = unassignedBadge && !unassignedBadge.classList.contains('hidden')
                ? parseInt(unassignedBadge.textContent) || 0
                : 0;

            // ƒAƒ‰[ƒg”‚ğæ“¾
            const alertItems = document.querySelectorAll('#todayAlerts .alert-item').length || 0;

            // ‡Œv‚ğƒxƒ‹ƒ}[ƒN‚É•\¦
            const totalCount = unassignedCount + alertItems;
            const alertCountBadge = document.getElementById('alertCount');

            if (totalCount > 0) {
                alertCountBadge.textContent = totalCount;
                alertCountBadge.classList.remove('hidden');
            } else {
                alertCountBadge.classList.add('hidden');
            }
        }

        // ƒAƒ‰[ƒg“Ç‚İ‚İ
        function loadAlerts() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);

            // ¡“ú‚Ìƒ^ƒXƒN
            const todayTasks = [
                { time: '10:00', text: '“c’†—l‚Ö‰Ë“d', type: 'call', caseId: 1 },
                { time: '14:00', text: '²“¡—l Œ»’n’²¸', type: 'appointment', caseId: 2 },
                { time: '16:00', text: '—é–Ø—l Œ©Ï‘’ñoŠúŒÀ', type: 'estimate', caseId: 3 }
            ];

            const todayTasksHtml = todayTasks.map(task => `
                <div class="flex items-center justify-between p-2 bg-red-50 rounded-lg hover:bg-red-100 cursor-pointer"
                     onclick="handleAlertClick(${task.caseId}, '${task.type}')">
                    <div class="flex items-center gap-2">
                        <span class="text-xs font-medium text-red-600">${task.time}</span>
                        <span class="text-sm">${task.text}</span>
                    </div>
                    <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
            `).join('');
            document.getElementById('todayTasks').innerHTML = todayTasksHtml || '<div class="text-sm text-gray-500">ƒ^ƒXƒN‚È‚µ</div>';

            // –¾“ú‚Ì—\’è
            const tomorrowTasks = [
                { time: '11:00', text: 'R“c—l ƒAƒ|ƒCƒ“ƒg', type: 'appointment', caseId: 4 },
                { time: '15:00', text: '‚‹´—l ƒtƒHƒ[ƒAƒbƒv', type: 'followup', caseId: 5 }
            ];

            const tomorrowTasksHtml = tomorrowTasks.map(task => `
                <div class="flex items-center justify-between p-2 bg-yellow-50 rounded-lg hover:bg-yellow-100 cursor-pointer"
                     onclick="handleAlertClick(${task.caseId}, '${task.type}')">
                    <div class="flex items-center gap-2">
                        <span class="text-xs font-medium text-yellow-600">${task.time}</span>
                        <span class="text-sm">${task.text}</span>
                    </div>
                    <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
            `).join('');
            document.getElementById('tomorrowTasks').innerHTML = tomorrowTasksHtml || '<div class="text-sm text-gray-500">—\’è‚È‚µ</div>';

            // ©“®ƒAƒ‰[ƒg
            const autoAlerts = [
                { text: '–¢‘Î‰ˆÄŒ3Œ‚ ‚è‚Ü‚·', type: 'warning' },
                { text: 'Œ©Ï’ñoŒã7“úŒo‰ß: 2Œ', type: 'info' },
                { text: '“ü‹à—\’è“ú: “c’†—l', type: 'payment' }
            ];

            const autoAlertsHtml = autoAlerts.map(alert => `
                <div class="flex items-center justify-between p-2 bg-blue-50 rounded-lg">
                    <span class="text-sm">${alert.text}</span>
                    <button onclick="dismissAlert(this)" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `).join('');
            document.getElementById('autoAlerts').innerHTML = autoAlertsHtml || '<div class="text-sm text-gray-500">ƒAƒ‰[ƒg‚È‚µ</div>';
        }

        // ƒAƒ‰[ƒgƒNƒŠƒbƒNˆ—
        function handleAlertClick(caseId, type) {
            toggleAlertPanel();

            if (type === 'call') {
                // “d˜b”­M
                const caseData = casesData.find(c => c.id === caseId);
                if (caseData && caseData.phone) {
                    callCustomer(caseData.phone);
                }
            } else if (type === 'appointment' || type === 'estimate') {
                // ˆÄŒÚ×‚ğ•\¦
                showSection('cases');
                setTimeout(() => {
                    const caseCard = document.querySelector(`[data-case-id="${caseId}"]`);
                    if (caseCard) {
                        caseCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        caseCard.classList.add('ring-2', 'ring-yellow-400');
                        setTimeout(() => {
                            caseCard.classList.remove('ring-2', 'ring-yellow-400');
                        }, 3000);
                    }
                }, 100);
            }
        }

        // ƒAƒ‰[ƒgÁ‹
        function dismissAlert(button) {
            button.closest('div').remove();
        }


        // ƒAƒ‰[ƒgİ’èXViİ’èƒƒjƒ…[‚ÆƒAƒ‰[ƒgƒpƒlƒ‹‚Ì“¯Šúj
        function updateAlertSetting(settingName, enabled) {
            // localStorage ‚É•Û‘¶
            let alertSettings = JSON.parse(localStorage.getItem('alertSettings') || '{}');
            alertSettings[settingName] = enabled;
            localStorage.setItem('alertSettings', JSON.stringify(alertSettings));

            // ‘Î‰‚·‚éİ’èƒƒjƒ…[‚Ìƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ğ“¯Šú
            const idMap = {
                'appointment_reminder': 'appointmentReminder',
                'call_reminder': 'callReminder',
                'estimate_followup': 'estimateFollowup',
                'payment_alert': 'paymentAlert'
            };

            const checkboxId = idMap[settingName];
            if (checkboxId) {
                const checkbox = document.getElementById(checkboxId);
                if (checkbox && checkbox.checked !== enabled) {
                    checkbox.checked = enabled;
                }
            }
        }

        // ƒJƒŒƒ“ƒ_[‚Ì©“®“¯ŠúiˆÄŒƒf[ƒ^‚©‚ç©“®“I‚ÉƒJƒŒƒ“ƒ_[ƒCƒxƒ“ƒg‚ğ¶¬j
        function autoSyncToCalendar() {
            // Šù‘¶‚ÌˆÄŒ—R—ˆƒCƒxƒ“ƒg‚ğƒNƒŠƒA
            calendarEvents = calendarEvents.filter(event => !event.fromCase);

            // ‘SˆÄŒ‚©‚çƒlƒNƒXƒgƒXƒeƒbƒv‚ğæ“¾‚µ‚ÄƒJƒŒƒ“ƒ_[‚É’Ç‰Á
            const allCases = getCasesData();

            allCases.forEach(caseItem => {
                // ƒlƒNƒXƒgƒXƒeƒbƒv‚ª‚ ‚éê‡
                if (caseItem.nextAction) {
                    const today = new Date();
                    const eventDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + Math.floor(Math.random() * 7));
                    const eventTitle = `${caseItem.nextAction}: ${caseItem.customer}—l`;

                    // ƒCƒxƒ“ƒgƒ^ƒCƒv‚ğ”»’è
                    let eventType = 'todo';
                    let eventColor = '#6b7280';

                    if (caseItem.nextAction.includes('Œ»’²') || caseItem.nextAction.includes('ƒAƒ|')) {
                        eventType = 'meeting';
                        eventColor = '#3b82f6';
                    } else if (caseItem.nextAction.includes('‰Ë“d') || caseItem.nextAction.includes('“d˜b')) {
                        eventType = 'call';
                        eventColor = '#10b981';
                    } else if (caseItem.nextAction.includes('Œ©Ï')) {
                        eventType = 'estimate';
                        eventColor = '#f59e0b';
                    }

                    calendarEvents.push({
                        id: `case-${caseItem.id}`,
                        title: eventTitle,
                        date: eventDate.toISOString().split('T')[0],
                        time: '10:00',
                        type: eventType,
                        color: eventColor,
                        fromCase: true,  // ˆÄŒ—R—ˆ‚ÌƒCƒxƒ“ƒgƒ}[ƒN
                        caseId: caseItem.id
                    });
                }
            });

            // ƒJƒŒƒ“ƒ_[‚ğÄ•`‰æ
            if (typeof renderCalendar !== 'undefined') {
                renderCalendar();
            }
            if (typeof renderMiniCalendar !== 'undefined') {
                renderMiniCalendar();
            }
        }

        // ˆÄŒƒf[ƒ^XV‚É©“®“I‚ÉƒJƒŒƒ“ƒ_[‚ğ“¯Šú
        function onCaseUpdate() {
            autoSyncToCalendar();
        }

        // GoogleƒJƒŒƒ“ƒ_[“¯Šúi«—ˆ“I‚ÉÀ‘•j
        function syncWithGoogleCalendar() {
            // Google Calendar API‚ğg—p‚µ‚½“¯Šú
            showNotification('‹@”\ŠJ”­’†', 'GoogleƒJƒŒƒ“ƒ_[“¯Šú‚ÍŸ‰ñƒAƒbƒvƒf[ƒg‚Å’ñ‹Ÿ—\’è', 'info');
        }

        // ƒXƒe[ƒ^ƒX•ÏX‚Ì©“®ƒAƒ‰[ƒgİ’è
        function scheduleStatusAlert(caseId, newStatus) {
            const alertTiming = {
                'ƒAƒ|Ï': { delay: 86400000, message: '–¾“ú‚ÌŒ»’n’²¸—\’è' }, // 1“ú‘O
                'Œ»’²Ï': { delay: 3600000, message: 'Œ©Ï‘ì¬‚ğŠJn' }, // 1ŠÔŒã
                'Œ©Ï’ñoÏ': { delay: 604800000, message: 'ƒtƒHƒ[ƒAƒbƒv‚ª•K—v' }, // 7“úŒã
                '“ü‹à—\’è': { delay: 86400000, message: '“ü‹àŠm”F‚ğ‚¨Šè‚¢‚µ‚Ü‚·' } // 1“úŒã
            };

            if (alertTiming[newStatus]) {
                const alert = alertTiming[newStatus];
                setTimeout(() => {
                    showNotification('ƒŠƒ}ƒCƒ“ƒ_[', alert.message, 'warning');
                    // ƒAƒ‰[ƒgƒJƒEƒ“ƒg‚ğ‘‚â‚·
                    const countBadge = document.getElementById('alertCount');
                    const currentCount = parseInt(countBadge.textContent) || 0;
                    countBadge.textContent = currentCount + 1;
                    countBadge.classList.remove('hidden');
                }, alert.delay);
            }
        }

        // ƒƒjƒ…[ƒgƒOƒ‹
        window.toggleMenu = function() {
            const sideMenu = document.getElementById('sideMenu');
            const isOpen = !sideMenu.classList.contains('-translate-x-full');

            if (isOpen) {
                // ƒƒjƒ…[‚ğ•Â‚¶‚é
                sideMenu.classList.add('-translate-x-full');
                document.removeEventListener('click', handleOutsideClick);
            } else {
                // ƒƒjƒ…[‚ğŠJ‚­
                sideMenu.classList.remove('-translate-x-full');
                // Ÿ‚ÌƒtƒŒ[ƒ€‚ÅƒCƒxƒ“ƒgƒŠƒXƒi[‚ğ’Ç‰ÁitoggleMenu‚ÌƒNƒŠƒbƒN‚ğ–³‹‚·‚é‚½‚ßj
                setTimeout(() => {
                    document.addEventListener('click', handleOutsideClick);
                }, 0);
            }
        }

        // ƒƒjƒ…[ŠOƒNƒŠƒbƒN‚Åƒƒjƒ…[‚ğ•Â‚¶‚é
        function handleOutsideClick(event) {
            const sideMenu = document.getElementById('sideMenu');
            const menuButton = event.target.closest('button[onclick*="toggleMenu"]');

            // ƒƒjƒ…[ƒ{ƒ^ƒ“‚ğƒNƒŠƒbƒN‚µ‚½ê‡‚Í–³‹
            if (menuButton) return;

            // ƒƒjƒ…[“à‚ğƒNƒŠƒbƒN‚µ‚½ê‡‚Í–³‹
            if (sideMenu.contains(event.target)) return;

            // ƒƒjƒ…[ŠO‚ğƒNƒŠƒbƒN‚µ‚½ê‡‚Í•Â‚¶‚é
            sideMenu.classList.add('-translate-x-full');
            document.removeEventListener('click', handleOutsideClick);
        }
        
        // ƒAƒNƒeƒBƒuƒƒjƒ…[‚ÌXV
        window.updateActiveMenu = function(sectionName) {
            // ‚·‚×‚Ä‚Ìƒƒjƒ…[ƒAƒCƒeƒ€‚©‚çƒAƒNƒeƒBƒuƒXƒ^ƒCƒ‹‚ğíœ
            document.querySelectorAll('#sideMenu a').forEach(link => {
                link.classList.remove('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-gray-100');
                link.classList.add('text-gray-400', 'hover:bg-gray-800', 'hover:text-gray-100');
            });
            
            // ‘Î‰‚·‚éƒƒjƒ…[ƒAƒCƒeƒ€‚ÉƒAƒNƒeƒBƒuƒXƒ^ƒCƒ‹‚ğ’Ç‰Á
            const activeLink = document.querySelector(`#sideMenu a[onclick*="showSection('${sectionName}')"]`);
            if (activeLink) {
                activeLink.classList.remove('text-gray-400', 'hover:bg-gray-800', 'hover:text-gray-100');
                activeLink.classList.add('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-gray-100');
            }
        }
        
        // ƒZƒNƒVƒ‡ƒ“Ø‚è‘Ö‚¦
        // ©“®”zMİ’è‚Ì•ÏXŒŸ’m—pƒtƒ‰ƒO
        let autodeliverySettingsChanged = false;

        // ©“®”zMİ’è‚Ì•ÏX‚ğŒŸ’m
        function markAutodeliveryChanged() {
            autodeliverySettingsChanged = true;
            console.log('[Autodelivery] Settings changed, not saved yet');
        }

        // ©“®”zMİ’è‚Ì•ÏX‚ğƒŠƒZƒbƒg
        function resetAutodeliveryChanged() {
            autodeliverySettingsChanged = false;
            console.log('[Autodelivery] Settings saved, change flag reset');
        }

        window.showSection = function(sectionName) {
            // ©“®”zMİ’èƒZƒNƒVƒ‡ƒ“‚©‚ç‘¼‚ÌƒZƒNƒVƒ‡ƒ“‚ÉˆÚ“®‚·‚éê‡A–¢•Û‘¶ƒ`ƒFƒbƒN
            const currentSection = document.querySelector('.section[style*="display: block"]');
            if (currentSection && currentSection.id === 'autodeliverySection' && sectionName !== 'autodelivery') {
                if (autodeliverySettingsChanged) {
                    if (!confirm('©“®”zMİ’è‚É•Û‘¶‚³‚ê‚Ä‚¢‚È‚¢•ÏX‚ª‚ ‚è‚Ü‚·B€n€n•Û‘¶‚¹‚¸‚ÉˆÚ“®‚µ‚Ü‚·‚©H')) {
                        return; // ˆÚ“®‚ğƒLƒƒƒ“ƒZƒ‹
                    }
                    // ˆÚ“®‚ğ‹–‰Â‚µ‚½ê‡Aƒtƒ‰ƒO‚ğƒŠƒZƒbƒg
                    autodeliverySettingsChanged = false;
                }
            }

            // ‚·‚×‚Ä‚ÌƒZƒNƒVƒ‡ƒ“‚ğ”ñ•\¦
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });

            // ‘I‘ğ‚³‚ê‚½ƒZƒNƒVƒ‡ƒ“‚ğ•\¦
            const targetSection = document.getElementById(sectionName + 'Section');
            if (targetSection) {
                targetSection.style.display = 'block';

                // ƒƒjƒ…[‚ÌƒAƒNƒeƒBƒuó‘Ô‚ğXV
                updateActiveMenu(sectionName);

                // ƒJƒŒƒ“ƒ_[ƒZƒNƒVƒ‡ƒ“‚Ìê‡‚Í‰Šú‰»
                if (sectionName === 'calendar') {
                    setTimeout(() => {
                        renderCalendar();
                        renderMiniCalendar();
                    }, 10);
                }

                // ‰ïĞî•ñƒZƒNƒVƒ‡ƒ“‚Ìê‡A‰Á–¿“Xƒf[ƒ^‚ğ“Ç‚İ‚İ
                if (sectionName === 'company') {
                    console.log('==== COMPANY SECTION OPENED ====');
                    if (window.merchantId) {
                        console.log('Loading merchant data for:', window.merchantId);
                        setTimeout(() => loadMerchantData(window.merchantId), 100);
                    } else {
                        console.log('No merchantId available for data loading');
                    }
                }

                // ©“®”zMİ’èƒZƒNƒVƒ‡ƒ“‚Ìê‡A‰Á–¿“Xƒf[ƒ^‚ğ“Ç‚İ‚İ
                if (sectionName === 'autodelivery') {
                    console.log('==== AUTODELIVERY SECTION OPENED ====');

                    // merchantId‚Ìæ“¾‚ğ‚İ‚éi•¡”‚Ìƒ\[ƒX‚©‚çj
                    const merchantId = window.merchantId || sessionStorage.getItem('currentUser');

                    if (merchantId) {
                        console.log('Loading merchant data for autodelivery:', merchantId);

                        // merchantData‚ªŠù‚É‚ ‚ê‚Î‚»‚ê‚ğg—pA‚È‚¯‚ê‚ÎÄæ“¾
                        if (window.merchantData) {
                            console.log('Using existing merchantData');
                            loadAutodeliverySettings(window.merchantData);
                        } else {
                            console.log('Fetching fresh merchantData');
                            // ’¼Úƒf[ƒ^‚ğÄæ“¾
                            fetchMerchantDataForAutodelivery(merchantId);
                        }
                    } else {
                        console.log('No merchantId available for autodelivery');
                        console.log('Trying to get from sessionStorage...');
                        const savedUser = sessionStorage.getItem('currentUser');
                        if (savedUser) {
                            window.merchantId = savedUser;
                            fetchMerchantDataForAutodelivery(savedUser);
                        }
                    }
                }

                // ‰ïĞî•ñƒZƒNƒVƒ‡ƒ“‚Ìê‡‚Íx“Xƒ}ƒbƒv‚ğXV
                if (sectionName === 'company') {
                    setTimeout(() => {
                        updateBranchMaps();
                        loadGoogleMap();
                    }, 100);
                }
            }

            // ƒƒjƒ…[‚ğ•Â‚¶‚é
            document.getElementById('sideMenu').classList.add('-translate-x-full');
        }

        // Œ ŒÀƒ‚[ƒ_ƒ‹
        function openPermissionModal(name = null, isNew = true) {
            const modal = document.getElementById('permissionModal');
            const modalTitle = document.getElementById('modalTitle');
            const newSalesFields = document.getElementById('newSalesFields');

            if (isNew) {
                // V‹K’Ç‰Áƒ‚[ƒh
                modalTitle.textContent = 'V‹K‰c‹Æ’S“–Ò’Ç‰Á';
                newSalesFields.classList.remove('hidden');
                // ƒtƒH[ƒ€‚ğƒNƒŠƒA
                document.getElementById('newSalesName').value = '';
                document.getElementById('newSalesEmail').value = '';
                document.getElementById('newSalesPhone').value = '';
                document.getElementById('newSalesRole').value = 'ˆê”Ê‰c‹Æ';
                // ‘SŒ ŒÀƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ğƒNƒŠƒA
                document.querySelectorAll('.permission-checkbox').forEach(cb => cb.checked = false);
            } else {
                // •ÒWƒ‚[ƒh
                modalTitle.textContent = `${name}‚ÌŒ ŒÀİ’è`;
                newSalesFields.classList.add('hidden');
                // Šù‘¶‚ÌŒ ŒÀ‚ğ“Ç‚İ‚Şiƒfƒ‚—p‚Éƒ‰ƒ“ƒ_ƒ€‚Éİ’èj
                loadExistingPermissions(name);
            }

            modal.classList.remove('hidden');
        }

        function closePermissionModal() {
            document.getElementById('permissionModal').classList.add('hidden');
        }

        function editPermissions(name) {
            openPermissionModal(name, false);
        }

        // Šù‘¶‚ÌŒ ŒÀ‚ğ“Ç‚İ‚Ş
        function loadExistingPermissions(name) {
            // ƒfƒ‚—pFƒ‰ƒ“ƒ_ƒ€‚ÉŒ ŒÀ‚ğİ’è
            document.querySelectorAll('.permission-checkbox').forEach(cb => {
                cb.checked = Math.random() > 0.5;
            });
        }

        // ‰c‹Æ’S“–ÒíœŠm”F
        function confirmDeleteSales(name) {
            // íœŠm”Fƒ‚[ƒ_ƒ‹‚ğì¬
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.id = 'deleteConfirmModal';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-md">
                    <div class="flex items-center mb-4">
                        <svg class="w-6 h-6 text-red-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        <h3 class="text-lg font-bold text-gray-900">‰c‹Æ’S“–Ò‚ÌíœŠm”F</h3>
                    </div>
                    <p class="text-gray-600 mb-4">
                        <span class="font-semibold">${name}</span>‚³‚ñ‚ğíœ‚µ‚Ä‚à‚æ‚ë‚µ‚¢‚Å‚·‚©H
                    </p>
                    <div class="bg-yellow-50 border border-yellow-300 rounded-lg p-3 mb-4">
                        <p class="text-sm text-yellow-800">
                            <strong>’ˆÓF</strong>‚±‚Ì‘€ì‚Íæ‚èÁ‚¹‚Ü‚¹‚ñB<br>
                            íœ‚·‚é‚ÆˆÈ‰º‚Ìî•ñ‚ª¸‚í‚ê‚Ü‚·F
                        </p>
                        <ul class="mt-2 text-sm text-yellow-700 list-disc list-inside">
                            <li>‰c‹Æ’S“–Ò‚ÌŠî–{î•ñ</li>
                            <li>Œ ŒÀİ’è</li>
                            <li>‰ß‹‚ÌŠˆ“®—š—ğ</li>
                            <li>’S“–ˆÄŒ‚ÌŠ„‚è“–‚ÄiÄŠ„‚è“–‚Ä‚ª•K—vj</li>
                        </ul>
                    </div>
                    <div class="flex items-center mb-4">
                        <input type="checkbox" id="reassignCases" class="rounded mr-2">
                        <label for="reassignCases" class="text-sm text-gray-700">
                            ’S“–ˆÄŒ‚ğ‘¼‚Ì‰c‹Æ‚Éˆø‚«Œp‚®
                        </label>
                    </div>
                    <div id="reassignSection" class="hidden mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">ˆø‚«Œp‚¬æ</label>
                        <select id="reassignTo" class="w-full px-3 py-2 border rounded-lg">
                            <option value="">‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢</option>
                            <option value="“c’†‘¾˜Y">“c’†‘¾˜YiƒŠ[ƒ_[j</option>
                            <option value="²“¡‰Ôq">²“¡‰Ôqiˆê”Ê‰c‹Æj</option>
                            <option value="—é–ØŸ˜Y">—é–ØŸ˜YiVl‰c‹Æj</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button onclick="closeDeleteModal()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ƒLƒƒƒ“ƒZƒ‹
                        </button>
                        <button onclick="deleteSales('${name}')" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            íœ‚·‚é
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // ˆø‚«Œp‚¬ƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ÌƒCƒxƒ“ƒg
            document.getElementById('reassignCases').addEventListener('change', function(e) {
                const reassignSection = document.getElementById('reassignSection');
                if (e.target.checked) {
                    reassignSection.classList.remove('hidden');
                } else {
                    reassignSection.classList.add('hidden');
                }
            });

            // íœ‘ÎÛ‚ğ‘I‘ğˆ‚©‚çœŠO
            const reassignSelect = document.getElementById('reassignTo');
            Array.from(reassignSelect.options).forEach(option => {
                if (option.value === name) {
                    option.remove();
                }
            });
        }

        // íœƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
        function closeDeleteModal() {
            const modal = document.getElementById('deleteConfirmModal');
            if (modal) {
                modal.remove();
            }
        }

        // ‰c‹Æ’S“–Ò‚ğíœ
        function deleteSales(name) {
            const reassignCases = document.getElementById('reassignCases').checked;
            const reassignTo = document.getElementById('reassignTo').value;

            if (reassignCases && !reassignTo) {
                alert('ˆø‚«Œp‚¬æ‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢');
                return;
            }

            // íœˆ—iÀÛ‚É‚ÍAPI‚ğŒÄ‚Ôj
            if (reassignCases) {
                showNotification('íœŠ®—¹', `${name}‚³‚ñ‚ğíœ‚µAˆÄŒ‚ğ${reassignTo}‚³‚ñ‚Éˆø‚«Œp‚¬‚Ü‚µ‚½`);
            } else {
                showNotification('íœŠ®—¹', `${name}‚³‚ñ‚ğíœ‚µ‚Ü‚µ‚½`);
            }

            // ƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
            closeDeleteModal();

            // ƒe[ƒuƒ‹‚©‚çs‚ğíœiƒfƒ‚—pj
            const rows = document.querySelectorAll('#salesSection tbody tr');
            rows.forEach(row => {
                if (row.textContent.includes(name)) {
                    row.style.transition = 'opacity 0.3s';
                    row.style.opacity = '0';
                    setTimeout(() => {
                        row.remove();
                    }, 300);
                }
            });
        }

        // Œ ŒÀƒvƒŠƒZƒbƒgİ’è
        function setPreset(preset) {
            const presets = {
                office: ['case.cancel', 'case.contract', 'automail.view', 'report.self', 'company.view'],
                standard: ['case.cancel', 'case.contract', 'automail.view', 'report.self', 'company.view'],
                leader: ['case.view.all', 'case.edit', 'case.hide', 'case.delete', 'case.cancel', 'case.contract', 'finance.view', 'automail.view', 'automail.edit', 'report.self', 'report.all', 'report.export', 'company.view'],
                admin: ['case.view.all', 'case.edit', 'case.hide', 'case.delete', 'case.cancel', 'case.contract', 'automail.view', 'automail.edit', 'finance.view', 'finance.export', 'report.self', 'report.all', 'report.export', 'sales.manage', 'company.view', 'company.edit']
            };
            
            // ‚·‚×‚Ä‚Ìƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ğƒNƒŠƒA
            document.querySelectorAll('.permission-checkbox').forEach(cb => {
                cb.checked = false;
            });
            
            // ƒvƒŠƒZƒbƒg‚ÉŠî‚Ã‚¢‚Äƒ`ƒFƒbƒN
            if (presets[preset]) {
                presets[preset].forEach(permission => {
                    const checkbox = document.querySelector(`[data-permission="${permission}"]`);
                    if (checkbox) checkbox.checked = true;
                });
            }
            
            // ƒ{ƒ^ƒ“‚ÌƒAƒNƒeƒBƒuó‘Ô‚ğXV
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
            });
            event.target.classList.add('bg-blue-600', 'text-white');
        }

        function savePermissions() {
            const modalTitle = document.getElementById('modalTitle').textContent;
            const isNewSales = modalTitle.includes('V‹K');

            if (isNewSales) {
                // V‹K’Ç‰Á‚Ìê‡
                const name = document.getElementById('newSalesName').value;
                const email = document.getElementById('newSalesEmail').value;
                const phone = document.getElementById('newSalesPhone').value;
                const role = document.getElementById('newSalesRole').value;

                // ƒoƒŠƒf[ƒVƒ‡ƒ“
                if (!name || !email) {
                    alert('–¼‚Æƒ[ƒ‹ƒAƒhƒŒƒX‚Í•K{€–Ú‚Å‚·');
                    return;
                }

                // ƒe[ƒuƒ‹‚ÉV‚µ‚¢s‚ğ’Ç‰Á
                addSalesPersonToTable(name, role, email, phone);

                showNotification('’Ç‰ÁŠ®—¹', `${name}‚³‚ñ‚ğ‰c‹Æ’S“–Ò‚Æ‚µ‚Ä’Ç‰Á‚µ‚Ü‚µ‚½`);
            } else {
                // •ÒW‚Ìê‡
                showNotification('XVŠ®—¹', 'Œ ŒÀİ’è‚ğXV‚µ‚Ü‚µ‚½');
            }

            closePermissionModal();
        }

        // ƒe[ƒuƒ‹‚É‰c‹Æ’S“–Ò‚ğ’Ç‰Á
        function addSalesPersonToTable(name, role, email, phone) {
            const tbody = document.querySelector('#salesSection tbody');
            const newRow = document.createElement('tr');

            // ƒ[ƒ‹‚É‰‚¶‚½F‚ğİ’è
            let roleColor = 'green';
            let statsDisplay = ['0', '0%'];

            if (role === 'ƒŠ[ƒ_[') {
                roleColor = 'purple';
            } else if (role === 'ˆê”Ê‰c‹Æ') {
                roleColor = 'blue';
            } else if (role === 'ˆê”Ê––±') {
                roleColor = 'green';
                statsDisplay = ['-', '-'];  // ––±‚Í¬–ñ”E¬–ñ—¦‚È‚µ
            } else if (role === 'Œ»êŠÄ“Â') {
                roleColor = 'yellow';
                statsDisplay = ['-', '-'];  // Œ»êŠÄ“Â‚à¬–ñ”E¬–ñ—¦‚È‚µ
            }

            newRow.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${name}</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-${roleColor}-100 text-${roleColor}-800">${role}</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${statsDisplay[0]}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${statsDisplay[1]}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm">
                    <button onclick="editPermissions('${name}')" class="text-blue-600 hover:text-blue-900 mr-3">Œ ŒÀ•ÒW</button>
                    <button onclick="confirmDeleteSales('${name}')" class="text-red-600 hover:text-red-900">íœ</button>
                </td>
            `;

            tbody.appendChild(newRow);
        }

        // ƒƒOƒAƒEƒg
        window.logout = function() {
            // —¼•û‚ÌƒXƒgƒŒ[ƒW‚ğƒNƒŠƒA
            localStorage.removeItem('franchiseUser');
            localStorage.removeItem('franchiseRole');
            localStorage.removeItem('loginTime');
            localStorage.removeItem('rememberLogin');
            sessionStorage.clear();
            location.reload();
        }

        // ƒpƒXƒ[ƒh–Y‚êˆ—
        function showForgotPassword() {
            const email = prompt('“o˜^‚³‚ê‚Ä‚¢‚éƒ[ƒ‹ƒAƒhƒŒƒX‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢:');
            if (email) {
                alert(`ƒpƒXƒ[ƒhƒŠƒZƒbƒgƒŠƒ“ƒN‚ğ ${email} ‚É‘—M‚µ‚Ü‚µ‚½B€niƒfƒ‚”Å‚Ì‚½‚ßÀÛ‚É‚Í‘—M‚³‚ê‚Ü‚¹‚ñj`);
            }
        }
        
        // ƒy[ƒW“Ç‚İ‚İ‚Ìˆ—
        window.addEventListener('DOMContentLoaded', function() {
            // ƒ[ƒJƒ‹ƒXƒgƒŒ[ƒW‚Ü‚½‚ÍƒZƒbƒVƒ‡ƒ“ƒXƒgƒŒ[ƒW‚©‚ç•œŒ³
            let savedUser = localStorage.getItem('franchiseUser') || sessionStorage.getItem('franchiseUser');
            let savedRole = localStorage.getItem('franchiseRole') || sessionStorage.getItem('franchiseRole');

            if (savedUser && savedRole) {
                // ƒƒOƒCƒ“ŠÔ‚ğƒ`ƒFƒbƒNi24ŠÔ‚Å©“®ƒƒOƒAƒEƒgj
                const loginTime = localStorage.getItem('loginTime') || sessionStorage.getItem('loginTime');
                if (loginTime) {
                    const hoursSinceLogin = (new Date() - new Date(loginTime)) / (1000 * 60 * 60);
                    if (hoursSinceLogin > 24) {
                        // ƒZƒbƒVƒ‡ƒ“ŠúŒÀØ‚ê - ƒƒOƒCƒ“ƒy[ƒW‚Ö
                        localStorage.removeItem('franchiseUser');
                        localStorage.removeItem('franchiseRole');
                        localStorage.removeItem('loginTime');
                        sessionStorage.removeItem('franchiseUser');
                        sessionStorage.removeItem('franchiseRole');
                        sessionStorage.removeItem('loginTime');
                        window.location.href = 'merchant-portal/login.html';
                        return;
                    }
                }

                // ƒƒOƒCƒ“ó‘Ô—LŒø - ƒ_ƒbƒVƒ…ƒ{[ƒh•\¦
                currentUser = savedUser;
                userRole = savedRole;
                document.getElementById('mainApp').classList.remove('hidden');

                // ‰Á–¿“Xƒf[ƒ^‚ÆƒXƒe[ƒ^ƒX‚ğæ“¾‚µ‚Ä‚©‚ç•\¦‚ğXV
                Promise.all([
                    fetchMerchantData(savedUser),
                    loadMerchantStatus(savedUser)
                ]).then(() => {
                    updateRoleDisplay();
                    showSection('dashboard');

                    // ‰‰ñƒƒOƒCƒ“‚Ì‰Šúİ’èiƒf[ƒ^æ“¾Œã‚ÉÀsj
                    console.log('[DOMContentLoaded] merchantData loaded, calling initializeFirstLoginSettings');
                    console.log('[DOMContentLoaded] window.merchantData:', window.merchantData ? 'exists' : 'null');
                    initializeFirstLoginSettings();
                }).catch(error => {
                    console.error('Failed to fetch merchant data or status:', error);
                    updateRoleDisplay();
                    showSection('dashboard');

                    // ƒGƒ‰[‚Å‚à‰Šúİ’è‚ğÀs
                    console.log('[DOMContentLoaded] Error occurred, calling initializeFirstLoginSettings anyway');
                    initializeFirstLoginSettings();
                });

                // ˆÄŒƒJ[ƒh‚ğ‰Šú‰»
                setTimeout(() => {
                    renderCaseCards();
                    updateCaseCounts();
                }, 50);

                // ƒJƒŒƒ“ƒ_[‚ğ‰Šú‰»
                setTimeout(() => {
                    initCalendar();
                }, 100);

                // ©“®”zMİ’è‚Ì•Û‘¶ƒ{ƒ^ƒ“‚ÉƒCƒxƒ“ƒgƒŠƒXƒi[‚ğ’Ç‰ÁiƒXƒ}ƒz‘Î‰j
                setTimeout(() => {
                    const saveBtn = document.getElementById('saveAutodeliveryBtn');
                    if (saveBtn) {
                        const handleSave = async function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            console.log('Save button event triggered');
                            try {
                                await saveAutoDeliverySettings();
                            } catch (error) {
                                console.error('Error in saveAutoDeliverySettings:', error);
                                alert('ƒGƒ‰[: ' + error.message);
                            }
                        };
                        saveBtn.addEventListener('click', handleSave);
                        saveBtn.addEventListener('touchend', handleSave);
                        console.log('Save button event listeners attached');
                    } else {
                        console.error('Save button not found!');
                    }
                }, 200);
            } else {
                // –¢ƒƒOƒCƒ“ - ƒƒOƒCƒ“ƒy[ƒW‚ÖƒŠƒ_ƒCƒŒƒNƒg
                window.location.href = 'merchant-portal/login.html';
            }
        });

        // “‡İ’è•Û‘¶
        function saveAllSettings() {
            // ƒvƒƒtƒB[ƒ‹•Û‘¶
            saveProfile();

            // ’Ê’mİ’è•Û‘¶
            saveNotificationSettings();

            showNotification('İ’è•Û‘¶', '‚·‚×‚Ä‚Ìİ’è‚ğ•Û‘¶‚µ‚Ü‚µ‚½', 'success');
        }
        
        // ’Ê’mƒeƒXƒg
        function testNotification(type) {
            const messages = {
                'email': 'ƒeƒXƒgƒ[ƒ‹‚ğ‘—M‚µ‚Ü‚µ‚½',
                'sms': 'ƒeƒXƒgSMS‚ğ‘—M‚µ‚Ü‚µ‚½',
                'line': 'ƒeƒXƒgLINEƒƒbƒZ[ƒW‚ğ‘—M‚µ‚Ü‚µ‚½',
                'browser': 'ƒuƒ‰ƒEƒU’Ê’m‚ÌƒeƒXƒg'
            };
            
            if (type === 'browser') {
                showNotification('’Ê’mƒeƒXƒg', messages[type]);
            } else {
                alert(messages[type] + '€niƒfƒ‚”Å‚Ì‚½‚ßÀÛ‚É‚Í‘—M‚³‚ê‚Ü‚¹‚ñj');
            }
        }
        
        // ’Ê’mŠÔİ’è‚Ì•\¦/”ñ•\¦
        function toggleQuietHours() {
            const enabled = document.getElementById('enableQuietHours').checked;
            const settings = document.getElementById('quietHoursSettings');
            settings.classList.toggle('hidden', !enabled);
        }

        // ‹x“úİ’è‚Ì•\¦/”ñ•\¦Ø‚è‘Ö‚¦
        function toggleHolidaySettings() {
            const enabled = document.getElementById('enableHolidays').checked;
            const settings = document.getElementById('holidaySettings');
            settings.classList.toggle('hidden', !enabled);
        }
        
        // ƒvƒƒtƒB[ƒ‹•Û‘¶
        function saveProfile() {
            const profile = {
                name: document.getElementById('profileName').value,
                phone: document.getElementById('profilePhone').value,
                email: document.getElementById('profileEmail').value,
                lineId: document.getElementById('profileLineId').value
            };
            localStorage.setItem('userProfile', JSON.stringify(profile));
            alert('ƒvƒƒtƒB[ƒ‹‚ğ•Û‘¶‚µ‚Ü‚µ‚½');
        }
        
        // ’Ê’mİ’è•Û‘¶
        function saveNotificationSettings() {
            const settings = {
                email: document.getElementById('notifyEmail').checked,
                sms: document.getElementById('notifySms').checked,
                line: document.getElementById('notifyLine').checked,
                browser: document.getElementById('notifyBrowser').checked,
                alerts: {
                    appointment_reminder: {
                        enabled: document.getElementById('appointmentReminder').checked,
                        time: document.getElementById('appointmentAlertTime').value
                    },
                    call_reminder: {
                        enabled: document.getElementById('callReminder').checked,
                        time: document.getElementById('callAlertTime').value
                    },
                    estimate_followup: {
                        enabled: document.getElementById('estimateFollowup').checked,
                        days: document.getElementById('followupDays').value
                    },
                    payment_alert: {
                        enabled: document.getElementById('paymentAlert').checked
                    }
                },
                holidays: {
                    enabled: document.getElementById('enableHolidays').checked,
                    mon: document.getElementById('holidayMon').checked,
                    tue: document.getElementById('holidayTue').checked,
                    wed: document.getElementById('holidayWed').checked,
                    thu: document.getElementById('holidayThu').checked,
                    fri: document.getElementById('holidayFri').checked,
                    sat: document.getElementById('holidaySat').checked,
                    sun: document.getElementById('holidaySun').checked
                },
                quietHours: {
                    enabled: document.getElementById('enableQuietHours').checked,
                    start: document.getElementById('quietStart').value,
                    end: document.getElementById('quietEnd').value
                }
            };
            localStorage.setItem('notificationSettings', JSON.stringify(settings));
        }
        
        // •\¦İ’è•Û‘¶
        function saveDisplaySettings() {
            alert('•\¦İ’è‚ğ•Û‘¶‚µ‚Ü‚µ‚½');
        }
        
        // ƒJƒŒƒ“ƒ_[‹@”\
        let currentDate = new Date();
        let currentView = 'month';
        
        // “ú–{‚Ìj“úƒf[ƒ^i2024”NE2025”Nj
        const japaneseHolidays = {
            '2024-01-01': 'Œ³“ú',
            '2024-01-08': '¬l‚Ì“ú',
            '2024-02-11': 'Œš‘‹L”O‚Ì“ú',
            '2024-02-12': 'U‘Ö‹x“ú',
            '2024-02-23': '“Vc’a¶“ú',
            '2024-03-20': 't•ª‚Ì“ú',
            '2024-04-29': 'º˜a‚Ì“ú',
            '2024-05-03': 'Œ›–@‹L”O“ú',
            '2024-05-04': '‚İ‚Ç‚è‚Ì“ú',
            '2024-05-05': '‚±‚Ç‚à‚Ì“ú',
            '2024-05-06': 'U‘Ö‹x“ú',
            '2024-07-15': 'ŠC‚Ì“ú',
            '2024-08-11': 'R‚Ì“ú',
            '2024-08-12': 'U‘Ö‹x“ú',
            '2024-09-16': 'Œh˜V‚Ì“ú',
            '2024-09-22': 'H•ª‚Ì“ú',
            '2024-09-23': 'U‘Ö‹x“ú',
            '2024-10-14': 'ƒXƒ|[ƒc‚Ì“ú',
            '2024-11-03': '•¶‰»‚Ì“ú',
            '2024-11-04': 'U‘Ö‹x“ú',
            '2024-11-23': '‹Î˜JŠ´Ó‚Ì“ú',
            '2025-01-01': 'Œ³“ú',
            '2025-01-13': '¬l‚Ì“ú',
            '2025-02-11': 'Œš‘‹L”O‚Ì“ú',
            '2025-02-23': '“Vc’a¶“ú',
            '2025-02-24': 'U‘Ö‹x“ú',
            '2025-03-20': 't•ª‚Ì“ú',
            '2025-04-29': 'º˜a‚Ì“ú',
            '2025-05-03': 'Œ›–@‹L”O“ú',
            '2025-05-04': '‚İ‚Ç‚è‚Ì“ú',
            '2025-05-05': '‚±‚Ç‚à‚Ì“ú',
            '2025-05-06': 'U‘Ö‹x“ú',
            '2025-07-21': 'ŠC‚Ì“ú',
            '2025-08-11': 'R‚Ì“ú',
            '2025-09-15': 'Œh˜V‚Ì“ú',
            '2025-09-23': 'H•ª‚Ì“ú',
            '2025-10-13': 'ƒXƒ|[ƒc‚Ì“ú',
            '2025-11-03': '•¶‰»‚Ì“ú',
            '2025-11-23': '‹Î˜JŠ´Ó‚Ì“ú',
            '2025-11-24': 'U‘Ö‹x“ú'
        };
        
        let calendarEvents = [
            {
                id: 1,
                title: '“c’†—l Œ»’n’²¸',
                date: '2024-01-15',
                time: '14:00',
                type: 'hearing',
                color: 'blue'
            },
            {
                id: 2,
                title: '²“¡—l H–ŠJn',
                date: '2024-01-20',
                time: '09:00',
                type: 'construction',
                color: 'green'
            },
            {
                id: 3,
                title: '—é–Ø—l Œ©Ï‚à‚è’ño',
                date: '2024-01-25',
                time: '16:00',
                type: 'estimate',
                color: 'yellow'
            }
        ];
        
        // ƒJƒŒƒ“ƒ_[‰Šú‰»
        function initCalendar() {
            renderCalendar();
            renderMiniCalendar();
        }
        
        // ƒJƒŒƒ“ƒ_[•`‰æ
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Œ•\¦‚ğXV
            const monthNames = ['1Œ', '2Œ', '3Œ', '4Œ', '5Œ', '6Œ', '7Œ', '8Œ', '9Œ', '10Œ', '11Œ', '12Œ'];
            const monthElement = document.getElementById('currentMonth');
            if (monthElement) {
                monthElement.textContent = `${year}”N${monthNames[month]}`;
            }
            
            // ƒJƒŒƒ“ƒ_[ƒOƒŠƒbƒh‚ğ¶¬
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();
            const prevLastDate = new Date(year, month, 0).getDate();
            
            let html = '';
            let date = 1;
            
            // 6TŠÔ•ª‚ÌƒOƒŠƒbƒh‚ğ¶¬
            for (let week = 0; week < 6; week++) {
                let weekHasDate = false;
                for (let day = 0; day < 7; day++) {
                    let cellDate = '';
                    let cellStyle = 'border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;';
                    let cellContent = '';
                    
                    if (week === 0 && day < firstDay) {
                        // ‘OŒ‚Ì“ú•t
                        cellDate = prevLastDate - firstDay + day + 1;
                        cellStyle += ' color: #9ca3af; background: #f9fafb;';
                        html += `
                            <div style="${cellStyle}" data-date="${cellDate}">
                                <div style="font-weight: 500; font-size: 14px;">${cellDate}</div>
                            </div>
                        `;
                    } else if (date > lastDate) {
                        // ŸŒ‚Ì“ú•t
                        cellDate = date - lastDate;
                        cellStyle += ' color: #9ca3af; background: #f9fafb;';
                        html += `
                            <div style="${cellStyle}" data-date="${cellDate}">
                                <div style="font-weight: 500; font-size: 14px;">${cellDate}</div>
                            </div>
                        `;
                        date++;
                    } else {
                        weekHasDate = true;
                        // “–Œ‚Ì“ú•t
                        cellDate = date;
                        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
                        
                        // T––‚Æj“ú‚Ì”wŒiFİ’è
                        const isHoliday = japaneseHolidays[dateStr];
                        if (day === 0 || isHoliday) {
                            // “ú—j“ú‚Ü‚½‚Íj“ú‚Í”–‚¢Ô
                            cellStyle += ' background: #fee2e2;';
                        } else if (day === 6) {
                            // “y—j“ú‚Í”–‚¢…F
                            cellStyle += ' background: #e0f2fe;';
                        }
                        
                        // ¡“ú‚Ì“ú•t‚ğ‹­’²
                        const today = new Date();
                        const isToday = year === today.getFullYear() && month === today.getMonth() && date === today.getDate();
                        if (isToday) {
                            cellStyle = cellStyle.replace(/background:[^;]+;/, 'background: #eff6ff;');
                            cellStyle += ' border: 2px solid #3b82f6;';
                        }
                        
                        // ƒCƒxƒ“ƒg‚ğ•\¦
                        const dayEvents = calendarEvents.filter(e => e.date === dateStr);
                        if (dayEvents.length > 0) {
                            cellContent = '<div class="mt-1 space-y-1">';
                            dayEvents.forEach(event => {
                                const bgColor = {
                                    'blue': 'bg-blue-500',
                                    'green': 'bg-green-500',
                                    'yellow': 'bg-yellow-500',
                                    'purple': 'bg-purple-500',
                                    'red': 'bg-red-500'
                                }[event.color] || 'bg-gray-500';
                                
                                cellContent += `
                                    <div class="text-xs p-1 ${bgColor} text-white rounded truncate cursor-pointer hover:opacity-80 event-item" 
                                         draggable="true"
                                         data-event-id="${event.id}"
                                         onclick="showEventDetail(${event.id})" 
                                         oncontextmenu="showEventMenu(event, ${event.id})"
                                         ondragstart="handleDragStart(event, ${event.id})"
                                         title="${event.title}">
                                        ${event.time ? event.time + ' ' : ''}${event.title}
                                    </div>
                                `;
                            });
                            cellContent += '</div>';
                        }
                        
                        // j“ú–¼‚ğ’Ç‰Á
                        let holidayLabel = '';
                        if (isHoliday) {
                            holidayLabel = `<div style="font-size: 10px; color: #dc2626; font-weight: 500;">${isHoliday}</div>`;
                        }
                        
                        // html‚É’Ç‰Á
                        const originalBg = isToday ? '#eff6ff' : (day === 0 || isHoliday ? '#fee2e2' : day === 6 ? '#e0f2fe' : 'white');
                        const hoverBg = isToday ? '#dbeafe' : (day === 0 || isHoliday ? '#fecaca' : day === 6 ? '#bae6fd' : '#f9fafb');
                        
                        html += `
                            <div style="${cellStyle}" 
                                 data-date="${cellDate}"
                                 data-full-date="${dateStr}"
                                 ondrop="handleDrop(event)"
                                 ondragover="handleDragOver(event)"
                                 ondragleave="handleDragLeave(event)"
                                 onclick="handleCellClick(event)"
                                 onmouseover="this.style.background='${hoverBg}'"
                                 onmouseout="this.style.background='${originalBg}'">
                                <div style="font-weight: 500; font-size: 14px; ${day === 0 || isHoliday ? 'color: #dc2626;' : day === 6 ? 'color: #0284c7;' : ''}">${cellDate}</div>
                                ${holidayLabel}
                                ${cellContent}
                            </div>
                        `;
                        
                        date++;
                    }
                }
                
                // T‚É“ú•t‚ª‚È‚¢ê‡‚ÍI—¹
                if (!weekHasDate && date > lastDate) break;
            }
            
            const calendarGrid = document.getElementById('calendarGrid');
            if (calendarGrid) {
                calendarGrid.innerHTML = html;
            }
        }
        
        // ƒ~ƒjƒJƒŒƒ“ƒ_[•`‰æ
        function renderMiniCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const today = new Date();
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();
            
            let html = '<div class="grid grid-cols-7 gap-1 text-xs">';
            
            // —j“úƒwƒbƒ_[
            const weekDays = ['“ú', 'Œ', '‰Î', '…', '–Ø', '‹à', '“y'];
            weekDays.forEach(day => {
                html += `<div class="text-center font-medium text-gray-500 py-1">${day}</div>`;
            });
            
            // ‹ó”’ƒZƒ‹
            for (let i = 0; i < firstDay; i++) {
                html += '<div></div>';
            }
            
            // “ú•tƒZƒ‹
            for (let date = 1; date <= lastDate; date++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
                const hasEvent = calendarEvents.some(e => e.date === dateStr);
                const isToday = year === today.getFullYear() && month === today.getMonth() && date === today.getDate();
                
                let cellClass = 'text-center py-1 cursor-pointer hover:bg-gray-100 rounded';
                if (isToday) cellClass += ' bg-blue-500 text-white hover:bg-blue-600';
                else if (hasEvent) cellClass += ' font-bold text-blue-600';
                
                html += `<div class="${cellClass}" onclick="goToDate('${dateStr}')">${date}</div>`;
            }
            
            html += '</div>';
            
            const miniCalendar = document.getElementById('miniCalendar');
            if (miniCalendar) {
                miniCalendar.innerHTML = html;
            }
        }
        
        // ƒJƒŒƒ“ƒ_[ƒrƒ…[Ø‚è‘Ö‚¦
        function changeCalendarView(view) {
            currentView = view;
            
            // ƒ{ƒ^ƒ“‚ÌƒXƒ^ƒCƒ‹‚ğXV
            document.querySelectorAll('.calendar-view-btn').forEach(btn => {
                btn.classList.remove('text-blue-600', 'bg-blue-50');
                btn.classList.add('text-gray-600');
            });
            
            // ƒNƒŠƒbƒN‚³‚ê‚½ƒ{ƒ^ƒ“‚ÌƒXƒ^ƒCƒ‹‚ğXV
            if (event && event.target) {
                event.target.classList.remove('text-gray-600');
                event.target.classList.add('text-blue-600', 'bg-blue-50');
            }
            
            // ƒrƒ…[‚ğØ‚è‘Ö‚¦
            document.getElementById('calendarMonthView').classList.toggle('hidden', view !== 'month');
            document.getElementById('calendarWeekView').classList.toggle('hidden', view !== 'week');
            document.getElementById('calendarDayView').classList.toggle('hidden', view !== 'day');
            
            // ‘Î‰‚·‚éƒrƒ…[‚ğ•`‰æ
            if (view === 'month') {
                renderCalendar();
            } else if (view === 'week') {
                renderWeekView();
            } else if (view === 'day') {
                renderDayView();
            }
        }

        // T•\¦‚ğ•`‰æ
        function renderWeekView() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const date = currentDate.getDate();
            
            // ¡T‚Ì“ú—j“ú‚ğŒvZ
            const today = new Date(year, month, date);
            const dayOfWeek = today.getDay();
            const weekStart = new Date(today);
            weekStart.setDate(date - dayOfWeek);
            
            // T•\¦‚Ìƒwƒbƒ_[
            let html = '';
            
            // ŠÔ²ƒwƒbƒ_[
            html += '<div class="border-b border-r p-2 bg-gray-50 font-medium text-center">ŠÔ</div>';
            
            // —j“úƒwƒbƒ_[
            const weekDays = ['“ú', 'Œ', '‰Î', '…', '–Ø', '‹à', '“y'];
            for (let i = 0; i < 7; i++) {
                const dayDate = new Date(weekStart);
                dayDate.setDate(weekStart.getDate() + i);
                const dayStr = `${dayDate.getMonth() + 1}/${dayDate.getDate()}`;
                const isToday = dayDate.toDateString() === new Date().toDateString();
                
                html += `<div class="border-b border-r p-2 bg-gray-50 text-center ${isToday ? 'bg-blue-50 text-blue-600 font-bold' : ''}">
                    <div class="text-xs text-gray-500">${weekDays[i]}</div>
                    <div class="font-medium">${dayStr}</div>
                </div>`;
            }
            
            // ŠÔƒXƒƒbƒgi8:00-20:00j
            for (let hour = 8; hour <= 20; hour++) {
                // ŠÔƒ‰ƒxƒ‹
                html += `<div class="border-b border-r p-2 bg-gray-50 text-xs text-center">${String(hour).padStart(2, '0')}:00</div>`;
                
                // Še—j“ú‚ÌƒZƒ‹
                for (let i = 0; i < 7; i++) {
                    const dayDate = new Date(weekStart);
                    dayDate.setDate(weekStart.getDate() + i);
                    const dateStr = dayDate.toISOString().split('T')[0];
                    
                    // ‚»‚ÌŠÔ‘Ñ‚ÌƒCƒxƒ“ƒg‚ğæ“¾
                    const hourEvents = calendarEvents.filter(e => {
                        if (e.date !== dateStr || !e.time) return false;
                        const eventHour = parseInt(e.time.split(':')[0]);
                        return eventHour === hour;
                    });
                    
                    let cellContent = '';
                    if (hourEvents.length > 0) {
                        hourEvents.forEach(event => {
                            const bgColor = {
                                'blue': 'bg-blue-500',
                                'green': 'bg-green-500',
                                'yellow': 'bg-yellow-500',
                                'purple': 'bg-purple-500',
                                'red': 'bg-red-500'
                            }[event.color] || 'bg-gray-500';
                            
                            cellContent += `<div class="text-xs p-1 ${bgColor} text-white rounded mb-1 cursor-pointer hover:opacity-80" 
                                onclick="showEventDetail(${event.id})" title="${event.title}">
                                ${event.time} ${event.title}
                            </div>`;
                        });
                    }
                    
                    html += `<div class="border-b border-r p-1 h-12 hover:bg-gray-50 cursor-pointer" 
                        data-date="${dateStr}" data-hour="${hour}" onclick="createEventAtTime('${dateStr}', ${hour})">
                        ${cellContent}
                    </div>`;
                }
            }
            
            document.getElementById('weekGrid').innerHTML = html;
        }

        // “ú•\¦‚ğ•`‰æ
        function renderDayView() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const date = currentDate.getDate();
            
            const dayDate = new Date(year, month, date);
            const dateStr = dayDate.toISOString().split('T')[0];
            const weekDays = ['“ú', 'Œ', '‰Î', '…', '–Ø', '‹à', '“y'];
            const dayOfWeek = dayDate.getDay();
            
            // “ú•t•\¦‚ğXV
            document.getElementById('dayViewDate').textContent = 
                `${year}”N${month + 1}Œ${date}“úi${weekDays[dayOfWeek]}j`;
            
            // ŠÔƒXƒƒbƒg‚ğ¶¬
            let html = '';
            for (let hour = 6; hour <= 22; hour++) {
                const hourEvents = calendarEvents.filter(e => {
                    if (e.date !== dateStr || !e.time) return false;
                    const eventHour = parseInt(e.time.split(':')[0]);
                    return eventHour === hour;
                });
                
                let eventContent = '';
                if (hourEvents.length > 0) {
                    hourEvents.forEach(event => {
                        const bgColor = {
                            'blue': 'bg-blue-500',
                            'green': 'bg-green-500',
                            'yellow': 'bg-yellow-500',
                            'purple': 'bg-purple-500',
                            'red': 'bg-red-500'
                        }[event.color] || 'bg-gray-500';
                        
                        eventContent += `<div class="p-2 ${bgColor} text-white rounded mb-2 cursor-pointer hover:opacity-80" 
                            onclick="showEventDetail(${event.id})">
                            <div class="font-medium">${event.time} ${event.title}</div>
                            <div class="text-sm opacity-90">${event.type}</div>
                        </div>`;
                    });
                }
                
                html += `
                    <div class="flex border-b hover:bg-gray-50">
                        <div class="w-20 p-3 bg-gray-50 text-sm font-medium text-center border-r">
                            ${String(hour).padStart(2, '0')}:00
                        </div>
                        <div class="flex-1 p-3 min-h-16 cursor-pointer" 
                             data-date="${dateStr}" data-hour="${hour}" 
                             onclick="createEventAtTime('${dateStr}', ${hour})">
                            ${eventContent}
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('dayTimeSlots').innerHTML = html;
        }

        // “Á’è‚ÌŠÔ‚ÉV‹KƒCƒxƒ“ƒg‚ğì¬
        function createEventAtTime(date, hour) {
            const time = `${String(hour).padStart(2, '0')}:00`;
            showEventModal(null, date, time);
        }
        
        // ‘OŒ‚Ö
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }
        
        // ŸŒ‚Ö
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }
        
        // “Á’è‚Ì“ú•t‚ÖƒWƒƒƒ“ƒv
        function goToDate(dateStr) {
            const [year, month, day] = dateStr.split('-').map(Number);
            currentDate = new Date(year, month - 1, day);
            showSection('calendar');
            renderCalendar();
        }
        
        // ƒCƒxƒ“ƒgÚ×•\¦
        function showEventDetail(eventId) {
            const event = calendarEvents.find(e => e.id === eventId);
            if (event) {
                alert(`${event.title}€n“ú: ${event.date} ${event.time || ''}€ní•Ê: ${event.type}`);
            }
        }
        
        // ƒhƒ‰ƒbƒO & ƒhƒƒbƒv‹@”\
        let draggedEventId = null;

        function handleDragStart(e, eventId) {
            draggedEventId = eventId;
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', e.target.outerHTML);
            e.target.classList.add('opacity-50');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            const cell = e.currentTarget;
            if (cell.dataset.fullDate) {
                cell.classList.add('bg-blue-100', 'border-2', 'border-blue-400');
            }
        }

        function handleDragLeave(e) {
            const cell = e.currentTarget;
            cell.classList.remove('bg-blue-100', 'border-2', 'border-blue-400');
        }

        function handleDrop(e) {
            e.preventDefault();
            const cell = e.currentTarget;
            cell.classList.remove('bg-blue-100', 'border-2', 'border-blue-400');
            
            const newDate = cell.dataset.fullDate;
            if (newDate && draggedEventId) {
                // ƒCƒxƒ“ƒg‚Ì“ú•t‚ğXV
                const eventIndex = calendarEvents.findIndex(event => event.id === draggedEventId);
                if (eventIndex !== -1) {
                    calendarEvents[eventIndex].date = newDate;
                    renderCalendar();
                    renderMiniCalendar();
                    showNotification('—\’èˆÚ“®', `—\’è‚ğ${newDate}‚ÉˆÚ“®‚µ‚Ü‚µ‚½`);
                }
            }
            draggedEventId = null;
        }

        // ƒZƒ‹ƒNƒŠƒbƒNiV‹KƒCƒxƒ“ƒgì¬j
        function handleCellClick(e) {
            if (e.target.classList.contains('event-item')) return; // ƒCƒxƒ“ƒg‚ğƒNƒŠƒbƒN‚µ‚½ê‡‚Í–³‹
            
            const cell = e.currentTarget;
            const date = cell.dataset.fullDate;
            if (date) {
                showEventModal(null, date);
            }
        }

        // ƒCƒxƒ“ƒg‰EƒNƒŠƒbƒNƒƒjƒ…[
        function showEventMenu(e, eventId) {
            e.preventDefault();
            if (confirm('‚±‚Ì—\’è‚ğ•ÒW‚µ‚Ü‚·‚©H')) {
                const event = calendarEvents.find(ev => ev.id === eventId);
                if (event) {
                    showEventModal(event);
                }
            }
        }


        // ƒCƒxƒ“ƒgƒ‚[ƒ_ƒ‹•\¦
        function showEventModal(event = null, date = null, time = '') {
            const isEdit = !!event;
            const modalTitle = isEdit ? '—\’è‚ğ•ÒW' : 'V‹K—\’è‚ğ’Ç‰Á';
            
            const title = isEdit ? event.title : '';
            const eventDate = isEdit ? event.date : (date || new Date().toISOString().split('T')[0]);
            const eventTime = isEdit ? (event.time || '') : time;
            const type = isEdit ? event.type : 'custom';
            const color = isEdit ? event.color : 'blue';
            
            const modal = `
                <div id="eventModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-white rounded-lg p-6 w-96 max-w-full mx-4">
                        <h3 class="text-lg font-semibold mb-4">${modalTitle}</h3>
                        <form id="eventForm" onsubmit="saveEvent(event, ${isEdit ? event.id : 'null'})">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ƒ^ƒCƒgƒ‹</label>
                                    <input type="text" id="eventTitle" value="${title}" class="w-full px-3 py-2 border rounded-md" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">“ú•t</label>
                                    <input type="date" id="eventDate" value="${eventDate}" class="w-full px-3 py-2 border rounded-md" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ŠÔ</label>
                                    <input type="time" id="eventTime" value="${eventTime}" class="w-full px-3 py-2 border rounded-md">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">í•Ê</label>
                                    <select id="eventType" class="w-full px-3 py-2 border rounded-md">
                                        <option value="hearing" ${type === 'hearing' ? 'selected' : ''}>Œ»’n’²¸</option>
                                        <option value="construction" ${type === 'construction' ? 'selected' : ''}>H–</option>
                                        <option value="estimate" ${type === 'estimate' ? 'selected' : ''}>Œ©Ï‚à‚è</option>
                                        <option value="meeting" ${type === 'meeting' ? 'selected' : ''}>‘Å‚¿‡‚í‚¹</option>
                                        <option value="custom" ${type === 'custom' ? 'selected' : ''}>‚»‚Ì‘¼</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">F</label>
                                    <div class="flex space-x-2">
                                        <button type="button" onclick="selectColor('blue')" class="w-8 h-8 rounded-full bg-blue-500 ${color === 'blue' ? 'ring-2 ring-offset-2 ring-blue-400' : ''}"></button>
                                        <button type="button" onclick="selectColor('green')" class="w-8 h-8 rounded-full bg-green-500 ${color === 'green' ? 'ring-2 ring-offset-2 ring-green-400' : ''}"></button>
                                        <button type="button" onclick="selectColor('yellow')" class="w-8 h-8 rounded-full bg-yellow-500 ${color === 'yellow' ? 'ring-2 ring-offset-2 ring-yellow-400' : ''}"></button>
                                        <button type="button" onclick="selectColor('purple')" class="w-8 h-8 rounded-full bg-purple-500 ${color === 'purple' ? 'ring-2 ring-offset-2 ring-purple-400' : ''}"></button>
                                        <button type="button" onclick="selectColor('red')" class="w-8 h-8 rounded-full bg-red-500 ${color === 'red' ? 'ring-2 ring-offset-2 ring-red-400' : ''}"></button>
                                    </div>
                                    <input type="hidden" id="eventColor" value="${color}">
                                </div>
                            </div>
                            <div class="flex justify-end space-x-3 mt-6">
                                ${isEdit ? '<button type="button" onclick="deleteEvent(' + event.id + ')" class="px-4 py-2 text-red-600 hover:bg-red-50 rounded-md">íœ</button>' : ''}
                                <button type="button" onclick="closeEventModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">ƒLƒƒƒ“ƒZƒ‹</button>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">•Û‘¶</button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modal);
        }

        // F‘I‘ğ
        let selectedColor = 'blue';
        function selectColor(color) {
            selectedColor = color;
            document.getElementById('eventColor').value = color;
            
            // ƒ{ƒ^ƒ“‚ÌƒXƒ^ƒCƒ‹‚ğXV
            document.querySelectorAll('#eventModal button[onclick^="selectColor"]').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-offset-2');
            });
            event.target.classList.add('ring-2', 'ring-offset-2');
        }

        // ƒCƒxƒ“ƒg•Û‘¶
        function saveEvent(e, eventId) {
            e.preventDefault();
            
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const type = document.getElementById('eventType').value;
            const color = document.getElementById('eventColor').value;
            
            if (eventId) {
                // •ÒW
                const eventIndex = calendarEvents.findIndex(event => event.id === eventId);
                if (eventIndex !== -1) {
                    calendarEvents[eventIndex] = {
                        ...calendarEvents[eventIndex],
                        title, date, time, type, color
                    };
                }
            } else {
                // V‹Kì¬
                const newEvent = {
                    id: Math.max(...calendarEvents.map(e => e.id), 0) + 1,
                    title, date, time, type, color
                };
                calendarEvents.push(newEvent);
            }
            
            renderCalendar();
            renderMiniCalendar();
            closeEventModal();
            showNotification('—\’è•Û‘¶', eventId ? '—\’è‚ğXV‚µ‚Ü‚µ‚½' : 'V‚µ‚¢—\’è‚ğ’Ç‰Á‚µ‚Ü‚µ‚½');
        }

        // ƒCƒxƒ“ƒgíœ
        function deleteEvent(eventId) {
            if (confirm('‚±‚Ì—\’è‚ğíœ‚µ‚Ü‚·‚©H')) {
                const eventIndex = calendarEvents.findIndex(event => event.id === eventId);
                if (eventIndex !== -1) {
                    calendarEvents.splice(eventIndex, 1);
                    renderCalendar();
                    renderMiniCalendar();
                    closeEventModal();
                    showNotification('—\’èíœ', '—\’è‚ğíœ‚µ‚Ü‚µ‚½');
                }
            }
        }

        // ƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
        function closeEventModal() {
            const modal = document.getElementById('eventModal');
            if (modal) {
                modal.remove();
            }
        }

        // V‹KƒCƒxƒ“ƒg’Ç‰Áiƒ{ƒ^ƒ“‚©‚çj
        function addNewEvent() {
            const today = new Date().toISOString().split('T')[0];
            showEventModal(null, today);
        }
        
        // ========== ¿‹ŠÇ—‹@”\ ==========
        
        // ¿‹ŠÇ—ƒ^ƒuØ‚è‘Ö‚¦
        function showBillingTab(tabName) {
            // ‘Sƒ^ƒuƒRƒ“ƒeƒ“ƒc‚ğ”ñ•\¦
            document.querySelectorAll('.billing-tab-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // ‘Sƒ^ƒuƒ{ƒ^ƒ“‚ÌƒAƒNƒeƒBƒuó‘Ô‚ğ‰ğœ
            document.querySelectorAll('.billing-tab').forEach(tab => {
                tab.classList.remove('billing-tab-active', 'text-blue-600', 'border-blue-600');
                tab.classList.add('text-gray-500', 'border-transparent');
            });
            
            // ƒ^ƒu–¼‚Ìƒ}ƒbƒsƒ“ƒOiV‚µ‚¢ƒ^ƒu–¼‚É‘Î‰j
            const tabMapping = {
                'purchase': 'purchaseTab',
                'commission': 'commissionTab',
                'payment': 'paymentTab',
                'analysis': 'analysisTab',
                // ŒİŠ·«‚Ì‚½‚ßŒÃ‚¢ƒ^ƒu–¼‚àc‚·
                'referral': 'purchaseTab',
                'success': 'commissionTab',
                'invoices': 'paymentTab',
                'schedule': 'analysisTab'
            };

            // ‘I‘ğ‚³‚ê‚½ƒ^ƒu‚ğ•\¦
            const tabId = tabMapping[tabName] || (tabName + 'Tab');
            const selectedContent = document.getElementById(tabId);
            if (selectedContent) {
                selectedContent.style.display = 'block';
            }
            
            // ‘I‘ğ‚³‚ê‚½ƒ^ƒuƒ{ƒ^ƒ“‚ğƒAƒNƒeƒBƒu‚É
            const selectedTab = document.querySelector(`[data-tab="${tabName}"]`);
            if (selectedTab) {
                selectedTab.classList.remove('text-gray-500', 'border-transparent');
                selectedTab.classList.add('billing-tab-active', 'text-blue-600', 'border-blue-600');
            }
        }

        // à–±ƒf[ƒ^XVŠÖ”
        function updateFinancialData(month) {
            const date = new Date(month + '-01');
            const monthNum = date.getMonth() + 1;
            const year = date.getFullYear();

            // ƒTƒ}ƒŠ[ƒJ[ƒh‚ğXV
            const referralFeeMonth = document.getElementById('referralFeeMonth');
            if (referralFeeMonth) {
                referralFeeMonth.textContent = `${monthNum}ŒĞ‰î—¿`;
            }
            const commissionMonth = document.getElementById('commissionMonth');
            if (commissionMonth) {
                commissionMonth.textContent = `${monthNum}Œ¬–ñè”—¿`;
            }
            const roiLabel = document.getElementById('roiLabel');
            if (roiLabel) {
                roiLabel.textContent = `${monthNum}ŒROI`;
            }

            // ƒe[ƒuƒ‹ƒf[ƒ^‚ğƒtƒBƒ‹ƒ^ƒŠƒ“ƒOiÀÛ‚É‚ÍƒT[ƒo[‚©‚çæ“¾j
            const tbody = document.getElementById('referralFeeTableBody');
            if (tbody) {
                const rows = tbody.getElementsByTagName('tr');
                for (let row of rows) {
                    const dateCell = row.cells[0];
                    if (dateCell) {
                        const rowDate = new Date(dateCell.textContent);
                        const rowMonth = rowDate.getMonth() + 1;
                        const rowYear = rowDate.getFullYear();
                        if (rowMonth === monthNum && rowYear === year) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    }
                }
            }

            // Šeƒ^ƒu‚Ìƒf[ƒ^‚àXV
            updateAllFinancialTabs(month);
        }

        // ƒfƒ|ƒWƒbƒgŠÇ—ŠÖ”
        function showDepositModal() {
            const quantity = prompt('w“ü‚·‚éƒfƒ|ƒWƒbƒg”iŒ”j‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢:', '10');
            if (quantity && !isNaN(quantity) && quantity > 0) {
                const total = parseInt(quantity) * 22000;
                const today = new Date();
                const dueDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 7);
                const message = `
ƒfƒ|ƒWƒbƒg${quantity}Œ•ªi\${total.toLocaleString()}j‚Ì¿‹‘‚ğ”­s‚µ‚Ü‚·B

y¿‹“à—ez
Eƒfƒ|ƒWƒbƒgF${quantity}Œ ~ \22,000 = \${total.toLocaleString()}
Ex•¥ŠúŒÀF${dueDate.getFullYear()}”N${dueDate.getMonth() + 1}Œ${dueDate.getDate()}“ú
E—LŒøŠúŒÀF“ü‹àŠm”F‚Ì—‚XŒ––‚Ü‚Å

y‚²’ˆÓ–€z
E“ü‹àŠm”FŒã‚Éƒfƒ|ƒWƒbƒg‚ª”½‰f‚³‚ê‚Ü‚·
E”½‰fŒãAƒ‰ƒ“ƒLƒ“ƒO‚ª1ƒ‰ƒ“ƒNUP‚µ‚Ü‚·
E•Ô‹à‚ÌUè”—¿‚Í‚¨‹q—l•‰’S‚Æ‚È‚è‚Ü‚·

¿‹‘‚ğ”­s‚µ‚Ä‚æ‚ë‚µ‚¢‚Å‚µ‚å‚¤‚©H`;

                if (confirm(message)) {
                    // ¿‹‘”­s‚Ìˆ—
                    const invoiceNo = 'INV-' + Date.now().toString().slice(-8);
                    alert(`¿‹‘‚ğ”­s‚µ‚Ü‚µ‚½B€n€n¿‹‘”Ô†F${invoiceNo}€nƒfƒ|ƒWƒbƒg”F${quantity}Œ€n¿‹‹àŠzF\${total.toLocaleString()}€n€n“ü‹àŠm”FŒãA1‰c‹Æ“úˆÈ“à‚Éƒfƒ|ƒWƒbƒg‚ª”½‰f‚³‚ê‚Ü‚·B`);
                    // w“ü\¿—š—ğ‚É’Ç‰ÁiÀÛ‚ÍƒT[ƒo[‘¤‚Åˆ—j
                    location.reload();
                }
            }
        }

        function updateDepositSetting() {
            const selectedValue = document.querySelector('input[name="depositHandling"]:checked').value;
            const message = selectedValue === 'rollover'
                ? 'ŒJ‰zİ’è‚É•ÏX‚µ‚Ü‚µ‚½BŠúŒÀØ‚êŒã‚àŒp‘±‚µ‚Ä—˜—p‚Å‚«‚Ü‚·B'
                : '•Ô‹àİ’è‚É•ÏX‚µ‚Ü‚µ‚½BŠúŒÀØ‚ê‚É–¢g—p•ª‚ª•Ô‹à‚³‚ê‚Ü‚·B';
            alert(message);
        }

        // ¿‹‘ƒ_ƒEƒ“ƒ[ƒh‹@”\
        function downloadInvoice(invoiceNo) {
            alert(`¿‹‘i${invoiceNo}j‚Ìƒ_ƒEƒ“ƒ[ƒh‚ğŠJn‚µ‚Ü‚·B€n€n¦ÀÛ‚ÌÀ‘•‚Å‚ÍAƒT[ƒo[‚©‚ç¿‹‘PDF‚ğæ“¾‚µ‚Äƒ_ƒEƒ“ƒ[ƒh‚µ‚Ü‚·B`);
            // ÀÛ‚ÌÀ‘•‚Å‚ÍˆÈ‰º‚Ì‚æ‚¤‚Èˆ—‚ğs‚¤
            // window.location.href = `/api/invoices/${invoiceNo}/download`;
        }

        // ƒfƒ|ƒWƒbƒg—š—ğƒtƒBƒ‹ƒ^[‹@”\
        function filterDepositHistory() {
            const typeFilter = document.getElementById('depositTypeFilter').value;
            const monthFilter = document.getElementById('depositMonthFilter').value;
            const rows = document.querySelectorAll('.deposit-row');

            rows.forEach(row => {
                const rowType = row.getAttribute('data-type');
                const rowDate = row.getAttribute('data-date');

                let showRow = true;

                // í•ÊƒtƒBƒ‹ƒ^[
                if (typeFilter !== 'all' && rowType !== typeFilter) {
                    showRow = false;
                }

                // ŒƒtƒBƒ‹ƒ^[
                if (monthFilter && rowDate !== monthFilter) {
                    showRow = false;
                }

                // •\¦/”ñ•\¦
                row.style.display = showRow ? '' : 'none';
            });
        }

        // ƒfƒ|ƒWƒbƒg‹àŠzŒvZ
        document.addEventListener('DOMContentLoaded', function() {
            const depositInput = document.getElementById('depositAmount');
            const depositTotal = document.getElementById('depositTotal');
            if (depositInput && depositTotal) {
                depositInput.addEventListener('input', function() {
                    const amount = parseInt(this.value) || 0;
                    const total = amount * 22000;
                    depositTotal.textContent = '\' + total.toLocaleString();
                });
            }
        })

        // ‘Sà–±ƒ^ƒu‚Ìƒf[ƒ^XV
        function updateAllFinancialTabs(month) {
            // ¬–ñè”—¿Ax•¥—š—ğAûx•ªÍƒ^ƒu‚àXV
            console.log('‘Sà–±ƒ^ƒu‚ğ' + month + '‚ÉXV');
        }

        // Ğ‰î—¿ŒvZ
        function calculateReferralFee(projectType, buildingType, floors, competitors) {
            let baseFee = 0;
            const TAX_RATE = 0.10;
            
            // ƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“3ŠKˆÈã‚Ì“Á•Ê—¿‹à
            if (buildingType === 'apartment' && floors >= 3) {
                if (projectType.includes('ŠO•Ç')) {
                    baseFee = 30000;
                }
            }
            // ’P•i€–Úi‘ŠŒ©Ï‚à‚èj
            else if (competitors > 1) {
                if (projectType === '‰®ª“h‘•' || projectType === '‰®ã–h…') {
                    baseFee = 10000;
                } else if (projectType === 'ŠO•Ç•âC' || projectType === '‰®ª•âC' || projectType === 'ƒxƒ‰ƒ“ƒ_–h…') {
                    baseFee = 5000;
                }
            }
            // Šî–{€–Ú
            else {
                baseFee = 20000;
            }
            
            const tax = Math.floor(baseFee * TAX_RATE);
            return {
                base: baseFee,
                tax: tax,
                total: baseFee + tax
            };
        }
        
        // ¬–ñè”—¿ŒvZ
        function calculateSuccessFee(contractAmount, rate = 0.10) {
            const TAX_RATE = 0.10;
            const baseFee = Math.floor(contractAmount * rate);
            const tax = Math.floor(baseFee * TAX_RATE);
            
            return {
                base: baseFee,
                tax: tax,
                total: baseFee + tax,
                rate: rate
            };
        }
        
        // x•¥—\’è“úŒvZi“y“új“ú‚ÌŒã‚ë“|‚µj
        function calculatePaymentDate(paymentMethod) {
            const today = new Date();
            const nextMonth = new Date(today.getFullYear(), today.getMonth() + 1, 1);
            let paymentDate;
            
            if (paymentMethod === 'BANK_TRANSFER') {
                // —‚Œ15“ú
                paymentDate = new Date(nextMonth.getFullYear(), nextMonth.getMonth(), 15);
            } else {
                // —‚Œ27“úiŒûÀU‘Öj
                paymentDate = new Date(nextMonth.getFullYear(), nextMonth.getMonth(), 27);
            }
            
            // “y“új“úƒ`ƒFƒbƒNiŠÈˆÕ”Åj
            while (paymentDate.getDay() === 0 || paymentDate.getDay() === 6) {
                paymentDate.setDate(paymentDate.getDate() + 1);
            }
            
            // j“úƒ`ƒFƒbƒN
            const holidayStr = paymentDate.toISOString().split('T')[0];
            if (japaneseHolidays[holidayStr]) {
                paymentDate.setDate(paymentDate.getDate() + 1);
                // Ä“x“y“úƒ`ƒFƒbƒN
                while (paymentDate.getDay() === 0 || paymentDate.getDay() === 6) {
                    paymentDate.setDate(paymentDate.getDate() + 1);
                }
            }
            
            return paymentDate;
        }
        
        // ¿‹‘”­s
        function issueInvoice(invoiceId) {
            if (confirm('¿‹‘‚ğ”­s‚µ‚Ü‚·‚©H')) {
                // ƒXƒe[ƒ^ƒX‚ğXViƒfƒ‚j
                const statusCell = document.querySelector(`[value="${invoiceId}"]`).closest('tr').querySelector('.bg-yellow-100');
                if (statusCell) {
                    statusCell.classList.remove('bg-yellow-100', 'text-yellow-800');
                    statusCell.classList.add('bg-green-100', 'text-green-800');
                    statusCell.textContent = '”­sÏ';
                }
                
                showNotification('¿‹‘”­s', `¿‹‘ ${invoiceId} ‚ğ”­s‚µ‚Ü‚µ‚½`);
            }
        }
        
        // ¬–ñè”—¿¿‹‘”­s
        function issueSuccessFee(feeId) {
            if (confirm('¬–ñè”—¿‚Ì¿‹‘‚ğ”­s‚µ‚Ü‚·‚©H')) {
                showNotification('¬–ñè”—¿¿‹', `¿‹‘‚ğ”­s‚µ‚Ü‚µ‚½i${feeId}j`);
                
                // s‚ğ”ñ•\¦‚Éiƒfƒ‚j
                const row = document.querySelector(`button[onclick="issueSuccessFee('${feeId}')"]`).closest('tr');
                if (row) {
                    row.style.opacity = '0.5';
                    setTimeout(() => {
                        row.style.display = 'none';
                    }, 500);
                }
            }
        }
        
        // è“®”­s
        function manualIssueSuccessFee(feeId) {
            const reason = prompt('è“®”­s‚Ì——R‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢F');
            if (reason) {
                issueSuccessFee(feeId);
                console.log('è“®”­s——R:', reason);
            }
        }
        
        // ŒŸ¿‹‘ˆêŠ‡”­s
        function generateMonthlyInvoices() {
            const checkedBoxes = document.querySelectorAll('.invoice-checkbox:checked');
            if (checkedBoxes.length === 0) {
                alert('”­s‚·‚é¿‹‘‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢');
                return;
            }
            
            if (confirm(`${checkedBoxes.length}Œ‚Ì¿‹‘‚ğˆêŠ‡”­s‚µ‚Ü‚·‚©H`)) {
                checkedBoxes.forEach(checkbox => {
                    issueInvoice(checkbox.value);
                });
                showNotification('ˆêŠ‡”­sŠ®—¹', `${checkedBoxes.length}Œ‚Ì¿‹‘‚ğ”­s‚µ‚Ü‚µ‚½`);
            }
        }
        
        // ‘S‘I‘ğ
        function selectAllInvoices(checkbox) {
            document.querySelectorAll('.invoice-checkbox').forEach(cb => {
                cb.checked = checkbox.checked;
            });
        }
        
        // ¿‹‘Ú×•\¦
        function showInvoiceDetail(invoiceId) {
            alert(`¿‹‘Ú×: ${invoiceId}€n€nÀ‘•—\’èF€n- –¾×•\¦€n- •ÒW‹@”\€n- ƒ[ƒ‹‘—M`);
        }
        
        // PDFo—Í
        function downloadPDF(invoiceId) {
            showNotification('PDFo—Í', `${invoiceId}.pdf ‚ğƒ_ƒEƒ“ƒ[ƒh‚µ‚Ü‚µ‚½`);
        }
        
        // à–±ƒŒƒ|[ƒg CSVo—Í
        function exportFinancialReport() {
            const data = [
                ['w“ü“ú', 'ˆÄŒID', 'ŒÚ‹q–¼', 'ƒGƒŠƒA', 'w“ü‹àŠz', '¬–ñ‹àŠz', 'è”—¿', 'ROI'],
                ['2025-01-15', 'C2025-001', '“c’†—l', '“Œ‹“sa’J‹æ', '85000', '', '', ''],
                ['2025-01-10', 'C2025-002', '²“¡—l', '_“ŞìŒ§ìès', '22000', '1200000', '132000', '475%'],
                ['2025-01-08', 'C2025-003', '—é–Ø—l', 'é‹ÊŒ§‰z’Js', '80000', '800000', '80000', '100%']
            ];
            
            const csv = data.map(row => row.join(',')).join('€n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `invoices_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            showNotification('CSVo—Í', '¿‹‘ˆê——‚ğCSV‚Åo—Í‚µ‚Ü‚µ‚½');
        }

        // ƒŒƒ|[ƒg—p‚ÌƒOƒ‰ƒt‰Šú‰»
        let salesChart = null;
        let conversionChart = null;
        let leadTimeChart = null;

        // ƒŒƒ|[ƒgXVŠÖ”
        function updateReports() {
            const period = document.getElementById('reportPeriod').value;
            // ŠúŠÔ‚É‰‚¶‚½ƒf[ƒ^æ“¾‚ÆXVˆ—
            renderCharts();
        }

        // ƒOƒ‰ƒt•`‰æŠÖ”
        function renderCharts() {
            // ”„ã„ˆÚƒOƒ‰ƒt
            const salesCtx = document.getElementById('salesChart');
            if (salesCtx) {
                if (salesChart) {
                    salesChart.destroy();
                }
                salesChart = new Chart(salesCtx, {
                    type: 'line',
                    data: {
                        labels: ['1Œ', '2Œ', '3Œ', '4Œ', '5Œ', '6Œ'],
                        datasets: [{
                            label: '”„ãiç‰~j',
                            data: [6200, 7500, 6800, 8450, 7900, 8450],
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '\' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // ¬–ñ—¦„ˆÚƒOƒ‰ƒt
            const conversionCtx = document.getElementById('conversionChart');
            if (conversionCtx) {
                if (conversionChart) {
                    conversionChart.destroy();
                }
                conversionChart = new Chart(conversionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['1Œ', '2Œ', '3Œ', '4Œ', '5Œ', '6Œ'],
                        datasets: [{
                            label: '¬–ñ—¦i%j',
                            data: [65, 62, 68, 70, 67, 68.5],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // ƒŠ[ƒhƒ^ƒCƒ€ƒ`ƒƒ[ƒg
            const leadTimeCtx = document.getElementById('leadTimeChart');
            if (leadTimeCtx) {
                if (leadTimeChart) {
                    leadTimeChart.destroy();
                }
                leadTimeChart = new Chart(leadTimeCtx, {
                    type: 'line',
                    data: {
                        labels: ['1Œ', '2Œ', '3Œ', '4Œ', '5Œ', '6Œ'],
                        datasets: [
                            {
                                label: '–â‡‚¹¨’²¸',
                                data: [3.5, 3.8, 3.2, 3.0, 3.1, 3.2],
                                borderColor: 'rgb(59, 130, 246)',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.3
                            },
                            {
                                label: '’²¸¨Œ©Ï',
                                data: [3.0, 2.9, 3.1, 2.7, 2.8, 2.8],
                                borderColor: 'rgb(34, 197, 94)',
                                backgroundColor: 'rgba(34, 197, 94, 0.1)',
                                tension: 0.3
                            },
                            {
                                label: 'Œ©Ï¨¬–ñ',
                                data: [6.0, 5.8, 5.5, 5.2, 5.3, 5.5],
                                borderColor: 'rgb(168, 85, 247)',
                                backgroundColor: 'rgba(168, 85, 247, 0.1)',
                                tension: 0.3
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: {
                                        size: 10
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': ' + context.parsed.y + '“ú';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value + '“ú';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // ƒŠ[ƒhƒ^ƒCƒ€•\¦Ø‘Öi•½‹Ï/’†‰›’lj
        function updateLeadTimeDisplay() {
            const showMedian = document.getElementById('showMedian').checked;

            if (showMedian) {
                document.getElementById('leadTime1').textContent = '3.0“ú';
                document.getElementById('leadTime2').textContent = '2.5“ú';
                document.getElementById('leadTime3').textContent = '5.0“ú';
            } else {
                document.getElementById('leadTime1').textContent = '3.2“ú';
                document.getElementById('leadTime2').textContent = '2.8“ú';
                document.getElementById('leadTime3').textContent = '5.5“ú';
            }
        }

        // ƒŒƒ|[ƒgƒGƒNƒXƒ|[ƒgŠÖ”
        function exportReport() {
            const period = document.getElementById('reportPeriod').value;
            const periodText = document.getElementById('reportPeriod').options[document.getElementById('reportPeriod').selectedIndex].text;

            // CSVŒ`®‚Åƒf[ƒ^‚ğ¶¬
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "‰Á–¿“XŠÇ—ƒVƒXƒeƒ€ ƒŒƒ|[ƒg - " + periodText + "€n€n";

            // KPIƒTƒ}ƒŠ[
            csvContent += "KPIƒTƒ}ƒŠ[€n";
            csvContent += "€–Ú,”’l,‘OŒ”ä€n";
            csvContent += "‘”„ã,\8450000,+12%€n";
            csvContent += "¬–ñ—¦,68.5%,+5.2%€n";
            csvContent += "•½‹Ï’P‰¿,\952000,-3%€n";
            csvContent += "V‹KˆÄŒ,42Œ,+8Œ€n€n";

            // ‰c‹Æ•Ê¬Ñ
            csvContent += "‰c‹Æ•Ê¬Ñ€n";
            csvContent += "‰c‹Æ–¼,¬–ñ”,¬–ñ—¦,”„ã€n";
            csvContent += "“c’†‘¾˜Y,12,75%,\3200000€n";
            csvContent += "²“¡‰Ôq,8,62%,\2100000€n";
            csvContent += "—é–ØŸ˜Y,5,45%,\1450000€n€n";

            // ƒGƒŠƒA•Ê¬Ñ
            csvContent += "ƒGƒŠƒA•Ê¬Ñ€n";
            csvContent += "ƒGƒŠƒA,ˆÄŒ”,¬–ñ—¦,”„ã€n";
            csvContent += "“Œ‹“s,18,72%,\4200000€n";
            csvContent += "_“ŞìŒ§,12,65%,\2800000€n";
            csvContent += "é‹ÊŒ§,8,58%,\1450000€n";

            // ƒ_ƒEƒ“ƒ[ƒhÀs
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "report_" + new Date().toISOString().split('T')[0] + ".csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            showNotification('ƒŒƒ|[ƒgo—Í', 'CSVƒtƒ@ƒCƒ‹‚ğƒ_ƒEƒ“ƒ[ƒh‚µ‚Ü‚µ‚½');
        }

        // ƒZƒNƒVƒ‡ƒ“•\¦‚ÉƒOƒ‰ƒt‚ğ‰Šú‰»
        const originalShowSection = showSection;
        showSection = function(section) {
            originalShowSection(section);
            if (section === 'reports') {
                setTimeout(() => {
                    renderCharts();
                }, 100);
            }
        }

        // ˆÄŒŠÇ—‹@”\
        let currentCaseView = 'card'; // 'card' or 'list'

        // ˆÄŒƒf[ƒ^iƒTƒ“ƒvƒ‹j
        const casesData = [
            { id: 1, name: 'R“c‘¾˜Y', location: '“Œ‹“s¢“c’J‹æ', propertyType: 'ŒËŒš‚ÄE’z15”N', phone: '03-1234-5678', status: '–¢‘Î‰', assignee: '“c’†‘¾˜Y', area: '“Œ‹“s¢“c’J‹æ', temperature: 4, lastContact: '2024/01/15 ‰‰ñ–â‚¢‡‚í‚¹', nextAction: '2024/01/18 14:00 “d˜bƒtƒHƒ[', age: 15 },
            { id: 2, name: '—é–Ø‰Ôq', location: '_“ŞìŒ§‰¡•ls', propertyType: 'ŒËŒš‚ÄE’z10”N', phone: '045-9876-5432', status: 'ƒAƒ|Ï', assignee: '²“¡‰Ôq', area: '_“ŞìŒ§‰¡•ls', temperature: 3, lastContact: '2024/01/16 “d˜b‚ÅƒAƒ|æ“¾', nextAction: '2024/01/20 14:00 Œ»’n’²¸', age: 10 },
            { id: 3, name: '²“¡ˆê˜Y', location: 'é‹ÊŒ§‚³‚¢‚½‚Üs', propertyType: 'ƒAƒp[ƒgE’z20”N', phone: '048-1111-2222', status: 'Œ©Ï’ñoÏ', assignee: '“c’†‘¾˜Y', area: 'é‹ÊŒ§‚³‚¢‚½‚Üs', temperature: 5, lastContact: '2024/01/14 Œ©Ï‘ƒ[ƒ‹‘—•t', nextAction: '2024/01/22 10:00 Œ©Ïà–¾–K–â', age: 20 },
            { id: 4, name: '“c’†”üç', location: 'ç—tŒ§ç—ts', propertyType: 'ŒËŒš‚ÄE’z25”N', phone: '043-3333-4444', status: 'Œ»’²Ï', assignee: '²“¡‰Ôq', area: 'ç—tŒ§ç—ts', temperature: 2, lastContact: '2024/01/10 Œ»’n’²¸À{', nextAction: 'Œ©Ïì¬’†', age: 25 },
            { id: 5, name: '‚‹´Œ’‘¾', location: '“Œ‹“sVh‹æ', propertyType: 'ƒ}ƒ“ƒVƒ‡ƒ“E’z8”N', phone: '03-5555-6666', status: '¬–ñ', assignee: '“c’†‘¾˜Y', area: '“Œ‹“sVh‹æ', temperature: 5, lastContact: '2024/01/17 Œ_–ñ’÷Œ‹', nextAction: '2024/01/25 H–ŠJn', age: 8 },
            // –¢U‚è•ª‚¯ˆÄŒ
            { id: 101, name: 'V‹KŒÚ‹qA', location: '“Œ‹“sa’J‹æ', propertyType: 'ŒËŒš‚ÄE’z12”N', phone: '03-0000-0000', status: '–¢‘Î‰', assignee: null, area: '“Œ‹“sa’J‹æ', temperature: 4, source: '‚­‚ç‚×‚é', registeredDate: '2025-01-15 10:30' },
            { id: 102, name: 'V‹KŒÚ‹qB', location: '_“ŞìŒ§ìès', propertyType: 'ƒ}ƒ“ƒVƒ‡ƒ“E’z5”N', phone: '044-0000-0000', status: '–¢‘Î‰', assignee: null, area: '_“ŞìŒ§ìès', temperature: 3, source: '‚­‚ç‚×‚é', registeredDate: '2025-01-15 11:45' },
            { id: 103, name: 'V‹KŒÚ‹qC', location: 'é‹ÊŒ§‰z’Js', propertyType: 'ŒËŒš‚ÄE’z20”N', phone: '048-0000-0000', status: '–¢‘Î‰', assignee: null, area: 'é‹ÊŒ§‰z’Js', temperature: 5, source: '‚­‚ç‚×‚é', registeredDate: '2025-01-15 14:00' }
        ];

        // ˆÄŒƒf[ƒ^‚ğæ“¾‚·‚éŠÖ”
        function getCasesData() {
            return casesData;
        }

        // ‰Á–¿“Xƒf[ƒ^‚ğƒtƒH[ƒ€‚É©“®“ü—Í‚·‚éŠÖ”
        function loadMerchantData(merchantId, merchantData = null) {
            console.log('===== loadMerchantData START =====');
            console.log('merchantId:', merchantId);
            console.log('merchantData from login:', merchantData || window.merchantData);

            const data = merchantData || window.merchantData;
            if (!data) {
                console.log('No merchant data available');
                return;
            }

            console.log('=== APPLYING MERCHANT DATA TO FORMS ===');
            console.log('Data keys:', Object.keys(data));
            console.log('Full data:', data);

            console.log('==== POPULATING FORM FIELDS ====');

            // İ—§”NŒ‚ÆPRƒeƒLƒXƒg‚Ì’¼Úæ“¾iƒXƒvƒŒƒbƒhƒV[ƒg‚Ì—ñ–¼‚Åæ“¾j
            if (data['İ—§”NŒ']) {
                const establishedEl = document.getElementById('established');
                if (establishedEl) {
                    establishedEl.value = data['İ—§”NŒ'];
                    console.log(`? İ—§”NŒ‚ğİ’è: ${data['İ—§”NŒ']}`);
                }
            }

            if (data['PRƒeƒLƒXƒg']) {
                const prTextEl = document.getElementById('prText');
                if (prTextEl) {
                    prTextEl.value = data['PRƒeƒLƒXƒg'];
                    console.log(`? PR•¶‚ğİ’è: [${data['PRƒeƒLƒXƒg'].length}•¶š]`);
                    console.log(`  Š®‘S‚ÈPR•¶: ${data['PRƒeƒLƒXƒg']}`);

                    // ƒeƒLƒXƒgƒGƒŠƒA‚Ì‚‚³‚ğ©“®’²®
                    prTextEl.style.height = 'auto';
                    prTextEl.style.height = Math.max(200, prTextEl.scrollHeight) + 'px';

                    // •¶š”ƒJƒEƒ“ƒ^[XV
                    const charCount = document.getElementById('prTextCharCount');
                    if (charCount) {
                        charCount.textContent = data['PRƒeƒLƒXƒg'].length;
                    }

                    // ƒvƒŒƒrƒ…[‚É‚à”½‰f
                    const previewPrTextEl = document.getElementById('previewPrText');
                    if (previewPrTextEl) {
                        previewPrTextEl.textContent = data['PRƒeƒLƒXƒg'];
                        console.log('? PR•¶‚ğƒvƒŒƒrƒ…[‚É”½‰f');
                    }

                    // ƒLƒƒƒbƒ`ƒtƒŒ[ƒY‚ğPR•¶‚ÌÅ‰‚Ìˆê•¶‚©‚ç’Šo
                    const firstSentence = data['PRƒeƒLƒXƒg'].split('B')[0];
                    const tagline = firstSentence || 'M—Š‚ÆÀÑ‚ÌŠO•Ç“h‘•ê–å“X';

                    const taglineElements = ['previewTagline', 'previewTaglineHero', 'previewTaglineOverlay'];
                    taglineElements.forEach(id => {
                        const el = document.getElementById(id);
                        if (el) el.textContent = tagline;
                    });
                    console.log('? ƒLƒƒƒbƒ`ƒtƒŒ[ƒY‚ğƒvƒŒƒrƒ…[‚É”½‰f:', tagline.substring(0, 30));
                }
            }

            // ‰ïĞî•ñƒtƒH[ƒ€ƒtƒB[ƒ‹ƒh‚Ìƒ}ƒbƒsƒ“ƒOiƒXƒvƒŒƒbƒhƒV[ƒg‚Ì—ñ–¼‚ÉŠ®‘S‘Î‰j
            const fieldMappings = {
                companyName: ['‰ïĞ–¼', 'companyName', 'company_name'],
                companyNameKana: ['‰ïĞ–¼ƒJƒi', 'companyNameKana', 'company_name_kana'],
                tradeName: ['‰®†', 'tradeName', 'trade_name'],
                tradeNameKana: ['‰®†ƒJƒi', 'tradeNameKana', 'trade_name_kana'],
                representative: ['‘ã•\Ò–¼', 'representative', 'representative_name'],
                representativeKana: ['‘ã•\Ò–¼ƒJƒi', 'representativeKana', 'representative_kana'],
                zipCode: ['—X•Ö”Ô†', 'postalCode', 'zipCode', 'postal_code'],
                address: ['ZŠ', 'address'],
                phone: ['“d˜b”Ô†', 'phone', 'tel'],
                website: ['ƒEƒFƒuƒTƒCƒgURL', 'website', 'url'],
                established: ['İ—§”NŒ', 'established', 'establishment_date'],
                prText: ['PRƒeƒLƒXƒg', 'prText', 'pr_text'],
                billingEmail: ['¿‹—pƒ[ƒ‹ƒAƒhƒŒƒX', 'billingEmail', 'billing_email'],
                salesEmail: ['‰c‹Æ—pƒ[ƒ‹ƒAƒhƒŒƒX', 'salesEmail', 'sales_email'],
                salesPersonName: ['‰c‹Æ’S“–Ò–¼', 'salesPersonName', 'sales_person_name'],
                salesPersonKana: ['‰c‹Æ’S“–ÒƒJƒi', 'salesPersonKana', 'sales_person_kana'],
                employees: [']‹Æˆõ”', 'employees', 'employee_count'],
                salesScale: ['”„ã‹K–Í', 'salesScale', 'sales_scale'],
                maxFloors: ['Å‘å‘Î‰ŠK”', 'maxFloors', 'max_floors'],
                buildingAge: ['’z”N”‘Î‰”ÍˆÍ', 'buildingAge', 'building_age'],
                specialItems: ['“Áê‘Î‰€–Ú', 'specialItems', 'special_items'],
                cities: ['‘Î‰s‹æ’¬‘º', 'cities', 'service_areas'],
                priorityAreas: ['—DæƒGƒŠƒA', 'priorityAreas', 'priority_areas']
            };

            // ƒtƒB[ƒ‹ƒh‚É’l‚ğİ’è
            Object.keys(fieldMappings).forEach(fieldId => {
                const possibleKeys = fieldMappings[fieldId];
                let value = null;

                // ƒf[ƒ^‚©‚ç’l‚ğŒŸõ
                for (const key of possibleKeys) {
                    if (data[key] !== undefined && data[key] !== null && data[key] !== '') {
                        value = data[key];
                        break;
                    }
                }

                const element = document.getElementById(fieldId) ||
                               document.querySelector(`input[placeholder*="${fieldId}"]`) ||
                               document.querySelector(`input[name="${fieldId}"]`);

                if (element && value) {
                    // PR•¶‚Ì“Á•Ê‚Èˆ—iÈ—ª‚³‚ê‚½•”•ª‚àŠÜ‚ß‚ÄŠ®‘S‚Éæ“¾j
                    if (fieldId === 'prText') {
                        // ƒXƒvƒŒƒbƒhƒV[ƒg‚ÅÈ—ª‚³‚ê‚Ä‚¢‚éê‡AŠ®‘S‚ÈƒeƒLƒXƒg‚ğæ“¾
                        let fullText = value;

                        // "..."‚ÅI‚í‚Á‚Ä‚¢‚éê‡AŠ®‘S‚ÈƒeƒLƒXƒg‚ª‚ ‚é‚Í‚¸‚È‚Ì‚Å’T‚·
                        if (value && value.endsWith('...')) {
                            // PRƒeƒLƒXƒg—ñ‚ÌŠ®‘S‚Èƒf[ƒ^‚ğæ“¾
                            const fullPrText = data['PRƒeƒLƒXƒg'] || data.prText || data.pr_text;
                            if (fullPrText) {
                                fullText = fullPrText;
                                console.log('? PR•¶‚ÌŠ®‘S”Å‚ğæ“¾‚µ‚Ü‚µ‚½');
                            }
                        }

                        element.value = fullText;
                        console.log(`? Set ${fieldId} = [${fullText.length}•¶š]`);
                        console.log(`  Š®‘S‚ÈPR•¶: ${fullText}`);

                        // ƒeƒLƒXƒgƒGƒŠƒA‚Ì‚‚³‚ğ©“®’²®
                        element.style.height = 'auto';
                        element.style.height = Math.max(200, element.scrollHeight) + 'px';

                        // •¶š”ƒJƒEƒ“ƒ^[‚àXV
                        const charCount = document.getElementById('prTextCharCount');
                        if (charCount) {
                            charCount.textContent = fullText.length;
                        }
                    } else if (fieldId === 'established') {
                        // İ—§”NŒ‚ğæ“¾
                        const establishedData = data['İ—§”NŒ'] || data.established || data['establishment_date'];
                        if (establishedData) {
                            // ISOŒ`®‚Ì“ú•t‚ğYYYY”NMŒŒ`®‚É•ÏŠ·
                            let formattedDate = establishedData;
                            if (establishedData.includes('T') || establishedData.includes('Z')) {
                                // ISOŒ`®‚Ìê‡i—á: 2000-03-31T15:00:00.000Zj
                                const date = new Date(establishedData);
                                const year = date.getFullYear();
                                const month = date.getMonth() + 1; // 0-indexed
                                formattedDate = `${year}”N${month}Œ`;
                                console.log(`? Converted ISO date to Japanese format: ${establishedData} ¨ ${formattedDate}`);
                            }
                            element.value = formattedDate;
                            console.log(`? Set ${fieldId} = ${formattedDate}`);
                        } else if (value) {
                            // value‚àISOŒ`®‚Ì‰Â”\«‚ª‚ ‚é‚Ì‚Åƒ`ƒFƒbƒN
                            let formattedValue = value;
                            if (value.includes('T') || value.includes('Z')) {
                                const date = new Date(value);
                                const year = date.getFullYear();
                                const month = date.getMonth() + 1;
                                formattedValue = `${year}”N${month}Œ`;
                                console.log(`? Converted ISO date to Japanese format: ${value} ¨ ${formattedValue}`);
                            }
                            element.value = formattedValue;
                            console.log(`? Set ${fieldId} = ${formattedValue}`);
                        }
                    } else if (fieldId === 'employees' || fieldId === 'salesScale') {
                        // select—v‘f‚Ìê‡‚ÍAoption‚ğ‘I‘ğ
                        if (element.tagName === 'SELECT') {
                            // ’l‚ğ³‹K‰»i‘OŒã‚Ì‹ó”’‚ğíœA‘SŠp‰p”š‚ğ”¼Šp‚É•ÏŠ·j
                            let normalizedValue = String(value).trim();

                            // ]‹Æˆõ”‚ªISO“ú•tŒ`®‚Å—ˆ‚½ê‡i—á: 2025-03-04T15:00:00.000Z ¨ 3-4j
                            if (fieldId === 'employees' && (normalizedValue.includes('T') || normalizedValue.includes('Z'))) {
                                const date = new Date(normalizedValue);
                                const month = date.getMonth() + 1; // 0-indexed
                                const day = date.getDate();
                                normalizedValue = `${month}-${day}`;
                            }

                            // ‘SŠp‰p”š‚ğ”¼Šp‚É•ÏŠ·
                            normalizedValue = normalizedValue.replace(/[‚`-‚y‚-‚š‚O-‚X]/g, function(s) {
                                return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);
                            });

                            // ‚Ü‚¸³‹K‰»‚µ‚½’l‚Å’¼Úİ’è‚µ‚Ä‚İ‚é
                            element.value = normalizedValue;

                            // ’¼Úƒ}ƒbƒ`‚µ‚È‚©‚Á‚½ê‡
                            if (!element.value && normalizedValue) {
                                const options = Array.from(element.options);

                                // ‚æ‚è_“î‚Èƒ}ƒbƒ`ƒ“ƒO
                                const matchedOption = options.find(opt => {
                                    // option value ‚ÆŠ®‘Sˆê’v
                                    if (opt.value === normalizedValue) return true;

                                    // option value ‚Ì³‹K‰»”Å‚Æˆê’v
                                    const normalizedOptValue = opt.value.trim().toLowerCase();
                                    const normalizedSearchValue = normalizedValue.toLowerCase();
                                    if (normalizedOptValue === normalizedSearchValue) return true;

                                    // option text ‚ÉŠÜ‚Ü‚ê‚é
                                    const optText = opt.text.replace(/€s/g, '').toLowerCase();
                                    const valueText = normalizedValue.replace(/€s/g, '').toLowerCase();
                                    if (optText.includes(valueText) || valueText.includes(optText)) return true;

                                    return false;
                                });

                                if (matchedOption) {
                                    element.value = matchedOption.value;
                                }
                            }
                        } else {
                            element.value = value;
                        }
                    } else {
                        element.value = value;
                        console.log(`? Set ${fieldId} = ${value}`);
                    }
                } else if (element) {
                    console.log(`? Empty data for ${fieldId}`);
                } else {
                    console.log(`? Element not found for ${fieldId}`);
                }
            });

            console.log('=== AUTO-POPULATING DELIVERY SETTINGS ===');

            // ©“®”zMİ’è‚Ìƒ}ƒbƒsƒ“ƒO
            if (data.deliverySettings || data.delivery_settings) {
                const deliveryData = data.deliverySettings || data.delivery_settings;
                console.log('Auto delivery settings:', deliveryData);

                // ”N—î”ÍˆÍ
                if (deliveryData.ageMin !== undefined) {
                    const ageMinEl = document.getElementById('ageMin');
                    if (ageMinEl) {
                        ageMinEl.value = deliveryData.ageMin;
                        console.log(`? Set age range min: ${deliveryData.ageMin}`);
                    }
                }
                if (deliveryData.ageMax !== undefined) {
                    const ageMaxEl = document.getElementById('ageMax');
                    if (ageMaxEl) {
                        ageMaxEl.value = deliveryData.ageMax;
                        console.log(`? Set age range max: ${deliveryData.ageMax}`);
                    }
                }

                // ‚»‚Ì‘¼‚Ì©“®”zMİ’è...
            } else {
                // ƒfƒtƒHƒ‹ƒg’lİ’è
                const ageMinEl = document.getElementById('ageMin');
                const ageMaxEl = document.getElementById('ageMax');
                if (ageMinEl && !ageMinEl.value) {
                    ageMinEl.value = '10';
                    console.log('? Set age range min: 10');
                }
                if (ageMaxEl && !ageMaxEl.value) {
                    ageMaxEl.value = '100';
                    console.log('? Set age range max: 100');
                }
            }

            console.log('=== UPDATING COMPANY DISPLAYS ===');
            // ‰ïĞ–¼•\¦‚ÌXV
            if (data.companyName || data.company_name) {
                const companyDisplays = document.querySelectorAll('.company-name-display');
                companyDisplays.forEach(el => {
                    el.textContent = data.companyName || data.company_name;
                });
            }

            console.log('=== LOADING BRANCH DATA ===');
            // ƒXƒvƒŒƒbƒhƒV[ƒg‚ÌO—ñix“X–¼j‚ÆP—ñix“XZŠj‚©‚çx“Xî•ñ‚ğæ“¾
            const branchNameRaw = data['x“X–¼'] || data.branchName || data.branch_name || '';
            const branchAddressRaw = data['x“XZŠ'] || data.branchAddress || data.branch_address || '';

            console.log('Branch name from spreadsheet:', branchNameRaw);
            console.log('Branch address from spreadsheet:', branchAddressRaw);

            // x“X–¼‚Ü‚½‚Íx“XZŠ‚ª‘¶İ‚·‚éê‡
            if (branchNameRaw || branchAddressRaw) {
                // ‘SŠpƒJƒ“ƒ}wAx‚Å•ªŠ„i•¡”‚Ìx“X‚É‘Î‰j
                const branchNames = branchNameRaw ? branchNameRaw.split('A').map(s => s.trim()).filter(s => s) : [];
                const branchAddresses = branchAddressRaw ? branchAddressRaw.split('A').map(s => s.trim()).filter(s => s) : [];

                console.log('Split branch names:', branchNames);
                console.log('Split branch addresses:', branchAddresses);

                // x“X‚Ì”‚ğŒˆ’èi–¼‘O‚ÆZŠ‚Ì‘½‚¢•û‚ğŠî€‚É‚·‚éj
                const branchCount = Math.max(branchNames.length, branchAddresses.length);

                if (branchCount > 0) {
                    // Šù‘¶‚Ìx“X‚ğƒNƒŠƒA
                    window.branches = [];
                    branchIdCounter = 0;
                    const branchList = document.getElementById('branchList');
                    if (branchList) {
                        branchList.innerHTML = '';
                    }

                    // Šex“X‚ğ’Ç‰Á
                    for (let i = 0; i < branchCount; i++) {
                        const branchId = ++branchIdCounter;
                        const branchInfo = {
                            id: branchId,
                            name: branchNames[i] || '',
                            address: branchAddresses[i] || ''
                        };

                        window.branches.push(branchInfo);

                        const branchDiv = document.createElement('div');
                        branchDiv.id = `branch-${branchId}`;
                        branchDiv.className = 'border rounded-lg p-4 mb-3 bg-gray-50';
                        branchDiv.innerHTML = `
                            <div class="flex justify-between items-start mb-3">
                                <h4 class="font-medium text-gray-700">x“X ${i + 1}</h4>
                                <button onclick="removeBranch(${branchId})" class="text-red-600 hover:text-red-800">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">x“X–¼</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: ‰¡•lx“X"
                                           value="${branchInfo.name}"
                                           onchange="updateBranch(${branchId}, 'name', this.value)">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">x“XZŠ</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="—á: _“ŞìŒ§‰¡•ls..."
                                           value="${branchInfo.address}"
                                           onchange="updateBranch(${branchId}, 'address', this.value)">
                                </div>
                            </div>
                        `;

                        if (branchList) {
                            branchList.appendChild(branchDiv);
                        }

                        console.log(`? Loaded branch ${i + 1}: ${branchInfo.name} - ${branchInfo.address}`);
                    }

                    // x“Xƒ}ƒbƒv‚ğXV
                    setTimeout(() => updateBranchMaps(), 100);
                } else {
                    console.log('No valid branch data after splitting');
                }
            } else {
                console.log('No branch data found in spreadsheet');
            }

            console.log('=== LOADING AREA DATA ===');
            // ‘Î‰“s“¹•{Œ§iAG—ñjA‘Î‰s‹æ’¬‘ºiAH—ñjA—DæƒGƒŠƒAiAI—ñj‚ğæ“¾
            const prefecturesRaw = data['‘Î‰“s“¹•{Œ§'] || data.prefectures || '';
            const citiesRaw = data['‘Î‰s‹æ’¬‘º'] || data.cities || '';
            const prioritiesRaw = data['—DæƒGƒŠƒA'] || data.priorities || data.priority_areas || '';

            console.log('Prefectures from spreadsheet:', prefecturesRaw);
            console.log('Cities from spreadsheet:', citiesRaw);
            console.log('Priorities from spreadsheet:', prioritiesRaw);

            // “s“¹•{Œ§‚ğ•\¦
            const prefecturesDisplay = document.getElementById('companyPrefecturesDisplay');
            if (prefecturesDisplay) {
                if (prefecturesRaw) {
                    const prefectures = prefecturesRaw.split(',').map(s => s.trim()).filter(s => s);
                    prefecturesDisplay.innerHTML = prefectures.map(pref =>
                        `<span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            ${pref}
                        </span>`
                    ).join('');
                    console.log(`? Loaded ${prefectures.length} prefectures`);
                } else {
                    prefecturesDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">–¢İ’è</span>';
                }
            }

            // s‹æ’¬‘º‚ğ•\¦
            const citiesDisplay = document.getElementById('companyCitiesDisplay');
            if (citiesDisplay) {
                if (citiesRaw) {
                    // JSONŒ`®‚Ìê‡‚ÆƒJƒ“ƒ}‹æØ‚è‚Ìê‡‚É‘Î‰
                    let cities = [];
                    try {
                        const parsed = JSON.parse(citiesRaw);
                        if (parsed.type === 'compressed' && parsed.full) {
                            cities = parsed.full.split(',').map(s => s.trim()).filter(s => s);
                        } else if (parsed.type === 'compressed' && parsed.preview) {
                            cities = parsed.preview.split(',').map(s => s.trim()).filter(s => s);
                        }
                    } catch (e) {
                        // JSONŒ`®‚Å‚È‚¢ê‡AƒJƒ“ƒ}‹æØ‚è‚Æ‚µ‚Äˆ—
                        cities = citiesRaw.split(',').map(s => s.trim()).filter(s => s);
                    }

                    citiesDisplay.innerHTML = cities.map(city =>
                        `<span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ${city}
                        </span>`
                    ).join('');
                    console.log(`? Loaded ${cities.length} cities`);
                } else {
                    citiesDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">–¢İ’è</span>';
                }
            }

            // —DæƒGƒŠƒA‚ğ•\¦
            const prioritiesDisplay = document.getElementById('companyPrioritiesDisplay');
            if (prioritiesDisplay) {
                if (prioritiesRaw) {
                    const priorities = prioritiesRaw.split(',').map(s => s.trim()).filter(s => s);
                    prioritiesDisplay.innerHTML = priorities.map(priority =>
                        `<span class="inline-flex items-center gap-1 px-4 py-2 bg-gradient-to-r from-amber-400 to-yellow-400 text-amber-900 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-shadow">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                            </svg>
                            ${priority}
                        </span>`
                    ).join('');
                    console.log(`? Loaded ${priorities.length} priority areas`);
                } else {
                    prioritiesDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">–¢İ’è</span>';
                }
            }

            console.log('=== LOADING CONSTRUCTION DATA ===');
            // {H‰ÓŠƒf[ƒ^‚ğæ“¾iAE—ñj
            const constructionRaw = data['{H‰ÓŠ'] || data.construction_types || '';
            console.log('Construction types from spreadsheet:', constructionRaw);

            // {H‰ÓŠƒAƒCƒRƒ“ƒ}ƒbƒsƒ“ƒO
            const constructionIcons = {
                'ŠO•Ç“h‘•': '??',
                'ŠO•ÇƒJƒo[H–@': '???',
                'ŠO•Ç’£‘Ö‚¦': '??',
                '‰®ª“h‘•iŠO•ÇH–ŠÜ‚Şj': '??',
                '‰®ã–h…iŠO•ÇH–ŠÜ‚Şj': '?',
                '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™': '??',
                '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢': '??',
                '‰®ªƒJƒo[H–@': '???',
                'ŠO•Ç•âCiŠO•ÇH–ŠÜ‚Şj': '??',
                '‰®ª•âCiŠO•ÇH–ŠÜ‚Şj': '???',
                'ƒxƒ‰ƒ“ƒ_–h…iŠO•ÇH–ŠÜ‚Şj': '??',
                '“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒjiŠO•ÇH–ŠÜ‚Şj': '??',
                '“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™jiŠO•ÇH–ŠÜ‚Şj': '??',
                'ŠO•Ç‰J˜R‚èC‘UiŠO•ÇH–ŠÜ‚Şj': '?',
                '‰®ª‰J˜R‚èC‘Ui‰®ªH–ŠÜ‚Şj': '???',
                '‰®ª“h‘•’P•i': '??',
                '‰®ã–h…’P•i': '?',
                'ŠO•Ç•âC’P•i': '??',
                '‰®ª•âC’P•i': '???',
                'ƒxƒ‰ƒ“ƒ_–h…’P•i': '??',
                'ŠO•Ç‰J˜R‚èC‘U’P•i': '?',
                '‰®ª‰J˜R‚èC‘U’P•i': '???'
            };

            const constructionDisplay = document.getElementById('companyConstructionDisplay');
            if (constructionDisplay) {
                if (constructionRaw) {
                    const constructions = constructionRaw.split(',').map(s => s.trim()).filter(s => s);

                    // d•¡‚ğíœ‚·‚é‚½‚ßA³‹K‰»Œã‚ÌƒeƒLƒXƒg‚Åƒ†ƒj[ƒN‰»
                    const uniqueConstructions = [];
                    const seenTexts = new Set();

                    constructions.forEach(construction => {
                        // ŠÈ—ª•\¦—p‚É•¶š—ñ‚ğ’Zk
                        let displayText = construction
                            .replace('iŠO•ÇH–ŠÜ‚Şj', '')
                            .replace('i‰®ªH–ŠÜ‚Şj', '')
                            .replace('i’A‚µ1ĞĞ‰î‚Í’è‰¿j', '')
                            .replace('’P•i', '')
                            .trim();

                        // ‚Ü‚¾Œ©‚Ä‚¢‚È‚¢ƒeƒLƒXƒg‚Ìê‡‚Ì‚İ’Ç‰Á
                        if (!seenTexts.has(displayText)) {
                            seenTexts.add(displayText);
                            uniqueConstructions.push({
                                original: construction,
                                display: displayText
                            });
                        }
                    });

                    constructionDisplay.innerHTML = uniqueConstructions.map(item => {
                        const icon = constructionIcons[item.original] || '??';

                        return `<div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">${icon}</span>
                            <span class="text-sm font-medium text-gray-700">${item.display}</span>
                        </div>`;
                    }).join('');
                    console.log(`? Loaded ${uniqueConstructions.length} unique construction types (${constructions.length} total)`);
                } else {
                    constructionDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">–¢İ’è</span>';
                }
            }

            console.log('=== LOADING APPEAL POINTS DATA ===');
            // “Áê‘Î‰€–Úƒf[ƒ^‚ğæ“¾iAF—ñj
            const appealPointsRaw = data['“Áê‘Î‰€–Ú'] || data.appeal_points || data.special_services || '';
            console.log('Appeal points from spreadsheet:', appealPointsRaw);

            // ƒAƒs[ƒ‹ƒ|ƒCƒ“ƒgƒAƒCƒRƒ“ƒ}ƒbƒsƒ“ƒO
            const appealPointIcons = {
                'Õ”ME’f”M“h—¿’ñˆÄ‰Â”\': '???',
                'ƒNƒŒƒWƒbƒgƒJ[ƒh•¥‚¢‰Â': '??',
                '’ñŒgæƒ[ƒ“—L‚è': '??',
                '‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg': '??',
                '•¬‹à\¿ƒTƒ|[ƒg': '??',
                '‘¦“úŒ©Ï‚à‚è‘Î‰': '?',
                '©ĞEl{H': '??',
                '•ÛØŠúŠÔ10”NˆÈã': '???',
                '24ŠÔ‹Ù‹}‘Î‰': '??',
                'ƒhƒ[ƒ“’²¸‘Î‰': '??',
                '–³—¿“_ŒŸƒT[ƒrƒX': '??',
                'ƒJƒ‰[ƒVƒ~ƒ…ƒŒ[ƒVƒ‡ƒ“–³—¿': '??',
                '‹ß—×ˆ¥A‘ãs': '??',
                'H–Ê^•ñ‘’ñ‹Ÿ': '??',
                'Š®HŒãƒAƒtƒ^[ƒtƒHƒ[': '?'
            };

            const appealPointsDisplay = document.getElementById('companyAppealPointsDisplay');
            if (appealPointsDisplay) {
                if (appealPointsRaw) {
                    // œŠO‚·‚éƒAƒs[ƒ‹ƒ|ƒCƒ“ƒg
                    const excludedPoints = [
                        '—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]',
                        '‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â'
                    ];

                    const appealPoints = appealPointsRaw
                        .split(',')
                        .map(s => s.trim())
                        .filter(s => s && !excludedPoints.includes(s)); // œŠOƒŠƒXƒg‚ÉŠÜ‚Ü‚ê‚Ä‚¢‚È‚¢‚à‚Ì‚Ì‚İ

                    if (appealPoints.length > 0) {
                        appealPointsDisplay.innerHTML = appealPoints.map(point => {
                            const icon = appealPointIcons[point] || '?';

                            return `<div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">${icon}</span>
                                <span class="text-sm font-medium text-gray-700">${point}</span>
                            </div>`;
                        }).join('');
                        console.log(`? Loaded ${appealPoints.length} appeal points`);
                    } else {
                        appealPointsDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">–¢İ’è</span>';
                    }
                } else {
                    appealPointsDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">–¢İ’è</span>';
                }
            }

            console.log('=== LOADING QUALIFICATIONS DATA ===');
            // •Û—L‘Šiƒf[ƒ^‚ğæ“¾iAT—ñj
            const qualificationsRaw = data['•Û—L‘Ši'] || '';
            console.log('Qualifications from spreadsheet:', qualificationsRaw);

            if (qualificationsRaw) {
                const qualificationsList = qualificationsRaw.split(',').map(q => q.trim()).filter(q => q);
                console.log('Parsed qualifications:', qualificationsList);

                // ‘S‚Ä‚Ì•Û—L‘Šiƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ğƒNƒŠƒA
                document.querySelectorAll('input[name="qualifications"]').forEach(cb => {
                    cb.checked = false;
                });

                // ƒJƒXƒ^ƒ€‘ŠiƒŠƒXƒg‚ğƒNƒŠƒA
                const customQualList = document.getElementById('customQualificationsList');
                if (customQualList) {
                    customQualList.innerHTML = '';
                }

                // ƒXƒvƒŒƒbƒhƒV[ƒg‚Ìƒf[ƒ^‚ÉŠî‚Ã‚¢‚Äƒ`ƒFƒbƒN
                qualificationsList.forEach(qual => {
                    const checkbox = document.querySelector(`input[name="qualifications"][value="${qual}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        console.log(`? Checked qualification: ${qual}`);
                    } else {
                        // ƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚É‚È‚¢‘Ši‚Íu‚»‚Ì‘¼v‚Æ‚µ‚ÄƒJƒXƒ^ƒ€ƒŠƒXƒg‚É’Ç‰Á
                        console.log(`? Qualification not found in checkboxes, adding as custom: ${qual}`);
                        if (customQualList) {
                            const tag = document.createElement('div');
                            tag.className = 'inline-flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm';
                            tag.innerHTML = `
                                <span>${qual}</span>
                                <button onclick="this.parentElement.remove()" class="ml-2 text-blue-600 hover:text-blue-800">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            `;
                            customQualList.appendChild(tag);
                        }
                    }
                });

                // ƒvƒŒƒrƒ…[‚É•Û—L‘Ši‚ğ”½‰f
                const previewQualsList = document.getElementById('qualificationsList');
                if (previewQualsList) {
                    previewQualsList.innerHTML = '';
                    qualificationsList.forEach(qual => {
                        const div = document.createElement('div');
                        div.className = 'bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center';
                        div.innerHTML = `
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium">${qual}</span>
                        `;
                        previewQualsList.appendChild(div);
                    });
                    const qualSection = document.getElementById('preview-gallery');
                    if (qualSection && qualificationsList.length > 0) {
                        qualSection.style.display = 'block';
                    }
                    console.log('? Updated preview qualifications:', qualificationsList.length);
                }
            }

            console.log('=== LOADING INSURANCE DATA ===');
            // ‰Á“ü•ÛŒ¯ƒf[ƒ^‚ğæ“¾iAU—ñj
            const insuranceRaw = data['‰Á“ü•ÛŒ¯'] || '';
            console.log('Insurance from spreadsheet:', insuranceRaw);

            if (insuranceRaw) {
                const insuranceList = insuranceRaw.split(',').map(i => i.trim()).filter(i => i);
                console.log('Parsed insurance:', insuranceList);

                // ‘S‚Ä‚Ì‰Á“ü•ÛŒ¯ƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ğƒNƒŠƒA
                document.querySelectorAll('input[name="insurance"]').forEach(cb => {
                    cb.checked = false;
                });

                // ƒJƒXƒ^ƒ€•ÛŒ¯ƒŠƒXƒg‚ğƒNƒŠƒA
                const customInsList = document.getElementById('customInsuranceList');
                if (customInsList) {
                    customInsList.innerHTML = '';
                }

                // ƒXƒvƒŒƒbƒhƒV[ƒg‚Ìƒf[ƒ^‚ÉŠî‚Ã‚¢‚Äƒ`ƒFƒbƒN
                insuranceList.forEach(ins => {
                    const checkbox = document.querySelector(`input[name="insurance"][value="${ins}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        console.log(`? Checked insurance: ${ins}`);
                    } else {
                        // ƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚É‚È‚¢•ÛŒ¯‚Íu‚»‚Ì‘¼v‚Æ‚µ‚ÄƒJƒXƒ^ƒ€ƒŠƒXƒg‚É’Ç‰Á
                        console.log(`? Insurance not found in checkboxes, adding as custom: ${ins}`);
                        if (customInsList) {
                            const tag = document.createElement('div');
                            tag.className = 'inline-flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm';
                            tag.innerHTML = `
                                <span>${ins}</span>
                                <button onclick="this.parentElement.remove()" class="ml-2 text-green-600 hover:text-green-800">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            `;
                            customInsList.appendChild(tag);
                        }
                    }
                });

                // ƒvƒŒƒrƒ…[‚É‰Á“ü•ÛŒ¯‚ğ”½‰f
                const previewInsList = document.getElementById('insuranceList');
                if (previewInsList) {
                    previewInsList.innerHTML = '';
                    insuranceList.forEach(ins => {
                        const div = document.createElement('div');
                        div.className = 'bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center';
                        div.innerHTML = `
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium">${ins}</span>
                        `;
                        previewInsList.appendChild(div);
                    });
                    const insSection = document.getElementById('preview-insurance');
                    if (insSection && insuranceList.length > 0) {
                        insSection.style.display = 'block';
                    }
                    console.log('? Updated preview insurance:', insuranceList.length);
                }
            }

            // ‰c‹Æ’S“–Ò–¼iX—ñj‚ğwindow.merchantData‚É•Û‘¶
            const salesPersonName = data['‰c‹Æ’S“–Ò–¼'] || data.salesPersonName || data.sales_person_name || '';
            if (salesPersonName) {
                if (!window.merchantData) {
                    window.merchantData = {};
                }
                window.merchantData.salesPerson = salesPersonName;
                console.log(`? Sales person name: ${salesPersonName}`);

                // ƒwƒbƒ_[‚Ì‰c‹Æ’S“–Ò•\¦‚ğXV
                const userRoleElement = document.getElementById('userRole');
                if (userRoleElement) {
                    userRoleElement.textContent = salesPersonName;
                    console.log(`? Updated header with sales person: ${salesPersonName}`);
                }
            }

            // ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹‚Ì“Ç‚İ‚İ
            const mainVisualUrlFromSheet = data['ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹'] || data.mainVisual;
            if (mainVisualUrlFromSheet) {
                mainVisualUrl = mainVisualUrlFromSheet;
                document.getElementById('mainVisualImage').src = mainVisualUrlFromSheet;
                document.getElementById('mainVisualPreview').classList.remove('hidden');
                document.getElementById('mainVisualPlaceholder').classList.add('hidden');

                // ƒvƒŒƒrƒ…[‚É‚à”½‰f
                document.getElementById('previewMainVisual').src = mainVisualUrlFromSheet;
                document.getElementById('mainVisualSection').style.display = 'block';
                document.getElementById('heroSection').style.display = 'none';

                // ƒƒCƒ“ƒrƒWƒ…ƒAƒ‹ã‚Ìİ—§”NŒ“ú‚àXV
                const establishedDate = data['İ—§”NŒ'] || data.established || '';
                if (establishedDate) {
                    const overlayEstablished = document.getElementById('previewEstablishedOverlay');
                    if (overlayEstablished) {
                        overlayEstablished.textContent = establishedDate;
                    }
                }

                console.log('? Loaded main visual:', mainVisualUrlFromSheet);
            }

            // Ê^ƒMƒƒƒ‰ƒŠ[‚Ì“Ç‚İ‚İi’x‰„“Ç‚İ‚İ + Œy—ÊƒTƒ€ƒlƒCƒ‹j
            const galleryUrlsFromSheet = data['Ê^ƒMƒƒƒ‰ƒŠ['] || data.photoGallery;
            if (galleryUrlsFromSheet) {
                // HYPERLINKŠÖ”‚ÌŒ‹‰Ê‚ğˆ—
                let urls = [];
                if (typeof galleryUrlsFromSheet === 'string') {
                    // ƒJƒ“ƒ}‹æØ‚è‚ÌURL•¶š—ñ‚ğ•ªŠ„
                    urls = galleryUrlsFromSheet.split(',').map(url => url.trim()).filter(url => url && url.startsWith('http'));
                }

                const galleryList = document.getElementById('photoGalleryList');
                const addButton = galleryList.querySelector('.border-dashed');

                // ƒvƒŒƒrƒ…[—p”z—ñ‚ğƒNƒŠƒA
                galleryImages = [];

                urls.forEach((url, index) => {
                    const imageId = 'gallery_loaded_' + index;
                    // ƒTƒ€ƒlƒCƒ‹—p‚ÉŒy—Ê‰»iw1000 ¨ w200j
                    const thumbnailUrl = url.replace(/sz=w€d+/, 'sz=w200');

                    const imageDiv = document.createElement('div');
                    imageDiv.className = 'relative group gallery-item';
                    imageDiv.id = imageId;
                    imageDiv.innerHTML = `
                        <img loading="lazy" src="${thumbnailUrl}" class="w-full h-24 object-cover rounded-lg" alt="ƒMƒƒƒ‰ƒŠ[‰æ‘œ${index + 1}">
                        <button type="button" onclick="removeGalleryImage('${imageId}')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    `;
                    galleryList.insertBefore(imageDiv, addButton);

                    // ƒvƒŒƒrƒ…[—p‚Ì”z—ñ‚É‚à’Ç‰Á
                    galleryImages.push({
                        src: url,
                        name: `ƒMƒƒƒ‰ƒŠ[‰æ‘œ${index + 1}`
                    });
                });

                console.log('? Loaded gallery:', urls.length, 'images (lazy loading enabled)');
                // ƒvƒŒƒrƒ…[‚ğXV
                updateGalleryPreview();
            }

            // {H–—á‚Ì“Ç‚İ‚İ
            loadConstructionExamples();

            // ƒvƒŒƒrƒ…[İ’è‚Ì“Ç‚İ‚İ
            loadPreviewSettings();

            console.log('===== loadMerchantData COMPLETE =====');

            // ƒhƒ‰ƒbƒO&ƒhƒƒbƒv‰Šú‰»
            setupGalleryDragDrop();
        }

        // {H–—á‚ğ“Ç‚İ‚ñ‚Å•\¦
        async function loadConstructionExamples() {
            if (!window.merchantId) {
                console.log('[loadConstructionExamples] merchantId not set');
                return;
            }

            try {
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify({
                        action: 'getConstructionExamples',
                        merchantId: window.merchantId
                    })
                });

                const result = await response.json();
                if (result.success && result.examples && result.examples.length > 0) {
                    const examplesList = document.getElementById('constructionExamplesList');
                    exampleIdCounter = result.examples.length;

                    result.examples.forEach((example, index) => {
                        const exampleId = 'example_loaded_' + index;
                        const newExample = {
                            id: exampleId,
                            title: example.title,
                            buildingAge: example.buildingAge,
                            content: example.content,
                            price: example.price,
                            beforeImage: example.beforeUrl,
                            afterImage: example.afterUrl
                        };
                        constructionExamples.push(newExample);

                        const exampleDiv = document.createElement('div');
                        exampleDiv.className = 'border rounded-lg p-4';
                        exampleDiv.id = exampleId;
                        exampleDiv.innerHTML = `
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="{Hƒ^ƒCƒgƒ‹i—áFŒËŒš‚ÄŠO•Ç“h‘•j" value="${example.title || ''}" onchange="updateConstructionExample('${exampleId}', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">’z”N”</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="${example.buildingAge || ''}" onchange="updateConstructionExample('${exampleId}', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">”N</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">{H‹àŠzi–œ‰~j</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="${example.price || ''}" onchange="updateConstructionExample('${exampleId}', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">–œ‰~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="{H“à—ei—áFƒVƒŠƒRƒ““h—¿‚É‚æ‚é3‰ñ“h‚èAFåò‚¹‚Æ‰˜‚ê‚ğ‰ğÁj" onchange="updateConstructionExample('${exampleId}', 'content', this.value)">${example.content || ''}</textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{H‘OiBeforej</label>
                                    ${example.beforeUrl ? `<img src="${example.beforeUrl}" class="w-full h-32 object-cover rounded" alt="{H‘O">` : '<div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center"><span class="text-xs text-gray-500">‰æ‘œ‚È‚µ</span></div>'}
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">{HŒãiAfterj</label>
                                    ${example.afterUrl ? `<img src="${example.afterUrl}" class="w-full h-32 object-cover rounded" alt="{HŒã">` : '<div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center"><span class="text-xs text-gray-500">‰æ‘œ‚È‚µ</span></div>'}
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('${exampleId}')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    ‚±‚Ì–—á‚ğíœ
                                </button>
                            </div>
                        `;
                        examplesList.appendChild(exampleDiv);
                    });

                    console.log('? Loaded construction examples:', result.examples.length);
                    // ƒvƒŒƒrƒ…[‚ğXV
                    updateExamplesPreview();
                } else {
                    console.log('? No construction examples found');
                }
            } catch (error) {
                console.error('[loadConstructionExamples] Error:', error);
            }
        }

        // ƒvƒŒƒrƒ…[İ’è‚ğ“Ç‚İ‚ñ‚Å“K—p
        async function loadPreviewSettings() {
            if (!window.merchantId) {
                console.log('[loadPreviewSettings] merchantId not set');
                return;
            }

            try {
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify({
                        action: 'getPreviewSettings',
                        merchantId: window.merchantId
                    })
                });

                const result = await response.json();
                if (result.success && result.settings) {
                    const settings = result.settings;
                    console.log('[loadPreviewSettings] Loaded settings:', settings);

                    // ‰æ‘œˆÊ’u‚ğ•œŒ³
                    if (settings.imagePositionX !== undefined) {
                        imagePositionX = parseFloat(settings.imagePositionX) || 50;
                    }
                    if (settings.imagePositionY !== undefined) {
                        imagePositionY = parseFloat(settings.imagePositionY) || 50;
                    }
                    updateImagePosition();

                    // ƒY[ƒ€‚ğ•œŒ³
                    if (settings.imageZoom !== undefined) {
                        currentZoom = parseInt(settings.imageZoom) || 100;
                        const zoomSlider = document.getElementById('imageZoom');
                        if (zoomSlider) zoomSlider.value = currentZoom;
                        const image = document.getElementById('previewMainVisual');
                        if (image) {
                            const scale = currentZoom / 100;
                            image.style.transform = `scale(${scale})`;
                        }
                    }

                    // –¾‚é‚³‚ğ•œŒ³
                    if (settings.imageBrightness !== undefined) {
                        const brightness = parseInt(settings.imageBrightness) || 70;
                        const brightnessSlider = document.getElementById('imageOpacity');
                        if (brightnessSlider) brightnessSlider.value = brightness;
                        adjustImageOpacity(brightness);
                    }

                    // •¶šF‚ğ•œŒ³
                    if (settings.textColor) {
                        currentTextColor = settings.textColor;
                        adjustTextColor(settings.textColor);
                    }

                    console.log('[loadPreviewSettings] Settings applied successfully');
                } else {
                    console.log('[loadPreviewSettings] No saved settings found or failed to load');
                }
            } catch (error) {
                console.error('[loadPreviewSettings] Error:', error);
            }
        }

        // ˆÄŒƒJ[ƒh‚ğ“®“I‚É¶¬
        function renderCaseCards() {
            const cardView = document.getElementById('caseCardView');
            if (!cardView) return;

            // Šù‘¶‚ÌƒJ[ƒh‚ğƒNƒŠƒA
            cardView.innerHTML = '';

            // casesData‚©‚çˆÄŒƒJ[ƒh‚ğ¶¬
            const filteredCases = casesData.filter(c => c.assignee); // U‚è•ª‚¯Ï‚İ‚ÌˆÄŒ‚Ì‚İ

            filteredCases.forEach(caseItem => {
                const card = createCaseCard(caseItem);
                cardView.innerHTML += card;
            });
        }

        // ŒÂ•Ê‚ÌˆÄŒƒJ[ƒhHTML¶¬
        function createCaseCard(caseItem) {
            const statusColor = getStatusColor(caseItem.status);

            return `
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(${caseItem.id})" data-case-id="${caseItem.id}">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColor}">${caseItem.status}</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(${caseItem.id})" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ƒƒ‚">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(${caseItem.id})" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ƒXƒPƒWƒ…[ƒ‹">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(${caseItem.id})" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="’S“–ƒpƒX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(${caseItem.id})" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ƒLƒƒƒ“ƒZƒ‹\¿">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">${caseItem.name}</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? ’S“–: ${caseItem.assignee}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${caseItem.location || caseItem.area}</p>
                    <p class="text-sm text-gray-600 mb-3">${caseItem.propertyType}</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ÅI˜A—: ${caseItem.lastContact || '–¢˜A—'}</span>
                        <span>Ÿ‰ñ—\’è: ${caseItem.nextAction || '–¢’è'}</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('${caseItem.phone}')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('${caseItem.phone}')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(${caseItem.id})" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ƒXƒe[ƒ^ƒX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(${caseItem.id})" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            Ú×
                        </button>
                    </div>
                </div>
            `;
        }

        // •\¦Ø‘Ö
        function toggleCaseView() {
            currentCaseView = currentCaseView === 'card' ? 'list' : 'card';
            const cardView = document.getElementById('caseCardView');
            const listView = document.getElementById('caseListView');
            const viewIcon = document.getElementById('viewIcon');

            if (currentCaseView === 'card') {
                cardView.style.display = 'grid';
                listView.style.display = 'none';
                viewIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>';
            } else {
                cardView.style.display = 'none';
                listView.style.display = 'block';
                viewIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>';
            }
        }

        // Œ»İ‚ÌƒtƒBƒ‹ƒ^[ó‘Ô
        let currentFilter = 'all';
        let currentSearchTerm = '';
        let currentSort = 'date_desc';

        // ˆÄŒƒJƒEƒ“ƒg‚ğXV
        function updateCaseCounts() {
            const counts = {
                'all': casesData.filter(c => c.assignee).length,
                '–¢‘Î‰': casesData.filter(c => c.assignee && c.status === '–¢‘Î‰').length,
                'ƒAƒ|Ï': casesData.filter(c => c.assignee && c.status === 'ƒAƒ|Ï').length,
                'Œ©Ï’ñoÏ': casesData.filter(c => c.assignee && c.status === 'Œ©Ï’ñoÏ').length,
                '¬–ñ': casesData.filter(c => c.assignee && c.status === '¬–ñ').length
            };

            // ID‚ğg—p‚µ‚ÄƒJƒEƒ“ƒg‚ğXV
            Object.keys(counts).forEach(key => {
                const el = document.getElementById(`count-${key}`);
                if (el) {
                    el.textContent = counts[key];
                }
            });
        }

        // ƒtƒBƒ‹ƒ^[‹@”\
        function filterCases(status) {
            currentFilter = status;

            // ƒtƒBƒ‹ƒ^[ƒ{ƒ^ƒ“‚ÌƒAƒNƒeƒBƒuó‘Ô‚ğXV
            document.querySelectorAll('.filter-stat-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-blue-500');
            });
            event.target.closest('.filter-stat-btn').classList.add('ring-2', 'ring-blue-500');

            // ƒJ[ƒh‚ğÄ•`‰æ
            renderFilteredAndSortedCards();
        }

        // ŒŸõ‹@”\
        function searchCases() {
            currentSearchTerm = document.getElementById('caseSearchInput').value.toLowerCase();
            renderFilteredAndSortedCards();
        }

        // ƒ\[ƒg‹@”\
        function sortCases() {
            currentSort = document.getElementById('caseSortSelect').value;
            renderFilteredAndSortedCards();
        }

        // ƒtƒBƒ‹ƒ^[AŒŸõAƒ\[ƒg‚ğ“K—p‚µ‚ÄƒJ[ƒh‚ğÄ•`‰æ
        function renderFilteredAndSortedCards() {
            const cardView = document.getElementById('caseCardView');
            if (!cardView) return;

            // ƒtƒBƒ‹ƒ^ƒŠƒ“ƒO
            let filteredCases = casesData.filter(c => c.assignee);

            // ƒXƒe[ƒ^ƒXƒtƒBƒ‹ƒ^[
            if (currentFilter !== 'all') {
                filteredCases = filteredCases.filter(c => c.status === currentFilter);
            }

            // ŒŸõƒtƒBƒ‹ƒ^[
            if (currentSearchTerm) {
                filteredCases = filteredCases.filter(c =>
                    c.name.toLowerCase().includes(currentSearchTerm) ||
                    c.location.toLowerCase().includes(currentSearchTerm)
                );
            }

            // ƒ\[ƒg
            filteredCases.sort((a, b) => {
                switch(currentSort) {
                    case 'date_desc':
                        return (b.id || 0) - (a.id || 0); // ID‚ğ“ú•t‚Ì‘ã‚í‚è‚Ég—p
                    case 'date_asc':
                        return (a.id || 0) - (b.id || 0);
                    case 'status':
                        const statusOrder = ['–¢‘Î‰', '‰Ë“dÏ/–¢ƒAƒ|', 'ƒAƒ|Ï', 'Œ»’²Ï', 'Œ©Ï’ñoÏ', '¬–ñ'];
                        return statusOrder.indexOf(a.status) - statusOrder.indexOf(b.status);
                    default:
                        return 0;
                }
            });

            // ƒJ[ƒh‚ğƒNƒŠƒA‚µ‚ÄÄ•`‰æ
            cardView.innerHTML = '';
            filteredCases.forEach(caseItem => {
                const card = createCaseCard(caseItem);
                cardView.innerHTML += card;
            });
        }

        // ˆÄŒƒXƒe[ƒ^ƒX‚É‰‚¶‚½F‚ğæ“¾
        function getStatusColor(status) {
            const statusColors = {
                '–¢‘Î‰': 'bg-red-100 text-red-800',
                '‰Ë“dÏ/–¢ƒAƒ|': 'bg-orange-100 text-orange-800',
                'ƒAƒ|Ï': 'bg-blue-100 text-blue-800',
                'Œ»’²Ï': 'bg-indigo-100 text-indigo-800',
                'Œ»’²‘OƒLƒƒƒ“ƒZƒ‹': 'bg-gray-100 text-gray-800',
                'Œ»’²Œã¸’': 'bg-gray-100 text-gray-800',
                'Œ©Ï’ñoÏ': 'bg-yellow-100 text-yellow-800',
                '¬–ñ': 'bg-green-100 text-green-800',
                '‘¼ĞŒ_–ñÏ': 'bg-gray-100 text-gray-800',
                '•Ê‰Á–¿“XŒ_–ñÏ': 'bg-purple-100 text-purple-800',
                '“ü‹à—\’è': 'bg-cyan-100 text-cyan-800',
                '“ü‹àÏ': 'bg-emerald-100 text-emerald-800',
                'ƒNƒŒ[ƒ€ or ¸’': 'bg-red-100 text-red-800'
            };
            return statusColors[status] || 'bg-gray-100 text-gray-800';
        }

        // ˆÄŒU‚è•ª‚¯ƒ‚[ƒ_ƒ‹
        function openAssignmentModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.id = 'assignmentModal';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-4 sm:p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto mx-2 sm:mx-4">
                    <div class="flex justify-between items-center mb-4 sm:mb-6">
                        <h3 class="text-lg sm:text-xl font-bold">ˆÄŒU‚è•ª‚¯</h3>
                        <button onclick="closeAssignmentModal()" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- U‚è•ª‚¯İ’è -->
                    <div class="bg-gray-50 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6">
                        <h4 class="font-semibold mb-2 sm:mb-3 text-sm sm:text-base">U‚è•ª‚¯•û–@</h4>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3">
                            <div>
                                <label class="flex items-center">
                                    <input type="radio" name="assignMethod" value="area" class="mr-1 sm:mr-2" onchange="updateAssignmentSuggestion()">
                                    <span class="text-xs sm:text-sm">ƒGƒŠƒA—Dæ</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center">
                                    <input type="radio" name="assignMethod" value="workload" class="mr-1 sm:mr-2" onchange="updateAssignmentSuggestion()">
                                    <span class="text-xs sm:text-sm">ˆÄŒ”—Dæ</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center">
                                    <input type="radio" name="assignMethod" value="performance" class="mr-1 sm:mr-2" onchange="updateAssignmentSuggestion()">
                                    <span class="text-xs sm:text-sm">¬–ñ—¦—Dæ</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center">
                                    <input type="radio" name="assignMethod" value="auto" class="mr-1 sm:mr-2" checked onchange="updateAssignmentSuggestion()">
                                    <span class="text-xs sm:text-sm">‘‡”»’è</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-2 sm:gap-4 lg:gap-6">
                        <!-- ¶‘¤F‰c‹Æ’S“–Òiƒhƒ‰ƒbƒOŒ³j -->
                        <div>
                            <h4 class="font-semibold mb-2 sm:mb-3 text-xs sm:text-sm lg:text-base">‰c‹Æ’S“–Ò</h4>
                            <div class="space-y-2 sm:space-y-3">
                                <!-- “c’†‘¾˜Y -->
                                <div class="assignee-card bg-white border rounded-lg p-2 sm:p-3 cursor-move hover:shadow-md transition-shadow" draggable="true" data-assignee-id="tanaka" data-assignee-name="“c’†‘¾˜Y">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-1 sm:mb-2">
                                        <div>
                                            <span class="font-medium text-xs sm:text-sm">?? “c’†‘¾˜Y</span>
                                            <span class="hidden sm:inline text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded ml-2">ƒŠ[ƒ_[</span>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <span class="font-bold">3Œ</span>
                                        </div>
                                    </div>
                                    <div class="hidden sm:block text-xs text-gray-600">
                                        ¢“c’J‹æ | 75%
                                    </div>
                                </div>
                                <!-- ²“¡‰Ôq -->
                                <div class="assignee-card bg-white border rounded-lg p-2 sm:p-3 cursor-move hover:shadow-md transition-shadow" draggable="true" data-assignee-id="sato" data-assignee-name="²“¡‰Ôq">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-1 sm:mb-2">
                                        <div>
                                            <span class="font-medium text-xs sm:text-sm">?? ²“¡‰Ôq</span>
                                            <span class="hidden sm:inline text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded ml-2">ˆê”Ê‰c‹Æ</span>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <span class="font-bold">5Œ</span>
                                        </div>
                                    </div>
                                    <div class="hidden sm:block text-xs text-gray-600">
                                        ‰¡•ls | 62%
                                    </div>
                                </div>
                                <!-- R“cŸ˜Y -->
                                <div class="assignee-card bg-white border rounded-lg p-2 sm:p-3 cursor-move hover:shadow-md transition-shadow" draggable="true" data-assignee-id="yamada" data-assignee-name="R“cŸ˜Y">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-1 sm:mb-2">
                                        <div>
                                            <span class="font-medium text-xs sm:text-sm">?? R“cŸ˜Y</span>
                                            <span class="hidden sm:inline text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded ml-2">Vl</span>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <span class="font-bold">2Œ</span>
                                        </div>
                                    </div>
                                    <div class="hidden sm:block text-xs text-gray-600">
                                        ç—ts | 40%
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ‰E‘¤F–¢Š„“–ˆÄŒiƒhƒƒbƒvæj -->
                        <div>
                            <h4 class="font-semibold mb-2 sm:mb-3 text-xs sm:text-sm lg:text-base">–¢Š„“–ˆÄŒ</h4>
                            <div class="bg-gray-50 border rounded-lg p-2 sm:p-3 space-y-2 sm:space-y-3 min-h-[400px] overflow-y-auto" id="unassignedCases">
                                <!-- –¢Š„“–ˆÄŒƒJ[ƒh -->
                                <div class="case-drop-zone bg-yellow-50 border-2 border-yellow-200 rounded-lg p-2 sm:p-3 hover:bg-yellow-100 transition-colors" data-case-id="101">
                                    <div class="flex justify-between items-start mb-1 sm:mb-2">
                                        <span class="text-xs sm:text-sm font-semibold">‚‹´—l</span>
                                        <span class="text-xs bg-yellow-100 text-yellow-800 px-1 sm:px-2 py-0.5 sm:py-1 rounded">V‹K</span>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1">?? ¢“c’J‹æ</p>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1 hidden sm:block">?? ŒËŒš‚ÄE’z12”N</p>
                                    <p class="text-xs text-gray-600 mb-1 sm:mb-2 hidden sm:block">?? 090-1234-5678</p>
                                    <!-- ’S“–ÒƒhƒƒbƒvƒGƒŠƒA -->
                                    <div class="assignee-drop-area bg-white border-2 border-dashed border-gray-300 rounded-lg p-1 sm:p-2 min-h-[30px] sm:min-h-[40px]">
                                        <p class="text-xs text-gray-400 text-center">ƒhƒƒbƒv</p>
                                    </div>
                                    <div class="mt-1 sm:mt-2 pt-1 sm:pt-2 border-t hidden sm:block">
                                        <p class="text-xs text-blue-600 font-medium">
                                            „§: “c’†‘¾˜Y
                                        </p>
                                    </div>
                                </div>
                                <div class="case-drop-zone bg-yellow-50 border-2 border-yellow-200 rounded-lg p-2 sm:p-3 hover:bg-yellow-100 transition-colors" data-case-id="102">
                                    <div class="flex justify-between items-start mb-1 sm:mb-2">
                                        <span class="text-xs sm:text-sm font-semibold">Ö“¡—l</span>
                                        <span class="text-xs bg-yellow-100 text-yellow-800 px-1 sm:px-2 py-0.5 sm:py-1 rounded">V‹K</span>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1">?? ‰¡•ls</p>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1 hidden sm:block">?? ƒAƒp[ƒgE’z18”N</p>
                                    <p class="text-xs text-gray-600 mb-1 sm:mb-2 hidden sm:block">?? 045-9876-5432</p>
                                    <!-- ’S“–ÒƒhƒƒbƒvƒGƒŠƒA -->
                                    <div class="assignee-drop-area bg-white border-2 border-dashed border-gray-300 rounded-lg p-1 sm:p-2 min-h-[30px] sm:min-h-[40px]">
                                        <p class="text-xs text-gray-400 text-center">ƒhƒƒbƒv</p>
                                    </div>
                                    <div class="mt-1 sm:mt-2 pt-1 sm:pt-2 border-t hidden sm:block">
                                        <p class="text-xs text-blue-600 font-medium">
                                            „§: ²“¡‰Ôq
                                        </p>
                                    </div>
                                </div>
                                <div class="case-drop-zone bg-yellow-50 border-2 border-yellow-200 rounded-lg p-2 sm:p-3 hover:bg-yellow-100 transition-colors" data-case-id="103">
                                    <div class="flex justify-between items-start mb-1 sm:mb-2">
                                        <span class="text-xs sm:text-sm font-semibold">“n•Ó—l</span>
                                        <span class="text-xs bg-yellow-100 text-yellow-800 px-1 sm:px-2 py-0.5 sm:py-1 rounded">V‹K</span>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1">?? ‚³‚¢‚½‚Üs</p>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1 hidden sm:block">?? ŒËŒš‚ÄE’z20”N</p>
                                    <p class="text-xs text-gray-600 mb-1 sm:mb-2 hidden sm:block">?? 048-5555-6666</p>
                                    <!-- ’S“–ÒƒhƒƒbƒvƒGƒŠƒA -->
                                    <div class="assignee-drop-area bg-white border-2 border-dashed border-gray-300 rounded-lg p-1 sm:p-2 min-h-[30px] sm:min-h-[40px]">
                                        <p class="text-xs text-gray-400 text-center">ƒhƒƒbƒv</p>
                                    </div>
                                    <div class="mt-1 sm:mt-2 pt-1 sm:pt-2 border-t hidden sm:block">
                                        <p class="text-xs text-orange-600 font-medium">
                                            „§: •¡”’S“–
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ƒAƒNƒVƒ‡ƒ“ƒ{ƒ^ƒ“ -->
                    <div class="flex flex-col sm:flex-row justify-between items-center mt-4 sm:mt-6 pt-4 sm:pt-6 border-t gap-3">
                        <button onclick="autoAssignAll()" class="w-full sm:w-auto px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm sm:text-base">
                            ˆêŠ‡©“®U‚è•ª‚¯
                        </button>
                        <div class="flex w-full sm:w-auto space-x-2 sm:space-x-3">
                            <button onclick="closeAssignmentModal()" class="flex-1 sm:flex-none px-3 sm:px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 text-sm sm:text-base">
                                ƒLƒƒƒ“ƒZƒ‹
                            </button>
                            <button onclick="confirmAssignment()" class="flex-1 sm:flex-none px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm sm:text-base">
                                U‚è•ª‚¯‚ğŠm’è
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            initDragAndDrop();
        }

        // ƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
        function closeAssignmentModal() {
            const modal = document.getElementById('assignmentModal');
            if (modal) modal.remove();
        }

        // ƒhƒ‰ƒbƒO&ƒhƒƒbƒv‰Šú‰»
        function initDragAndDrop() {
            let draggedElement = null;

            // ’S“–ÒƒJ[ƒh‚Ìƒhƒ‰ƒbƒOŠJn
            document.querySelectorAll('.assignee-card').forEach(card => {
                card.addEventListener('dragstart', (e) => {
                    draggedElement = e.target.closest('.assignee-card');
                    e.target.style.opacity = '0.5';
                    e.dataTransfer.effectAllowed = 'copy';
                });

                card.addEventListener('dragend', (e) => {
                    e.target.style.opacity = '';
                });
            });

            // ˆÄŒƒJ[ƒh‘S‘Ì‚ğƒhƒƒbƒvƒGƒŠƒA‚Éİ’è
            document.querySelectorAll('.case-drop-zone').forEach(caseCard => {
                const dropArea = caseCard.querySelector('.assignee-drop-area');
                caseCard.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'copy';
                    caseCard.classList.add('bg-blue-50', 'border-blue-400');
                });

                caseCard.addEventListener('dragleave', (e) => {
                    // q—v‘f‚Ö‚ÌˆÚ“®‚Í–³‹
                    if (!caseCard.contains(e.relatedTarget)) {
                        caseCard.classList.remove('bg-blue-50', 'border-blue-400');
                    }
                });

                caseCard.addEventListener('drop', (e) => {
                    e.preventDefault();
                    caseCard.classList.remove('bg-blue-50', 'border-blue-400');

                    if (draggedElement) {
                        const assigneeId = draggedElement.dataset.assigneeId;
                        const assigneeName = draggedElement.dataset.assigneeName;
                        const caseId = caseCard.dataset.caseId;

                        // ’Êí‚Ì’S“–Ò‚ğ’Ç‰Ái•¡”‰Âj
                        const newTag = document.createElement('div');
                        newTag.className = 'assignee-tag bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium flex items-center justify-between mb-1';
                        newTag.innerHTML = `
                            <span>?? ${assigneeName}</span>
                            <button onclick="removeAssignee(this)" class="ml-2 text-blue-600 hover:text-blue-800">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        `;

                        // ƒvƒŒ[ƒXƒzƒ‹ƒ_[ƒeƒLƒXƒg‚ª‚ ‚ê‚Îíœ
                        const placeholder = dropArea.querySelector('.text-gray-400');
                        if (placeholder) {
                            placeholder.remove();
                        }

                        // “¯‚¶’S“–Ò‚ªŠù‚ÉŠ„‚è“–‚Ä‚ç‚ê‚Ä‚¢‚È‚¢‚©ƒ`ƒFƒbƒN
                        const existingAssignees = Array.from(dropArea.querySelectorAll('.assignee-tag')).map(tag =>
                            tag.querySelector('span').textContent.replace('?? ', '')
                        );

                        if (!existingAssignees.includes(assigneeName)) {
                            dropArea.appendChild(newTag);
                            caseCard.classList.add('border-blue-400');
                        } else {
                            showNotification('Šù‚ÉŠ„‚è“–‚ÄÏ‚İ', `${assigneeName}‚ÍŠù‚É‚±‚ÌˆÄŒ‚ÉŠ„‚è“–‚Ä‚ç‚ê‚Ä‚¢‚Ü‚·`);
                        }
                    }
                });
            });
        }

        // ’S“–Ò‚ğíœ
        function removeAssignee(button) {
            const tag = button.closest('.assignee-tag');
            const dropArea = tag.closest('.assignee-drop-area');
            tag.remove();

            // ’S“–Ò‚ª‚¢‚È‚­‚È‚Á‚½‚çƒvƒŒ[ƒXƒzƒ‹ƒ_[‚ğ•\¦
            if (dropArea.querySelectorAll('.assignee-tag').length === 0) {
                dropArea.innerHTML = '<p class="text-xs text-gray-400 text-center">’S“–Ò‚ğ‚±‚±‚Éƒhƒƒbƒv</p>';
                const caseCard = dropArea.closest('.case-drop-zone');
                caseCard.classList.remove('border-blue-400');
            }
        }

        // U‚è•ª‚¯•û–@•ÏX‚Ì„§XV
        function updateAssignmentSuggestion() {
            const method = document.querySelector('input[name="assignMethod"]:checked').value;
            const caseCards = document.querySelectorAll('.case-card');

            caseCards.forEach(card => {
                const suggestionEl = card.querySelector('.text-blue-600, .text-orange-600');
                if (suggestionEl) {
                    switch(method) {
                        case 'area':
                            suggestionEl.textContent = '„§: ƒGƒŠƒAƒ}ƒbƒ`‚·‚é’S“–Ò';
                            break;
                        case 'workload':
                            suggestionEl.textContent = '„§: ˆÄŒ”‚ª­‚È‚¢’S“–Ò';
                            break;
                        case 'performance':
                            suggestionEl.textContent = '„§: ¬–ñ—¦‚ª‚‚¢’S“–Ò';
                            break;
                        case 'auto':
                            // Œ³‚Ì„§‚É–ß‚·
                            break;
                    }
                }
            });
        }

        // ˆêŠ‡©“®U‚è•ª‚¯
        function autoAssignAll() {
            const method = document.querySelector('input[name="assignMethod"]:checked').value;
            const caseCards = document.querySelectorAll('.case-drop-zone');

            caseCards.forEach(caseCard => {
                const caseId = caseCard.dataset.caseId;
                const dropArea = caseCard.querySelector('.assignee-drop-area');

                // Šù‚É’S“–Ò‚ªŠ„‚è“–‚Ä‚ç‚ê‚Ä‚¢‚éê‡‚ÍƒXƒLƒbƒv
                if (dropArea.querySelector('.assignee-tag')) {
                    return;
                }

                // ŠÈˆÕ“I‚È©“®U‚è•ª‚¯ƒƒWƒbƒNiƒfƒ‚—pj
                let assigneeName = '';
                let assigneeType = 'normal';

                if (caseId === '101') {
                    assigneeName = '“c’†‘¾˜Y';
                } else if (caseId === '102') {
                    assigneeName = '²“¡‰Ôq';
                } else if (caseId === '103') {
                    // 3”Ô–Ú‚ÌˆÄŒ‚à’Êí‚Ì’S“–Ò‚ğŠ„‚è“–‚Ä
                    assigneeName = 'R“cŸ˜Y';
                }

                // ’S“–Òƒ^ƒO‚ğ’Ç‰Á
                if (assigneeName) {
                    dropArea.innerHTML = `
                        <div class="assignee-tag bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium flex items-center justify-between">
                            <span>?? ${assigneeName}</span>
                            <button onclick="removeAssignee(this)" class="ml-2 text-blue-600 hover:text-blue-800">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    `;
                    caseCard.classList.add('border-blue-400');
                }
            });

            showNotification('©“®U‚è•ª‚¯Š®—¹', '„§’S“–Ò‚ÉˆÄŒ‚ğU‚è•ª‚¯‚Ü‚µ‚½');
        }

        // U‚è•ª‚¯Šm’è
        function confirmAssignment() {
            const assignments = [];
            const caseCards = document.querySelectorAll('.case-drop-zone');

            caseCards.forEach(caseCard => {
                const caseId = caseCard.dataset.caseId;
                const dropArea = caseCard.querySelector('.assignee-drop-area');
                const assigneeTags = dropArea.querySelectorAll('.assignee-tag');

                if (assigneeTags.length > 0) {
                    const customerName = caseCard.querySelector('.font-semibold').textContent;
                    const assignees = Array.from(assigneeTags).map(tag =>
                        tag.querySelector('span').textContent.replace('?? ', '')
                    );

                    assignments.push({
                        caseId: caseId,
                        customerName: customerName,
                        assignees: assignees
                    });
                }
            });

            if (assignments.length > 0) {
                let message = 'ˆÈ‰º‚ÌU‚è•ª‚¯‚ğŠm’è‚µ‚Ü‚µ‚½:€n';
                assignments.forEach(a => {
                    message += `${a.customerName} ¨ ${a.assignees.join(', ')}€n`;
                });

                showNotification('U‚è•ª‚¯Š®—¹', message);

                // –¢U‚è•ª‚¯ˆÄŒ‚©‚çíœ
                assignments.forEach(a => {
                    const index = unassignedCases.findIndex(c => c.id == a.caseId);
                    if (index !== -1) {
                        unassignedCases.splice(index, 1);
                    }
                });
                displayUnassignedCases();
                closeAssignmentModal();
            } else {
                alert('U‚è•ª‚¯‚éˆÄŒ‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢');
            }
        }

        // ˆÄŒÚ×•\¦
        function showCaseDetail(caseId) {
            const caseData = casesData.find(c => c.id === caseId);
            if (!caseData) return;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="flex justify-between items-start mb-4">
                        <h2 class="text-2xl font-bold">${caseData.name}—l</h2>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- ƒXƒe[ƒ^ƒX•ÏX -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ƒXƒe[ƒ^ƒX</label>
                        <select id="caseStatus" onchange="updateCaseStatus(${caseId}, this.value)" class="w-full md:w-auto px-4 py-2 border rounded-lg">
                            <option value="–¢‘Î‰" ${caseData.status === '–¢‘Î‰' ? 'selected' : ''}>–¢‘Î‰</option>
                            <option value="‰Ë“dÏ/–¢ƒAƒ|" ${caseData.status === '‰Ë“dÏ/–¢ƒAƒ|' ? 'selected' : ''}>‰Ë“dÏ/–¢ƒAƒ|</option>
                            <option value="ƒAƒ|Ï" ${caseData.status === 'ƒAƒ|Ï' ? 'selected' : ''}>ƒAƒ|Ï</option>
                            <option value="Œ»’²Ï" ${caseData.status === 'Œ»’²Ï' ? 'selected' : ''}>Œ»’²Ï</option>
                            <option value="Œ»’²‘OƒLƒƒƒ“ƒZƒ‹" ${caseData.status === 'Œ»’²‘OƒLƒƒƒ“ƒZƒ‹' ? 'selected' : ''}>Œ»’²‘OƒLƒƒƒ“ƒZƒ‹</option>
                            <option value="Œ»’²Œã¸’" ${caseData.status === 'Œ»’²Œã¸’' ? 'selected' : ''}>Œ»’²Œã¸’</option>
                            <option value="Œ©Ï’ñoÏ" ${caseData.status === 'Œ©Ï’ñoÏ' ? 'selected' : ''}>Œ©Ï’ñoÏ</option>
                            <option value="¬–ñ" ${caseData.status === '¬–ñ' ? 'selected' : ''}>¬–ñ</option>
                            <option value="‘¼ĞŒ_–ñÏ" ${caseData.status === '‘¼ĞŒ_–ñÏ' ? 'selected' : ''}>‘¼ĞŒ_–ñÏ</option>
                            <option value="•Ê‰Á–¿“XŒ_–ñÏ" ${caseData.status === '•Ê‰Á–¿“XŒ_–ñÏ' ? 'selected' : ''}>•Ê‰Á–¿“XŒ_–ñÏ</option>
                            <option value="“ü‹à—\’è" ${caseData.status === '“ü‹à—\’è' ? 'selected' : ''}>“ü‹à—\’è</option>
                            <option value="“ü‹àÏ" ${caseData.status === '“ü‹àÏ' ? 'selected' : ''}>“ü‹àÏ</option>
                            <option value="ƒNƒŒ[ƒ€ or ¸’" ${caseData.status === 'ƒNƒŒ[ƒ€ or ¸’' ? 'selected' : ''}>ƒNƒŒ[ƒ€ or ¸’</option>
                        </select>
                    </div>

                    <!-- Šî–{î•ñ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <p class="text-sm text-gray-600">ZŠ</p>
                            <p class="font-medium">${caseData.location}</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600">•¨Œí•Ê</p>
                            <p class="font-medium">${caseData.propertyType}</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600">“d˜b”Ô†</p>
                            <p class="font-medium">${caseData.phone}</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600">’S“–Ò</p>
                            <p class="font-medium">${caseData.assignee || '–¢Š„“–'}</p>
                        </div>
                    </div>

                    <!-- ƒAƒNƒVƒ‡ƒ“ƒ{ƒ^ƒ“ -->
                    <div class="flex flex-wrap gap-2 mb-6">
                        <button onclick="callCustomer('${caseData.phone}')" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                            ?? “d˜b
                        </button>
                        <button onclick="sendSMS('${caseData.phone}', ${caseData.id})" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                            ?? SMS
                        </button>
                        <button onclick="showMemo(${caseId})" class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600">
                            ?? ƒƒ‚
                        </button>
                        <button onclick="passCase(${caseId})" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">
                            ?? ˆø‚«Œp‚¬
                        </button>
                    </div>

                    <!-- Šˆ“®—š—ğ -->
                    <div class="border-t pt-4">
                        <h3 class="font-bold mb-3">Šˆ“®—š—ğ</h3>
                        <div class="space-y-2 max-h-48 overflow-y-auto">
                            ${getActivityHistory(caseId)}
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ƒXƒe[ƒ^ƒXXV
        function updateCaseStatus(caseId, newStatus) {
            const currentUser = getCurrentUser();
            const timestamp = new Date().toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            }).replace(/€//g, '/');

            // ƒXƒe[ƒ^ƒX•ÏX—š—ğ‚ğ‹L˜^iÀÛ‚ÌƒVƒXƒeƒ€‚Å‚ÍAPI‚É‘—Mj
            const statusChangeEntry = {
                timestamp: timestamp,
                type: 'status_change',
                user: currentUser.name,
                oldStatus: casesData.find(c => c.id === caseId)?.status,
                newStatus: newStatus,
                caseId: caseId
            };

            // ‚±‚±‚ÅAPI‚É‘—M
            console.log('Recording status change:', statusChangeEntry);

            // ƒ[ƒJƒ‹ƒf[ƒ^‚ğXV
            const caseData = casesData.find(c => c.id === caseId);
            if (caseData) {
                caseData.status = newStatus;
            }

            // UI‚ğXV
            updateCaseCard(caseId);

            // ƒJƒŒƒ“ƒ_[‚Ì©“®“¯Šú
            autoSyncToCalendar();

            showNotification('ƒXƒe[ƒ^ƒXXV', `ƒXƒe[ƒ^ƒX‚ğu${newStatus}v‚É•ÏX‚µ‚Ü‚µ‚½`);
        }

        // Šˆ“®—š—ğæ“¾
        function getActivityHistory(caseId) {
            // ƒTƒ“ƒvƒ‹ƒf[ƒ^iÀÛ‚ÍAPI‚©‚çæ“¾j
            const histories = {
                1: `
                    <div class="text-sm border-l-2 border-gray-300 pl-3">
                        <div class="text-xs text-gray-500">2024/03/16 14:00</div>
                        <div>yƒXƒe[ƒ^ƒX•ÏXz–¢‘Î‰ ¨ ƒAƒ|Ïi“c’†‘¾˜Yj</div>
                    </div>
                    <div class="text-sm border-l-2 border-gray-300 pl-3">
                        <div class="text-xs text-gray-500">2024/03/16 13:30</div>
                        <div>y‰Ë“dz03-1234-5678i“c’†‘¾˜Yj</div>
                    </div>
                    <div class="text-sm border-l-2 border-gray-300 pl-3">
                        <div class="text-xs text-gray-500">2024/03/15 16:00</div>
                        <div>yƒƒ‚’Ç‰Áz—\ZŠ´Šm”FÏ‚İi“c’†‘¾˜Yj</div>
                    </div>
                `
            };

            return histories[caseId] || '<div class="text-gray-400 text-sm">—š—ğ‚È‚µ</div>';
        }

        // ˆÄŒƒJ[ƒhUIXV
        function updateCaseCard(caseId) {
            const caseData = casesData.find(c => c.id === caseId);
            if (!caseData) return;

            const cards = document.querySelectorAll(`[onclick="showCaseDetail(${caseId})"]`);
            cards.forEach(card => {
                // ƒXƒe[ƒ^ƒXƒoƒbƒW‚ğXV
                const statusBadge = card.querySelector('span[class*="rounded-full"]');
                if (statusBadge) {
                    const statusColors = {
                        '–¢‘Î‰': 'bg-red-100 text-red-800',
                        '‰Ë“dÏ/–¢ƒAƒ|': 'bg-orange-100 text-orange-800',
                        'ƒAƒ|Ï': 'bg-blue-100 text-blue-800',
                        'Œ»’²Ï': 'bg-indigo-100 text-indigo-800',
                        'Œ»’²‘OƒLƒƒƒ“ƒZƒ‹': 'bg-gray-100 text-gray-800',
                        'Œ»’²Œã¸’': 'bg-gray-100 text-gray-800',
                        'Œ©Ï’ñoÏ': 'bg-yellow-100 text-yellow-800',
                        '¬–ñ': 'bg-green-100 text-green-800',
                        '‘¼ĞŒ_–ñÏ': 'bg-gray-100 text-gray-800',
                        '•Ê‰Á–¿“XŒ_–ñÏ': 'bg-purple-100 text-purple-800',
                        '“ü‹à—\’è': 'bg-cyan-100 text-cyan-800',
                        '“ü‹àÏ': 'bg-emerald-100 text-emerald-800',
                        'ƒNƒŒ[ƒ€ or ¸’': 'bg-red-100 text-red-800'
                    };

                    statusBadge.className = `px-2 py-1 text-xs font-semibold rounded-full ${statusColors[caseData.status] || 'bg-gray-100 text-gray-800'}`;
                    statusBadge.textContent = caseData.status;
                }
            });
        }

        // ƒXƒPƒWƒ…[ƒ‹İ’è
        function scheduleCase(caseId) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
                    <h3 class="text-lg font-bold mb-4">?? ƒXƒPƒWƒ…[ƒ‹İ’è</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">“ú•t</label>
                        <input type="date" id="scheduleDate" class="w-full p-2 border rounded-lg" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ŠÔ</label>
                        <input type="time" id="scheduleTime" class="w-full p-2 border rounded-lg" value="14:00">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">—\’è“à—e</label>
                        <select id="scheduleType" class="w-full p-2 border rounded-lg">
                            <option value="‰Ë“d">‰Ë“d</option>
                            <option value="–K–â">–K–â</option>
                            <option value="Œ»’n’²¸">Œ»’n’²¸</option>
                            <option value="Œ©Ï’ño">Œ©Ï’ño</option>
                            <option value="Œ_–ñ">Œ_–ñ</option>
                            <option value="H–">H–</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ƒƒ‚</label>
                        <textarea id="scheduleMemo" class="w-full p-2 border rounded-lg" rows="2" placeholder="”õl..."></textarea>
                    </div>
                    <div class="flex justify-end gap-2">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ƒLƒƒƒ“ƒZƒ‹
                        </button>
                        <button onclick="saveSchedule(${caseId})" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            •Û‘¶
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ƒXƒPƒWƒ…[ƒ‹•Û‘¶
        function saveSchedule(caseId) {
            const date = document.getElementById('scheduleDate').value;
            const time = document.getElementById('scheduleTime').value;
            const type = document.getElementById('scheduleType').value;
            const memo = document.getElementById('scheduleMemo').value;

            // ƒXƒPƒWƒ…[ƒ‹‚ğ•Û‘¶iÀÛ‚ÌƒVƒXƒeƒ€‚Å‚ÍAPI‚É‘—Mj
            console.log('Saving schedule:', { caseId, date, time, type, memo });

            showNotification('ƒXƒPƒWƒ…[ƒ‹“o˜^', `${date} ${time} ‚É${type}‚ğ—\’è‚µ‚Ü‚µ‚½`);
            document.querySelector('.fixed').remove();
        }

        // ƒNƒCƒbƒNƒXƒe[ƒ^ƒX•ÏX
        function quickStatusChange(caseId) {
            const caseData = casesData.find(c => c.id === caseId);
            if (!caseData) return;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
                    <h3 class="text-lg font-bold mb-4">ƒXƒe[ƒ^ƒX•ÏX</h3>
                    <div class="mb-4">
                        <p class="text-sm text-gray-600 mb-2">Œ»İ: <span class="font-medium">${caseData.status}</span></p>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mb-4 max-h-96 overflow-y-auto">
                        <button onclick="updateStatusAndClose(${caseId}, '–¢‘Î‰')" class="px-3 py-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 text-sm">
                            –¢‘Î‰
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, '‰Ë“dÏ/–¢ƒAƒ|')" class="px-3 py-2 bg-orange-100 text-orange-800 rounded-lg hover:bg-orange-200 text-sm">
                            ‰Ë“dÏ/–¢ƒAƒ|
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ƒAƒ|Ï')" class="px-3 py-2 bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 text-sm">
                            ƒAƒ|Ï
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'Œ»’²Ï')" class="px-3 py-2 bg-indigo-100 text-indigo-800 rounded-lg hover:bg-indigo-200 text-sm">
                            Œ»’²Ï
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'Œ»’²‘OƒLƒƒƒ“ƒZƒ‹')" class="px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 text-sm">
                            Œ»’²‘OƒLƒƒƒ“ƒZƒ‹
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'Œ»’²Œã¸’')" class="px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 text-sm">
                            Œ»’²Œã¸’
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'Œ©Ï’ñoÏ')" class="px-3 py-2 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 text-sm">
                            Œ©Ï’ñoÏ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, '¬–ñ')" class="px-3 py-2 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 text-sm">
                            ¬–ñ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, '‘¼ĞŒ_–ñÏ')" class="px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 text-sm">
                            ‘¼ĞŒ_–ñÏ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, '•Ê‰Á–¿“XŒ_–ñÏ')" class="px-3 py-2 bg-purple-100 text-purple-800 rounded-lg hover:bg-purple-200 text-sm">
                            •Ê‰Á–¿“XŒ_–ñÏ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, '“ü‹à—\’è')" class="px-3 py-2 bg-cyan-100 text-cyan-800 rounded-lg hover:bg-cyan-200 text-sm">
                            “ü‹à—\’è
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, '“ü‹àÏ')" class="px-3 py-2 bg-emerald-100 text-emerald-800 rounded-lg hover:bg-emerald-200 text-sm">
                            “ü‹àÏ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ƒNƒŒ[ƒ€ or ¸’')" class="col-span-2 px-3 py-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 text-sm">
                            ƒNƒŒ[ƒ€ or ¸’
                        </button>
                    </div>
                    <div class="flex justify-end">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ƒLƒƒƒ“ƒZƒ‹
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ƒXƒe[ƒ^ƒXXV‚µ‚Ä•Â‚¶‚é
        function updateStatusAndClose(caseId, newStatus) {
            updateCaseStatus(caseId, newStatus);
            document.querySelector('.fixed').remove();
        }

        // “d˜b”­M
        function callCustomer(phone) {
            if (confirm(`${phone} ‚É“d˜b‚ğ‚©‚¯‚Ü‚·‚©H`)) {
                window.location.href = `tel:${phone}`;
                // ‰Ë“d—š—ğ‚ğ‹L˜^
                showNotification('‰Ë“d', `${phone} ‚Ö‚Ì‰Ë“d‚ğ‹L˜^‚µ‚Ü‚µ‚½`);
            }
        }

        // SMS‘—Mƒ‚[ƒ_ƒ‹‚ğŠJ‚­
        function sendSMS(phone, caseId) {
            // ˆÄŒî•ñ‚ğæ“¾
            const caseData = caseId ? casesData.find(c => c.id === caseId) : null;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold">SMSƒƒbƒZ[ƒWì¬</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- ‚±‚Ìƒy[ƒW‚Ì“à—e -->
                    <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600 mb-2">‚±‚Ìƒy[ƒW‚Ì“à—e</div>
                        <div class="text-sm font-medium">SMSƒƒbƒZ[ƒW‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢:</div>
                    </div>

                    ${caseData ? `
                    <!-- ƒXƒe[ƒ^ƒXî•ñ -->
                    <div class="mb-4 p-4 bg-blue-50 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-blue-900">Œ»İ‚ÌƒXƒe[ƒ^ƒX: ${caseData.status || '–¢‘Î‰'}</span>
                            <span class="text-sm text-gray-600">‚¨‹q—l: ${caseData.name}</span>
                        </div>
                    </div>

                    <!-- ‘I‘ğˆƒZƒNƒVƒ‡ƒ“ -->
                    <div class="mb-4">
                        <div class="text-sm font-medium mb-2">Ÿ‚ÌƒXƒeƒbƒv‚ğ‘I‘ğ:</div>
                        <div id="nextStepOptions" class="space-y-2">
                            <!-- ƒXƒe[ƒ^ƒX‚É‰‚¶‚½‘I‘ğˆ‚ğ“®“I‚É¶¬ -->
                        </div>
                    </div>
                    ` : ''}

                    <!-- AI¶¬ƒƒbƒZ[ƒW•\¦ -->
                    <div class="mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-sm font-medium">${caseData ? 'AI¶¬ƒƒbƒZ[ƒW' : 'ƒƒbƒZ[ƒW'}:</label>
                            ${caseData ? `
                            <button onclick="regenerateSmsMessage(${caseId})" class="text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                                Ä¶¬
                            </button>
                            ` : ''}
                        </div>
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3">
                            <div class="text-xs text-yellow-800 mb-1">?? SMS‚Í70•¶šˆÈ“à‚ª„§‚³‚ê‚Ü‚·</div>
                            <div class="text-xs text-gray-600">Œ»İ: <span id="charCount">0</span>•¶š</div>
                        </div>
                        <textarea id="smsMessage" class="w-full p-3 border rounded-lg" rows="6"
                                  placeholder="${caseData ? 'AI‚ªƒƒbƒZ[ƒW‚ğ¶¬’†...' : 'ƒƒbƒZ[ƒW‚ğ“ü—Í...'}"
                                  onkeyup="updateCharCount()"></textarea>

                        <!-- ƒeƒ“ƒvƒŒ[ƒgƒ{ƒ^ƒ“ -->
                        <div class="flex flex-wrap gap-2 mt-2">
                            <button onclick="loadSmsTemplate('greeting')" class="text-xs px-3 py-1 bg-gray-100 rounded-lg hover:bg-gray-200">
                                ?? ˆ¥A
                            </button>
                            <button onclick="loadSmsTemplate('appointment')" class="text-xs px-3 py-1 bg-green-100 rounded-lg hover:bg-green-200">
                                ?? ƒAƒ|Šm”F
                            </button>
                            <button onclick="loadSmsTemplate('estimate')" class="text-xs px-3 py-1 bg-blue-100 rounded-lg hover:bg-blue-200">
                                ?? Œ©Ï’ño
                            </button>
                            <button onclick="loadSmsTemplate('followup')" class="text-xs px-3 py-1 bg-yellow-100 rounded-lg hover:bg-yellow-200">
                                ?? ƒtƒHƒ[
                            </button>
                        </div>
                    </div>

                    <!-- ’¼Ú“ü—Í‚Ìƒ`ƒFƒbƒNƒ{ƒbƒNƒX -->
                    <div class="flex items-center mb-4">
                        <input type="checkbox" id="manualInput" class="mr-2" onchange="toggleManualInput(${caseId || 'null'})">
                        <label for="manualInput" class="text-sm text-gray-700">‚Ü‚½‚Í’¼Ú“ü—Í‚µ‚Ä‚­‚¾‚³‚¢</label>
                    </div>

                    <div class="flex justify-end gap-2">
                        <button onclick="this.closest('.fixed').remove()" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ƒLƒƒƒ“ƒZƒ‹
                        </button>
                        <button onclick="sendSmsMessage('${phone}')" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            OK
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            if (caseData) {
                // ƒXƒe[ƒ^ƒX‚É‰‚¶‚½‘I‘ğˆ‚ğ•\¦
                generateNextStepOptions(caseData.status, caseId);
                // ‰‰ñ‚ÌAIƒƒbƒZ[ƒW¶¬
                generateAiSmsMessage(caseId, null);
            }
        }

        // •¶š”ƒJƒEƒ“ƒgXV
        function updateCharCount() {
            const textarea = document.getElementById('smsMessage');
            const countSpan = document.getElementById('charCount');
            if (textarea && countSpan) {
                const count = textarea.value.length;
                countSpan.textContent = count;
                countSpan.className = count > 70 ? 'text-red-600 font-bold' : '';
            }
        }

        // ƒXƒe[ƒ^ƒX‚É‰‚¶‚½ŸƒXƒeƒbƒv‚Ì‘I‘ğˆ‚ğ¶¬
        function generateNextStepOptions(currentStatus, caseId) {
            const optionsContainer = document.getElementById('nextStepOptions');
            if (!optionsContainer) return;

            let options = [];

            // ƒXƒe[ƒ^ƒX‚É‰‚¶‚½‘I‘ğˆ‚ğ’è‹`
            const statusOptions = {
                '–¢‘Î‰': [
                    { label: '‰‰ñƒAƒ|ƒCƒ“ƒg‚Ì‚¨Šè‚¢', value: 'initial_appointment' },
                    { label: '‚¨–â‚¢‡‚í‚¹‚Ö‚Ì‚¨—ç', value: 'thank_inquiry' },
                    { label: '‘—¿‘—•t‚Ì‚¨’m‚ç‚¹', value: 'send_materials' }
                ],
                '‰Ë“dÏ/–¢ƒAƒ|': [
                    { label: 'Ä“xƒAƒ|ƒCƒ“ƒg‚Ì‚¨Šè‚¢', value: 'retry_appointment' },
                    { label: '‘—¿‘—•t‚Ì‚²ˆÄ“à', value: 'material_guide' },
                    { label: 'ƒtƒHƒ[ƒAƒbƒv‚Ì‚²˜A—', value: 'followup_call' }
                ],
                'ƒAƒ|Ï': [
                    { label: 'Œ»’n’²¸“ú‚ÌŠm”F', value: 'confirm_survey' },
                    { label: 'Œ»’²‘O“ú‚ÌƒŠƒ}ƒCƒ“ƒ_[', value: 'survey_reminder' },
                    { label: '‚¿•¨E€”õ–€‚Ì‚²˜A—', value: 'preparation_info' }
                ],
                'Œ»’²Ï': [
                    { label: 'Œ»’²‚Ì‚¨—ç', value: 'thank_survey' },
                    { label: 'Œ©Ï‘ì¬’†‚Ì‚²˜A—', value: 'estimate_progress' },
                    { label: 'Œ©Ï‘Š®¬‚Ì‚¨’m‚ç‚¹', value: 'estimate_ready' }
                ],
                'Œ©Ï’ñoÏ': [
                    { label: 'Œ©Ï‘‚Ì‚²Šm”F‚¨Šè‚¢', value: 'estimate_check' },
                    { label: '‚²¿–â‚Ö‚Ì‰ñ“š', value: 'answer_questions' },
                    { label: 'ƒtƒHƒ[ƒAƒbƒv', value: 'estimate_followup' },
                    { label: '“Á•ÊƒLƒƒƒ“ƒy[ƒ“‚Ì‚²ˆÄ“à', value: 'special_campaign' }
                ],
                '¬–ñ': [
                    { label: '‚²Œ_–ñ‚Ì‚¨—ç', value: 'contract_thanks' },
                    { label: 'H–“ú’ö‚Ì‚²˜A—', value: 'construction_schedule' },
                    { label: '•K—v‘—Ş‚Ì‚²ˆÄ“à', value: 'required_documents' }
                ],
                '“ü‹à—\’è': [
                    { label: '“ü‹àŠm”F‚Ì‚¨Šè‚¢', value: 'payment_confirmation' },
                    { label: 'Uæ‚Ì‚²ˆÄ“à', value: 'bank_info' },
                    { label: 'H–ŠJn‚Ì‚²ˆÄ“à', value: 'construction_start' }
                ],
                '“ü‹àÏ': [
                    { label: '“ü‹àŠm”F‚Ì‚¨—ç', value: 'payment_thanks' },
                    { label: 'H–ŠJn‚Ì‚²ˆÄ“à', value: 'construction_info' },
                    { label: 'Š®HŒã‚ÌƒtƒHƒ[', value: 'completion_follow' }
                ]
            };

            // ƒfƒtƒHƒ‹ƒg‚Ì‘I‘ğˆ
            options = statusOptions[currentStatus] || [
                { label: '‚¨–â‚¢‡‚í‚¹‚Ö‚Ì‚¨—ç', value: 'general_thanks' },
                { label: '‚²˜A—', value: 'general_contact' },
                { label: 'ƒtƒHƒ[ƒAƒbƒv', value: 'general_followup' }
            ];

            // ‘I‘ğˆ‚ğHTML‚É•ÏŠ·
            optionsContainer.innerHTML = options.map((opt, index) => `
                <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                    <input type="radio" name="nextStep" value="${opt.value}"
                           ${index === 0 ? 'checked' : ''}
                           onchange="generateAiSmsMessage(${caseId}, '${opt.value}')"
                           class="mr-3">
                    <span class="text-sm">${opt.label}</span>
                </label>
            `).join('');
        }

        // AI‚ÅSMSƒƒbƒZ[ƒW‚ğ¶¬iƒ‚ƒbƒN”Å - 65•¶šˆÈ“àj
        function generateAiSmsMessage(caseId, messageType) {
            const caseData = casesData.find(c => c.id === caseId);
            if (!caseData) return;

            const messageTextarea = document.getElementById('smsMessage');
            if (!messageTextarea) return;

            // ƒ[ƒfƒBƒ“ƒO•\¦
            messageTextarea.value = 'AI‚ªƒƒbƒZ[ƒW‚ğ¶¬’†...';
            messageTextarea.disabled = true;

            // ƒƒbƒZ[ƒWƒ^ƒCƒv‚ğæ“¾i–¢‘I‘ğ‚Ìê‡‚ÍÅ‰‚Ì‘I‘ğˆj
            if (!messageType) {
                const selectedOption = document.querySelector('input[name="nextStep"]:checked');
                messageType = selectedOption ? selectedOption.value : 'general_contact';
            }

            // ”•bŒã‚ÉAI¶¬ƒƒbƒZ[ƒW‚ğ•\¦iƒ‚ƒbƒN - 65•¶šˆÈ“àj
            setTimeout(() => {
                const customerName = caseData.name ? caseData.name.split(' ')[0] : '‚¨‹q'; // •cš‚Ì‚İ
                const salesName = '“c’†'; // Œ»İ‚ÌƒƒOƒCƒ“ƒ†[ƒU[–¼

                // 65•¶šˆÈ“à‚Ìƒeƒ“ƒvƒŒ[ƒg
                const templates = {
                    'initial_appointment': `${customerName}—l€nŠO•Ç“h‘•‚ÌŒ‚Å‚²˜A—‚µ‚Ü‚µ‚½BŒ»’n’²¸‚Ì‚²“s‡‚Í‚¢‚©‚ª‚Å‚µ‚å‚¤‚©H€n${salesName}`,
                    'thank_inquiry': `${customerName}—l€n‚¨–â‡‚¹‚ ‚è‚ª‚Æ‚¤‚²‚´‚¢‚Ü‚·BŠO•Ç“h‘•‚ÌÚ×‚ğ‚²ˆÄ“à‚µ‚Ü‚·B€n${salesName}`,
                    'send_materials': `${customerName}—l€n‘—¿‚ğ‚¨‘—‚è‚µ‚Ü‚µ‚½B‚²Šm”F‚­‚¾‚³‚¢B‚²¿–â‚Í‚¨‹CŒy‚ÉB€n${salesName}`,
                    'retry_appointment': `${customerName}—l€næ“ú‚Í¸—ç‚µ‚Ü‚µ‚½BŒ»’²“ú‚ğÄ’²®‚³‚¹‚Ä‚¢‚½‚¾‚¯‚Ü‚·‚©H€n${salesName}`,
                    'material_guide': `${customerName}—l€nÚ‚µ‚¢‘—¿‚ğ‚¨‘—‚è‚µ‚Ü‚·B‚²•s–¾“_‚ª‚ ‚ê‚Î‚²˜A—‚­‚¾‚³‚¢B€n${salesName}`,
                    'followup_call': `${customerName}—l€næ“ú‚ÌŒ‚¢‚©‚ª‚Å‚µ‚½‚©H‚²“s‡‚Â‚­‚É‚²˜A—‚­‚¾‚³‚¢B€n${salesName}`,
                    'confirm_survey': `${customerName}—l€n–¾“ú›‚ÌŒ»’²‚æ‚ë‚µ‚­‚¨Šè‚¢‚µ‚Ü‚·B•ÏX‚ ‚ê‚Î‚²˜A—‚ğB€n${salesName}`,
                    'survey_reminder': `${customerName}—l€n–¾“ú‚ÌŒ»’²‚æ‚ë‚µ‚­‚¨Šè‚¢‚µ‚Ü‚·BƒXƒ^ƒbƒt‚ªf‚¢‚Ü‚·B€n${salesName}`,
                    'preparation_info': `${customerName}—l€nŒ»’²“–“ú‚Í“Á‚É‚²€”õ•s—v‚Å‚·B‚¨‹C‚ğ‚Â‚¯‚Ä‚¨‘Ò‚¿‰º‚³‚¢B€n${salesName}`,
                    'thank_survey': `${customerName}—l€n–{“ú‚Í‚ ‚è‚ª‚Æ‚¤‚²‚´‚¢‚Ü‚µ‚½BŒ©Ï‘‚ğì¬‚µ‚²˜A—‚µ‚Ü‚·B€n${salesName}`,
                    'estimate_progress': `${customerName}—l€nŒ©Ï‘ì¬’†‚Å‚·B‚à‚¤­‚µ‚¨‘Ò‚¿‚­‚¾‚³‚¢B€n${salesName}`,
                    'estimate_ready': `${customerName}—l€nŒ©Ï‘‚ªŠ®¬‚µ‚Ü‚µ‚½B‚²“s‡‚æ‚¢‚É‚²à–¾‚µ‚Ü‚·B€n${salesName}`,
                    'estimate_check': `${customerName}—l€nŒ©Ï‘‚Í‚²Šm”F‚¢‚½‚¾‚¯‚Ü‚µ‚½‚©H‚²•s–¾“_‚¨‹CŒy‚ÉB€n${salesName}`,
                    'answer_questions': `${customerName}—l€n‚²¿–â‚ ‚è‚ª‚Æ‚¤‚²‚´‚¢‚Ü‚·BÚ×‰ñ“š‚ğ‚¨‘—‚è‚µ‚Ü‚·B€n${salesName}`,
                    'estimate_followup': `${customerName}—l€nŒ©Ï‘‚ÌŒ‚¢‚©‚ª‚Å‚µ‚å‚¤‚©H‚²•s–¾“_‚ ‚ê‚Î‚²˜A—‚ğB€n${salesName}`,
                    'special_campaign': `${customerName}—l€n¡ŒŒÀ’è“Á•Ê‰¿Ši‚²—pˆÓ‚µ‚Ü‚µ‚½B‚±‚Ì‹@‰ï‚É‚¢‚©‚ª‚Å‚·‚©H€n${salesName}`,
                    'contract_thanks': `${customerName}—l€n‚²Œ_–ñ‚ ‚è‚ª‚Æ‚¤‚²‚´‚¢‚Ü‚·B’š”J‚ÈH–‚ğS‚ª‚¯‚Ü‚·B€n${salesName}`,
                    'construction_schedule': `${customerName}—l€nH–“ú’ö‚ª›Œ›“ú‚ÉŒˆ‚Ü‚è‚Ü‚µ‚½B‚æ‚ë‚µ‚­‚¨Šè‚¢‚µ‚Ü‚·B€n${salesName}`,
                    'required_documents': `${customerName}—l€n•K—v‘—Ş‚ğ‚¨‘—‚è‚µ‚Ü‚µ‚½B‚²Šm”FE‚²‹L“ü‚¨Šè‚¢‚µ‚Ü‚·B€n${salesName}`,
                    'payment_confirmation': `${customerName}—l€n“ü‹àŠm”F‚¨Šè‚¢‚µ‚Ü‚·BU—\’è“ú‚ğ‚¨‹³‚¦‚­‚¾‚³‚¢B€n${salesName}`,
                    'bank_info': `${customerName}—l€nUæ‚ğ‚¨‘—‚è‚µ‚Ü‚·B‚²Šm”F‚Ìã‚¨è‘±‚«‚­‚¾‚³‚¢B€n${salesName}`,
                    'construction_start': `${customerName}—l€n—ˆT‚©‚çH–ŠJn‚Å‚·B‚²•s•Ö‚¨‚©‚¯‚µ‚Ü‚·‚ª‚æ‚ë‚µ‚­B€n${salesName}`,
                    'payment_thanks': `${customerName}—l€n“ü‹àŠm”F‚µ‚Ü‚µ‚½B‚ ‚è‚ª‚Æ‚¤‚²‚´‚¢‚Ü‚·BH–i‚ß‚Ü‚·B€n${salesName}`,
                    'construction_info': `${customerName}—l€nH–ƒXƒPƒWƒ…[ƒ‹‚¨‘—‚è‚µ‚Ü‚·B‚²Šm”F‚­‚¾‚³‚¢B€n${salesName}`,
                    'completion_follow': `${customerName}—l€nH–Š®—¹Œã‚àƒTƒ|[ƒg‚µ‚Ü‚·B‰½‚©‚ ‚ê‚Î‚²˜A—‚ğB€n${salesName}`,
                    'general_contact': `${customerName}—l€nŠO•Ç“h‘•‚ÌŒ‚Å‚²˜A—‚µ‚Ü‚µ‚½B‚²“s‡‚æ‚¢‚É‚¨˜b‚µ‚Ü‚¹‚ñ‚©H€n${salesName}`,
                    'general_thanks': `${customerName}—l€n‚¨–â‡‚¹‚ ‚è‚ª‚Æ‚¤‚²‚´‚¢‚Ü‚·BÚ×‚²ˆÄ“à‚µ‚Ü‚·B€n${salesName}`,
                    'general_followup': `${customerName}—l€næ“ú‚ÌŒ‚Ç‚¤‚Å‚µ‚½‚©H‚¨‹CŒy‚É‚²˜A—‚­‚¾‚³‚¢B€n${salesName}`
                };

                const message = templates[messageType] || templates['general_contact'];
                messageTextarea.value = message;
                messageTextarea.disabled = false;
                updateCharCount();
            }, 1000); // 1•bŒã‚É¶¬
        }

        // SMSƒƒbƒZ[ƒW‚ÌÄ¶¬
        function regenerateSmsMessage(caseId) {
            const selectedOption = document.querySelector('input[name="nextStep"]:checked');
            const messageType = selectedOption ? selectedOption.value : null;
            generateAiSmsMessage(caseId, messageType);
        }

        // ƒeƒ“ƒvƒŒ[ƒg‚ğƒ[ƒh
        function loadSmsTemplate(templateType) {
            const messageTextarea = document.getElementById('smsMessage');
            if (!messageTextarea) return;

            const templates = {
                'greeting': '‚¨¢˜b‚É‚È‚Á‚Ä‚¨‚è‚Ü‚·BŠO•Ç“h‘•‚ÌŒ‚Å‚²˜A—‚µ‚Ü‚µ‚½B“c’†',
                'appointment': '–¾“ú‚ÌŒ»’²‚æ‚ë‚µ‚­‚¨Šè‚¢‚µ‚Ü‚·B“c’†',
                'estimate': 'Œ©Ï‘Š®¬‚µ‚Ü‚µ‚½B‚²Šm”F‚­‚¾‚³‚¢B“c’†',
                'followup': 'æ“ú‚ÌŒ‚¢‚©‚ª‚Å‚µ‚½‚©H‚¨‹CŒy‚É‚²˜A—‚­‚¾‚³‚¢B“c’†'
            };

            messageTextarea.value = templates[templateType] || '';
            updateCharCount();
        }

        // è“®“ü—Í‚ÌØ‚è‘Ö‚¦
        function toggleManualInput(caseId) {
            const checkbox = document.getElementById('manualInput');
            const messageTextarea = document.getElementById('smsMessage');
            if (checkbox.checked) {
                messageTextarea.value = '';
                messageTextarea.placeholder = 'ƒƒbƒZ[ƒW‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢...';
                messageTextarea.disabled = false;
                updateCharCount();
            } else if (caseId) {
                generateAiSmsMessage(caseId, null);
            }
        }

        // SMSƒƒbƒZ[ƒW‚ğ‘—M
        function sendSmsMessage(phone) {
            const message = document.getElementById('smsMessage').value;
            if (message) {
                window.location.href = `sms:${phone}?body=${encodeURIComponent(message)}`;
                showNotification('SMS‘—M', `${phone} ‚ÖSMS‚ğ‘—M‚µ‚Ü‚µ‚½`);
                // ƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
                document.querySelector('.fixed').remove();
            } else {
                showNotification('ƒGƒ‰[', 'ƒƒbƒZ[ƒW‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢', 'error');
            }
        }

        // ƒƒ‚•\¦E•ÒW
        function showMemo(caseId) {
            // Šù‘¶‚Ìƒƒ‚‚ğæ“¾iÀÛ‚ÌƒVƒXƒeƒ€‚Å‚ÍAPI‚©‚çæ“¾j
            const existingMemo = getCaseMemo(caseId);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-lg mx-4 max-h-[80vh] overflow-y-auto">
                    <h3 class="text-lg font-bold mb-4">?? ˆÄŒƒƒ‚</h3>

                    <!-- —š—ğ•\¦ -->
                    <div class="mb-4 max-h-48 overflow-y-auto bg-gray-50 rounded-lg p-3">
                        <div class="text-sm font-medium text-gray-600 mb-2">—š—ğ:</div>
                        <div id="memoHistory" class="space-y-2 text-sm">
                            ${existingMemo.history || '<div class="text-gray-400">—š—ğ‚È‚µ</div>'}
                        </div>
                    </div>

                    <!-- V‹Kƒƒ‚“ü—Í -->
                    <div class="mb-2">
                        <label class="text-sm font-medium text-gray-700">V‚µ‚¢ƒƒ‚‚ğ’Ç‰Á:</label>
                    </div>
                    <textarea id="caseMemo" class="w-full p-3 border rounded-lg" rows="4" placeholder="\‚µ‘—‚è–€‚â’ˆÓ“_‚ğ‹L“ü..."></textarea>

                    <div class="flex justify-end gap-2 mt-4">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ƒLƒƒƒ“ƒZƒ‹
                        </button>
                        <button onclick="saveMemo(${caseId})" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            •Û‘¶
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ƒƒ‚æ“¾iÀÛ‚ÌƒVƒXƒeƒ€‚Å‚ÍAPI‚©‚çæ“¾j
        function getCaseMemo(caseId) {
            // ƒTƒ“ƒvƒ‹ƒf[ƒ^
            const memoData = {
                1: {
                    history: `
                        <div class="border-l-2 border-blue-400 pl-3 mb-2">
                            <div class="text-xs text-gray-500">2024/03/15 14:30 - “c’†‘¾˜Y</div>
                            <div class="text-gray-700">—\ZŠ´F200–œ‰~‘OŒã</div>
                        </div>
                        <div class="border-l-2 border-green-400 pl-3 mb-2">
                            <div class="text-xs text-gray-500">2024/03/15 16:45 - ²“¡‰Ôq</div>
                            <div class="text-gray-700">‹£‡‘¼Ğ‚àŒŸ“¢’†A‰œ—l‚ªŒˆ’èŒ Ò</div>
                        </div>
                        <div class="border-l-2 border-yellow-400 pl-3 mb-2">
                            <div class="text-xs text-gray-500">2024/03/16 10:00 - ƒVƒXƒeƒ€</div>
                            <div class="text-gray-700">yˆø‚«Œp‚¬z“c’†‘¾˜Y ¨ ²“¡‰Ôq</div>
                        </div>
                    `
                },
                4: {
                    history: `
                        <div class="border-l-2 border-blue-400 pl-3 mb-2">
                            <div class="text-xs text-gray-500">2024/03/14 09:00 - R“cŸ˜Y</div>
                            <div class="text-gray-700">‰‰ñ–K–âÏ‚İAŒ©Ï‚à‚è‘Ò‚¿</div>
                        </div>
                    `
                }
            };

            return memoData[caseId] || { history: '' };
        }

        // ƒƒ‚•Û‘¶
        function saveMemo(caseId) {
            const memoText = document.getElementById('caseMemo').value;

            if (!memoText.trim()) {
                showNotification('ƒGƒ‰[', 'ƒƒ‚‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢', 'error');
                return;
            }

            // Œ»İ‚Ìƒ†[ƒU[î•ñiÀÛ‚ÌƒVƒXƒeƒ€‚Å‚ÍƒZƒbƒVƒ‡ƒ“‚©‚çæ“¾j
            const currentUser = getCurrentUser();
            const timestamp = new Date().toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            }).replace(/€//g, '/');

            // ƒƒ‚‚ğ•Û‘¶iÀÛ‚ÌƒVƒXƒeƒ€‚Å‚ÍAPI‚É‘—Mj
            const newMemoEntry = {
                timestamp: timestamp,
                user: currentUser.name,
                text: memoText,
                caseId: caseId
            };

            // ‚±‚±‚ÅAPI‚É‘—M
            console.log('Saving memo:', newMemoEntry);

            showNotification('ƒƒ‚•Û‘¶', 'ƒƒ‚‚ğ•Û‘¶‚µ‚Ü‚µ‚½');
            document.querySelector('.fixed').remove();

            // UI‚ğXV‚µ‚Äƒƒ‚ƒAƒCƒRƒ“‚ğ‰©F‚É‚·‚é
            updateMemoIcon(caseId, true);
        }

        // ƒƒ‚ƒAƒCƒRƒ“‚ÌXV
        function updateMemoIcon(caseId, hasMemo) {
            const caseElements = document.querySelectorAll(`[data-case-id="${caseId}"]`);
            caseElements.forEach(element => {
                const memoButton = element.querySelector('button[onclick*="showMemo"]');
                if (memoButton) {
                    const memoIcon = memoButton.querySelector('span');
                    if (memoIcon) {
                        if (hasMemo) {
                            memoIcon.classList.remove('text-gray-400');
                            memoIcon.classList.add('text-yellow-500');
                        } else {
                            memoIcon.classList.remove('text-yellow-500');
                            memoIcon.classList.add('text-gray-400');
                        }
                    }
                }
            });
        }

        // ’S“–ƒpƒXiˆø‚«Œp‚¬j
        function passCase(caseId) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
                    <h3 class="text-lg font-bold mb-4">?? ’S“–Ò‚ğ•ÏX</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ˆø‚«Œp‚¬æ</label>
                        <select id="passToSelect" class="w-full p-2 border rounded-lg">
                            <option value="">‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢</option>
                            <option value="“c’†‘¾˜Y">“c’†‘¾˜Y</option>
                            <option value="²“¡‰Ôq">²“¡‰Ôq</option>
                            <option value="R“cŸ˜Y">R“cŸ˜Y</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ˆø‚«Œp‚¬ƒƒ‚i”CˆÓj</label>
                        <textarea id="passMemo" class="w-full p-2 border rounded-lg" rows="3" placeholder="\‚µ‘—‚è–€‚ª‚ ‚ê‚Î‹L“ü..."></textarea>
                    </div>
                    <div class="flex justify-end gap-2">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ƒLƒƒƒ“ƒZƒ‹
                        </button>
                        <button onclick="confirmPass(${caseId})" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            ˆø‚«Œp‚¬ƒŠƒNƒGƒXƒg
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ˆø‚«Œp‚¬Šm’è
        function confirmPass(caseId) {
            const passTo = document.getElementById('passToSelect').value;
            const passMemo = document.getElementById('passMemo').value;

            if (!passTo) {
                alert('ˆø‚«Œp‚¬æ‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢');
                return;
            }

            // ˆø‚«Œp‚¬ƒŠƒNƒGƒXƒg‚ğ‘—M
            showNotification('ˆø‚«Œp‚¬ƒŠƒNƒGƒXƒg‘—M', `${passTo}‚Ö³”FˆË—Š‚ğ‘—M‚µ‚Ü‚µ‚½`);

            // ƒJ[ƒh‚É³”F‘Ò‚¿ƒoƒbƒW‚ğ’Ç‰Á
            const card = document.querySelector(`[onclick="showCaseDetail(${caseId})"]`);
            if (card) {
                const titleElement = card.querySelector('h3');
                if (titleElement && !titleElement.querySelector('.pending-badge')) {
                    const badge = document.createElement('span');
                    badge.className = 'pending-badge text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded ml-2';
                    badge.textContent = '? ³”F‘Ò‚¿';
                    titleElement.appendChild(badge);
                }
            }

            document.querySelector('.fixed').remove();

            // ’Ê’m‚ğ•\¦iÀÛ‚ÌÀ‘•‚Å‚Í‘Šè‚Ì‰æ–Ê‚É’Ê’mj
            setTimeout(() => {
                showPassNotification(passTo, caseId, passMemo);
            }, 1000);
        }

        // ˆø‚«Œp‚¬’Ê’m‚ğ•\¦
        function showPassNotification(assignee, caseId, memo) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-sm z-50 border-l-4 border-blue-500';

            const memoHtml = memo ? `
                <div class="mt-2 p-2 bg-gray-50 rounded text-xs text-gray-600">
                    <p class="font-medium">ˆø‚«Œp‚¬ƒƒ‚:</p>
                    <p>${memo}</p>
                </div>
            ` : '';

            notification.innerHTML = `
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <span class="text-2xl">??</span>
                    </div>
                    <div class="ml-3 flex-1">
                        <p class="text-sm font-medium text-gray-900">
                            ˆÄŒˆø‚«Œp‚¬ƒŠƒNƒGƒXƒg
                        </p>
                        <p class="mt-1 text-sm text-gray-500">
                            “c’†‘¾˜Y‚©‚çˆÄŒ‚ªˆø‚«Œp‚ª‚ê‚Ü‚µ‚½
                        </p>
                        ${memoHtml}
                        <div class="mt-3 flex gap-2">
                            <button onclick="acceptPass(${caseId}, this)" class="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">
                                ³”F
                            </button>
                            <button onclick="rejectPass(${caseId}, this)" class="px-3 py-1 bg-gray-200 text-gray-800 text-sm rounded hover:bg-gray-300">
                                ‹‘”Û
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(notification);

            // 5•bŒã‚É©“®‚ÅÁ‚¦‚é
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 10000);
        }

        // ˆø‚«Œp‚¬³”F
        function acceptPass(caseId, button) {
            // ƒ‚[ƒ_ƒ‹‚©‚çƒƒ‚‚ğæ“¾
            const modal = button.closest('.fixed');
            const passMemo = modal.querySelector('p:last-of-type')?.textContent.replace('ƒƒ‚: ', '') || '';

            // Œ»İ‚Ìƒ†[ƒU[î•ñiÀÛ‚ÌƒVƒXƒeƒ€‚Å‚ÍƒZƒbƒVƒ‡ƒ“‚©‚çæ“¾j
            const currentUser = getCurrentUser();
            const timestamp = new Date().toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            }).replace(/€//g, '/');

            // ˆø‚«Œp‚¬—š—ğ‚ğƒƒ‚‚É©“®’Ç‰ÁiÀÛ‚ÌƒVƒXƒeƒ€‚Å‚ÍAPI‚É‘—Mj
            const handoverEntry = {
                timestamp: timestamp,
                type: 'handover',
                from: '“c’†‘¾˜Y', // ÀÛ‚Í‘O‚Ì’S“–Ò‚ğæ“¾
                to: currentUser.name,
                memo: passMemo,
                caseId: caseId
            };

            // ‚±‚±‚ÅAPI‚É‘—M‚µ‚Ä—š—ğ‚ğ•Û‘¶
            console.log('Recording handover:', handoverEntry);

            showNotification('³”FŠ®—¹', 'ˆÄŒ‚ğˆø‚«Œp‚¬‚Ü‚µ‚½');

            // ³”F‘Ò‚¿ƒoƒbƒW‚ğíœ
            const pendingBadge = document.querySelector('.pending-badge');
            if (pendingBadge) {
                pendingBadge.remove();
            }

            // ’S“–Ò–¼‚ğXV
            const card = document.querySelector(`[onclick="showCaseDetail(${caseId})"]`);
            if (card) {
                const assigneeSpan = card.querySelector('.text-blue-700');
                if (assigneeSpan) {
                    assigneeSpan.textContent = `?? ’S“–: ${currentUser.name}`;
                }
            }

            // ƒƒ‚ƒAƒCƒRƒ“‚ğ‰©F‚É‚·‚éiˆø‚«Œp‚¬—š—ğ‚ª‚ ‚é‚½‚ßj
            updateMemoIcon(caseId, true);

            modal.remove();
        }

        // ˆø‚«Œp‚¬‹‘”Û
        function rejectPass(caseId, button) {
            showNotification('ˆø‚«Œp‚¬‹‘”Û', 'ˆø‚«Œp‚¬‚ğ‹‘”Û‚µ‚Ü‚µ‚½');

            // ³”F‘Ò‚¿ƒoƒbƒW‚ğíœ
            const pendingBadge = document.querySelector('.pending-badge');
            if (pendingBadge) {
                pendingBadge.remove();
            }

            button.closest('.fixed').remove();
        }

        // ˆÄŒÚ×•\¦
        function openCaseDetail(caseId) {
            const caseData = casesData.find(c => c.id == caseId);
            if (!caseData) return;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">ˆÄŒÚ× #${caseData.id}</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <!-- ŒÚ‹qî•ñ -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ŒÚ‹qî•ñ</h4>
                            <div class="grid grid-cols-2 gap-2 text-sm">
                                <div><span class="text-gray-500">–¼:</span> ${caseData.name} —l</div>
                                <div><span class="text-gray-500">“d˜b:</span> ${caseData.phone}</div>
                                <div><span class="text-gray-500">ZŠ:</span> ${caseData.area}</div>
                                <div><span class="text-gray-500">•¨Œ:</span> ${caseData.propertyType}E’z${caseData.age}”N</div>
                            </div>
                        </div>

                        <!-- ƒXƒe[ƒ^ƒXî•ñ -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ƒXƒe[ƒ^ƒX</h4>
                            <select class="w-full p-2 border rounded">
                                <option ${caseData.status === '–¢‘Î‰' ? 'selected' : ''}>–¢‘Î‰</option>
                                <option ${caseData.status === '‰Ë“dÏ/–¢ƒAƒ|' ? 'selected' : ''}>‰Ë“dÏ/–¢ƒAƒ|</option>
                                <option ${caseData.status === 'ƒAƒ|Ï' ? 'selected' : ''}>ƒAƒ|Ï</option>
                                <option ${caseData.status === 'Œ»’²Ï' ? 'selected' : ''}>Œ»’²Ï</option>
                                <option ${caseData.status === 'Œ©Ï’ñoÏ' ? 'selected' : ''}>Œ©Ï’ñoÏ</option>
                                <option ${caseData.status === '¬–ñ' ? 'selected' : ''}>¬–ñ</option>
                                <option ${caseData.status === '‘¼ĞŒ_–ñÏ' ? 'selected' : ''}>‘¼ĞŒ_–ñÏ</option>
                                <option ${caseData.status === '¸’' ? 'selected' : ''}>¸’</option>
                            </select>
                        </div>

                        <!-- Šˆ“®—š—ğ -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold mb-2">Šˆ“®—š—ğ</h4>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-center text-gray-600">
                                    <span class="text-xs text-gray-400 w-20">2024/01/15</span>
                                    <span>‰‰ñ‰Ë“d - •sİ</span>
                                </div>
                                <div class="flex items-center text-gray-600">
                                    <span class="text-xs text-gray-400 w-20">2024/01/16</span>
                                    <span>2‰ñ–Ú‰Ë“d - ƒAƒ|æ“¾¬Œ÷</span>
                                </div>
                                <div class="flex items-center text-gray-600">
                                    <span class="text-xs text-gray-400 w-20">2024/01/18</span>
                                    <span>Œ»’n’²¸À{</span>
                                </div>
                            </div>
                        </div>

                        <!-- ƒƒ‚ -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ƒƒ‚</h4>
                            <textarea class="w-full p-2 border rounded h-24" placeholder="ƒƒ‚‚ğ“ü—Í..."></textarea>
                        </div>
                    </div>

                    <div class="flex justify-end gap-2 mt-6">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">
                            •Â‚¶‚é
                        </button>
                        <button onclick="saveCaseDetail(${caseData.id})" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                            •Û‘¶
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // V‹KˆÄŒƒ‚[ƒ_ƒ‹
        function openNewCaseModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-lg mx-4">
                    <h3 class="text-xl font-bold mb-4">V‹KˆÄŒ“o˜^</h3>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ŒÚ‹q–¼</label>
                            <input type="text" class="w-full p-2 border rounded" placeholder="—á: R“c‘¾˜Y">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">“d˜b”Ô†</label>
                            <input type="tel" class="w-full p-2 border rounded" placeholder="—á: 03-1234-5678">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ZŠ</label>
                            <input type="text" class="w-full p-2 border rounded" placeholder="—á: “Œ‹“s¢“c’J‹æ">
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">•¨Œí•Ê</label>
                                <select class="w-full p-2 border rounded">
                                    <option>ŒËŒš‚Ä</option>
                                    <option>ƒAƒp[ƒg</option>
                                    <option>ƒ}ƒ“ƒVƒ‡ƒ“</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">’z”N”</label>
                                <input type="number" class="w-full p-2 border rounded" placeholder="—á: 15">
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-end gap-2 mt-6">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">
                            ƒLƒƒƒ“ƒZƒ‹
                        </button>
                        <button onclick="saveNewCase()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                            “o˜^
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // •Û‘¶ˆ—
        function saveCaseDetail(caseId) {
            showNotification('•Û‘¶', `ˆÄŒ #${caseId} ‚ğ•Û‘¶‚µ‚Ü‚µ‚½`);
            document.querySelector('.fixed').remove();
        }

        function saveNewCase() {
            showNotification('“o˜^', 'V‹KˆÄŒ‚ğ“o˜^‚µ‚Ü‚µ‚½');
            document.querySelector('.fixed').remove();
        }

        // –¢U‚è•ª‚¯ˆÄŒ‚Ìƒ_ƒ~[ƒf[ƒ^
        const unassignedCases = [
            {
                id: 101,
                name: 'V‹KŒÚ‹qA',
                address: '“Œ‹“sa’J‹æ',
                type: 'ŒËŒš‚ÄE’z12”N',
                temperature: 4,
                source: '‚­‚ç‚×‚é',
                registeredDate: '2025-01-15 10:30'
            },
            {
                id: 102,
                name: 'V‹KŒÚ‹qB',
                address: '_“ŞìŒ§ìès',
                type: 'ƒ}ƒ“ƒVƒ‡ƒ“E’z5”N',
                temperature: 3,
                source: '‚­‚ç‚×‚é',
                registeredDate: '2025-01-15 11:45'
            },
            {
                id: 103,
                name: 'V‹KŒÚ‹qC',
                address: 'é‹ÊŒ§‰z’Js',
                type: 'ŒËŒš‚ÄE’z20”N',
                temperature: 5,
                source: '‚­‚ç‚×‚é',
                registeredDate: '2025-01-15 14:00'
            }
        ];

        // –¢U‚è•ª‚¯ˆÄŒ‚ğ•\¦
        function displayUnassignedCases() {
            const unassignedSection = document.getElementById('unassignedCasesSection');
            const unassignedList = document.getElementById('unassignedCasesList');
            const badge = document.getElementById('unassignedBadge');

            if (unassignedCases.length > 0) {
                // ƒoƒbƒW‚ğ•\¦
                badge.textContent = unassignedCases.length;
                badge.classList.remove('hidden');

                // ƒg[ƒ^ƒ‹ƒoƒbƒWƒJƒEƒ“ƒg‚ğXV
                updateTotalBadgeCount();

                // –¢U‚è•ª‚¯ƒZƒNƒVƒ‡ƒ“‚ğ•\¦
                unassignedSection.classList.remove('hidden');

                // ˆÄŒƒJ[ƒh‚ğ¶¬
                unassignedList.innerHTML = unassignedCases.map(caseItem => {
                    return `
                        <div class="bg-white rounded-lg border border-yellow-300 p-3 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">–¢‘Î‰</span>
                            </div>
                            <h4 class="font-bold text-sm mb-1">${caseItem.name}</h4>
                            <p class="text-xs text-gray-600">${caseItem.address}</p>
                            <p class="text-xs text-gray-600 mb-2">${caseItem.type}</p>
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>“o˜^: ${caseItem.registeredDate}</span>
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                // ƒoƒbƒW‚ğ”ñ•\¦
                badge.classList.add('hidden');

                // –¢U‚è•ª‚¯ƒZƒNƒVƒ‡ƒ“‚ğ”ñ•\¦
                unassignedSection.classList.add('hidden');
            }
        }


        // ƒy[ƒW“Ç‚İ‚İ‚É–¢U‚è•ª‚¯ˆÄŒ‚ğ•\¦
        document.addEventListener('DOMContentLoaded', function() {
            displayUnassignedCases();

            // ‰ŠúƒoƒbƒWƒJƒEƒ“ƒg‚ğXV
            setTimeout(updateTotalBadgeCount, 500);

            // ƒJƒŒƒ“ƒ_[‚Ì©“®“¯Šú‚ğÀs
            setTimeout(autoSyncToCalendar, 1000);

            // showSectionŠÖ”‚ğƒI[ƒo[ƒ‰ƒCƒhiŠù‘¶‚ÌoriginalShowSection‚ğg—pj
            const prevShowSection = window.showSection;
            window.showSection = function(sectionName) {
                prevShowSection(sectionName);

                // ˆÄŒŠÇ—ƒZƒNƒVƒ‡ƒ“‚ğ•\¦‚µ‚½ê‡A–¢U‚è•ª‚¯ˆÄŒ‚ğXV
                if (sectionName === 'cases') {
                    displayUnassignedCases();
                    renderCaseCards(); // “®“I‚ÉˆÄŒƒJ[ƒh‚ğ¶¬
                    updateCaseCounts(); // Œ”‚ğXV
                }
            };
        });
    </script>
    <!-- ‰æ‘œŠg‘å•\¦ƒ‚[ƒ_ƒ‹ -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-90 z-[200] hidden flex items-center justify-center" onclick="closeImageModal()">
        <div class="relative max-w-7xl max-h-full p-4">
            <button onclick="closeImageModal()" class="absolute top-4 right-4 text-white hover:text-gray-300 z-10">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <img id="modalImage" src="" alt="" class="max-w-full max-h-[90vh] object-contain">
            <p id="modalImageTitle" class="text-white text-center mt-4"></p>
        </div>
    </div>

    <script>
        // ‰æ‘œƒ‚[ƒ_ƒ‹‹@”\
        function openImageModal(src, title) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalImageTitle');

            modalImage.src = src;
            modalTitle.textContent = title || '';
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // ESCƒL[‚Åƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeImageModal();
            }
        });

        // ƒLƒƒƒ“ƒZƒ‹\¿‹@”\
        let selectedCancelCase = null;
        let cancelQuestions = [
            {
                question: 'ƒLƒƒƒ“ƒZƒ‹‚Ìå‚È——R‚ğ‚¨‘I‚Ñ‚­‚¾‚³‚¢',
                options: ['‰¿Ši‚ª‡‚í‚È‚¢', '‘¼Ğ‚ÅŒ_–ñ‚µ‚½', '‚·‚Å‚É‘¼Ğ‚ÅŒŸ“¢’†', 'H–‚Ì•K—v‚ª‚È‚­‚È‚Á‚½', '˜A—‚ªŒq‚ª‚ç‚È‚¢', '‚»‚Ì‘¼']
            }
        ];
        let cancelAnswers = [];

        // ƒLƒƒƒ“ƒZƒ‹\¿‰æ–Ê‚ğŠJ‚­
        function openCancelRequest(caseId) {
            selectedCancelCase = casesData.find(c => c.id === caseId);
            if (selectedCancelCase) {
                showSection('cancel');
                setTimeout(() => {
                    displayCancelCases();
                    // ‘I‘ğ‚³‚ê‚½ˆÄŒ‚ğƒnƒCƒ‰ƒCƒg
                    const caseCard = document.querySelector(`[data-cancel-case-id="${caseId}"]`);
                    if (caseCard) {
                        caseCard.classList.add('ring-2', 'ring-blue-500');
                        caseCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }, 100);
            }
        }

        // ƒLƒƒƒ“ƒZƒ‹\¿—p‚ÌˆÄŒƒJ[ƒhì¬
        function createCancelCaseCard(caseItem) {
            const statusColor = getStatusColor(caseItem.status);
            return `
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer"
                     onclick="selectCancelCase(${caseItem.id})"
                     data-cancel-case-id="${caseItem.id}">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColor}">${caseItem.status}</span>
                        <button onclick="event.stopPropagation(); selectCancelCase(${caseItem.id})"
                                class="p-1.5 rounded-lg bg-red-100 hover:bg-red-200 transition-colors" title="‘I‘ğ">
                            <span class="text-lg">?</span>
                        </button>
                    </div>
                    <h3 class="font-bold text-lg mb-1">${caseItem.name}</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? ’S“–: ${caseItem.assignee || '–¢Š„“–'}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${caseItem.location || caseItem.area || ''}</p>
                    <p class="text-sm text-gray-600 mb-3">${caseItem.propertyType || ''}</p>
                    <p class="text-sm text-gray-600 mb-3">?? ${caseItem.phone || ''}</p>
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span>ÅI˜A—: ${caseItem.lastContact || '–¢˜A—'}</span>
                        <span>Ÿ‰ñ—\’è: ${caseItem.nextAction || '–¢’è'}</span>
                    </div>
                </div>
            `;
        }

        // ¬–ñ•ñ—p‚ÌˆÄŒƒJ[ƒhì¬
        function createContractCaseCard(caseItem) {
            const statusColor = getStatusColor(caseItem.status);
            return `
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer"
                     onclick="selectContractCase(${caseItem.id})"
                     data-contract-case-id="${caseItem.id}">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColor}">${caseItem.status}</span>
                        <button onclick="event.stopPropagation(); selectContractCase(${caseItem.id})"
                                class="p-1.5 rounded-lg bg-green-100 hover:bg-green-200 transition-colors" title="‘I‘ğ">
                            <span class="text-lg">?</span>
                        </button>
                    </div>
                    <h3 class="font-bold text-lg mb-1">${caseItem.name}</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? ’S“–: ${caseItem.assignee || '–¢Š„“–'}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${caseItem.location || caseItem.area || ''}</p>
                    <p class="text-sm text-gray-600 mb-3">${caseItem.propertyType || ''}</p>
                    <p class="text-sm text-gray-600 mb-3">?? ${caseItem.phone || ''}</p>
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span>ÅI˜A—: ${caseItem.lastContact || '–¢˜A—'}</span>
                        <span>Ÿ‰ñ—\’è: ${caseItem.nextAction || '–¢’è'}</span>
                    </div>
                </div>
            `;
        }

        // “ú•t”ÍˆÍİ’èiƒLƒƒƒ“ƒZƒ‹\¿—pj
        function setCancelDateRange(range) {
            const today = new Date();
            const startInput = document.getElementById('cancelStartDate');
            const endInput = document.getElementById('cancelEndDate');

            switch(range) {
                case 'today':
                    startInput.valueAsDate = today;
                    endInput.valueAsDate = today;
                    break;
                case 'week':
                    const weekStart = new Date(today);
                    weekStart.setDate(today.getDate() - today.getDay());
                    startInput.valueAsDate = weekStart;
                    endInput.valueAsDate = today;
                    break;
                case 'month':
                    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);
                    startInput.valueAsDate = monthStart;
                    endInput.valueAsDate = today;
                    break;
            }
            searchCancelCases();
        }

        // “ú•t”ÍˆÍİ’èi¬–ñ•ñ—pj
        function setContractDateRange(range) {
            const today = new Date();
            const startInput = document.getElementById('contractStartDate');
            const endInput = document.getElementById('contractEndDate');

            switch(range) {
                case 'today':
                    startInput.valueAsDate = today;
                    endInput.valueAsDate = today;
                    break;
                case 'week':
                    const weekStart = new Date(today);
                    weekStart.setDate(today.getDate() - today.getDay());
                    startInput.valueAsDate = weekStart;
                    endInput.valueAsDate = today;
                    break;
                case 'month':
                    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);
                    startInput.valueAsDate = monthStart;
                    endInput.valueAsDate = today;
                    break;
            }
            searchContractCases();
        }

        // ƒLƒƒƒ“ƒZƒ‹\¿‚ÌˆÄŒŒŸõ
        function searchCancelCases() {
            const searchTerm = document.getElementById('cancelSearchInput').value.toLowerCase().trim();
            const assigneeFilter = document.getElementById('cancelAssigneeFilter').value;
            const startDate = document.getElementById('cancelStartDate').value;
            const endDate = document.getElementById('cancelEndDate').value;
            const cancelList = document.getElementById('cancelCasesList');

            let filteredCases = casesData;

            // ƒeƒLƒXƒgŒŸõ
            if (searchTerm) {
                filteredCases = filteredCases.filter(c => {
                    return (c.name && c.name.toLowerCase().includes(searchTerm)) ||
                           (c.phone && c.phone.toLowerCase().includes(searchTerm)) ||
                           (c.location && c.location.toLowerCase().includes(searchTerm)) ||
                           (c.area && c.area.toLowerCase().includes(searchTerm)) ||
                           (c.address && c.address.toLowerCase().includes(searchTerm));
                });
            }


            // ’S“–ÒƒtƒBƒ‹ƒ^[
            if (assigneeFilter) {
                if (assigneeFilter === 'self') {
                    // ©•ª‚ÌˆÄŒiƒƒOƒCƒ“ƒ†[ƒU[‚ğ“c’†‘¾˜Y‚Æ‰¼’èj
                    filteredCases = filteredCases.filter(c => c.assignee === '“c’†‘¾˜Y');
                } else if (assigneeFilter === '–¢Š„“–') {
                    filteredCases = filteredCases.filter(c => !c.assignee);
                } else {
                    filteredCases = filteredCases.filter(c => c.assignee === assigneeFilter);
                }
            }

            // ŠúŠÔƒtƒBƒ‹ƒ^[iƒ_ƒ~[ƒf[ƒ^‚Æ‚µ‚ÄID‚ğg—pj
            if (startDate || endDate) {
                const start = startDate ? new Date(startDate) : new Date('2000-01-01');
                const end = endDate ? new Date(endDate + 'T23:59:59') : new Date();

                // ƒ_ƒ~[À‘•FID‚ğ“ú•t‚Ì‘ã‚í‚è‚Ég—p
                filteredCases = filteredCases.filter(c => {
                    // ÀÛ‚ÌÀ‘•‚Å‚Íc.registeredDate‚ğDateƒIƒuƒWƒFƒNƒg‚É•ÏŠ·‚µ‚Ä”äŠr
                    return true; // ¡‚Í‘S‚Ä•\¦
                });
            }

            // V‚µ‚¢‡‚Éƒ\[ƒgiID‚ª‘å‚«‚¢‡j
            filteredCases.sort((a, b) => b.id - a.id);

            // ƒJ[ƒh•\¦
            if (filteredCases.length > 0) {
                cancelList.innerHTML = filteredCases.map(c => createCancelCaseCard(c)).join('');
            } else {
                cancelList.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">ŠY“–‚·‚éˆÄŒ‚ªŒ©‚Â‚©‚è‚Ü‚¹‚ñ</div>';
            }
        }

        // ¬–ñ•ñ‚ÌˆÄŒŒŸõ
        function searchContractCases() {
            const searchTerm = document.getElementById('contractSearchInput').value.toLowerCase().trim();
            const assigneeFilter = document.getElementById('contractAssigneeFilter').value;
            const startDate = document.getElementById('contractStartDate').value;
            const endDate = document.getElementById('contractEndDate').value;
            const contractList = document.getElementById('contractCasesList');

            let filteredCases = casesData;

            // ƒeƒLƒXƒgŒŸõ
            if (searchTerm) {
                filteredCases = filteredCases.filter(c => {
                    return (c.name && c.name.toLowerCase().includes(searchTerm)) ||
                           (c.phone && c.phone.toLowerCase().includes(searchTerm)) ||
                           (c.location && c.location.toLowerCase().includes(searchTerm)) ||
                           (c.area && c.area.toLowerCase().includes(searchTerm)) ||
                           (c.address && c.address.toLowerCase().includes(searchTerm));
                });
            }


            // ’S“–ÒƒtƒBƒ‹ƒ^[
            if (assigneeFilter) {
                if (assigneeFilter === 'self') {
                    // ©•ª‚ÌˆÄŒiƒƒOƒCƒ“ƒ†[ƒU[‚ğ“c’†‘¾˜Y‚Æ‰¼’èj
                    filteredCases = filteredCases.filter(c => c.assignee === '“c’†‘¾˜Y');
                } else if (assigneeFilter === '–¢Š„“–') {
                    filteredCases = filteredCases.filter(c => !c.assignee);
                } else {
                    filteredCases = filteredCases.filter(c => c.assignee === assigneeFilter);
                }
            }

            // ŠúŠÔƒtƒBƒ‹ƒ^[iƒ_ƒ~[ƒf[ƒ^‚Æ‚µ‚ÄID‚ğg—pj
            if (startDate || endDate) {
                const start = startDate ? new Date(startDate) : new Date('2000-01-01');
                const end = endDate ? new Date(endDate + 'T23:59:59') : new Date();

                // ƒ_ƒ~[À‘•FID‚ğ“ú•t‚Ì‘ã‚í‚è‚Ég—p
                filteredCases = filteredCases.filter(c => {
                    // ÀÛ‚ÌÀ‘•‚Å‚Íc.registeredDate‚ğDateƒIƒuƒWƒFƒNƒg‚É•ÏŠ·‚µ‚Ä”äŠr
                    return true; // ¡‚Í‘S‚Ä•\¦
                });
            }

            // V‚µ‚¢‡‚Éƒ\[ƒgiID‚ª‘å‚«‚¢‡j
            filteredCases.sort((a, b) => b.id - a.id);

            // ƒJ[ƒh•\¦
            if (filteredCases.length > 0) {
                contractList.innerHTML = filteredCases.map(c => createContractCaseCard(c)).join('');
            } else {
                contractList.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">ŠY“–‚·‚éˆÄŒ‚ªŒ©‚Â‚©‚è‚Ü‚¹‚ñ</div>';
            }
        }

        // ‰Šú•\¦—p
        function displayCancelCases() {
            searchCancelCases();
        }

        function displayContractCases() {
            searchContractCases();
        }

        // ƒLƒƒƒ“ƒZƒ‹ˆÄŒ‘I‘ğ
        function selectCancelCase(caseId) {
            selectedCancelCase = casesData.find(c => c.id === caseId);
            if (selectedCancelCase) {
                cancelAnswers = [];
                showCancelQuestions();
                document.getElementById('cancelModal').classList.remove('hidden');
            }
        }

        // ¬–ñ•ñ‚Ì¿–â’è‹`
        let contractQuestions = [
            {
                question: '•ñí•Ê‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢',
                options: ['¬–ñ•ñ', '’Ç‰ÁH–•ñ']
            },
            {
                question: 'Œ»İ‚Ìó‹µ‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢',
                options: ['Œ_–ñ‘OEŒû“ªŠm–ñÏ', 'Œ_–ñŒãEH–‘O', 'H–’†', 'H–Š®—¹Œã']
            }
        ];
        let contractAnswers = [];
        let selectedContractCase = null;

        // ¬–ñˆÄŒ‘I‘ğ
        function selectContractCase(caseId) {
            selectedContractCase = casesData.find(c => c.id === caseId);
            if (selectedContractCase) {
                // ŒÚ‹qî•ñ‚ğ•\¦
                document.getElementById('contractCustomerInfo').classList.remove('hidden');
                document.getElementById('contractCustomerName').textContent = selectedContractCase.name || '';
                document.getElementById('contractCustomerAddress').textContent =
                    selectedContractCase.address || selectedContractCase.location || selectedContractCase.area || '';

                contractAnswers = [];
                showContractQuestions();
                document.getElementById('contractModal').classList.remove('hidden');
            }
        }

        // ¬–ñ•ñ¿–â•\¦
        function showContractQuestions() {
            const container = document.getElementById('contractQuestionContainer');
            const currentQuestion = contractQuestions[contractAnswers.length];

            if (currentQuestion) {
                container.innerHTML = `
                    <div class="mb-4">
                        <h4 class="text-lg font-medium mb-3">${currentQuestion.question}</h4>
                        <div class="grid grid-cols-2 gap-3">
                            ${currentQuestion.options.map(option => `
                                <button onclick="answerContractQuestion('${option}')"
                                        class="p-3 text-left border rounded-lg hover:bg-green-50 hover:border-green-500 transition-colors">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
        }

        // ¬–ñ¿–â‰ñ“š
        function answerContractQuestion(answer) {
            contractAnswers.push(answer);

            if (contractAnswers.length < contractQuestions.length) {
                showContractQuestions();
            } else {
                // ƒtƒH[ƒ€ƒtƒF[ƒY‚ÉˆÚs
                document.getElementById('contractQuestionContainer').classList.add('hidden');
                document.getElementById('contractFormPhase').classList.remove('hidden');

                // Œ_–ñó‹µ‚É‰‚¶‚Ä“ú•tƒ‰ƒxƒ‹‚ğ•ÏX
                updateDateLabels(contractAnswers[1]);
            }
        }

        // Œ_–ñó‹µ‚É‰‚¶‚Ä“ú•tƒ‰ƒxƒ‹‚ğXV
        function updateDateLabels(status) {
            const completionLabel = document.getElementById('completionDateLabel');
            const paymentLabel = document.getElementById('paymentDateLabel');

            switch(status) {
                case 'Œ_–ñ‘OEŒû“ªŠm–ñÏ':
                case 'Œ_–ñŒãEH–‘O':
                    completionLabel.textContent = 'Š®H—\’è“ú';
                    paymentLabel.textContent = '’…‹à—\’è“ú';
                    break;
                case 'H–’†':
                    completionLabel.textContent = 'Š®H—\’è“ú';
                    paymentLabel.textContent = '’…‹à“ú';
                    break;
                case 'H–Š®—¹Œã':
                    completionLabel.textContent = 'Š®H“ú';
                    paymentLabel.textContent = '’…‹à“ú';
                    break;
                default:
                    completionLabel.textContent = 'Š®H—\’è“ú';
                    paymentLabel.textContent = '’…‹à—\’è“ú';
            }
        }

        // ‚»‚Ì‘¼ƒ`ƒFƒbƒN‚ÌÚ×“ü—Í—“•\¦
        function toggleOtherWorkDetails() {
            const otherCheckbox = document.querySelector('input[name="workType"][value="‚»‚Ì‘¼"]');
            const detailsTextarea = document.getElementById('workDetails');

            if (otherCheckbox && otherCheckbox.checked) {
                detailsTextarea.classList.remove('hidden');
            } else {
                detailsTextarea.classList.add('hidden');
                detailsTextarea.value = '';
            }
        }

        // ‚»‚Ì‘¼•¨Œƒ^ƒCƒv‚ÌÚ×“ü—Í—“•\¦
        function toggleOtherPropertyDetails() {
            const otherCheckbox = document.querySelector('input[name="propertyType"][value="‚»‚Ì‘¼"]');
            const detailsInput = document.getElementById('otherPropertyDetails');

            if (otherCheckbox && otherCheckbox.checked) {
                detailsInput.classList.remove('hidden');
            } else {
                detailsInput.classList.add('hidden');
                detailsInput.value = '';
            }
        }

        // ¬–ñƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
        function closeContractModal() {
            document.getElementById('contractModal').classList.add('hidden');
            document.getElementById('contractQuestionContainer').classList.remove('hidden');
            document.getElementById('contractFormPhase').classList.add('hidden');
            document.getElementById('contractCustomerInfo').classList.add('hidden');
            selectedContractCase = null;
            contractAnswers = [];
            resetContractForm();
        }

        // ƒLƒƒƒ“ƒZƒ‹¿–â•\¦
        function showCancelQuestions() {
            const container = document.getElementById('cancelQuestionContainer');
            const currentQuestion = cancelQuestions[cancelAnswers.length];

            if (currentQuestion) {
                container.innerHTML = `
                    <div class="mb-4">
                        <h4 class="text-lg font-medium mb-3">${currentQuestion.question}</h4>
                        <div class="grid grid-cols-2 gap-3">
                            ${currentQuestion.options.map(option => `
                                <button onclick="answerCancelQuestion('${option}')"
                                        class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500 transition-colors">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
        }

        // ‚»‚Ì‘¼‚Ì——R‚ğ‘—M
        function submitOtherReason() {
            const reasonInput = document.getElementById('otherReasonInput');
            if (reasonInput && reasonInput.value.trim()) {
                cancelAnswers.otherReason = reasonInput.value.trim();
                showAdditionalInfoInput();
            } else {
                alert('——R‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢');
            }
        }

        // ’Ç‰Áî•ñ“ü—Í‰æ–Ê‚ğ•\¦
        function showAdditionalInfoInput() {
            const container = document.getElementById('cancelQuestionContainer');
            container.innerHTML = `
                <div class="mb-4">
                    <h4 class="text-lg font-medium mb-3">’Ç‰Áî•ñ‚ª‚ ‚ê‚Î‚²‹L“ü‚­‚¾‚³‚¢i”CˆÓj</h4>
                    <textarea id="additionalInfoInput" class="w-full px-3 py-2 border rounded-lg" rows="4"
                              placeholder="—áF‚¨‹q—l‚ÌÚ‚µ‚¢ó‹µA¡Œã‚Ì‘Î‰—\’èA‚»‚Ì‘¼•â‘«–€‚È‚Ç"></textarea>
                    <div class="flex gap-3 mt-3">
                        <button onclick="skipAdditionalInfo()" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400">
                            ƒXƒLƒbƒv
                        </button>
                        <button onclick="submitAdditionalInfo()" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                            Š®—¹
                        </button>
                    </div>
                </div>
            `;
        }

        // ’Ç‰Áî•ñ‚ğƒXƒLƒbƒv
        function skipAdditionalInfo() {
            cancelAnswers.additionalInfo = '';
            generateCancelText();
        }

        // ’Ç‰Áî•ñ‚ğ‘—M
        function submitAdditionalInfo() {
            const infoInput = document.getElementById('additionalInfoInput');
            cancelAnswers.additionalInfo = infoInput ? infoInput.value.trim() : '';
            generateCancelText();
        }

        // ƒLƒƒƒ“ƒZƒ‹¿–â‰ñ“š
        function answerCancelQuestion(answer) {
            const container = document.getElementById('cancelQuestionContainer');

            // Å‰‚Ì‰ñ“š‚ğ•Û‘¶
            if (cancelAnswers.length === 0) {
                cancelAnswers.push(answer);

                // ‘I‘ğ‚É‰‚¶‚½’Ç‰Á¿–â‚ğ•\¦
                if (answer === '˜A—‚ªŒq‚ª‚ç‚È‚¢') {
                    container.innerHTML = `
                        <div class="mb-4">
                            <h4 class="text-lg font-medium mb-3">˜A—‚Ìó‹µ‚ğ‘I‘ğ‚µ‚Ä‚­‚¾‚³‚¢</h4>
                            <div class="grid grid-cols-1 gap-2">
                                <button onclick="submitContactStatus('ˆê“x‚àŒq‚ª‚ç‚È‚¢')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">ˆê“x‚àŒq‚ª‚ç‚È‚¢</button>
                                <button onclick="submitContactStatus('Œq‚ª‚Á‚½‚ªƒAƒ|‚ªæ‚ê‚È‚¢')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">Œq‚ª‚Á‚½‚ªƒAƒ|‚ªæ‚ê‚È‚¢</button>
                                <button onclick="submitContactStatus('Œ»’²‘OƒLƒƒƒ“ƒZƒ‹')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">Œ»’²‘OƒLƒƒƒ“ƒZƒ‹</button>
                                <button onclick="submitContactStatus('Œ»’²ŒãŒ©Ï‚à‚è‚¨“n‚µ‘OƒLƒƒƒ“ƒZƒ‹')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">Œ»’²ŒãŒ©Ï‚à‚è‚¨“n‚µ‘OƒLƒƒƒ“ƒZƒ‹</button>
                                <button onclick="submitContactStatus('Œ©Ï‚à‚è‚¨“n‚µŒãƒLƒƒƒ“ƒZƒ‹')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">Œ©Ï‚à‚è‚¨“n‚µŒãƒLƒƒƒ“ƒZƒ‹</button>
                            </div>
                        </div>
                    `;
                } else if (answer === '‘¼Ğ‚ÅŒ_–ñ‚µ‚½' || answer === '‚·‚Å‚É‘¼Ğ‚ÅŒŸ“¢’†') {
                    container.innerHTML = `
                        <div class="mb-4">
                            <h4 class="text-lg font-medium mb-3">${answer === '‘¼Ğ‚ÅŒ_–ñ‚µ‚½' ? '‚Ç‚¿‚ç‚ÅŒ_–ñ‚³‚ê‚Ü‚µ‚½‚©H' : '‚Ç‚¿‚ç‚ÅŒŸ“¢‚³‚ê‚Ä‚¢‚Ü‚·‚©H'}</h4>
                            <div class="grid grid-cols-1 gap-2">
                                <button onclick="submitCompetitor('‚­‚ç‚×‚é‰Á–¿“X')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">‚­‚ç‚×‚é‰Á–¿“X</button>
                                <button onclick="submitCompetitor('•s–¾')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">•s–¾</button>
                                <button onclick="showCompetitorInput()" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">‚»‚Ì‘¼i‰ïĞ–¼‚ğ“ü—Íj</button>
                            </div>
                        </div>
                    `;
                } else if (answer === '‚»‚Ì‘¼') {
                    container.innerHTML = `
                        <div class="mb-4">
                            <h4 class="text-lg font-medium mb-3">‚»‚Ì‘¼‚Ì——R‚ğ‹ï‘Ì“I‚É“ü—Í‚µ‚Ä‚­‚¾‚³‚¢</h4>
                            <textarea id="otherReasonInput" class="w-full px-3 py-2 border rounded-lg" rows="3" placeholder="ƒLƒƒƒ“ƒZƒ‹——R‚ğ“ü—Í"></textarea>
                            <button onclick="submitOtherReason()" class="mt-3 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                Ÿ‚Ö
                            </button>
                        </div>
                    `;
                } else {
                    // ‚»‚Ì‘¼‚Ì——R‚Ìê‡‚Í’Ç‰Áî•ñ“ü—Í‰æ–Ê‚Ö
                    showAdditionalInfoInput();
                }
            }
        }

        // ˜A—ó‹µ‚ğ‘—M
        function submitContactStatus(status) {
            cancelAnswers.contactStatus = status;
            showAdditionalInfoInput();
        }

        // ‹£‡‘¼Ğ‚ğ‘—M
        function submitCompetitor(competitor) {
            cancelAnswers.competitor = competitor;
            showAdditionalInfoInput();
        }

        // ‹£‡‘¼Ğ–¼“ü—Í—“‚ğ•\¦
        function showCompetitorInput() {
            const container = document.getElementById('cancelQuestionContainer');
            container.innerHTML = `
                <div class="mb-4">
                    <h4 class="text-lg font-medium mb-3">Œ_–ñæ‚Ì‰ïĞ–¼‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢</h4>
                    <input type="text" id="competitorNameInput" class="w-full px-3 py-2 border rounded-lg" placeholder="‰ïĞ–¼‚ğ“ü—Í">
                    <button onclick="submitCompetitorName()" class="mt-3 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                        Ÿ‚Ö
                    </button>
                </div>
            `;
        }

        // ‹£‡‘¼Ğ–¼‚ğ‘—M
        function submitCompetitorName() {
            const nameInput = document.getElementById('competitorNameInput');
            if (nameInput && nameInput.value.trim()) {
                cancelAnswers.competitor = nameInput.value.trim();
                showAdditionalInfoInput();
            } else {
                alert('‰ïĞ–¼‚ğ“ü—Í‚µ‚Ä‚­‚¾‚³‚¢');
            }
        }

        // ƒLƒƒƒ“ƒZƒ‹\¿•¶¶¬
        function generateCancelText() {
            const aiResponse = document.getElementById('cancelAIResponse');
            const aiText = document.getElementById('cancelAIText');

            // ƒƒCƒ“——R‚Ìæ“¾
            let mainReason = cancelAnswers[0];
            let detailText = '';

            if (cancelAnswers[0] === '‚»‚Ì‘¼' && cancelAnswers.otherReason) {
                mainReason = cancelAnswers.otherReason;
            } else if (cancelAnswers[0] === '˜A—‚ªŒq‚ª‚ç‚È‚¢' && cancelAnswers.contactStatus) {
                detailText = `€n˜A—ó‹µ: ${cancelAnswers.contactStatus}`;
            } else if ((cancelAnswers[0] === '‘¼Ğ‚ÅŒ_–ñ‚µ‚½' || cancelAnswers[0] === '‚·‚Å‚É‘¼Ğ‚ÅŒŸ“¢’†') && cancelAnswers.competitor) {
                const label = cancelAnswers[0] === '‘¼Ğ‚ÅŒ_–ñ‚µ‚½' ? 'Œ_–ñæ' : 'ŒŸ“¢æ';
                detailText = `€n${label}: ${cancelAnswers.competitor}`;
            }

            // ’Ç‰Áî•ñ‚ª‚ ‚ê‚ÎŠÜ‚ß‚é
            let additionalSection = '';
            if (cancelAnswers.additionalInfo) {
                additionalSection = `€n€ny’Ç‰Áî•ñz€n${cancelAnswers.additionalInfo}`;
            }

            // ——R‚É‰‚¶‚½Ú×•¶‚ğ¶¬
            let detailDescription = '';

            if (cancelAnswers[0] === '˜A—‚ªŒq‚ª‚ç‚È‚¢') {
                if (cancelAnswers.contactStatus === 'ˆê“x‚àŒq‚ª‚ç‚È‚¢') {
                    detailDescription = `‚¨‹q—l‚É‚²˜A—‚ğ‚İ‚Ü‚µ‚½‚ªAc”O‚È‚ª‚çˆê“x‚à‚¨“d˜b‚ªŒq‚ª‚ç‚È‚¢ó‹µ‚Å‚·B`;
                } else if (cancelAnswers.contactStatus === 'Œq‚ª‚Á‚½‚ªƒAƒ|‚ªæ‚ê‚È‚¢') {
                    detailDescription = `‚¨‹q—l‚Æ‚¨“d˜b‚ÍŒq‚ª‚è‚Ü‚µ‚½‚ªAŒ»’n’²¸‚ÌƒAƒ|ƒCƒ“ƒgƒƒ“ƒg‚ªæ‚ê‚È‚¢ó‹µ‚Å‚·B`;
                } else if (cancelAnswers.contactStatus === 'Œ»’²‘OƒLƒƒƒ“ƒZƒ‹') {
                    detailDescription = `Œ»’n’²¸‘O‚Ì’iŠK‚ÅA‚¨‹q—l‚©‚çƒLƒƒƒ“ƒZƒ‹‚Ì‚¨\‚µo‚ª‚ ‚è‚Ü‚µ‚½B`;
                } else if (cancelAnswers.contactStatus === 'Œ»’²ŒãŒ©Ï‚à‚è‚¨“n‚µ‘OƒLƒƒƒ“ƒZƒ‹') {
                    detailDescription = `Œ»’n’²¸‚ÍŠ®—¹‚µ‚Ü‚µ‚½‚ªA‚¨Œ©Ï‚à‚è‚ğ‚¨“n‚µ‚·‚é‘O‚ÉƒLƒƒƒ“ƒZƒ‹‚Æ‚È‚è‚Ü‚µ‚½B`;
                } else if (cancelAnswers.contactStatus === 'Œ©Ï‚à‚è‚¨“n‚µŒãƒLƒƒƒ“ƒZƒ‹') {
                    detailDescription = `‚¨Œ©Ï‚à‚è‚ğ‚¨“n‚µ‚µ‚½ŒãA‚¨‹q—l‚Ì‚²“s‡‚É‚æ‚èƒLƒƒƒ“ƒZƒ‹‚Æ‚È‚è‚Ü‚µ‚½B`;
                }
            } else if (cancelAnswers[0] === '‰¿Ši‚ª‡‚í‚È‚¢') {
                detailDescription = `‚¨Œ©Ï‚à‚è‚ğ‚²ŒŸ“¢‚¢‚½‚¾‚«‚Ü‚µ‚½‚ªA‚²—\Z‚Æ‚ÌŒ“‚Ë‡‚¢‚Å¡‰ñ‚ÍŒ©‘—‚è‚Æ‚È‚è‚Ü‚µ‚½B`;
            } else if (cancelAnswers[0] === '‘¼Ğ‚ÅŒ_–ñ‚µ‚½') {
                detailDescription = `‚¨‹q—l‚Í‘¼Ğ‚Å‚ÌŒ_–ñ‚ğ‘I‘ğ‚³‚ê‚Ü‚µ‚½B`;
            } else if (cancelAnswers[0] === '‚·‚Å‚É‘¼Ğ‚ÅŒŸ“¢’†') {
                detailDescription = `‚¨‹q—l‚ÍŠù‚É‘¼Ğ‚ÅŒŸ“¢‚ği‚ß‚Ä‚¨‚èA‚»‚¿‚ç‚ÅŒˆ’è‚³‚ê‚é—\’è‚Å‚·B`;
            } else if (cancelAnswers[0] === 'H–‚Ì•K—v‚ª‚È‚­‚È‚Á‚½') {
                detailDescription = `‚¨‹q—l‚Ì‚²–î‚É‚æ‚èAH–©‘Ì‚ª•s—v‚Æ‚È‚è‚Ü‚µ‚½B`;
            } else if (cancelAnswers[0] === '‚»‚Ì‘¼' && cancelAnswers.otherReason) {
                detailDescription = `${cancelAnswers.otherReason}`;
            } else {
                detailDescription = `‚¨‹q—l‚Ì‚²“s‡‚É‚æ‚èAˆÄŒ‚ğƒLƒƒƒ“ƒZƒ‹‚³‚¹‚Ä‚¢‚½‚¾‚­‚±‚Æ‚É‚È‚è‚Ü‚µ‚½B`;
            }

            // ƒeƒLƒXƒg¶¬
            const cancelText = `yƒLƒƒƒ“ƒZƒ‹\¿z€n€n` +
                `ˆÄŒ–¼: ${selectedCancelCase.name}€n` +
                `•¨Œ: ${selectedCancelCase.propertyType || '–¢İ’è'}€n` +
                `ƒGƒŠƒA: ${selectedCancelCase.location || selectedCancelCase.area || '–¢İ’è'}€n€n` +
                `yƒLƒƒƒ“ƒZƒ‹——Rz€n` +
                `${mainReason}${detailText}€n€n` +
                `yÚ×z€n` +
                `${detailDescription}€n€n` +
                `¡Œã‚à—ÇD‚ÈŠÖŒW‚ğˆÛ‚Å‚«‚é‚æ‚¤A“KØ‚ÈƒtƒHƒ[ƒAƒbƒv‚ğS‚ª‚¯‚Ü‚·B` +
                additionalSection;

            aiText.textContent = cancelText;
            aiResponse.classList.remove('hidden');
            document.getElementById('cancelQuestionContainer').innerHTML = '';
        }

        // ƒLƒƒƒ“ƒZƒ‹\¿•¶Ä¶¬
        function regenerateCancelText() {
            // Ä“x¿–â‚©‚çŠJn
            cancelAnswers = [];
            document.getElementById('cancelAIResponse').classList.add('hidden');
            showCancelQuestions();
        }

        // ƒLƒƒƒ“ƒZƒ‹\¿‘—M
        function submitCancelRequest() {
            alert('ƒLƒƒƒ“ƒZƒ‹\¿‚ª‘—M‚³‚ê‚Ü‚µ‚½');
            closeCancelModal();
            // ÀÛ‚Ìˆ—‚ğ‚±‚±‚É’Ç‰Á
        }

        // ƒLƒƒƒ“ƒZƒ‹ƒ‚[ƒ_ƒ‹‚ğ•Â‚¶‚é
        function closeCancelModal() {
            document.getElementById('cancelModal').classList.add('hidden');
            selectedCancelCase = null;
            cancelAnswers = [];
        }

        // ƒtƒ@ƒCƒ‹ƒAƒbƒvƒ[ƒhˆ—
        function handleFileUpload(event, type) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const previewId = type === 'estimate' ? 'estimatePreview' : 'receiptPreview';
                    const preview = document.getElementById(previewId);

                    if (file.type.includes('image')) {
                        preview.innerHTML = `<img src="${e.target.result}" class="w-full h-32 object-cover rounded">`;
                    } else {
                        preview.innerHTML = `
                            <div class="flex items-center justify-center">
                                <svg class="w-12 h-12 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span class="ml-2 text-sm">${file.name}</span>
                            </div>
                        `;
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        // ¬–ñ•ñƒtƒH[ƒ€ƒŠƒZƒbƒg
        function resetContractForm() {
            const form = document.getElementById('contractReportForm');
            if (form) {
                form.reset();
            }
            document.getElementById('workDetails').classList.add('hidden');
            document.getElementById('otherPropertyDetails').classList.add('hidden');
            document.getElementById('estimatePreview').innerHTML = `
                <svg class="w-12 h-12 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            `;
            document.getElementById('receiptPreview').innerHTML = `
                <svg class="w-12 h-12 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            `;
        }

        // ¬–ñ•ñƒtƒH[ƒ€‘—M
        document.addEventListener('DOMContentLoaded', function() {
            const contractForm = document.getElementById('contractReportForm');
            if (contractForm) {
                contractForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    // ‘I‘ğ‚³‚ê‚½{H“à—e‚ğæ“¾
                    const selectedWorkTypes = [];
                    document.querySelectorAll('input[name="workType"]:checked').forEach(checkbox => {
                        selectedWorkTypes.push(checkbox.value);
                    });

                    // ‘I‘ğ‚³‚ê‚½•¨Œƒ^ƒCƒv‚ğæ“¾
                    const selectedPropertyTypes = [];
                    document.querySelectorAll('input[name="propertyType"]:checked').forEach(checkbox => {
                        selectedPropertyTypes.push(checkbox.value);
                    });

                    // ƒtƒH[ƒ€ƒf[ƒ^‚ğûW
                    const formData = {
                        reportType: contractAnswers[0],
                        status: contractAnswers[1],
                        caseName: selectedContractCase ? selectedContractCase.name : '',
                        caseAddress: selectedContractCase ? (selectedContractCase.address || selectedContractCase.location || selectedContractCase.area) : '',
                        amount: document.getElementById('contractAmount').value,
                        paymentDate: document.getElementById('paymentDate').value,
                        completionDate: document.getElementById('completionDate').value,
                        buildingFloors: document.getElementById('buildingFloors').value,
                        propertyTypes: selectedPropertyTypes,
                        otherPropertyDetails: document.getElementById('otherPropertyDetails').value,
                        workTypes: selectedWorkTypes,
                        workDetails: document.getElementById('workDetails').value,
                        notes: document.getElementById('contractNotes').value
                    };

                    console.log('¬–ñ•ñƒf[ƒ^:', formData);
                    alert(`${contractAnswers[0]}‚ª‘—M‚³‚ê‚Ü‚µ‚½`);
                    closeContractModal();
                });
            }

            // ˆê’â~‚Ì“ú•t•ÏX‚É‘¦•Û‘¶

            // ƒZƒNƒVƒ‡ƒ“•\¦‚ÉˆÄŒ‚ğ“Ç‚İ‚Ş
            const originalShowSection = window.showSection;
            window.showSection = function(sectionName) {
                if (typeof originalShowSection === 'function') {
                    originalShowSection(sectionName);
                }

                if (sectionName === 'cancel') {
                    displayCancelCases();
                } else if (sectionName === 'contract') {
                    displayContractCases();
                }
            };
        });
    </script>
    <style>
        @keyframes slide-in {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slide-out {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        .animate-slide-in { animation: slide-in 0.3s ease-out; }
        .animate-slide-out { animation: slide-out 0.3s ease-out; }
    </style>

    <!-- ‘åŒ^•¨Œ‚ÌĞ‰î—¿‚É‚Â‚¢‚Ä‚Ìƒ‚[ƒ_ƒ‹ -->
    <div id="largePropertyModal" class="fixed inset-0 z-50 hidden">
        <!-- ƒI[ƒo[ƒŒƒC -->
        <div class="absolute inset-0 bg-black bg-opacity-50"></div>

        <!-- ƒ‚[ƒ_ƒ‹–{‘Ì -->
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full relative">
                <!-- •Â‚¶‚éƒ{ƒ^ƒ“ -->
                <button onclick="closeLargePropertyModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <!-- ƒwƒbƒ_[ -->
                <div class="bg-white border-b px-8 py-6 rounded-t-xl">
                    <h3 class="text-xl font-bold text-gray-800 flex items-center">
                        ?? ‘åŒ^•¨Œ‚ÌĞ‰î—¿‚É‚Â‚¢‚Ä
                    </h3>
                </div>

                <!-- ƒRƒ“ƒeƒ“ƒc -->
                <div class="px-8 py-6 space-y-4">
                    <!-- 3ŠKˆÈã‚ğ‘I‘ğ‚µ‚½ê‡ -->
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded">
                        <div class="flex items-start">
                            <span class="text-yellow-500 mr-2">??</span>
                            <div>
                                <h4 class="font-bold text-gray-800 mb-2">3ŠKˆÈã‚ğ‘I‘ğ‚µ‚½ê‡</h4>
                                <p class="text-gray-700">
                                    Šî–{Ğ‰î—¿‚ª <span class="line-through text-gray-500">\20,000</span> ‚©‚ç <span class="font-bold text-green-600 text-lg">\30,000</span> ‚É‚È‚è‚Ü‚·
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 3ŠKˆÈã‚ğ‘I‘ğ‚µ‚Ä‚¢‚é‚Æ -->
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                        <div class="flex items-start">
                            <span class="text-yellow-500 mr-2">??</span>
                            <div>
                                <h4 class="font-bold text-gray-800 mb-2">3ŠKˆÈã‚ğ‘I‘ğ‚µ‚Ä‚¢‚é‚Æ</h4>
                                <p class="text-gray-700">
                                    2ŠKˆÈ‰º‚Å‚à‘åŒ^‚Æ”»’f‚³‚ê‚ê‚Î©“®‚ÅĞ‰î—¿‚ª<span class="font-bold text-red-600">\30,000</span>‚É‚È‚è‚Ü‚·
                                </p>
                                <p class="text-sm text-gray-600 mt-2">
                                    i3ŠKˆÈã‚Å‚àŒ©Ï‚à‚èŠó–]‰ÓŠ‚ª¬‚³‚¢ê‡A©“®“I‚ÉŒ¸Šz‚³‚ê‚Ä©“®”zM‚³‚ê‚é–‚ª‚ ‚è‚Ü‚·‚ªAÅI“I‚È‹àŠzİ’è‚ÍŠ”®‰ïĞŠO•Ç“h‘•‚­‚ç‚×‚é‰^‰c–{•”‚Ì”»’f‚É‚æ‚é‚à‚Ì‚Æ‚µA‰Á–¿“X‚Í‚±‚ê‚É“¯ˆÓ‚·‚é‚à‚Ì‚Æ‚µ‚Ü‚·j
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 2ŠKˆÈ‰º‚ğ‘I‘ğ‚µ‚Ä‚¢‚ê‚Î -->
                    <div class="bg-green-50 border-l-4 border-green-400 p-4 rounded">
                        <div class="flex items-start">
                            <span class="text-yellow-500 mr-2">??</span>
                            <div>
                                <h4 class="font-bold text-gray-800 mb-2">2ŠKˆÈ‰º‚ğ‘I‘ğ‚µ‚Ä‚¢‚ê‚Î</h4>
                                <p class="text-gray-700">
                                    ’Êí‚ÌŒËŒš‚Å—¿‹à“K—p‚Æ‚È‚èA<span class="font-bold text-green-600">\30,000‚Å©“®”zM‚³‚ê‚é‚±‚Æ‚Í‚ ‚è‚Ü‚¹‚ñ</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ƒtƒbƒ^[ -->
                <div class="px-8 pb-6">
                    <button onclick="closeLargePropertyModal()" class="w-full bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors font-semibold text-base">
                        —‰ğ‚µ‚Ü‚µ‚½
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ’P•i€–Ú‘I‘ğ‚Ìƒ‚[ƒ_ƒ‹ -->
    <div id="singleItemModal" class="fixed inset-0 z-50 hidden">
        <!-- ƒI[ƒo[ƒŒƒC -->
        <div class="absolute inset-0 bg-black bg-opacity-50"></div>

        <!-- ƒ‚[ƒ_ƒ‹–{‘Ì -->
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full relative">
                <!-- •Â‚¶‚éƒ{ƒ^ƒ“ -->
                <button onclick="closeSingleItemModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <!-- ƒwƒbƒ_[ -->
                <div class="bg-white border-b px-8 py-6 rounded-t-xl">
                    <h3 class="text-xl font-bold text-gray-800">
                        ?? 1ĞĞ‰î‚Ì—¿‹à‚É‚Â‚¢‚Ä
                    </h3>
                </div>

                <!-- ƒRƒ“ƒeƒ“ƒc -->
                <div class="px-8 py-6">
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded">
                        <p class="text-gray-700 text-base">
                            ’P•i€–Ú‚Í‘ŠŒ©Ï‚à‚è‚Ì—¿‹à‚Å‚·B
                        </p>
                        <p class="text-gray-700 text-base mt-2">
                            1ĞĞ‰î‚Í‚·‚×‚Ä<span class="font-bold text-black text-lg">\20,000</span>‚Æ‚È‚è‚Ü‚·B
                        </p>
                    </div>
                </div>

                <!-- ƒtƒbƒ^[ -->
                <div class="px-8 pb-6">
                    <button onclick="closeSingleItemModal()" class="w-full bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors font-semibold text-base">
                        Šm”F‚µ‚Ü‚µ‚½
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ‰‰ñƒƒOƒCƒ“‚Ì‰Šúİ’è
        function initializeFirstLoginSettings() {
            console.log('[initializeFirstLoginSettings] ŠJn');
            console.log('[initializeFirstLoginSettings] window.merchantData:', window.merchantData ? 'exists' : 'null');

            // ‰‰ñƒƒOƒCƒ“‚©‚Ç‚¤‚©‚ğƒ`ƒFƒbƒNilocalStorage‚É•Û‘¶j
            const isInitialized = localStorage.getItem('autodeliveryInitialized');

            if (!isInitialized) {
                console.log('[‰‰ñƒƒOƒCƒ“] ©“®”zMİ’è‚ğ‰Šú‰»‚µ‚Ü‚·');

                // ƒXƒe[ƒ^ƒX‚ğˆê’â~’†‚Éİ’èiŠù‚ÉHTML‚ÅƒfƒtƒHƒ‹ƒgİ’èÏ‚İj
                const statusSelect = document.getElementById('merchantStatus');
                if (statusSelect) {
                    statusSelect.value = 'paused';
                    updateMerchantStatus();
                }

                // ‰Šú‰»Š®—¹ƒtƒ‰ƒO‚ğ•Û‘¶
                localStorage.setItem('autodeliveryInitialized', 'true');
                console.log('[‰‰ñƒƒOƒCƒ“] ‰Šú‰»Š®—¹');
            }

            // –ˆ‰ñÀs: ˆê’â~ŠJn“ú‚ğ¡“ú‚Éİ’èiƒfƒtƒHƒ‹ƒg•\¦j
            const today = new Date().toISOString().split('T')[0];
            const startDateInput = document.getElementById('pauseStartDate');
            if (startDateInput && !startDateInput.value) {
                startDateInput.value = today;
            }

            // –ˆ‰ñÀs: ©“®”zMİ’è‚ğƒXƒvƒŒƒbƒhƒV[ƒg‚©‚ç“Ç‚İ‚İ
            if (window.merchantData) {
                console.log('[initializeFirstLoginSettings] window.merchantData‚ª‘¶İ‚µ‚Ü‚·BloadAutodeliverySettings‚ğŒÄ‚Ño‚µ‚Ü‚·B');
                loadAutodeliverySettings(window.merchantData);
            } else {
                console.warn('[initializeFirstLoginSettings] window.merchantData‚ª‘¶İ‚µ‚Ü‚¹‚ñI');
                // merchantData‚ª‚È‚¢ê‡‚Í‹óƒf[ƒ^‚Å‰Šú‰»
                loadAutodeliverySettings({});
            }
        }

        // ©“®”zMİ’è—p‚Éƒf[ƒ^‚ğæ“¾
        async function fetchMerchantDataForAutodelivery(merchantId) {
            console.log('[fetchMerchantDataForAutodelivery] Fetching data for:', merchantId);

            try {
                // JSONP ‚Åƒf[ƒ^æ“¾
                const result = await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_autodelivery_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const script = document.createElement('script');

                    window[callbackName] = (data) => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        resolve(data);
                    };

                    script.src = `${GAS_URL}?action=getMerchantData&merchantId=${encodeURIComponent(merchantId)}&callback=${callbackName}`;
                    script.onerror = () => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        reject(new Error('JSONP request failed'));
                    };
                    document.body.appendChild(script);
                });

                if (result.success && result.data) {
                    window.merchantData = result.data;
                    window.merchantId = merchantId;
                    console.log('[fetchMerchantDataForAutodelivery] Data loaded successfully');
                    console.log('[fetchMerchantDataForAutodelivery] Data:', result.data);

                    // ©“®”zMİ’è‚ğ“Ç‚İ‚Ş
                    loadAutodeliverySettings(result.data);
                } else {
                    console.error('[fetchMerchantDataForAutodelivery] Failed to load data:', result.error);
                    // ƒGƒ‰[‚àƒfƒtƒHƒ‹ƒgİ’è‚Å‰Šú‰»
                    loadAutodeliverySettings({});
                }
            } catch (error) {
                console.error('[fetchMerchantDataForAutodelivery] Error:', error);
                // ƒGƒ‰[‚àƒfƒtƒHƒ‹ƒgİ’è‚Å‰Šú‰»
                loadAutodeliverySettings({});
            }
        }

        // ƒXƒvƒŒƒbƒhƒV[ƒg‚©‚ç©“®”zMİ’è‚ğ“Ç‚İ‚Ş
        function loadAutodeliverySettings(data) {
            console.log('[loadAutodeliverySettings] Loading settings:', data);
            console.log('[loadAutodeliverySettings] Å‘å‘Î‰ŠK” key check:', data['Å‘å‘Î‰ŠK”']);
            console.log('[loadAutodeliverySettings] All keys:', Object.keys(data));

            // ‘Î‰•¨Œí•Êi•¡”‚Ì—ñ–¼‚É‘Î‰j
            // ‚Ü‚¸‘S‚Ä‚Ì•¨Œí•Êƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ğƒŠƒZƒbƒg
            const autodeliverySection = document.getElementById('autodeliverySection');
            if (autodeliverySection) {
                autodeliverySection.querySelectorAll('input[name="propertyType"]').forEach(cb => {
                    cb.checked = false;
                });
            }

            // AB—ñ‚Ìƒf[ƒ^‚ğæ“¾i•¡”‚Ì—ñ–¼ƒpƒ^[ƒ“‚É‘Î‰j
            const propertyTypesData = data['‘Î‰‰Â”\•¨Œí•Ê'] || data['‘Î‰•¨Œí•Ê'] || '';
            console.log('[loadAutodeliverySettings] ‘Î‰‰Â”\•¨Œí•Ê data:', propertyTypesData);
            console.log('[loadAutodeliverySettings] data["‘Î‰‰Â”\•¨Œí•Ê"]:', data['‘Î‰‰Â”\•¨Œí•Ê']);
            console.log('[loadAutodeliverySettings] data["‘Î‰•¨Œí•Ê"]:', data['‘Î‰•¨Œí•Ê']);

            if (propertyTypesData) {
                const propertyTypes = propertyTypesData.split(',').map(s => s.trim());
                console.log('[loadAutodeliverySettings] Property types array:', propertyTypes);
                console.log('[loadAutodeliverySettings] Property types length:', propertyTypes.length);
                console.log('[loadAutodeliverySettings] Property types JSON:', JSON.stringify(propertyTypes));

                const propertyMap = {
                    'ŒËŒš‚ÄZ‘î': 'house',
                    'ƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“': 'apartment',
                    '“X•ÜE––±Š': 'commercial',
                    '“X•Ü': 'commercial',  // ƒXƒvƒŒƒbƒhƒV[ƒg‚É•Û‘¶‚³‚ê‚Ä‚¢‚é’ZkŒ`
                    'HêE‘qŒÉ': 'factory',
                    'Hê': 'factory'  // ’ZkŒ`‚àƒTƒ|[ƒg
                };
                propertyTypes.forEach(type => {
                    const value = propertyMap[type];
                    if (value) {
                        const checkbox = autodeliverySection ?
                            autodeliverySection.querySelector(`input[name="propertyType"][value="${value}"]`) :
                            document.querySelector(`input[name="propertyType"][value="${value}"]`);
                        if (checkbox) {
                            checkbox.checked = true;
                            console.log('[loadAutodeliverySettings] Checked property type:', type, '¨', value);
                        } else {
                            console.warn('[loadAutodeliverySettings] Checkbox not found for:', type, '¨', value);
                        }
                    } else {
                        console.warn('[loadAutodeliverySettings] No mapping for:', type);
                    }
                });
            }

            // Å‘å‘Î‰ŠK”i—á: "ŒËŒš‚ÄZ‘î(3ŠK‚Ü‚Å),ƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“(3ŠK‚Ü‚Å)"j
            if (data['Å‘å‘Î‰ŠK”']) {
                let maxFloorsData = data['Å‘å‘Î‰ŠK”'];
                console.log('[loadAutodeliverySettings] Raw max floors data:', maxFloorsData);

                // compressedŒ`®‚Ìê‡‚Ífull‚Ì’l‚ğ’Šo
                if (maxFloorsData.includes('{"type":"compressed","full":"')) {
                    const match = maxFloorsData.match(/"full":"([^"]+)"/);
                    if (match) {
                        maxFloorsData = match[1];
                        console.log('[loadAutodeliverySettings] Extracted max floors:', maxFloorsData);
                    }
                }

                console.log('[loadAutodeliverySettings] Final max floors data:', maxFloorsData);

                const propertyTypeMap = {
                    'ŒËŒš‚ÄZ‘î': 'house',
                    'ƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“': 'apartment',
                    '“X•ÜE––±Š': 'commercial',
                    'HêE‘qŒÉ': 'factory'
                };

                // "ŒËŒš‚ÄZ‘î(3ŠK‚Ü‚Å),ƒAƒp[ƒgEƒ}ƒ“ƒVƒ‡ƒ“(10ŠKˆÈã‚Ü‚Å)" ‚ğƒp[ƒX
                maxFloorsData.split(',').forEach(entry => {
                    const match = entry.trim().match(/^(.+?)€((.+?)‚Ü‚Å€)$/);
                    if (match) {
                        const propertyType = match[1];
                        const floorText = match[2]; // "3ŠK" or "10ŠKˆÈã" or "4ŠKˆÈã"
                        const checkboxValue = propertyTypeMap[propertyType];

                        if (checkboxValue) {
                            // ƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ğŒ©‚Â‚¯‚ÄA‚»‚Ì—×‚Ìselect‚ğæ“¾
                            const checkbox = document.querySelector(`input[name="propertyType"][value="${checkboxValue}"]`);
                            if (checkbox) {
                                const label = checkbox.closest('label');
                                const select = label.querySelector('select');
                                if (select) {
                                    // option‚ÌƒeƒLƒXƒg‚Åˆê’v‚·‚é‚à‚Ì‚ğ’T‚·
                                    let matched = false;
                                    for (let i = 0; i < select.options.length; i++) {
                                        if (select.options[i].text === floorText) {
                                            select.selectedIndex = i;
                                            matched = true;
                                            console.log('[loadAutodeliverySettings] Set max floors:', propertyType, '=', floorText, '(option text match)');
                                            break;
                                        }
                                    }
                                    if (!matched) {
                                        console.warn('[loadAutodeliverySettings] No matching option for:', propertyType, floorText);
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // ’z”N”‘Î‰”ÍˆÍi—á: "{min=0, max=50}"j
            if (data['’z”N”‘Î‰”ÍˆÍ']) {
                try {
                    const ageRange = data['’z”N”‘Î‰”ÍˆÍ'];
                    // JSON•—‚Ì•¶š—ñ‚ğƒp[ƒX
                    const minMatch = ageRange.match(/min=(€d+)/);
                    const maxMatch = ageRange.match(/max=(€d+)/);
                    if (minMatch && maxMatch) {
                        const min = parseInt(minMatch[1]);
                        const max = parseInt(maxMatch[1]);
                        document.getElementById('ageRangeMinAuto').textContent = min;
                        document.getElementById('ageRangeMaxAuto').textContent = max;

                        // ƒXƒ‰ƒCƒ_[‚Ì’l‚àİ’èimin/max‘®«‚ÅŠmÀ‚É¯•Êj
                        const minSlider = document.querySelector('#autodeliverySection input[type="range"][min="0"][max="50"]');
                        const maxSlider = document.querySelector('#autodeliverySection input[type="range"][min="0"][max="100"]');

                        console.log('[loadAutodeliverySettings] Found minSlider:', !!minSlider, 'maxSlider:', !!maxSlider);

                        if (minSlider && maxSlider) {
                            minSlider.value = min;
                            maxSlider.value = max;

                            console.log('[loadAutodeliverySettings] Set slider values - min:', min, 'max:', max);

                            // DOM‚ªŠ®‘S‚ÉXV‚³‚ê‚Ä‚©‚çƒCƒxƒ“ƒg‚ğ”­‰Î
                            setTimeout(() => {
                                minSlider.dispatchEvent(new Event('input', { bubbles: true }));
                                maxSlider.dispatchEvent(new Event('input', { bubbles: true }));
                                minSlider.dispatchEvent(new Event('change', { bubbles: true }));
                                maxSlider.dispatchEvent(new Event('change', { bubbles: true }));

                                // ‹­§“I‚ÉupdateAgeRangeAuto()‚ğŒÄ‚Ño‚µ
                                if (typeof updateAgeRangeAuto === 'function') {
                                    updateAgeRangeAuto();
                                }

                                console.log('[loadAutodeliverySettings] Triggered events and updateAgeRangeAuto');
                            }, 100);
                        } else {
                            console.error('[loadAutodeliverySettings] Sliders not found!');
                        }
                    }
                } catch (e) {
                    console.error('’z”N”ƒp[ƒXƒGƒ‰[:', e);
                }
            }

            // {H‰ÓŠiƒXƒvƒŒƒbƒhƒV[ƒg‚Ì’l ¨ HTML value ‚Ìƒ}ƒbƒsƒ“ƒOj
            if (data['{H‰ÓŠ']) {
                let locationsStr = data['{H‰ÓŠ'];
                console.log('[loadAutodeliverySettings] Raw construction types data:', locationsStr);

                // compressedŒ`®‚Ìê‡‚Ífull‚Ì’l‚ğ’Šo
                if (locationsStr.includes('{"type":"compressed","full":"')) {
                    const match = locationsStr.match(/"full":"([^"]+)"/);
                    if (match) {
                        locationsStr = match[1];
                        console.log('[loadAutodeliverySettings] Extracted full data:', locationsStr);
                    }
                }

                const locations = locationsStr.split(',').map(s => s.trim()).filter(l => l);
                console.log('[loadAutodeliverySettings] Parsed locations:', locations);

                // ƒXƒvƒV‚Ì{H‰ÓŠƒf[ƒ^ ¨ HTMLƒ`ƒFƒbƒNƒ{ƒbƒNƒXvalue‚Ö‚Ìƒ}ƒbƒsƒ“ƒO
                // VƒVƒXƒeƒ€: ƒXƒvƒV‚É‚ÍŠ®‘S‚ÈŒ`®‚Å•Û‘¶‚³‚ê‚é‚½‚ßAŠî–{“I‚ÉŠ®‘Sˆê’v
                // ‹Œƒf[ƒ^‚Æ‚ÌŒİŠ·«‚Ì‚½‚ßA—ªÌƒ}ƒbƒsƒ“ƒO‚à•Û
                const locationMap = {
                    // Š®‘Sˆê’viVƒtƒH[ƒ}ƒbƒgj- ƒXƒvƒV‚Ì’l = HTML‚Ì’l
                    'ŠO•Ç“h‘•': 'ŠO•Ç“h‘•',
                    'ŠO•ÇƒJƒo[H–@': 'ŠO•ÇƒJƒo[H–@',
                    'ŠO•Ç’£‘Ö‚¦': 'ŠO•Ç’£‘Ö‚¦',
                    '‰®ª“h‘•iŠO•ÇH–ŠÜ‚Şj': '‰®ª“h‘•iŠO•ÇH–ŠÜ‚Şj',
                    '‰®ã–h…iŠO•ÇH–ŠÜ‚Şj': '‰®ã–h…iŠO•ÇH–ŠÜ‚Şj',
                    '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™': '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™',
                    '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢': '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢',
                    '‰®ªƒJƒo[H–@': '‰®ªƒJƒo[H–@',
                    'ŠO•Ç•âCiŠO•ÇH–ŠÜ‚Şj': 'ŠO•Ç•âCiŠO•ÇH–ŠÜ‚Şj',
                    '‰®ª•âCiŠO•ÇH–ŠÜ‚Şj': '‰®ª•âCiŠO•ÇH–ŠÜ‚Şj',
                    'ƒxƒ‰ƒ“ƒ_–h…iŠO•ÇH–ŠÜ‚Şj': 'ƒxƒ‰ƒ“ƒ_–h…iŠO•ÇH–ŠÜ‚Şj',
                    '“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒjiŠO•ÇH–ŠÜ‚Şj': '“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒjiŠO•ÇH–ŠÜ‚Şj',
                    '“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™jiŠO•ÇH–ŠÜ‚Şj': '“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™jiŠO•ÇH–ŠÜ‚Şj',
                    'ŠO•Ç‰J˜R‚èC‘UiŠO•ÇH–ŠÜ‚Şj': 'ŠO•Ç‰J˜R‚èC‘UiŠO•ÇH–ŠÜ‚Şj',
                    '‰®ª‰J˜R‚èC‘Ui‰®ªH–ŠÜ‚Şj': '‰®ª‰J˜R‚èC‘Ui‰®ªH–ŠÜ‚Şj',
                    '‰®ª“h‘•’P•i': '‰®ª“h‘•’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    '‰®ã–h…’P•i': '‰®ã–h…’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    'ŠO•Ç•âC’P•i': 'ŠO•Ç•âC’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    '‰®ª•âC’P•i': '‰®ª•âC’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    'ƒxƒ‰ƒ“ƒ_–h…’P•i': 'ƒxƒ‰ƒ“ƒ_–h…’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    'ŠO•Ç‰J˜R‚èC‘U’P•i': 'ŠO•Ç‰J˜R‚èC‘U’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    '‰®ª‰J˜R‚èC‘U’P•i': '‰®ª‰J˜R‚èC‘U’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',

                    // ‹Œƒf[ƒ^‚Æ‚ÌŒİŠ·«i—ªÌ ¨ Š®‘S–¼Ìj
                    '‰®ª“h‘•': '‰®ª“h‘•iŠO•ÇH–ŠÜ‚Şj',
                    '‰®ã–h…': '‰®ã–h…iŠO•ÇH–ŠÜ‚Şj',
                    'ŠO•Ç•âC': 'ŠO•Ç•âCiŠO•ÇH–ŠÜ‚Şj',
                    '‰®ª•âC': '‰®ª•âCiŠO•ÇH–ŠÜ‚Şj',
                    'ƒxƒ‰ƒ“ƒ_–h…': 'ƒxƒ‰ƒ“ƒ_–h…iŠO•ÇH–ŠÜ‚Şj',
                    '“à‘•…‰ñ‚è': '“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒjiŠO•ÇH–ŠÜ‚Şj',
                    '“à‘•': '“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™jiŠO•ÇH–ŠÜ‚Şj',
                    '‰®ª‰J˜R‚èC‘U': '‰®ª‰J˜R‚èC‘Ui‰®ªH–ŠÜ‚Şj',
                    'ŠO•Ç‰J˜R‚èC‘U': 'ŠO•Ç‰J˜R‚èC‘UiŠO•ÇH–ŠÜ‚Şj',
                    '‰®ª’£‚è‘Ö‚¦EƒJƒo[': '‰®ªƒJƒo[H–@',
                    '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö': '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™',
                    '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦': '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™'
                };
                locations.forEach(loc => {
                    const mappedValue = locationMap[loc] || loc;
                    const checkbox = document.querySelector(`input[name="constructionTypes"][value="${mappedValue}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        console.log('[loadAutodeliverySettings] Checked:', mappedValue);
                    } else {
                        console.warn('[loadAutodeliverySettings] Not found:', loc, '¨', mappedValue);
                    }
                });
            }

            // “Áê‘Î‰€–ÚiƒXƒvƒŒƒbƒhƒV[ƒg‚Ì’l ¨ HTML value ‚Ìƒ}ƒbƒsƒ“ƒOj
            if (data['“Áê‘Î‰€–Ú']) {
                let specialStr = data['“Áê‘Î‰€–Ú'];
                console.log('[loadAutodeliverySettings] Raw special services data:', specialStr);

                // compressedŒ`®‚Ìê‡‚Ífull‚Ì’l‚ğ’Šo
                if (specialStr.includes('{"type":"compressed","full":"')) {
                    const match = specialStr.match(/"full":"([^"]+)"/);
                    if (match) {
                        specialStr = match[1];
                        console.log('[loadAutodeliverySettings] Extracted special services:', specialStr);
                    }
                }

                const specialItems = specialStr.split(',').map(s => s.trim()).filter(s => s);
                const specialMap = {
                    // Š®‘Sˆê’viVƒtƒH[ƒ}ƒbƒgj - ƒXƒvƒV‚Ì’l = HTML‚Ì’liŠG•¶š•t‚«j
                    'Õ”ME’f”M“h—¿’ñˆÄ‰Â”\': '?? Õ”ME’f”M“h—¿’ñˆÄ‰Â”\',
                    '—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]': '?? —§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]',
                    '‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â': '?? ‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â',
                    'ƒGƒNƒXƒeƒŠƒAi’ëE’“ÔêEŠO\j': '?? ƒGƒNƒXƒeƒŠƒAi’ëE’“ÔêEŠO\j',
                    '‘¾—zŒõƒpƒlƒ‹’E’…i“P‹ŠÜ‚Şj': '?? ‘¾—zŒõƒpƒlƒ‹’E’…i“P‹ŠÜ‚Şj',
                    '’ñŒgæƒ[ƒ“—L‚è': '?? ’ñŒgæƒ[ƒ“—L‚è',
                    'ƒNƒŒƒWƒbƒgƒJ[ƒh•¥‚¢‰Â': '?? ƒNƒŒƒWƒbƒgƒJ[ƒh•¥‚¢‰Â',
                    '‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg': '?? ‰ÎĞ•ÛŒ¯\¿ƒTƒ|[ƒg',
                    '•¬‹à\¿ƒTƒ|[ƒg': '?? •¬‹à\¿ƒTƒ|[ƒg',
                    'Œš’z‹–‰ÂØ': '?? Œš’z‹–‰ÂØ',
                    'ŒõG”}“h—¿’ñˆÄ‰Â': '? ŒõG”}“h—¿’ñˆÄ‰Â',
                    '•ªŠ„•¥‚¢ƒvƒ‰ƒ“—L': '?? •ªŠ„•¥‚¢ƒvƒ‰ƒ“—L',

                    // ‹Œƒf[ƒ^‚Æ‚ÌŒİŠ·«iŠ‡ŒÊ‚È‚µ ¨ Š‡ŒÊ•t‚«A’†“_‚È‚µ ¨ ’†“_‚ ‚èj
                    'Õ”M’f”M“h—¿’ñˆÄ‰Â”\': '?? Õ”ME’f”M“h—¿’ñˆÄ‰Â”\',
                    '—§‚¿‰ï‚¢‚È‚µŒ©Ï‚à‚èè“n': '?? —§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]',
                    '‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µŒ©Ï‚à‚è—X‘—': '?? ‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â',
                    '‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µŒ©': '?? ‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â',
                    'ƒGƒNƒXƒeƒŠƒA': '?? ƒGƒNƒXƒeƒŠƒAi’ëE’“ÔêEŠO\j',
                    '‘¾—zŒõƒpƒlƒ‹’E’…': '?? ‘¾—zŒõƒpƒlƒ‹’E’…i“P‹ŠÜ‚Şj'
                };
                specialItems.forEach(item => {
                    const mappedValue = specialMap[item] || item;
                    const checkbox = document.querySelector(`input[name="specialServices"][value="${mappedValue}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        console.log('[loadAutodeliverySettings] Special checked:', mappedValue);
                    } else {
                        console.warn('[loadAutodeliverySettings] Special not found:', item);
                    }
                });

                // ƒvƒŒƒrƒ…[‚ğXV
                const previewFeaturesList = document.getElementById('previewFeaturesList');
                if (previewFeaturesList) {
                    previewFeaturesList.innerHTML = '';
                    const excludeItems = ['—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚èè“n‚µŠó–]', '‰“•û‚É‚Â‚«—§‚¿‰ï‚¢‚È‚µEŒ©Ï‚à‚è—X‘—E“d˜b‚Å¤’k‰Â'];

                    const colors = [
                        'from-blue-50 to-blue-100',
                        'from-purple-50 to-purple-100',
                        'from-green-50 to-green-100',
                        'from-pink-50 to-pink-100',
                        'from-yellow-50 to-yellow-100',
                        'from-indigo-50 to-indigo-100'
                    ];

                    let colorIndex = 0;
                    specialItems.forEach(item => {
                        const mappedValue = specialMap[item] || item;

                        // œŠO€–Ú‚ğƒXƒLƒbƒv
                        if (excludeItems.some(excludeItem => mappedValue.includes(excludeItem))) {
                            return;
                        }

                        // ŠG•¶š‚ÆƒeƒLƒXƒg‚ğ•ª—£
                        const parts = mappedValue.split(' ');
                        const emoji = parts[0];
                        const text = parts.slice(1).join(' ');

                        const div = document.createElement('div');
                        div.className = `bg-gradient-to-br ${colors[colorIndex % colors.length]} rounded-xl p-4`;
                        div.innerHTML = `
                            <div class="text-3xl mb-2">${emoji}</div>
                            <h4 class="font-semibold text-gray-900 mb-1">${text}</h4>
                        `;
                        previewFeaturesList.appendChild(div);
                        colorIndex++;
                    });

                    // ‹­‚İ‚ª‚ ‚éê‡‚Ì‚İƒZƒNƒVƒ‡ƒ“‚ğ•\¦
                    const featuresSection = document.getElementById('preview-features');
                    if (featuresSection) {
                        featuresSection.style.display = previewFeaturesList.children.length > 0 ? 'block' : 'none';
                    }
                }
            }

            // ‘Î‰“s“¹•{Œ§Es‹æ’¬‘º‚ğƒ[ƒh
            if (data['‘Î‰“s“¹•{Œ§']) {
                let prefecturesStr = data['‘Î‰“s“¹•{Œ§'];
                console.log('[loadAutodeliverySettings] Raw prefectures data:', prefecturesStr);

                // compressedŒ`®‚Ìê‡‚Ífull‚Ì’l‚ğ’Šo
                if (prefecturesStr.includes('{"type":"compressed","full":"')) {
                    const match = prefecturesStr.match(/"full":"([^"]+)"/);
                    if (match) {
                        prefecturesStr = match[1];
                        console.log('[loadAutodeliverySettings] Extracted prefectures:', prefecturesStr);
                    }
                }

                // ‘SŠpE”¼ŠpƒJƒ“ƒ}‚Ì—¼•û‚É‘Î‰
                const prefectures = prefecturesStr.split(/[,A]/).map(s => s.trim()).filter(s => s);
                areaSelectionData.prefectures = prefectures;

                // “s“¹•{Œ§ƒ{ƒ^ƒ“‚ğ‘I‘ğó‘Ô‚É‚·‚é
                prefectures.forEach(pref => {
                    const button = document.querySelector(`button[data-prefecture="${pref}"]`);
                    if (button) {
                        button.classList.add('selected', 'bg-blue-500', 'text-white');
                        button.classList.remove('bg-white');
                    }
                });

                console.log('[loadAutodeliverySettings] Loaded prefectures:', prefectures);
            }

            if (data['‘Î‰s‹æ’¬‘º']) {
                try {
                    let citiesStr = data['‘Î‰s‹æ’¬‘º'];
                    console.log('[loadAutodeliverySettings] Raw cities data:', citiesStr);

                    // compressedŒ`®‚Ìê‡‚Ífull‚Ì’l‚ğ’Šo
                    if (citiesStr.includes('{"type":"compressed","full":"')) {
                        const match = citiesStr.match(/"full":"([^"]+)"/);
                        if (match) {
                            citiesStr = match[1];
                            console.log('[loadAutodeliverySettings] Extracted cities:', citiesStr);
                        }
                    }

                    // ƒf[ƒ^Œ`®ƒ`ƒFƒbƒN: ƒZƒ~ƒRƒƒ“‚ª‚ ‚ê‚Î "“Œ‹“s:a’J‹æ,Vh‹æ;_“ŞìŒ§:‰¡•ls,ìès" Œ`®
                    // ƒZƒ~ƒRƒƒ“‚ª‚È‚¯‚ê‚ÎA’Pƒ‚ÈƒJƒ“ƒ}‹æØ‚èƒŠƒXƒgi“s“¹•{Œ§î•ñ‚È‚µj
                    if (citiesStr.includes(';') && citiesStr.includes(':')) {
                        // ƒZƒ~ƒRƒƒ“‹æØ‚è‚Å“s“¹•{Œ§‚²‚Æ‚É•ªŠ„
                        citiesStr.split(';').forEach(prefEntry => {
                            const parts = prefEntry.split(':');
                            if (parts.length === 2) {
                                const pref = parts[0].trim();
                                const citiesStr = parts[1].trim();
                                if (pref && citiesStr) {
                                    // ‘SŠpE”¼ŠpƒJƒ“ƒ}‚Ì—¼•û‚É‘Î‰
                                    const cities = citiesStr.split(/[,A]/).map(s => s.trim()).filter(c => c);
                                    if (cities.length > 0) {
                                        areaSelectionData.cities[pref] = cities;
                                        console.log(`[loadAutodeliverySettings] ${pref}:`, cities);
                                    }
                                }
                            }
                        });
                    } else {
                        // “s“¹•{Œ§î•ñ‚ª‚È‚¢ê‡ ¨ V‚µ‚¢ƒƒWƒbƒN: ƒf[ƒ^ƒx[ƒX‚©‚çs‹æ’¬‘º‚ğ•œŒ³
                        // ‘SŠpE”¼ŠpƒJƒ“ƒ}‚Ì—¼•û‚É‘Î‰
                        const allCities = citiesStr.split(/[,A]/).map(s => s.trim()).filter(c => c);
                        console.log('[loadAutodeliverySettings] Parsed cities (unstructured):', allCities.length, 'cities');
                        console.log('[loadAutodeliverySettings] Current prefectures:', areaSelectionData.prefectures);

                        if (allCities.length > 0 && areaSelectionData.prefectures.length > 0) {
                            console.log('[loadAutodeliverySettings] s‹æ’¬‘º‚ğ“s“¹•{Œ§•Ê‚ÉÄƒ}ƒbƒsƒ“ƒO’†...');
                            // Še“s“¹•{Œ§‚Ìs‹æ’¬‘ºƒf[ƒ^ƒx[ƒX‚©‚çA•Û‘¶‚³‚ê‚Ä‚¢‚és‹æ’¬‘º‚ğ’Šo
                            areaSelectionData.prefectures.forEach(pref => {
                                const dbCities = getCitiesForPrefecture(pref);
                                const matchedCities = allCities.filter(city => dbCities.includes(city));
                                if (matchedCities.length > 0) {
                                    areaSelectionData.cities[pref] = matchedCities;
                                    console.log(`[loadAutodeliverySettings] ${pref}: ${matchedCities.length} cities matched`);
                                } else {
                                    console.warn(`[loadAutodeliverySettings] ${pref}: No matching cities found`);
                                }
                            });
                        } else {
                            console.error('[loadAutodeliverySettings] Cannot assign cities: allCities.length =', allCities.length, ', prefectures.length =', areaSelectionData.prefectures.length);
                        }
                    }

                    console.log('[loadAutodeliverySettings] Loaded cities:', areaSelectionData.cities);
                } catch (e) {
                    console.error('s‹æ’¬‘ºƒp[ƒXƒGƒ‰[:', e);
                }
            }

            // —DæƒGƒŠƒA‚ğƒ[ƒh
            if (data['—DæƒGƒŠƒA']) {
                try {
                    let prioritiesStr = data['—DæƒGƒŠƒA'];
                    console.log('[loadAutodeliverySettings] Raw priorities data:', prioritiesStr);

                    // compressedŒ`®‚Ìê‡‚Ífull‚Ì’l‚ğ’Šo
                    if (prioritiesStr.includes('{"type":"compressed","full":"')) {
                        const match = prioritiesStr.match(/"full":"([^"]+)"/);
                        if (match) {
                            prioritiesStr = match[1];
                            console.log('[loadAutodeliverySettings] Extracted priorities:', prioritiesStr);
                        }
                    }

                    // ‘SŠpE”¼ŠpƒJƒ“ƒ}‚Ì—¼•û‚É‘Î‰
                    const priorities = prioritiesStr.split(/[,A]/).map(s => s.trim()).filter(p => p);

                    // ƒXƒvƒV‚Ìƒf[ƒ^Œ`®‚É‰‚¶‚Ä•ÏŠ·
                    // "“Œ‹“s a’J‹æ" Œ`® ¨ "“Œ‹“s_a’J‹æ" ‚É•ÏŠ·
                    // "“Œ‹“s_a’J‹æ" Œ`® ¨ ‚»‚Ì‚Ü‚Üg—p
                    areaSelectionData.priorities = priorities.map(p => {
                        if (p.includes('_')) {
                            return p; // ‚·‚Å‚ÉƒAƒ“ƒ_[ƒXƒRƒAŒ`®
                        } else {
                            return p.replace(/€s+/, '_'); // ƒXƒy[ƒX‚ğƒAƒ“ƒ_[ƒXƒRƒA‚É•ÏŠ·
                        }
                    });

                    console.log('[loadAutodeliverySettings] Loaded priorities:', areaSelectionData.priorities);
                } catch (e) {
                    console.error('—DæƒGƒŠƒAƒp[ƒXƒGƒ‰[:', e);
                }
            }

            // ƒGƒŠƒA‘I‘ğUI‚ğXV
            if (areaSelectionData.prefectures.length > 0) {
                updateAreaSelectionUI();
            }

            // —DæƒGƒŠƒAƒJƒEƒ“ƒ^[‚ğXV
            const selectedPriorityCount = document.getElementById('selectedPriorityCount');
            if (selectedPriorityCount && areaSelectionData.priorities) {
                selectedPriorityCount.textContent = areaSelectionData.priorities.length;
                console.log('[loadAutodeliverySettings] Updated priority count:', areaSelectionData.priorities.length);
            }

            console.log('[loadAutodeliverySettings] Final areaSelectionData:', JSON.stringify(areaSelectionData, null, 2));

            // ƒvƒŒƒrƒ…[‚É‘Î‰ƒGƒŠƒA‚ğ”½‰f
            const previewCitiesContainer = document.getElementById('previewCitiesContainer');

            if (previewCitiesContainer && areaSelectionData.prefectures && areaSelectionData.prefectures.length > 0) {
                previewCitiesContainer.innerHTML = '';

                areaSelectionData.prefectures.forEach((pref, index) => {
                    const cities = areaSelectionData.cities[pref];
                    if (cities && cities.length > 0) {
                        const prefDiv = document.createElement('div');
                        prefDiv.className = index < areaSelectionData.prefectures.length - 1 ? 'mb-6 pb-6 border-b border-gray-200' : 'mb-0';
                        prefDiv.innerHTML = `
                            <div class="flex items-center mb-3">
                                <span class="text-base font-bold text-blue-600">${pref}</span>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                ${cities.map(city => `<span class="px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg text-sm transition">${city}</span>`).join('')}
                            </div>
                        `;
                        previewCitiesContainer.appendChild(prefDiv);
                    }
                });

                console.log('[loadAutodeliverySettings] Updated preview areas for', areaSelectionData.prefectures.length, 'prefectures');
            }

            // ƒvƒŒƒrƒ…[‚É‘Î‰‰Â”\‚ÈH–‚ğ”½‰f
            const previewServicesList = document.getElementById('previewServicesList');
            const serviceIconMap = {
                'ŠO•Ç“h‘•': '??',
                'ŠO•ÇƒJƒo[H–@': '???',
                'ŠO•Ç’£‘Ö‚¦': '??',
                '‰®ª“h‘•iŠO•ÇH–ŠÜ‚Şj': '??',
                '‰®ã–h…iŠO•ÇH–ŠÜ‚Şj': '??',
                '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦ƒXƒŒ[ƒgEƒKƒ‹ƒoƒŠƒEƒ€“™': '???',
                '‰®ª•˜‚«‘Ö‚¦E’£‚è‘Ö‚¦¦Š¢': '??',
                '‰®ªƒJƒo[H–@': '??',
                'ŠO•Ç•âCiŠO•ÇH–ŠÜ‚Şj': '??',
                '‰®ª•âCiŠO•ÇH–ŠÜ‚Şj': '???',
                'ƒxƒ‰ƒ“ƒ_–h…iŠO•ÇH–ŠÜ‚Şj': '??',
                '“à‘•…‰ñ‚èiƒoƒXEƒLƒbƒ`ƒ“EƒgƒCƒŒjiŠO•ÇH–ŠÜ‚Şj': '??',
                '“à‘•iƒtƒ[ƒŠƒ“ƒO‚âô‚È‚Ç‚Ì°EƒNƒƒX“™jiŠO•ÇH–ŠÜ‚Şj': '??',
                'ŠO•Ç‰J˜R‚èC‘UiŠO•ÇH–ŠÜ‚Şj': '?',
                '‰®ª‰J˜R‚èC‘Ui‰®ªH–ŠÜ‚Şj': '???'
            };

            if (previewServicesList) {
                previewServicesList.innerHTML = '';
                const checkedServices = document.querySelectorAll('input[name="constructionTypes"]:checked');

                if (checkedServices.length > 0) {
                    checkedServices.forEach(service => {
                        const serviceName = service.value;

                        // ’P•i€–Úi’A‚µ1ĞĞ‰î‚Í’è‰¿j‚ğƒvƒŒƒrƒ…[‚©‚çœŠO
                        if (serviceName.includes('i’A‚µ1ĞĞ‰î‚Í’è‰¿j')) {
                            return;
                        }

                        // •\¦–¼‚©‚çiŠO•ÇH–ŠÜ‚Şj‚ğíœ
                        const displayName = serviceName.replace('iŠO•ÇH–ŠÜ‚Şj', '');
                        const icon = serviceIconMap[serviceName] || '?';
                        const div = document.createElement('div');
                        div.className = 'bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition';
                        div.innerHTML = `
                            <span class="text-2xl mr-2">${icon}</span>
                            <span class="text-sm font-medium text-gray-800">${displayName}</span>
                        `;
                        previewServicesList.appendChild(div);
                    });
                    document.getElementById('preview-services').style.display = 'block';
                    console.log('[loadAutodeliverySettings] Updated preview services:', checkedServices.length);
                } else {
                    document.getElementById('preview-services').style.display = 'none';
                }
            }

            // ˆê’â~İ’è‚ğ“Ç‚İ‚İ
            const autoPauseToggle = document.getElementById('autoPauseToggle');
            const pauseStartDate = document.getElementById('pauseStartDate');
            const pauseEndDate = document.getElementById('pauseEndDate');
            const indefinitePause = document.getElementById('indefinitePause');
            const pauseSettings = document.getElementById('pauseSettings');

            // ˆê’â~ƒtƒ‰ƒO‚ğ“Ç‚İ‚İiundefined‚Ìê‡‚ÍFALSE‚Æ‚µ‚Äˆµ‚¤j
            const pauseFlag = data['ˆê’â~ƒtƒ‰ƒO'] === 'TRUE' || data['ˆê’â~ƒtƒ‰ƒO'] === true;
            console.log('[loadAutodeliverySettings] Pause flag from sheet:', data['ˆê’â~ƒtƒ‰ƒO'], '¨', pauseFlag);
            console.log('[loadAutodeliverySettings] Pause start date raw:', data['ˆê’â~ŠJn“ú']);
            console.log('[loadAutodeliverySettings] Pause end date raw:', data['ˆê’â~ÄŠJ—\’è“ú']);

            if (autoPauseToggle) {
                autoPauseToggle.checked = pauseFlag;
            }

            // ˆê’â~ŠJn“úiAP—ñj- ƒtƒ‰ƒO‚ÉŠÖ‚í‚ç‚¸í‚Éƒf[ƒ^‚ğ“Ç‚İ‚Ş
            if (data['ˆê’â~ŠJn“ú'] && pauseStartDate) {
                let startDateValue = data['ˆê’â~ŠJn“ú'];

                // —lX‚È“ú•tƒtƒH[ƒ}ƒbƒg‚ğ yyyy-MM-dd ‚É•ÏŠ·i“ú–{ŠÔ‚Åˆ—j
                if (typeof startDateValue === 'string') {
                    // ISO 8601Œ`® (2025-10-03T15:00:00.000Z) ‚Ìê‡ADateƒIƒuƒWƒFƒNƒg‚É•ÏŠ·‚µ‚Ä‚©‚ç“ú–{ŠÔ‚Åæ“¾
                    if (startDateValue.includes('T') || startDateValue.includes('Z')) {
                        const dateObj = new Date(startDateValue);
                        const year = dateObj.getFullYear();
                        const month = String(dateObj.getMonth() + 1).padStart(2, '0');
                        const day = String(dateObj.getDate()).padStart(2, '0');
                        startDateValue = `${year}-${month}-${day}`;
                    }
                    // "yyyy-MM-dd HH:mm" Œ`®‚ğ yyyy-MM-dd ‚É•ÏŠ·
                    else if (startDateValue.includes(' ')) {
                        startDateValue = startDateValue.split(' ')[0];
                    }
                    // "yyyy/MM/dd" Œ`®‚ğ yyyy-MM-dd ‚É•ÏŠ·
                    else if (startDateValue.includes('/')) {
                        startDateValue = startDateValue.replace(/€//g, '-');
                    }
                } else if (startDateValue instanceof Date) {
                    // DateƒIƒuƒWƒFƒNƒg‚Ìê‡
                    const year = startDateValue.getFullYear();
                    const month = String(startDateValue.getMonth() + 1).padStart(2, '0');
                    const day = String(startDateValue.getDate()).padStart(2, '0');
                    startDateValue = `${year}-${month}-${day}`;
                }

                pauseStartDate.value = startDateValue;
                console.log('[loadAutodeliverySettings] Pause start date set:', startDateValue);
            } else {
                console.warn('[loadAutodeliverySettings] Pause start date not found in data or element missing');
            }

            // ˆê’â~ÄŠJ—\’è“úiAQ—ñj- ƒtƒ‰ƒO‚ÉŠÖ‚í‚ç‚¸í‚Éƒf[ƒ^‚ğ“Ç‚İ‚Ş
            if (data['ˆê’â~ÄŠJ—\’è“ú']) {
                if (data['ˆê’â~ÄŠJ—\’è“ú'] === '–¢’è') {
                    if (indefinitePause) {
                        indefinitePause.checked = true;
                    }
                    if (pauseEndDateDisplay) {
                        pauseEndDateDisplay.value = '–¢’è';
                        pauseEndDateDisplay.classList.remove('hidden');
                    }
                    if (pauseEndDate) {
                        pauseEndDate.classList.add('hidden');
                        pauseEndDate.value = '';
                    }
                    console.log('[loadAutodeliverySettings] Pause end date: –¢’è (from spreadsheet)');
                } else {
                    // “ú•tŒ`®‚Ì•ÏŠ·i“ú–{ŠÔ‚Åˆ—j
                    let endDateValue = data['ˆê’â~ÄŠJ—\’è“ú'];

                    if (typeof endDateValue === 'string') {
                        // ISO 8601Œ`® (2025-10-03T15:00:00.000Z) ‚Ìê‡ADateƒIƒuƒWƒFƒNƒg‚É•ÏŠ·‚µ‚Ä‚©‚ç“ú–{ŠÔ‚Åæ“¾
                        if (endDateValue.includes('T') || endDateValue.includes('Z')) {
                            const dateObj = new Date(endDateValue);
                            const year = dateObj.getFullYear();
                            const month = String(dateObj.getMonth() + 1).padStart(2, '0');
                            const day = String(dateObj.getDate()).padStart(2, '0');
                            endDateValue = `${year}-${month}-${day}`;
                        }
                        // "yyyy-MM-dd HH:mm" Œ`®‚ğ yyyy-MM-dd ‚É•ÏŠ·
                        else if (endDateValue.includes(' ')) {
                            endDateValue = endDateValue.split(' ')[0];
                        }
                        // "yyyy/MM/dd" Œ`®‚ğ yyyy-MM-dd ‚É•ÏŠ·
                        else if (endDateValue.includes('/')) {
                            endDateValue = endDateValue.replace(/€//g, '-');
                        }
                    } else if (endDateValue instanceof Date) {
                        // DateƒIƒuƒWƒFƒNƒg‚Ìê‡
                        const year = endDateValue.getFullYear();
                        const month = String(endDateValue.getMonth() + 1).padStart(2, '0');
                        const day = String(endDateValue.getDate()).padStart(2, '0');
                        endDateValue = `${year}-${month}-${day}`;
                    }

                    if (pauseEndDate) {
                        pauseEndDate.value = endDateValue;
                        pauseEndDate.classList.remove('hidden');
                    }
                    if (pauseEndDateDisplay) {
                        pauseEndDateDisplay.classList.add('hidden');
                    }
                    if (indefinitePause) {
                        indefinitePause.checked = false;
                    }
                    console.log('[loadAutodeliverySettings] Pause end date set:', endDateValue);
                }
            } else {
                console.warn('[loadAutodeliverySettings] Pause end date not found in data');
            }

            // ˆê???~İ’èƒZƒNƒVƒ‡ƒ“‚Ì•\¦/”ñ•\¦
            if (pauseFlag && pauseSettings) {
                pauseSettings.classList.remove('hidden');
            } else if (pauseSettings) {
                pauseSettings.classList.add('hidden');
            }

            console.log('[loadAutodeliverySettings] Settings loaded');

            // ƒCƒxƒ“ƒgƒŠƒXƒi[‚ğ’Ç‰Á‚µ‚Ä•ÏX‚ğŒŸ’m
            attachAutodeliveryChangeListeners();

            // “Ç‚İ‚İŠ®—¹ŒãA•ÏXƒtƒ‰ƒO‚ğƒŠƒZƒbƒgi“Ç‚İ‚İ‚ÌƒCƒxƒ“ƒg”­‰Î‚ğ–³‹j
            // setTimeout‚Å­‚µ’x‰„‚³‚¹‚ÄA‰Šú‰»‚ÌƒCƒxƒ“ƒg”­‰Î‚ğŠmÀ‚É–³‹
            setTimeout(() => {
                resetAutodeliveryChanged();
            }, 100);
        }

        // ©“®”zMİ’è‚Ì‘S“ü—Í—v‘f‚É•ÏXŒŸ’mƒŠƒXƒi[‚ğ’Ç‰Á
        function attachAutodeliveryChangeListeners() {
            console.log('[attachAutodeliveryChangeListeners] Attaching change listeners...');

            const autodeliverySection = document.getElementById('autodeliverySection');
            if (!autodeliverySection) {
                console.warn('[attachAutodeliveryChangeListeners] autodeliverySection not found');
                return;
            }

            // ‘S‚Ä‚Ìinput—v‘ficheckbox, radio, text, rangej
            const inputs = autodeliverySection.querySelectorAll('input');
            inputs.forEach(input => {
                // input‚Æchange‚Ì—¼•û‚ğŠÄ‹irange‚ÍinputAcheckbox‚Íchangej
                input.addEventListener('input', markAutodeliveryChanged);
                input.addEventListener('change', markAutodeliveryChanged);
            });

            // ‘S‚Ä‚Ìselect—v‘f
            const selects = autodeliverySection.querySelectorAll('select');
            selects.forEach(select => {
                select.addEventListener('change', markAutodeliveryChanged);
            });

            // ‘S‚Ä‚Ìtextarea—v‘f
            const textareas = autodeliverySection.querySelectorAll('textarea');
            textareas.forEach(textarea => {
                textarea.addEventListener('input', markAutodeliveryChanged);
            });

            // “s“¹•{Œ§Es‹æ’¬‘ºƒ{ƒ^ƒ“‚ÌƒNƒŠƒbƒN
            const prefButtons = autodeliverySection.querySelectorAll('button[data-prefecture]');
            prefButtons.forEach(button => {
                button.addEventListener('click', markAutodeliveryChanged);
            });

            console.log('[attachAutodeliveryChangeListeners] Attached listeners to:', {
                inputs: inputs.length,
                selects: selects.length,
                textareas: textareas.length,
                prefButtons: prefButtons.length
            });
        }

        // ˆê’â~İ’èŠÖ”i‘¦”½‰fj
        async function toggleAutoPause() {
            const toggle = document.getElementById('autoPauseToggle');
            const settings = document.getElementById('pauseSettings');

            if (toggle.checked) {
                settings.classList.remove('hidden');
                // ŠJn“ú‚ğ¡“ú‚ÉƒZƒbƒg
                const startDate = document.getElementById('pauseStartDate');
                if (startDate && !startDate.value) {
                    startDate.value = new Date().toISOString().split('T')[0];
                }
            } else {
                settings.classList.add('hidden');
            }

            // •ÏXƒtƒ‰ƒO‚ğ—§‚Ä‚éi•Û‘¶ƒ{ƒ^ƒ“ƒNƒŠƒbƒN‚Å•Û‘¶‚³‚ê‚éj
            markAutodeliveryChanged();
        }

        async function toggleIndefinitePause() {
            const indefinite = document.getElementById('indefinitePause');
            const endDateInput = document.getElementById('pauseEndDate');
            const endDateDisplay = document.getElementById('pauseEndDateDisplay');

            if (indefinite.checked) {
                // –³ŠúŒÀ’â~: u–¢’èv‚Æ•\¦
                endDateDisplay.value = '–¢’è';
                endDateDisplay.classList.remove('hidden');
                endDateInput.classList.add('hidden');
            } else {
                // ŠúŒÀ‚ ‚è: “ú•t“ü—Í—“‚ğ•\¦
                endDateDisplay.classList.add('hidden');
                endDateInput.classList.remove('hidden');
            }

            // •ÏXƒtƒ‰ƒO‚ğ—§‚Ä‚éi•Û‘¶ƒ{ƒ^ƒ“ƒNƒŠƒbƒN‚Å•Û‘¶‚³‚ê‚éj
            markAutodeliveryChanged();
        }


        // ’P•i€–Ú‚Ìƒ`ƒFƒbƒNó‘Ô‚ğŠÇ—

        function checkSingleItemSelection(checkbox) {
            // ƒ`ƒFƒbƒN‚ª“ü‚Á‚½ê‡‚Ì‚İƒ‚[ƒ_ƒ‹‚ğ•\¦
            if (checkbox.checked) {
                const singleItems = [
                    '‰®ª“h‘•’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    '‰®ã–h…’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    'ŠO•Ç•âC’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    '‰®ª•âC’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    'ƒxƒ‰ƒ“ƒ_–h…’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    'ŠO•Ç‰J˜R‚èC‘U’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j',
                    '‰®ª‰J˜R‚èC‘U’P•ii’A‚µ1ĞĞ‰î‚Í’è‰¿j'
                ];

                if (singleItems.includes(checkbox.value)) {
                    showSingleItemModal();
                }
            }
        }

        function showSingleItemModal() {
            const modal = document.getElementById('singleItemModal');
            modal.classList.remove('hidden');
        }

        function closeSingleItemModal() {
            const modal = document.getElementById('singleItemModal');
            modal.classList.add('hidden');
        }

        // ‘åŒ^•¨Œ‚Ìƒ‚[ƒ_ƒ‹•\¦ŠÇ—
        function checkLargeProperty(checkbox) {
            if (checkbox.checked) {
                // ƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚Éƒtƒ‰ƒO‚ğİ’èi‰‰ñƒ`ƒFƒbƒN”»’è—pj
                checkbox.dataset.shownModal = 'true';
                showLargePropertyModal();
            } else {
                // ƒ`ƒFƒbƒN‚ğŠO‚µ‚½‚çƒtƒ‰ƒO‚ğƒŠƒZƒbƒg
                delete checkbox.dataset.shownModal;
            }
        }

        function checkFloorSelection(selectElement) {
            const value = parseInt(selectElement.value);
            const parentLabel = selectElement.closest('label');
            const checkbox = parentLabel.querySelector('input[type="checkbox"]');

            // ƒ`ƒFƒbƒNƒ{ƒbƒNƒX‚ªON‚ÅA‚©‚Â‚Ü‚¾ƒ‚[ƒ_ƒ‹‚ğ•\¦‚µ‚Ä‚¢‚È‚¢ê‡‚Ì‚İ•\¦
            if ((value >= 3 || selectElement.value === 'unlimited') && checkbox.checked && !checkbox.dataset.shownModal) {
                checkbox.dataset.shownModal = 'true';
                showLargePropertyModal();
            }
        }

        function showLargePropertyModal() {
            const modal = document.getElementById('largePropertyModal');
            modal.classList.remove('hidden');
        }

        function closeLargePropertyModal() {
            const modal = document.getElementById('largePropertyModal');
            modal.classList.add('hidden');
        }
    </script>

</body></html>