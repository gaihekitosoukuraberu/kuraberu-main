<html lang="ja"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>â¡ñøìXä«óùÉVÉXÉeÉÄ - äOï«ìhëïÇ≠ÇÁÇ◊ÇÈAI</title>
    <script src="merchant-portal/env-loader.js?v=1134"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gray: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            200: '#e5e7eb',
                            300: '#d1d5db',
                            400: '#9ca3af',
                            500: '#6b7280',
                            600: '#4b5563',
                            700: '#374151',
                            800: '#1f2937',
                            900: '#111827',
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; }
        .glass { backdrop-filter: blur(12px); }
        .section {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
            min-height: 200px;
        }
        .permission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        /* ÉgÉOÉãÉXÉCÉbÉ`ÇÃÉXÉ^ÉCÉã */
        .toggle-switch {
            position: relative;
            appearance: none;
            width: 44px;
            height: 24px;
            background: #cbd5e0;
            border-radius: 9999px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .toggle-switch:checked {
            background: #3b82f6;
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.2s;
        }
        .toggle-switch:checked::after {
            transform: translateX(20px);
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.invisible{visibility:hidden}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0px}.-right-1{right:-0.25rem}.-top-1{top:-0.25rem}.-top-8{top:-2rem}.bottom-0{bottom:0px}.left-0{left:0px}.right-0{right:0px}.right-4{right:1rem}.top-0{top:0px}.top-1Ä/2{top:50%}.top-14{top:3.5rem}.top-16{top:4rem}.top-20{top:5rem}.top-4{top:1rem}.top-full{top:100%}.right-1{right:0.25rem}.top-1{top:0.25rem}.left-2{left:0.5rem}.top-2{top:0.5rem}.z-10{z-index:10}.z-20{z-index:20}.z-40{z-index:40}.z-50{z-index:50}.z-Ä[200Ä]{z-index:200}.-mx-4{margin-left:-1rem;margin-right:-1rem}.mx-auto{margin-left:auto;margin-right:auto}.-mb-px{margin-bottom:-1px}.mb-1{margin-bottom:0.25rem}.mb-1Ä.5{margin-bottom:0.375rem}.mb-12{margin-bottom:3rem}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:0.25rem}.ml-2{margin-left:0.5rem}.ml-3{margin-left:0.75rem}.ml-4{margin-left:1rem}.ml-6{margin-left:1.5rem}.ml-auto{margin-left:auto}.mr-1{margin-right:0.25rem}.mr-2{margin-right:0.5rem}.mr-3{margin-right:0.75rem}.mt-0Ä.5{margin-top:0.125rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-3{margin-top:0.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1 / 1}.h-10{height:2.5rem}.h-12{height:3rem}.h-16{height:4rem}.h-2{height:0.5rem}.h-3{height:0.75rem}.h-4{height:1rem}.h-48{height:12rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-8{height:2rem}.h-full{height:100%}.h-32{height:8rem}.h-24{height:6rem}.max-h-64{max-height:16rem}.max-h-Ä[500pxÄ]{max-height:500px}.max-h-Ä[600pxÄ]{max-height:600px}.max-h-Ä[90vhÄ]{max-height:90vh}.max-h-full{max-height:100%}.min-h-Ä[48pxÄ]{min-height:48px}.min-h-screen{min-height:100vh}.w-1{width:0.25rem}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-11Ä/12{width:91.666667%}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:0.5rem}.w-3{width:0.75rem}.w-32{width:8rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-96{width:24rem}.w-Ä[120pxÄ]{width:120px}.w-full{width:100%}.w-72{width:18rem}.min-w-0{min-width:0px}.min-w-Ä[20pxÄ]{min-width:20px}.min-w-Ä[280pxÄ]{min-width:280px}.min-w-full{min-width:100%}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-6xl{max-width:72rem}.max-w-Ä[100pxÄ]{max-width:100px}.max-w-Ä[80pxÄ]{max-width:80px}.max-w-full{max-width:100%}.max-w-7xl{max-width:80rem}.max-w-lg{max-width:32rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-x-12{--tw-translate-x:-3rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-4{--tw-translate-x:-1rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-full{--tw-translate-x:-100%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1Ä/2{--tw-translate-y:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-12{--tw-translate-x:3rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-4{--tw-translate-x:1rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-125{--tw-scale-x:1.25;--tw-scale-y:1.25;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite}.cursor-help{cursor:help}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize-y{resize:vertical}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.grid-cols-7{grid-template-columns:repeat(7, minmax(0, 1fr))}.grid-cols-8{grid-template-columns:repeat(8, minmax(0, 1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0{gap:0px}.gap-1{gap:0.25rem}.gap-1Ä.5{gap:0.375rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-x-2 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.5rem * var(--tw-space-x-reverse));margin-left:calc(0.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.75rem * var(--tw-space-x-reverse));margin-left:calc(0.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.25rem * var(--tw-space-y-reverse))}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.divide-y > :not([hidden]) ~ :not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-200 > :not([hidden]) ~ :not([hidden]){--tw-divide-opacity:1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.rounded{border-radius:0.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}.rounded-xl{border-radius:0.75rem}.rounded-b-lg{border-bottom-right-radius:0.5rem;border-bottom-left-radius:0.5rem}.rounded-t-2xl{border-top-left-radius:1rem;border-top-right-radius:1rem}.rounded-t-lg{border-top-left-radius:0.5rem;border-top-right-radius:0.5rem}.rounded-t-xl{border-top-left-radius:0.75rem;border-top-right-radius:0.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-t-0{border-top-width:0px}.border-t-2{border-top-width:2px}.border-dashed{border-style:dashed}.border-blue-200{--tw-border-opacity:1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-gray-100{--tw-border-opacity:1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-700{--tw-border-opacity:1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.border-gray-800{--tw-border-opacity:1;border-color:rgb(31 41 55 / var(--tw-border-opacity, 1))}.border-orange-200{--tw-border-opacity:1;border-color:rgb(254 215 170 / var(--tw-border-opacity, 1))}.border-orange-500{--tw-border-opacity:1;border-color:rgb(249 115 22 / var(--tw-border-opacity, 1))}.border-purple-200{--tw-border-opacity:1;border-color:rgb(233 213 255 / var(--tw-border-opacity, 1))}.border-red-300{--tw-border-opacity:1;border-color:rgb(252 165 165 / var(--tw-border-opacity, 1))}.border-yellow-200{--tw-border-opacity:1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.border-blue-400{--tw-border-opacity:1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.border-green-400{--tw-border-opacity:1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.border-yellow-400{--tw-border-opacity:1;border-color:rgb(250 204 21 / var(--tw-border-opacity, 1))}.border-yellow-300{--tw-border-opacity:1;border-color:rgb(253 224 71 / var(--tw-border-opacity, 1))}.border-purple-100{--tw-border-opacity:1;border-color:rgb(243 232 255 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity:1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity:1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.border-indigo-200{--tw-border-opacity:1;border-color:rgb(199 210 254 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-blue-100{--tw-bg-opacity:1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-200{--tw-bg-opacity:1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-500{--tw-bg-opacity:1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity:1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-gray-900Ä/95{background-color:rgb(17 24 39 / 0.95)}.bg-green-100{--tw-bg-opacity:1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-200{--tw-bg-opacity:1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity:1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity:1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-indigo-600{--tw-bg-opacity:1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1))}.bg-orange-500{--tw-bg-opacity:1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.bg-orange-600{--tw-bg-opacity:1;background-color:rgb(234 88 12 / var(--tw-bg-opacity, 1))}.bg-pink-600{--tw-bg-opacity:1;background-color:rgb(219 39 119 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity:1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-200{--tw-bg-opacity:1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}.bg-purple-500{--tw-bg-opacity:1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity:1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity:1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-whiteÄ/20{background-color:rgb(255 255 255 / 0.2)}.bg-yellow-100{--tw-bg-opacity:1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity:1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity:1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity:1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-indigo-100{--tw-bg-opacity:1;background-color:rgb(224 231 255 / var(--tw-bg-opacity, 1))}.bg-orange-100{--tw-bg-opacity:1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity:1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-opacity-50{--tw-bg-opacity:0.5}.bg-opacity-90{--tw-bg-opacity:0.9}.bg-opacity-60{--tw-bg-opacity:0.6}.bg-gradient-to-b{background-image:linear-gradient(to bottom, var(--tw-gradient-stops))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-blue-400{--tw-gradient-from:#60a5fa var(--tw-gradient-from-position);--tw-gradient-to:rgb(96 165 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-50{--tw-gradient-from:#eff6ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from:#3b82f6 var(--tw-gradient-from-position);--tw-gradient-to:rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-50{--tw-gradient-from:#f0fdf4 var(--tw-gradient-from-position);--tw-gradient-to:rgb(240 253 244 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-50{--tw-gradient-from:#fff7ed var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 247 237 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-500{--tw-gradient-from:#f97316 var(--tw-gradient-from-position);--tw-gradient-to:rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-50{--tw-gradient-from:#faf5ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(250 245 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from:#9333ea var(--tw-gradient-from-position);--tw-gradient-to:rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-transparent{--tw-gradient-from:transparent var(--tw-gradient-from-position);--tw-gradient-to:rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-yellow-50{--tw-gradient-from:#fefce8 var(--tw-gradient-from-position);--tw-gradient-to:rgb(254 252 232 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-yellow-500{--tw-gradient-from:#eab308 var(--tw-gradient-from-position);--tw-gradient-to:rgb(234 179 8 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-50{--tw-gradient-from:#eef2ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(238 242 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-pink-50{--tw-gradient-from:#fdf2f8 var(--tw-gradient-from-position);--tw-gradient-to:rgb(253 242 248 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-400{--tw-gradient-from:#fbbf24 var(--tw-gradient-from-position);--tw-gradient-to:rgb(251 191 36 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-50{--tw-gradient-from:#fffbeb var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 251 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.via-blue-50{--tw-gradient-to:rgb(239 246 255 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #eff6ff var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-orange-100{--tw-gradient-to:rgb(255 237 213 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #ffedd5 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-transparent{--tw-gradient-to:rgb(0 0 0 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), transparent var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-blackÄ/30{--tw-gradient-to:rgb(0 0 0 / 0.3) var(--tw-gradient-to-position)}.to-blue-100{--tw-gradient-to:#dbeafe var(--tw-gradient-to-position)}.to-blue-50{--tw-gradient-to:#eff6ff var(--tw-gradient-to-position)}.to-blue-500{--tw-gradient-to:#3b82f6 var(--tw-gradient-to-position)}.to-blue-600{--tw-gradient-to:#2563eb var(--tw-gradient-to-position)}.to-green-100{--tw-gradient-to:#dcfce7 var(--tw-gradient-to-position)}.to-orange-50{--tw-gradient-to:#fff7ed var(--tw-gradient-to-position)}.to-orange-600{--tw-gradient-to:#ea580c var(--tw-gradient-to-position)}.to-purple-100{--tw-gradient-to:#f3e8ff var(--tw-gradient-to-position)}.to-purple-400{--tw-gradient-to:#c084fc var(--tw-gradient-to-position)}.to-purple-50{--tw-gradient-to:#faf5ff var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.to-red-50{--tw-gradient-to:#fef2f2 var(--tw-gradient-to-position)}.to-red-500{--tw-gradient-to:#ef4444 var(--tw-gradient-to-position)}.to-indigo-100{--tw-gradient-to:#e0e7ff var(--tw-gradient-to-position)}.to-pink-100{--tw-gradient-to:#fce7f3 var(--tw-gradient-to-position)}.to-yellow-100{--tw-gradient-to:#fef9c3 var(--tw-gradient-to-position)}.to-yellow-400{--tw-gradient-to:#facc15 var(--tw-gradient-to-position)}.to-yellow-50{--tw-gradient-to:#fefce8 var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.fill-current{fill:currentColor}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-1{padding:0.25rem}.p-10{padding:2.5rem}.p-12{padding:3rem}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-1Ä.5{padding:0.375rem}.px-1{padding-left:0.25rem;padding-right:0.25rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-2Ä.5{padding-left:0.625rem;padding-right:0.625rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0Ä.5{padding-top:0.125rem;padding-bottom:0.125rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1Ä.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:0.5rem}.pb-20{padding-bottom:5rem}.pt-20{padding-top:5rem}.pt-3{padding-top:0.75rem}.pt-4{padding-top:1rem}.pb-6{padding-bottom:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.leading-5{line-height:1.25rem}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-wider{letter-spacing:0.05em}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity:1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity:1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity:1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity:1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity:1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-green-900{--tw-text-opacity:1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity:1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity:1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-purple-500{--tw-text-opacity:1;color:rgb(168 85 247 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity:1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity:1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-purple-800{--tw-text-opacity:1;color:rgb(107 33 168 / var(--tw-text-opacity, 1))}.text-purple-900{--tw-text-opacity:1;color:rgb(88 28 135 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity:1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity:1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity:1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity:1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity:1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity:1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.text-indigo-800{--tw-text-opacity:1;color:rgb(55 48 163 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity:1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-amber-900{--tw-text-opacity:1;color:rgb(120 53 15 / var(--tw-text-opacity, 1))}.line-through{-webkit-text-decoration-line:line-through;text-decoration-line:line-through}.opacity-10{opacity:0.1}.opacity-90{opacity:0.9}.opacity-0{opacity:0}.shadow{--tw-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.drop-shadow-lg{--tw-drop-shadow:drop-shadow(0 10px 8px rgb(0 0 0 / 0.04)) drop-shadow(0 4px 3px rgb(0 0 0 / 0.1));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-md{--tw-drop-shadow:drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur:blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.afterÄ:absolute::after{content:var(--tw-content);position:absolute}.afterÄ:left-Ä[2pxÄ]::after{content:var(--tw-content);left:2px}.afterÄ:top-Ä[2pxÄ]::after{content:var(--tw-content);top:2px}.afterÄ:h-5::after{content:var(--tw-content);height:1.25rem}.afterÄ:w-5::after{content:var(--tw-content);width:1.25rem}.afterÄ:rounded-full::after{content:var(--tw-content);border-radius:9999px}.afterÄ:border::after{content:var(--tw-content);border-width:1px}.afterÄ:border-gray-300::after{content:var(--tw-content);--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.afterÄ:bg-white::after{content:var(--tw-content);--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.afterÄ:transition-all::after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.afterÄ:content-Ä[Ä'Ä'Ä]::after{--tw-content:'';content:var(--tw-content)}.hoverÄ:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hoverÄ:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hoverÄ:border-blue-500:hover{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.hoverÄ:border-gray-300:hover{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hoverÄ:bg-blue-200:hover{--tw-bg-opacity:1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-blue-50:hover{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-blue-600:hover{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-gray-300:hover{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-gray-50:hover{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-gray-600:hover{--tw-bg-opacity:1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-gray-700:hover{--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-green-200:hover{--tw-bg-opacity:1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-green-600:hover{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-green-700:hover{--tw-bg-opacity:1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-purple-700:hover{--tw-bg-opacity:1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-red-200:hover{--tw-bg-opacity:1;background-color:rgb(254 202 202 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-red-900Ä/50:hover{background-color:rgb(127 29 29 / 0.5)}.hoverÄ:bg-white:hover{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-yellow-200:hover{--tw-bg-opacity:1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-blue-100:hover{--tw-bg-opacity:1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-orange-200:hover{--tw-bg-opacity:1;background-color:rgb(254 215 170 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-red-100:hover{--tw-bg-opacity:1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-yellow-100:hover{--tw-bg-opacity:1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-green-100:hover{--tw-bg-opacity:1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.hoverÄ:bg-opacity-20:hover{--tw-bg-opacity:0.2}.hoverÄ:from-amber-100:hover{--tw-gradient-from:#fef3c7 var(--tw-gradient-from-position);--tw-gradient-to:rgb(254 243 199 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hoverÄ:to-yellow-100:hover{--tw-gradient-to:#fef9c3 var(--tw-gradient-to-position)}.hoverÄ:text-blue-800:hover{--tw-text-opacity:1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.hoverÄ:text-blue-900:hover{--tw-text-opacity:1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.hoverÄ:text-gray-100:hover{--tw-text-opacity:1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.hoverÄ:text-gray-200:hover{--tw-text-opacity:1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.hoverÄ:text-gray-700:hover{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hoverÄ:text-green-900:hover{--tw-text-opacity:1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.hoverÄ:text-red-400:hover{--tw-text-opacity:1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.hoverÄ:text-red-800:hover{--tw-text-opacity:1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.hoverÄ:text-red-900:hover{--tw-text-opacity:1;color:rgb(127 29 29 / var(--tw-text-opacity, 1))}.hoverÄ:text-gray-300:hover{--tw-text-opacity:1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.hoverÄ:text-gray-600:hover{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hoverÄ:underline:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.hoverÄ:opacity-80:hover{opacity:0.8}.hoverÄ:opacity-90:hover{opacity:0.9}.hoverÄ:shadow-lg:hover{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hoverÄ:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hoverÄ:shadow-xl:hover{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.focusÄ:border-blue-500:focus{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focusÄ:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focusÄ:ring-1:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focusÄ:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focusÄ:ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focusÄ:ring-orange-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(249 115 22 / var(--tw-ring-opacity, 1))}.activeÄ:bg-blue-800:active{--tw-bg-opacity:1;background-color:rgb(30 64 175 / var(--tw-bg-opacity, 1))}.group:hover .group-hoverÄ:visible{visibility:visible}.group:hover .group-hoverÄ:block{display:block}.group:hover .group-hoverÄ:text-blue-400{--tw-text-opacity:1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.group:hover .group-hoverÄ:text-yellow-400{--tw-text-opacity:1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.group:hover .group-hoverÄ:opacity-100{opacity:1}.peer:checked ~ .peer-checkedÄ:bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.peer:checked ~ .peer-checkedÄ:bg-orange-500{--tw-bg-opacity:1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.peer:checked ~ .peer-checkedÄ:afterÄ:translate-x-full::after{content:var(--tw-content);--tw-translate-x:100%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked ~ .peer-checkedÄ:afterÄ:border-white::after{content:var(--tw-content);--tw-border-opacity:1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus ~ .peer-focusÄ:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:focus ~ .peer-focusÄ:ring-4{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.peer:focus ~ .peer-focusÄ:ring-orange-300{--tw-ring-opacity:1;--tw-ring-color:rgb(253 186 116 / var(--tw-ring-opacity, 1))}@media (min-width: 640px){.smÄ:mx-0{margin-left:0px;margin-right:0px}.smÄ:mb-4{margin-bottom:1rem}.smÄ:ml-1{margin-left:0.25rem}.smÄ:block{display:block}.smÄ:inline{display:inline}.smÄ:grid{display:grid}.smÄ:min-w-0{min-width:0px}.smÄ:max-w-Ä[100pxÄ]{max-width:100px}.smÄ:flex-none{flex:none}.smÄ:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.smÄ:flex-row{flex-direction:row}.smÄ:items-center{align-items:center}.smÄ:justify-between{justify-content:space-between}.smÄ:gap-4{gap:1rem}.smÄ:space-x-3 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.75rem * var(--tw-space-x-reverse));margin-left:calc(0.75rem * calc(1 - var(--tw-space-x-reverse)))}.smÄ:space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.smÄ:p-6{padding:1.5rem}.smÄ:p-8{padding:2rem}.smÄ:px-0{padding-left:0px;padding-right:0px}.smÄ:px-2{padding-left:0.5rem;padding-right:0.5rem}.smÄ:px-6{padding-left:1.5rem;padding-right:1.5rem}.smÄ:py-4{padding-top:1rem;padding-bottom:1rem}.smÄ:text-left{text-align:left}.smÄ:text-3xl{font-size:1.875rem;line-height:2.25rem}.smÄ:text-4xl{font-size:2.25rem;line-height:2.5rem}.smÄ:text-7xl{font-size:4.5rem;line-height:1}.smÄ:text-base{font-size:1rem;line-height:1.5rem}.smÄ:text-lg{font-size:1.125rem;line-height:1.75rem}.smÄ:text-sm{font-size:0.875rem;line-height:1.25rem}}@media (min-width: 768px){.mdÄ:col-span-2{grid-column:span 2 / span 2}.mdÄ:table-cell{display:table-cell}.mdÄ:w-96{width:24rem}.mdÄ:max-w-Ä[140pxÄ]{max-width:140px}.mdÄ:max-w-none{max-width:none}.mdÄ:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.mdÄ:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.mdÄ:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}}@media (min-width: 1024px){.lgÄ:col-span-2{grid-column:span 2 / span 2}.lgÄ:inline{display:inline}.lgÄ:table-cell{display:table-cell}.lgÄ:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.lgÄ:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.lgÄ:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.lgÄ:grid-cols-6{grid-template-columns:repeat(6, minmax(0, 1fr))}}@media (min-width: 1280px){.xlÄ:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}}</style></head>
<body class="bg-gray-100 text-gray-900">
    <!-- ÉÅÉCÉìÉAÉvÉäÉPÅ[ÉVÉáÉì -->
    <div id="mainApp">
        <!-- ÉgÉbÉvÉoÅ[ -->
        <div class="fixed top-0 left-0 right-0 z-50 h-16 bg-gray-900/95 glass border-b border-gray-200">
            <div class="flex items-center justify-between h-full px-3 sm:px-6">
                <!-- ç∂ë§ÅFÉÅÉjÉÖÅ[Å{ÉçÉS -->
                <div class="flex items-center space-x-2 sm:space-x-3">
                    <button onclick="toggleMenu()" class="p-2 rounded-lg hover:bg-gray-800 transition-colors flex-shrink-0">
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <div class="flex items-center space-x-2">
                        <div id="companyLogo" class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0" style="background: linear-gradient(135deg, rgb(102, 126, 234) 0%, rgb(118, 75, 162) 100%);">
                            <span class="text-gray-100 font-bold">â¡</span>
                        </div>
                        <span id="systemTitle" class="hidden lg:inline text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent whitespace-nowrap">â¡ñøìXä«óùÉVÉXÉeÉÄ</span>
                    </div>
                </div>

                <!-- íÜâõÅFÉXÉeÅ[É^ÉX -->
                <div class="flex-shrink-0">
                    <div class="relative">
                        <label class="hidden sm:block text-xs text-gray-400 mb-1 text-center">ÉXÉeÅ[É^ÉX</label>
                        <span id="merchantStatus" class="px-3 py-1 text-xs font-semibold rounded-full border-2 bg-green-100 text-green-800 border-green-300">ÉAÉNÉeÉBÉu</span>
                    </div>
                </div>

                <!-- âEë§ÅFí ímÅ{ÉÜÅ[ÉUÅ[èÓïÒ -->
                <div class="flex items-center space-x-2 sm:space-x-3">
                    <!-- ñ{ïîÇ©ÇÁÇÃí ímÉ{É^Éì -->
                    <button onclick="toggleNotificationPanel()" class="relative p-2 rounded-lg hover:bg-gray-800 transition-colors group flex-shrink-0">
                        <svg class="w-6 h-6 text-gray-400 group-hover:text-yellow-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                        <span id="notificationCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
                    </button>
                    <!-- ÉAÉâÅ[ÉgÅEÉäÉ}ÉCÉìÉ_Å[É{É^Éì -->
                    <button onclick="toggleAlertPanel()" class="relative p-2 rounded-lg hover:bg-gray-800 transition-colors group flex-shrink-0">
                        <svg class="w-6 h-6 text-gray-400 group-hover:text-blue-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <span id="alertCount" class="absolute -top-1 -right-1 bg-blue-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">3</span>
                    </button>
                    <div class="text-center min-w-0">
                        <div id="userName" class="hidden sm:block text-sm text-gray-300 truncate max-w-[100px] md:max-w-none">FR251004160409</div>
                        <div id="userRole" class="ml-2 text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-800" onclick="editSalesPerson()" title="ÉNÉäÉbÉNÇµÇƒï“èW">è¨êÚÇ›Ç‰Ç´</div>
                        <input id="userRoleInput" class="hidden text-xs text-gray-900 bg-white border border-gray-300 rounded px-2 py-1 w-[120px]" onblur="saveSalesPerson()" onkeydown="if(event.key==='Enter') saveSalesPerson()">
                    </div>
                </div>
            </div>
        </div>

        <!-- ÉTÉCÉhÉÅÉjÉÖÅ[ -->
        <div id="sideMenu" class="fixed left-0 top-16 bottom-0 w-64 bg-gray-900/95 glass border-r border-gray-200 transform transition-transform z-40 -translate-x-full">
            <nav class="p-4 space-y-2">
                <a href="#dashboard" onclick="showSection('dashboard'); return false;" class="flex items-center px-4 py-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    É_ÉbÉVÉÖÉ{Å[Éh
                </a>
                <a href="#cases" onclick="showSection('cases'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100 relative">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                    </svg>
                    àƒåèä«óù
                    <span id="unassignedBadge" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-red-500 text-white text-xs font-bold rounded-full px-2 py-0.5 min-w-[20px] text-center">3</span>
                </a>
                <a href="#sales" onclick="showSection('sales'); return false;" class="admin-only flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100" style="display: flex;">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    âcã∆ä«óù
                </a>
                <a href="#calendar" onclick="showSection('calendar'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    ÉJÉåÉìÉ_Å[
                </a>
                <a href="#billing" onclick="showSection('billing'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    ç‡ñ±ä«óù
                </a>
                <a href="#deposit" onclick="showSection('deposit'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                    </svg>
                    ÉfÉ|ÉWÉbÉg
                </a>
                <a href="#reports" onclick="showSection('reports'); return false;" class="admin-only flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100" style="display: flex;">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    ÉåÉ|Å[Ég
                </a>
                <a href="#autodelivery" onclick="showSection('autodelivery'); return false;" class="admin-only flex items-center px-4 py-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-gray-100" style="display: flex;">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                    </svg>
                    é©ìÆîzêMê›íË
                </a>
                <a href="#company" onclick="showSection('company'); return false;" class="flex items-center px-4 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-blue-500 text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    âÔé–èÓïÒ
                </a>
                <a href="#cancel" onclick="showSection('cancel'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path>
                    </svg>
                    ÉLÉÉÉìÉZÉãê\êø
                </a>
                <a href="#contract" onclick="showSection('contract'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    ê¨ñÒïÒçê
                </a>
                <a href="#settings" onclick="showSection('settings'); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    ê›íË
                </a>
                <a href="#" onclick="logout(); return false;" class="flex items-center px-4 py-3 rounded-lg hover:bg-red-900/50 text-gray-400 hover:text-red-400 mt-4 border-t border-gray-700 pt-4 hover:bg-gray-800 hover:text-gray-100">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                    ÉçÉOÉAÉEÉg
                </a>
            </nav>
        </div>

        <!-- ÉÅÉCÉìÉRÉìÉeÉìÉc -->
        <main class="pt-20 px-6" style="background: #f3f4f6; min-height: 100vh;">
            <!-- É_ÉbÉVÉÖÉ{Å[Éh -->
            <div id="dashboardSection" class="section" style="display: none;">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">É_ÉbÉVÉÖÉ{Å[Éh</h2>
                
                <!-- ìùåvÉJÅ[ÉhÇ∆É~ÉjÉJÉåÉìÉ_Å[ -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- ìùåvÉJÅ[Éh -->
                    <div class="lg:col-span-2">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-blue-100 rounded-full">
                                <svg class="h-8 w-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500">êVãKàƒåè</p>
                                <p class="text-2xl font-semibold text-gray-900">24</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-green-100 rounded-full">
                                <svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500">ê¨ñÒó¶</p>
                                <p class="text-2xl font-semibold text-gray-900">68%</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-yellow-100 rounded-full">
                                <svg class="h-8 w-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500">ëŒâûíÜ</p>
                                <p class="text-2xl font-semibold text-gray-900">15</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-purple-100 rounded-full">
                                <svg class="h-8 w-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500">âcã∆ÉÅÉìÉoÅ[</p>
                                <p class="text-2xl font-semibold text-gray-900">8</p>
                            </div>
                        </div>
                    </div>
                        </div>
                    </div>
                    
                    <!-- É~ÉjÉJÉåÉìÉ_Å[ -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">ç°åéÇÃó\íË</h3>
                            <button onclick="showSection('calendar')" class="text-sm text-blue-600 hover:text-blue-800">ëSÇƒï\é¶</button>
                        </div>
                        <div id="miniCalendar" class="text-sm"><div class="grid grid-cols-7 gap-1 text-xs"><div class="text-center font-medium text-gray-500 py-1">ì˙</div><div class="text-center font-medium text-gray-500 py-1">åé</div><div class="text-center font-medium text-gray-500 py-1">âŒ</div><div class="text-center font-medium text-gray-500 py-1">êÖ</div><div class="text-center font-medium text-gray-500 py-1">ñÿ</div><div class="text-center font-medium text-gray-500 py-1">ã‡</div><div class="text-center font-medium text-gray-500 py-1">ìy</div><div></div><div></div><div></div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-01')">1</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-02')">2</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-03')">3</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-04')">4</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded bg-blue-500 text-white hover:bg-blue-600" onclick="goToDate('2025-10-05')">5</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded font-bold text-blue-600" onclick="goToDate('2025-10-06')">6</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-07')">7</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded font-bold text-blue-600" onclick="goToDate('2025-10-08')">8</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-09')">9</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-10')">10</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-11')">11</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-12')">12</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-13')">13</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-14')">14</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-15')">15</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-16')">16</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-17')">17</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-18')">18</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-19')">19</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-20')">20</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-21')">21</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-22')">22</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-23')">23</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-24')">24</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-25')">25</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-26')">26</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-27')">27</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-28')">28</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-29')">29</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-30')">30</div><div class="text-center py-1 cursor-pointer hover:bg-gray-100 rounded" onclick="goToDate('2025-10-31')">31</div></div></div>
                        <div class="mt-4 space-y-2">
                            <div class="flex items-center p-2 bg-blue-50 rounded">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mr-2"></div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium">ìcíÜól åªíní≤ç∏</div>
                                    <div class="text-xs text-gray-500">ç°ì˙ 14:00-15:00</div>
                                </div>
                            </div>
                            <div class="flex items-center p-2 bg-green-50 rounded">
                                <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium">ç≤ì°ól çHéñäJén</div>
                                    <div class="text-xs text-gray-500">ñæì˙ 9:00-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç≈ãﬂÇÃàƒåè -->
                <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">ç≈ãﬂÇÃàƒåè</h3>
                    <!-- ÉXÉ}ÉzÅFâ°ÉXÉNÉçÅ[Éã / É^ÉuÉåÉbÉgà»è„ÅFÉOÉäÉbÉh -->
                    <div class="sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-4 flex sm:flex-none overflow-x-auto gap-3 pb-2 -mx-4 px-4 sm:mx-0 sm:px-0">
                        <!-- àƒåèÉJÅ[Éh1 -->
                        <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow min-w-[280px] sm:min-w-0">
                            <div class="flex justify-between items-start mb-3">
                                <div class="font-semibold text-gray-900">#2024-001</div>
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">ê¨ñÒ</span>
                            </div>
                            <div class="space-y-2">
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">å⁄ãq:</span>
                                    <span class="text-gray-900 font-medium">éRìcëæòY</span>
                                </div>
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">íSìñ:</span>
                                    <span class="text-gray-700">ìcíÜâcã∆</span>
                                </div>
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">çXêVì˙:</span>
                                    <span class="text-gray-700">2024/01/15</span>
                                </div>
                            </div>
                        </div>

                        <!-- àƒåèÉJÅ[Éh2 -->
                        <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow min-w-[280px] sm:min-w-0">
                            <div class="flex justify-between items-start mb-3">
                                <div class="font-semibold text-gray-900">#2024-002</div>
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">ÉqÉAÉäÉìÉOíÜ</span>
                            </div>
                            <div class="space-y-2">
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">å⁄ãq:</span>
                                    <span class="text-gray-900 font-medium">óÈñÿâ‘éq</span>
                                </div>
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">íSìñ:</span>
                                    <span class="text-gray-700">ç≤ì°âcã∆</span>
                                </div>
                                <div class="flex items-center text-sm">
                                    <span class="text-gray-500 w-16">çXêVì˙:</span>
                                    <span class="text-gray-700">2024/01/14</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- dashboardSectionÇÃèIóπ -->

            <!-- âcã∆ä«óùÉZÉNÉVÉáÉìÅiä«óùé“ÇÃÇ›Åj -->
            <div id="salesSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">âcã∆ä«óù</h2>
                    <button onclick="openPermissionModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        êVãKâcã∆í«â¡
                    </button>
                </div>

                <!-- âcã∆ÉÅÉìÉoÅ[ÉäÉXÉg -->
                <div class="bg-white shadow rounded-lg">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ñºëO</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å†å¿ÉåÉxÉã</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ê¨ñÒêî</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ê¨ñÒó¶</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÉAÉNÉVÉáÉì</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">ìcíÜëæòY</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800">ÉäÅ[É_Å[</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">45</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">75%</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <button onclick="editPermissions('ìcíÜëæòY')" class="text-blue-600 hover:text-blue-900 mr-3">å†å¿ï“èW</button>
                                    <button onclick="confirmDeleteSales('ìcíÜëæòY')" class="text-red-600 hover:text-red-900">çÌèú</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">ç≤ì°â‘éq</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">àÍî âcã∆</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">28</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">62%</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <button onclick="editPermissions('ç≤ì°â‘éq')" class="text-blue-600 hover:text-blue-900 mr-3">å†å¿ï“èW</button>
                                    <button onclick="confirmDeleteSales('ç≤ì°â‘éq')" class="text-red-600 hover:text-red-900">çÌèú</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">óÈñÿéüòY</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">àÍî éññ±</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <button onclick="editPermissions('óÈñÿéüòY')" class="text-blue-600 hover:text-blue-900 mr-3">å†å¿ï“èW</button>
                                    <button onclick="confirmDeleteSales('óÈñÿéüòY')" class="text-red-600 hover:text-red-900">çÌèú</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div><!-- salesSectionÇÃèIóπ -->

            <!-- àƒåèä«óùÉZÉNÉVÉáÉì -->
            <div id="casesSection" class="section" style="display: none;">
                <!-- ñ¢êUÇËï™ÇØàƒåèÉZÉNÉVÉáÉì -->
                <div id="unassignedCasesSection" class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-gray-900 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                            ñ¢êUÇËï™ÇØàƒåè
                        </h3>
                        <button onclick="openAssignmentModal()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center text-sm">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            àƒåèÇêUÇËï™ÇØÇÈ
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3" id="unassignedCasesList">
                        <div class="bg-white rounded-lg border border-yellow-300 p-3 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">ñ¢ëŒâû</span>
                            </div>
                            <h4 class="font-bold text-sm mb-1">êVãKå⁄ãqA</h4>
                            <p class="text-xs text-gray-600">ìåãûìsèaíJãÊ</p>
                            <p class="text-xs text-gray-600 mb-2">åÀåöÇƒÅEíz12îN</p>
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>ìoò^: 2025-01-15 10:30</span>
                            </div>
                        </div>
                    
                        <div class="bg-white rounded-lg border border-yellow-300 p-3 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">ñ¢ëŒâû</span>
                            </div>
                            <h4 class="font-bold text-sm mb-1">êVãKå⁄ãqB</h4>
                            <p class="text-xs text-gray-600">ê_ìﬁêÏåßêÏçËés</p>
                            <p class="text-xs text-gray-600 mb-2">É}ÉìÉVÉáÉìÅEíz5îN</p>
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>ìoò^: 2025-01-15 11:45</span>
                            </div>
                        </div>
                    
                        <div class="bg-white rounded-lg border border-yellow-300 p-3 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">ñ¢ëŒâû</span>
                            </div>
                            <h4 class="font-bold text-sm mb-1">êVãKå⁄ãqC</h4>
                            <p class="text-xs text-gray-600">çÈã åßâzíJés</p>
                            <p class="text-xs text-gray-600 mb-2">åÀåöÇƒÅEíz20îN</p>
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>ìoò^: 2025-01-15 14:00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">àƒåèä«óù</h2>
                    <div class="flex items-center space-x-2">
                        <button onclick="toggleCaseView()" class="p-2 text-gray-500 hover:text-gray-700 bg-white rounded-lg shadow">
                            <svg id="viewIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- ÉtÉBÉãÉ^Å[ÅEìùåvÉoÅ[ -->
                <div class="bg-white rounded-lg p-4 mb-4 shadow">
                    <div class="flex flex-wrap items-center gap-3">
                        <!-- ÉXÉeÅ[É^ÉXï ìùåv -->
                        <button onclick="filterCases('all')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition">
                            <span class="text-lg font-bold" id="count-all">5</span>
                            <span class="text-xs">ëSåè</span>
                        </button>
                        <button onclick="filterCases('ñ¢ëŒâû')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition">
                            <span class="text-lg font-bold" id="count-ñ¢ëŒâû">1</span>
                            <span class="text-xs">ñ¢ëŒâû</span>
                        </button>
                        <button onclick="filterCases('ÉAÉ|çœ')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition">
                            <span class="text-lg font-bold" id="count-ÉAÉ|çœ">1</span>
                            <span class="text-xs">ÉAÉ|çœ</span>
                        </button>
                        <button onclick="filterCases('å©êœíÒèoçœ')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition">
                            <span class="text-lg font-bold" id="count-å©êœíÒèoçœ">1</span>
                            <span class="text-xs">å©êœíÒèoçœ</span>
                        </button>
                        <button onclick="filterCases('ê¨ñÒ')" class="filter-stat-btn flex items-center space-x-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition">
                            <span class="text-lg font-bold" id="count-ê¨ñÒ">1</span>
                            <span class="text-xs">ê¨ñÒ</span>
                        </button>

                        <div class="flex-1"></div>

                        <!-- åüçıÅEÉ\Å[Ég -->
                        <input type="text" id="caseSearchInput" placeholder="å⁄ãqñºÅEèZèäÇ≈åüçı..." class="px-3 py-2 border rounded-lg text-sm w-48" onkeyup="searchCases()">
                        <select id="caseSortSelect" onchange="sortCases()" class="px-3 py-2 border rounded-lg text-sm">
                            <option value="date_desc">ìoò^ì˙èáÅiêVÇµÇ¢èáÅj</option>
                            <option value="date_asc">ìoò^ì˙èáÅiå√Ç¢èáÅj</option>
                            <option value="status">ÉXÉeÅ[É^ÉXèá</option>
                        </select>
                    </div>
                </div>

                <!-- ÉJÅ[ÉhÉrÉÖÅ[ -->
                <div id="caseCardView" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(1)" data-case-id="1">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">ñ¢ëŒâû</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(1)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ÉÅÉÇ">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(1)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ÉXÉPÉWÉÖÅ[Éã">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(1)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="íSìñÉpÉX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(1)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ÉLÉÉÉìÉZÉãê\êø">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">éRìcëæòY</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? íSìñ: ìcíÜëæòY</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">ìåãûìsê¢ìcíJãÊ</p>
                    <p class="text-sm text-gray-600 mb-3">åÀåöÇƒÅEíz15îN</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ç≈èIòAóç: 2024/01/15 èââÒñ‚Ç¢çáÇÌÇπ</span>
                        <span>éüâÒó\íË: 2024/01/18 14:00 ìdòbÉtÉHÉçÅ[</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('03-1234-5678')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('03-1234-5678')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(1)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ÉXÉeÅ[É^ÉX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(1)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            è⁄ç◊
                        </button>
                    </div>
                </div>
            
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(2)" data-case-id="2">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">ÉAÉ|çœ</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(2)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ÉÅÉÇ">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(2)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ÉXÉPÉWÉÖÅ[Éã">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(2)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="íSìñÉpÉX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(2)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ÉLÉÉÉìÉZÉãê\êø">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">óÈñÿâ‘éq</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? íSìñ: ç≤ì°â‘éq</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">ê_ìﬁêÏåßâ°ïlés</p>
                    <p class="text-sm text-gray-600 mb-3">åÀåöÇƒÅEíz10îN</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ç≈èIòAóç: 2024/01/16 ìdòbÇ≈ÉAÉ|éÊìæ</span>
                        <span>éüâÒó\íË: 2024/01/20 14:00 åªíní≤ç∏</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('045-9876-5432')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('045-9876-5432')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(2)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ÉXÉeÅ[É^ÉX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(2)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            è⁄ç◊
                        </button>
                    </div>
                </div>
            
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(3)" data-case-id="3">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">å©êœíÒèoçœ</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(3)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ÉÅÉÇ">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(3)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ÉXÉPÉWÉÖÅ[Éã">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(3)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="íSìñÉpÉX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(3)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ÉLÉÉÉìÉZÉãê\êø">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">ç≤ì°àÍòY</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? íSìñ: ìcíÜëæòY</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">çÈã åßÇ≥Ç¢ÇΩÇ‹és</p>
                    <p class="text-sm text-gray-600 mb-3">ÉAÉpÅ[ÉgÅEíz20îN</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ç≈èIòAóç: 2024/01/14 å©êœèëÉÅÅ[Éãëóït</span>
                        <span>éüâÒó\íË: 2024/01/22 10:00 å©êœê‡ñæñKñ‚</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('048-1111-2222')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('048-1111-2222')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(3)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ÉXÉeÅ[É^ÉX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(3)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            è⁄ç◊
                        </button>
                    </div>
                </div>
            
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(4)" data-case-id="4">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800">åªí≤çœ</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(4)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ÉÅÉÇ">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(4)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ÉXÉPÉWÉÖÅ[Éã">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(4)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="íSìñÉpÉX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(4)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ÉLÉÉÉìÉZÉãê\êø">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">ìcíÜî¸çÁ</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? íSìñ: ç≤ì°â‘éq</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">êÁótåßêÁótés</p>
                    <p class="text-sm text-gray-600 mb-3">åÀåöÇƒÅEíz25îN</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ç≈èIòAóç: 2024/01/10 åªíní≤ç∏é¿é{</span>
                        <span>éüâÒó\íË: å©êœçÏê¨íÜ</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('043-3333-4444')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('043-3333-4444')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(4)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ÉXÉeÅ[É^ÉX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(4)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            è⁄ç◊
                        </button>
                    </div>
                </div>
            
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(5)" data-case-id="5">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">ê¨ñÒ</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(5)" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ÉÅÉÇ">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(5)" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ÉXÉPÉWÉÖÅ[Éã">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(5)" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="íSìñÉpÉX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(5)" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ÉLÉÉÉìÉZÉãê\êø">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">çÇã¥åíëæ</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? íSìñ: ìcíÜëæòY</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">ìåãûìsêVèhãÊ</p>
                    <p class="text-sm text-gray-600 mb-3">É}ÉìÉVÉáÉìÅEíz8îN</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ç≈èIòAóç: 2024/01/17 å_ñÒí˜åã</span>
                        <span>éüâÒó\íË: 2024/01/25 çHéñäJén</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('03-5555-6666')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('03-5555-6666')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(5)" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ÉXÉeÅ[É^ÉX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(5)" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            è⁄ç◊
                        </button>
                    </div>
                </div>
            </div>

                <!-- ÉäÉXÉgÉrÉÖÅ[Åièâä˙îÒï\é¶Åj -->
                <div id="caseListView" class="bg-white rounded-lg shadow overflow-hidden" style="display: none;">
                    <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ÉXÉeÅ[É^ÉX</th>
                                <th class="px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">å⁄ãqñº</th>
                                <th class="hidden md:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">èZèä</th>
                                <th class="px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ìdòbî‘çÜ</th>
                                <th class="hidden lg:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ç≈èIòAóç</th>
                                <th class="hidden md:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">éüâÒÉAÉNÉVÉáÉì</th>
                                <th class="px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">ÉAÉNÉVÉáÉì</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap">
                                    <span class="px-1 sm:px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">ñ¢ëŒâû</span>
                                </td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm">éRìcëæòY</td>
                                <td class="hidden md:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">ìåãûìsê¢ìcíJãÊ</td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500"><a href="tel:03-1234-5678">03-1234-5678</a></td>
                                <td class="hidden lg:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">1/15 ñ‚çáÇπ</td>
                                <td class="hidden md:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">1/18 14:00 ìdòb</td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm font-medium">
                                    <button onclick="callCustomer('03-1234-5678')" class="text-green-600 hover:text-green-900 mr-2">??</button>
                                    <button onclick="showCaseDetail(1)" class="text-blue-600 hover:text-blue-900">è⁄ç◊</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap">
                                    <span class="px-1 sm:px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">ÉAÉ|çœ</span>
                                </td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm">óÈñÿâ‘éq</td>
                                <td class="hidden md:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">ê_ìﬁêÏåßâ°ïlés</td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500"><a href="tel:045-9876-5432">045-9876-5432</a></td>
                                <td class="hidden lg:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">1/16 ÉAÉ|éÊìæ</td>
                                <td class="hidden md:table-cell px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm text-gray-500">1/20 14:00 åªí≤</td>
                                <td class="px-3 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-sm font-medium">
                                    <button onclick="callCustomer('045-9876-5432')" class="text-green-600 hover:text-green-900 mr-2">??</button>
                                    <button onclick="showCaseDetail(2)" class="text-blue-600 hover:text-blue-900">è⁄ç◊</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                </div>
            </div><!-- casesSectionÇÃèIóπ -->

            <!-- ç‡ñ±ä«óùÉZÉNÉVÉáÉì -->
            <div id="billingSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">ç‡ñ±ä«óù</h2>
                    <div class="flex space-x-2">
                        <button onclick="exportFinancialReport()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            CSVèoóÕ
                        </button>
                    </div>
                </div>

                <!-- ÉTÉ}ÉäÅ[ÉJÅ[Éh -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500" id="referralFeeMonth">1åéè–âÓóø</p>
                                <p class="text-2xl font-bold text-gray-900" id="referralFeeAmount">\132,000</p>
                                <p class="text-xs text-gray-500" id="referralFeeCases">àƒåè6åèï™</p>
                            </div>
                            <div class="p-3 bg-blue-100 rounded-full">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500" id="commissionMonth">1åéê¨ñÒéËêîóø</p>
                                <p class="text-2xl font-bold text-green-600" id="commissionAmount">\180,000</p>
                                <p class="text-xs text-gray-500" id="commissionCases">ê¨ñÒ2åèï™</p>
                            </div>
                            <div class="p-3 bg-green-100 rounded-full">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500" id="profitLabel">ó›åvóòâv</p>
                                <p class="text-2xl font-bold text-yellow-600" id="profitAmount">\650,000</p>
                                <p class="text-xs text-gray-500" id="profitPeriod">2025îNìx</p>
                            </div>
                            <div class="p-3 bg-yellow-100 rounded-full">
                                <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500" id="roiLabel">1åéROI</p>
                                <p class="text-2xl font-bold text-blue-600" id="roiValue">3265%</p>
                                <p class="text-xs text-gray-500" id="roiPrevious">ëOåé: 2850%</p>
                            </div>
                            <div class="p-3 bg-red-100 rounded-full">
                                <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- É^ÉuÉiÉrÉQÅ[ÉVÉáÉì -->
                <div class="bg-white rounded-lg shadow mb-6">
                    <div class="border-b border-gray-200">
                        <nav class="flex -mb-px">
                            <button onclick="showBillingTab('purchase')" class="billing-tab billing-tab-active px-6 py-3 border-b-2 font-medium text-sm" data-tab="purchase">
                                è–âÓóøóöó
                            </button>
                            <button onclick="showBillingTab('commission')" class="billing-tab px-6 py-3 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="commission">
                                ê¨ñÒéËêîóø
                            </button>
                            <button onclick="showBillingTab('payment')" class="billing-tab px-6 py-3 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="payment">
                                éxï•óöó
                            </button>
                            <button onclick="showBillingTab('analysis')" class="billing-tab px-6 py-3 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="analysis">
                                é˚éxï™êÕ
                            </button>
                        </nav>
                    </div>

                    <!-- è–âÓóøóöóÉ^Éu -->
                    <div id="purchaseTab" class="billing-tab-content p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">è–âÓóøéxï•óöó</h3>
                            <div class="flex items-center space-x-4">
                                <div class="text-sm bg-blue-50 px-3 py-1 rounded">
                                    <span class="text-gray-600">ÉfÉ|ÉWÉbÉgécçÇ:</span>
                                    <span class="font-bold text-blue-600">\440,000</span>
                                    <span class="text-gray-500">(20åèï™)</span>
                                </div>
                                <input type="month" value="2025-01" onchange="updateFinancialData(this.value)" class="border rounded px-3 py-1 text-sm">
                            </div>
                        </div>

                        <!-- éxï•Ç¢ÉXÉPÉWÉÖÅ[ÉãèÓïÒ -->
                        <div class="bg-blue-50 p-3 rounded-lg mb-4 text-sm">
                            <div class="flex items-center justify-between">
                                <div>
                                    <span class="font-medium text-blue-800">éxï•èåè:</span>
                                    <span class="text-blue-700 ml-2">åéññí˜Çﬂ</span>
                                </div>
                                <div class="text-right">
                                    <span class="text-blue-700">êUçû: óÇåé15ì˙ / å˚ç¿à¯óé: óÇåé27ì˙</span>
                                    <span class="text-gray-600 text-xs ml-2">(ìyì˙èjÇÕóÇâcã∆ì˙)</span>
                                </div>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">è–âÓì˙</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">àƒåèID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">å⁄ãqñº</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ï®åèéÌï </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">çHéñì‡óe</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">è–âÓóø</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éxï•ó\íËì˙</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éxï•èÛãµ</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ê¨ñÒäz/ROI</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">è⁄ç◊</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/15</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-001</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">ìcíÜól</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">åÀåöÇƒ</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">äOï«ìhëïÅEâÆç™ìhëï</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2/15(ìy)Å®17(åé)</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">êøãÅë“Çø</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">åè¬íÜ</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-center">
                                            <button onclick="showCaseDetail(1)" class="text-blue-600 hover:text-blue-900">è⁄ç◊</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 bg-green-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-002</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">ç≤ì°ól</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">àÍåÀåöÇƒ</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">äOï«ìhëï</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2/15(ìy)Å®17(åé)</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">éxï•çœ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                            <div class="text-xs">\1.2M</div>
                                            <div class="text-green-600 font-bold text-xs">3636%</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-center">
                                            <button onclick="showCaseDetail(2)" class="text-blue-600 hover:text-blue-900">è⁄ç◊</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 bg-green-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/08</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-003</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">óÈñÿól</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">åÀåöÇƒ</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">âÆç™ïòÇ´ë÷Ç¶Åiä¢Åj</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2/27(ñÿ)</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">éxï•çœ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                            <div class="text-xs">\800K</div>
                                            <div class="text-green-600 font-bold text-xs">3636%</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-center">
                                            <button onclick="showCaseDetail(3)" class="text-blue-600 hover:text-blue-900">è⁄ç◊</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ê¨ñÒéËêîóøÉ^Éu -->
                    <div id="commissionTab" class="billing-tab-content p-6" style="display: none;">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">ê¨ñÒéËêîóøéxï•óöó</h3>
                            <div class="flex space-x-2">
                                <select class="border rounded px-3 py-1 text-sm">
                                    <option>ëSÇƒ</option>
                                    <option>éxï•çœ</option>
                                    <option>ñ¢ï•Ç¢</option>
                                </select>
                                <input type="month" value="2025-01" class="border rounded px-3 py-1 text-sm">
                            </div>
                        </div>

                        <!-- éxï•Ç¢ÉXÉPÉWÉÖÅ[ÉãèÓïÒ -->
                        <div class="bg-yellow-50 p-3 rounded-lg mb-4 text-sm">
                            <span class="font-medium text-yellow-800">éxï•èåè:</span>
                            <span class="text-yellow-700">êøãÅèëî≠çsÇ©ÇÁ3âcã∆ì˙à»ì‡</span>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ê¨ñÒì˙</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">àƒåèID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">å⁄ãqñº</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ê¨ñÒã‡äz</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éËêîóøó¶</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éËêîóøäz(ê≈çû)</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éxï•ä˙ì˙</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éxï•èÛãµ</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">êøãÅèë</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50 bg-green-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-002</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">ç≤ì°ól</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\1,200,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\132,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/31</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">éxï•çœ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadInvoicePDF('INV-2025-0102')" class="text-blue-600 hover:text-blue-900">É_ÉEÉìÉçÅ[Éh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 bg-green-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/08</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2025-003</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">óÈñÿól</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\800,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\88,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/31</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">éxï•çœ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadInvoicePDF('INV-2025-0103')" class="text-blue-600 hover:text-blue-900">É_ÉEÉìÉçÅ[Éh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/05</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2024-845</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">çÇã¥ól</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\550,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-red-600">\60,500</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/25</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">êøãÅë“Çø</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="viewInvoice('INV-2025-0104')" class="text-blue-600 hover:text-blue-900">ämîF</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024/12/28</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#C2024-810</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">éRìcól</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\950,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\104,500</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/15</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">éxï•çœ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadInvoicePDF('INV-2024-1228')" class="text-blue-600 hover:text-blue-900">É_ÉEÉìÉçÅ[Éh</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- éxï•óöóÉ^Éu -->
                    <div id="paymentTab" class="billing-tab-content p-6" style="display: none;">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">éxï•óöó</h3>
                            <div class="flex space-x-2">
                                <select class="border rounded px-3 py-1 text-sm">
                                    <option>ëSÇƒ</option>
                                    <option>è–âÓóø</option>
                                    <option>ê¨ñÒéËêîóø</option>
                                    <option>ÇªÇÃëº</option>
                                </select>
                                <input type="month" value="2025-01" class="border rounded px-3 py-1 text-sm">
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éxï•ì˙</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">êøãÅèëî‘çÜ</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éÌï </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ì‡óe</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éxï•äz(ê≈çû)</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éxï•ï˚ñ@</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ÉXÉeÅ[É^ÉX</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">óÃé˚èë</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/15</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0156</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">è–âÓóø</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">àƒåè#C2025-001 ìcíÜólÅiäOï«ìhëïÅj</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ã‚çsêUçû</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0156')" class="text-blue-600 hover:text-blue-900">É_ÉEÉìÉçÅ[Éh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0145</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">è–âÓóø</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">àƒåè#C2025-002 ç≤ì°ólÅiäOï«ìhëïÅj</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ã‚çsêUçû</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0145')" class="text-blue-600 hover:text-blue-900">É_ÉEÉìÉçÅ[Éh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0102</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ê¨ñÒéËêîóø</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">ç≤ì°ólàƒåè ê¨ñÒéËêîóø</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\132,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ã‚çsêUçû</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0102')" class="text-blue-600 hover:text-blue-900">É_ÉEÉìÉçÅ[Éh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/08</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0103</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ê¨ñÒéËêîóø</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">óÈñÿólàƒåè ê¨ñÒéËêîóø</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\88,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ã‚çsêUçû</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0103')" class="text-blue-600 hover:text-blue-900">É_ÉEÉìÉçÅ[Éh</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/05</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">INV-2025-0133</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">è–âÓóø</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">àƒåè#C2024-098 ë∫ìcólÅiÉÇÉãÉ^ÉãäOï«Åj</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">\22,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ã‚çsêUçû</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="downloadReceipt('RCP-2025-0133')" class="text-blue-600 hover:text-blue-900">É_ÉEÉìÉçÅ[Éh</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- é˚éxï™êÕÉ^Éu -->
                    <div id="analysisTab" class="billing-tab-content p-6" style="display: none;">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold">é˚éxï™êÕ</h3>
                            <select class="border rounded px-3 py-1 text-sm">
                                <option>2025îN1åé</option>
                                <option>2024îN12åé</option>
                                <option>2024îN11åé</option>
                            </select>
                        </div>

                        <!-- åéä‘ÉTÉ}ÉäÅ[ -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-white border rounded-lg p-4">
                                <div class="text-sm text-gray-500 mb-1">îÑè„çÇ</div>
                                <div class="text-2xl font-bold text-gray-900">\3,550,000</div>
                                <div class="text-xs text-green-600 mt-1">+12% ëOåéî‰</div>
                            </div>
                            <div class="bg-white border rounded-lg p-4">
                                <div class="text-sm text-gray-500 mb-1">éxèoçáåv</div>
                                <div class="text-2xl font-bold text-gray-900">\625,000</div>
                                <div class="text-xs text-red-600 mt-1">+8% ëOåéî‰</div>
                            </div>
                            <div class="bg-white border rounded-lg p-4">
                                <div class="text-sm text-gray-500 mb-1">ëeóòâv</div>
                                <div class="text-2xl font-bold text-green-600">\2,925,000</div>
                                <div class="text-xs text-green-600 mt-1">+14% ëOåéî‰</div>
                            </div>
                            <div class="bg-white border rounded-lg p-4">
                                <div class="text-sm text-gray-500 mb-1">ROI</div>
                                <div class="text-2xl font-bold text-blue-600">468%</div>
                                <div class="text-xs text-green-600 mt-1">óDó«</div>
                            </div>
                        </div>

                        <!-- é˚éxì‡ñÛ -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <!-- é˚ì¸ì‡ñÛ -->
                            <div class="bg-white border rounded-lg p-4">
                                <h4 class="font-semibold text-gray-900 mb-3">é˚ì¸ì‡ñÛ</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center">
                                            <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                            <span class="text-sm text-gray-700">çHéñîÑè„</span>
                                        </div>
                                        <span class="text-sm font-semibold">\3,350,000</span>
                                    </div>
                                    <div class="pt-3 mt-3 border-t flex justify-between">
                                        <span class="text-sm font-semibold text-gray-700">çáåv</span>
                                        <span class="text-sm font-bold text-green-600">\3,350,000</span>
                                    </div>
                                </div>
                            </div>

                            <!-- éxèoì‡ñÛ -->
                            <div class="bg-white border rounded-lg p-4">
                                <h4 class="font-semibold text-gray-900 mb-3">éxèoì‡ñÛ</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center">
                                            <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div>
                                            <span class="text-sm text-gray-700">è–âÓóø</span>
                                        </div>
                                        <span class="text-sm font-semibold">\176,000</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center">
                                            <div class="w-2 h-2 bg-orange-500 rounded-full mr-2"></div>
                                            <span class="text-sm text-gray-700">ê¨ñÒéËêîóø</span>
                                        </div>
                                        <span class="text-sm font-semibold">\325,000</span>
                                    </div>
                                    <div class="pt-3 mt-3 border-t flex justify-between">
                                        <span class="text-sm font-semibold text-gray-700">çáåv</span>
                                        <span class="text-sm font-bold text-red-600">\501,000</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- àƒåèï é˚éx -->
                        <div class="bg-white border rounded-lg p-4">
                            <h4 class="font-semibold text-gray-900 mb-3">àƒåèï é˚éxTOP5</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead class="border-b">
                                        <tr>
                                            <th class="text-left text-xs font-medium text-gray-500 uppercase pb-2">àƒåè</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">è–âÓóø</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">îÑè„</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">éËêîóø</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">óòâv</th>
                                            <th class="text-right text-xs font-medium text-gray-500 uppercase pb-2">ROI</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200">
                                        <tr>
                                            <td class="py-2 text-sm text-gray-900">ç≤ì°ólàƒåè</td>
                                            <td class="py-2 text-sm text-right">\22,000</td>
                                            <td class="py-2 text-sm text-right">\1,200,000</td>
                                            <td class="py-2 text-sm text-right">\132,000</td>
                                            <td class="py-2 text-sm text-right font-semibold text-green-600">\1,046,000</td>
                                            <td class="py-2 text-sm text-right font-bold text-blue-600">4755%</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 text-sm text-gray-900">óÈñÿólàƒåè</td>
                                            <td class="py-2 text-sm text-right">\22,000</td>
                                            <td class="py-2 text-sm text-right">\800,000</td>
                                            <td class="py-2 text-sm text-right">\88,000</td>
                                            <td class="py-2 text-sm text-right font-semibold text-green-600">\690,000</td>
                                            <td class="py-2 text-sm text-right font-bold text-blue-600">800%</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 text-sm text-gray-900">éRìcólàƒåè</td>
                                            <td class="py-2 text-sm text-right">\85,000</td>
                                            <td class="py-2 text-sm text-right">\950,000</td>
                                            <td class="py-2 text-sm text-right">\95,000</td>
                                            <td class="py-2 text-sm text-right font-semibold text-green-600">\770,000</td>
                                            <td class="py-2 text-sm text-right font-bold text-blue-600">906%</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 text-sm text-gray-900">çÇã¥ólàƒåè</td>
                                            <td class="py-2 text-sm text-right">\75,000</td>
                                            <td class="py-2 text-sm text-right">\600,000</td>
                                            <td class="py-2 text-sm text-right">\60,000</td>
                                            <td class="py-2 text-sm text-right font-semibold text-green-600">\465,000</td>
                                            <td class="py-2 text-sm text-right font-bold text-blue-600">620%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div><!-- billingSectionÇÃèIóπ -->

            <!-- ÉfÉ|ÉWÉbÉgÉZÉNÉVÉáÉì -->
            <div id="depositSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">ÉfÉ|ÉWÉbÉgä«óù</h2>
                    <div class="flex space-x-2">
                        <button onclick="showDepositModal()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            ÉfÉ|ÉWÉbÉgí«â¡
                        </button>
                    </div>
                </div>

                <!-- ÉfÉ|ÉWÉbÉgèÛãµÉTÉ}ÉäÅ[ -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white border-2 border-blue-200 rounded-lg shadow p-4">
                        <div class="text-sm text-gray-600 mb-1">ÉfÉ|ÉWÉbÉgécçÇ</div>
                        <div class="text-3xl font-bold text-blue-600">20/25åè</div>
                        <div class="text-sm text-gray-500 mt-1">\440,000 écçÇ</div>
                    </div>
                    <div class="bg-white border rounded-lg shadow p-4">
                        <div class="text-sm text-gray-600 mb-1">óLå¯ä˙å¿</div>
                        <div class="text-2xl font-bold text-gray-900">2025/03/31</div>
                        <div class="text-sm text-orange-600 mt-1">écÇË45ì˙</div>
                    </div>
                    <div class="bg-white border rounded-lg shadow p-4">
                        <div class="text-sm text-gray-600 mb-1">åªç›ÇÃê›íË</div>
                        <div class="text-2xl font-bold text-green-600">åJâz</div>
                        <div class="text-sm text-gray-500 mt-1">ç≈èIçXêV: 2025/01/17</div>
                    </div>
                    <div class="bg-white border rounded-lg shadow p-4">
                        <div class="text-sm text-gray-600 mb-1">ï\é¶ÉâÉìÉN</div>
                        <div class="text-2xl font-bold text-purple-600">óDêÊ+1</div>
                        <div class="text-sm text-gray-500 mt-1">ÉfÉ|ÉWÉbÉgì¡ìTìKópíÜ</div>
                    </div>
                </div>

                <!-- ÉâÉìÉLÉìÉOì¡ìTê‡ñæ -->
                <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow mb-6 p-6">
                    <div class="flex items-start">
                        <svg class="w-8 h-8 text-purple-600 mr-3 mt-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                        </svg>
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">ÉfÉ|ÉWÉbÉgçwì¸ì¡ìT</h3>
                            <p class="text-sm text-gray-700 mb-3">
                                ÉfÉ|ÉWÉbÉgÇçwì¸Ç∑ÇÈÇ∆ÅAÉÜÅ[ÉUÅ[Ç÷ï\é¶Ç≥ÇÍÇÈÉâÉìÉLÉìÉOÇ™<span class="font-bold text-purple-600">ëSÇƒUP</span>Ç≥ÇÍÅA
                                ÇÊÇËó«Ç¢èåèÇ≈àƒåèÇ™ãüããÇ≥ÇÍÇ‚Ç∑Ç≠Ç»ÇËÇ‹Ç∑ÅB
                            </p>
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3">
                                <div class="flex items-start">
                                    <svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                    </svg>
                                    <div class="text-sm text-yellow-800">
                                        <p class="font-medium">ÉfÉ|ÉWÉbÉgìKópëŒè€</p>
                                        <p class="text-xs mt-1">ÉfÉ|ÉWÉbÉgÇÕäÓñ{è–âÓóø\22,000ÇÃàƒåèÇÃÇ›Ç…ìKópÇ≥ÇÍÇ‹Ç∑ÅBÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉìÅi\33,000ÅjÇ‚ïîï™é{çHÅi\11,000à»â∫ÅjÇ…ÇÕìKópÇ≥ÇÍÇ‹ÇπÇÒÅB</p>
                                    </div>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <div class="bg-white rounded-lg p-3 border border-purple-200">
                                    <div class="flex items-center mb-1">
                                        <svg class="w-4 h-4 text-purple-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                        </svg>
                                        <span class="text-xs font-medium text-gray-700">óDêÊï\é¶</span>
                                    </div>
                                    <p class="text-xs text-gray-600">åüçıåãâ ÇÃè„à Ç…ï\é¶</p>
                                </div>
                                <div class="bg-white rounded-lg p-3 border border-purple-200">
                                    <div class="flex items-center mb-1">
                                        <svg class="w-4 h-4 text-purple-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                        </svg>
                                        <span class="text-xs font-medium text-gray-700">êMóäìxUP</span>
                                    </div>
                                    <p class="text-xs text-gray-600">ëOï•Ç¢Ç≈êMóää¥å¸è„</p>
                                </div>
                                <div class="bg-white rounded-lg p-3 border border-purple-200">
                                    <div class="flex items-center mb-1">
                                        <svg class="w-4 h-4 text-purple-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                        </svg>
                                        <span class="text-xs font-medium text-gray-700">àƒåèälìæó¶UP</span>
                                    </div>
                                    <p class="text-xs text-gray-600">ã£çáëºé–ÇÊÇËóDà </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- åJâz/ï‘ã‡ê›íË -->
                <div class="bg-white rounded-lg shadow mb-6 p-6">
                    <h3 class="text-lg font-semibold mb-4">åJâzÅEï‘ã‡ê›íË</h3>
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
                        <div class="flex items-start">
                            <svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                            </svg>
                            <div class="text-sm text-yellow-800">
                                <p class="font-medium mb-1">èdóvÇ»Ç®ímÇÁÇπ</p>
                                <ul class="list-disc list-inside space-y-1 text-xs">
                                    <li>ÉfÉ|ÉWÉbÉgÇÃóLå¯ä˙å¿ÇÕì¸ã‡ÇÃóÇÅXåéññÇ‹Ç≈Ç≈Ç∑</li>
                                    <li>ï‘ã‡éûÇÃêUçûéËêîóøÇÕÇ®ãqólïâíSÇ∆Ç»ÇËÇ‹Ç∑</li>
                                    <li>åJâzÇëIëÇ∑ÇÈÇ∆ñ≥ä˙å¿Ç…åpë±óòópâ¬î\Ç≈Ç∑</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-700 mb-2">ä˙å¿êÿÇÍéûÇÃèàóùï˚ñ@</p>
                            <div class="flex space-x-4">
                                <label class="flex items-center">
                                    <input type="radio" name="depositHandling" value="rollover" checked="" class="mr-2">
                                    <span class="text-sm">åJâzÅiêÑèßÅj</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="depositHandling" value="refund" class="mr-2">
                                    <span class="text-sm">ï‘ã‡</span>
                                </label>
                            </div>
                        </div>
                        <button onclick="updateDepositSetting()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            ê›íËÇï€ë∂
                        </button>
                    </div>
                </div>

                <!-- ÉfÉ|ÉWÉbÉgéÊà¯óöó -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">ÉfÉ|ÉWÉbÉgéÊà¯óöó</h3>
                        <div class="flex space-x-2">
                            <select id="depositTypeFilter" onchange="filterDepositHistory()" class="border rounded px-3 py-1 text-sm">
                                <option value="all">ëSÇƒ</option>
                                <option value="ê\êø">ê\êøíÜ</option>
                                <option value="îΩâf">îΩâf</option>
                                <option value="óòóp">óòóp</option>
                                <option value="ï‘ã‡">ï‘ã‡</option>
                            </select>
                            <input type="month" id="depositMonthFilter" value="2025-01" onchange="filterDepositHistory()" class="border rounded px-3 py-1 text-sm">
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ì˙ït</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éÌï </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">èÛë‘</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">åèêî</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ã‡äz</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ê‡ñæ</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">écåèêî</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">óLå¯ä˙å¿</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ëÄçÏ</th>
                                </tr>
                            </thead>
                            <tbody id="depositHistoryBody" class="bg-white divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50 deposit-row" data-type="ê\êø" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/17</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">ê\êø</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">ì¸ã‡ë“Çø</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">10</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">\220,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">INV-20250117 (éxï•ä˙å¿:1/24)</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <button onclick="downloadInvoice('INV-20250117')" class="text-blue-600 hover:text-blue-800">êøãÅèëDL</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 bg-gray-50 deposit-row" data-type="óòóp" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/15</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">óòóp</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">-1</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600">-\22,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600">
                                        <a href="#" onclick="showCaseDetail('C2025-001'); return false;" class="hover:underline">#C2025-001 ìcíÜól</a>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">20</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/03/31</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                </tr>
                                <tr class="hover:bg-gray-50 deposit-row" data-type="óòóp" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/10</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">óòóp</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">-1</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600">-\22,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600">
                                        <a href="#" onclick="showCaseDetail('C2025-002'); return false;" class="hover:underline">#C2025-002 ç≤ì°ól</a>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">21</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/03/31</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                </tr>
                                <tr class="hover:bg-gray-50 bg-gray-50 deposit-row" data-type="îΩâf" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/05</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">îΩâf</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">+25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600">+\550,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">INV-20250101 ì¸ã‡ämîF</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/03/31</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <button onclick="downloadInvoice('INV-20250101')" class="text-blue-600 hover:text-blue-800">êøãÅèëDL</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 deposit-row" data-type="ê\êø" data-date="2025-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025/01/01</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">ê\êø</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">ì¸ã‡çœ</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">\550,000</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">INV-20250101 (ì¸ã‡:1/5)</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <button onclick="downloadInvoice('INV-20250101')" class="text-blue-600 hover:text-blue-800">êøãÅèëDL</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 bg-gray-50 deposit-row" data-type="ï‘ã‡" data-date="2024-12">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024/12/15</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">ï‘ã‡</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">äÆóπ</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">-3</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600">\65,450</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ä˙å¿êÿÇÍï‘ã‡(éËêîóø\550ç∑à¯)</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">0</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024/11/30</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div><!-- depositSectionÇÃèIóπ -->

            <!-- ÉåÉ|Å[ÉgÉZÉNÉVÉáÉì -->
            <div id="reportsSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">ÉåÉ|Å[Ég</h2>
                    <div class="flex space-x-2">
                        <select id="reportPeriod" onchange="updateReports()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                            <option value="month">ç°åé</option>
                            <option value="quarter">ç°élîºä˙</option>
                            <option value="year">ç°îNìx</option>
                            <option value="custom">ä˙ä‘éwíË</option>
                        </select>
                        <button onclick="exportReport()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            ÉåÉ|Å[ÉgèoóÕ
                        </button>
                    </div>
                </div>

                <!-- KPIÉTÉ}ÉäÅ[ -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">ëçîÑè„</p>
                                <p class="text-2xl font-bold text-gray-900">\8,450,000</p>
                                <p class="text-xs text-green-600 flex items-center mt-1">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    12% ëOåéî‰
                                </p>
                            </div>
                            <div class="p-3 bg-blue-100 rounded-full">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">ê¨ñÒó¶</p>
                                <p class="text-2xl font-bold text-gray-900">68.5%</p>
                                <p class="text-xs text-green-600 flex items-center mt-1">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    5.2% â¸ëP
                                </p>
                            </div>
                            <div class="p-3 bg-green-100 rounded-full">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">ïΩãœíPâø</p>
                                <p class="text-2xl font-bold text-gray-900">\952,000</p>
                                <p class="text-xs text-red-600 flex items-center mt-1">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    3% ëOåéî‰
                                </p>
                            </div>
                            <div class="p-3 bg-yellow-100 rounded-full">
                                <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">êVãKàƒåè</p>
                                <p class="text-2xl font-bold text-gray-900">42åè</p>
                                <p class="text-xs text-green-600 flex items-center mt-1">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    8åè ëùâ¡
                                </p>
                            </div>
                            <div class="p-3 bg-purple-100 rounded-full">
                                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÉOÉâÉtÉGÉäÉA -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- îÑè„êÑà⁄ÉOÉâÉt -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">îÑè„êÑà⁄</h3>
                            <select class="text-sm border rounded px-2 py-1">
                                <option>åéï </option>
                                <option>èTï </option>
                                <option>ì˙ï </option>
                            </select>
                        </div>
                        <div style="height: 200px;">
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>

                    <!-- ê¨ñÒó¶êÑà⁄ÉOÉâÉt -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">ê¨ñÒó¶êÑà⁄</h3>
                            <select class="text-sm border rounded px-2 py-1">
                                <option>åéï </option>
                                <option>èTï </option>
                            </select>
                        </div>
                        <div style="height: 200px;">
                            <canvas id="conversionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- è⁄ç◊ÉeÅ[ÉuÉã -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- âcã∆ï ê¨ê— -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b">
                            <h3 class="text-lg font-semibold text-gray-900">âcã∆ï ê¨ê—</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">âcã∆ñº</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ê¨ñÒêî</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ê¨ñÒó¶</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">îÑè„</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">ìcíÜëæòY</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">12</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900">75%</span>
                                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                    <div class="bg-green-500 h-2 rounded-full" style="width: 75%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\3,200,000</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">ç≤ì°â‘éq</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">8</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900">62%</span>
                                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 62%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\2,100,000</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">óÈñÿéüòY</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">5</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900">45%</span>
                                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                    <div class="bg-red-500 h-2 rounded-full" style="width: 45%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\1,450,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ÉGÉäÉAï ê¨ê— -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="px-6 py-4 border-b">
                            <h3 class="text-lg font-semibold text-gray-900">ÉGÉäÉAï ê¨ê—</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ÉGÉäÉA</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">àƒåèêî</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ê¨ñÒó¶</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">îÑè„</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">ìåãûìs</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">18</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">72%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\4,200,000</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">ê_ìﬁêÏåß</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">12</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">65%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\2,800,000</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">çÈã åß</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">8</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">58%</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">\1,450,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ÉäÅ[ÉhÉ^ÉCÉÄï™êÕÉZÉNÉVÉáÉì -->
                <div class="mt-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-gray-900">ÉäÅ[ÉhÉ^ÉCÉÄï™êÕ</h3>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-500">ïΩãœílï\é¶</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="showMedian" class="sr-only peer" onchange="updateLeadTimeDisplay()">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                                <span class="text-sm text-gray-500">íÜâõílï\é¶</span>
                            </div>
                        </div>

                        <!-- KPIÉJÅ[Éh -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-blue-600 font-medium">ñ‚çáÇπ Å® åªíní≤ç∏</p>
                                        <p class="text-2xl font-bold text-blue-900" id="leadTime1">3.2ì˙</p>
                                        <p class="text-xs text-blue-600 flex items-center mt-1">
                                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                            </svg>
                                            0.5ì˙ íZèk
                                        </p>
                                    </div>
                                    <div class="p-3 bg-blue-200 rounded-full">
                                        <svg class="w-6 h-6 text-blue-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-green-600 font-medium">åªíní≤ç∏ Å® å©êœíÒèo</p>
                                        <p class="text-2xl font-bold text-green-900" id="leadTime2">2.8ì˙</p>
                                        <p class="text-xs text-green-600 flex items-center mt-1">
                                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                            </svg>
                                            0.2ì˙ íZèk
                                        </p>
                                    </div>
                                    <div class="p-3 bg-green-200 rounded-full">
                                        <svg class="w-6 h-6 text-green-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-purple-600 font-medium">å©êœíÒèo Å® ê¨ñÒ</p>
                                        <p class="text-2xl font-bold text-purple-900" id="leadTime3">5.5ì˙</p>
                                        <p class="text-xs text-red-600 flex items-center mt-1">
                                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                            </svg>
                                            1.2ì˙ âÑí∑
                                        </p>
                                    </div>
                                    <div class="p-3 bg-purple-200 rounded-full">
                                        <svg class="w-6 h-6 text-purple-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÉäÅ[ÉhÉ^ÉCÉÄÉ`ÉÉÅ[Ég -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- åéï êÑà⁄ÉOÉâÉt -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="text-sm font-semibold text-gray-700 mb-3">åéï ÉäÅ[ÉhÉ^ÉCÉÄêÑà⁄</h4>
                                <div style="height: 250px;">
                                    <canvas id="leadTimeChart"></canvas>
                                </div>
                            </div>

                            <!-- ÉtÉ@ÉlÉãï™êÕ -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="text-sm font-semibold text-gray-700 mb-3">âcã∆ÉtÉ@ÉlÉãï™êÕ</h4>
                                <div class="space-y-3">
                                    <div class="relative">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700">ñ‚çáÇπ</span>
                                            <span class="text-sm text-gray-500">142åè</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-8">
                                            <div class="bg-blue-500 h-8 rounded-full flex items-center justify-center text-white text-xs" style="width: 100%">
                                                100%
                                            </div>
                                        </div>
                                    </div>

                                    <div class="relative">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700">åªíní≤ç∏</span>
                                            <span class="text-sm text-gray-500">98åè</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-8">
                                            <div class="bg-green-500 h-8 rounded-full flex items-center justify-center text-white text-xs" style="width: 69%">
                                                69% (ïΩãœ3.2ì˙)
                                            </div>
                                        </div>
                                    </div>

                                    <div class="relative">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700">å©êœíÒèo</span>
                                            <span class="text-sm text-gray-500">85åè</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-8">
                                            <div class="bg-yellow-500 h-8 rounded-full flex items-center justify-center text-white text-xs" style="width: 60%">
                                                60% (ïΩãœ2.8ì˙)
                                            </div>
                                        </div>
                                    </div>

                                    <div class="relative">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700">ê¨ñÒ</span>
                                            <span class="text-sm text-gray-500">42åè</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-8">
                                            <div class="bg-purple-500 h-8 rounded-full flex items-center justify-center text-white text-xs" style="width: 30%">
                                                30% (ïΩãœ5.5ì˙)
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">ÉgÅ[É^ÉãïΩãœì˙êî:</span>
                                        <span class="font-bold text-gray-900">11.5ì˙</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- âcã∆ï ÉäÅ[ÉhÉ^ÉCÉÄî‰är -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="text-sm font-semibold text-gray-700 mb-4">âcã∆ï ÉäÅ[ÉhÉ^ÉCÉÄî‰är</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead>
                                        <tr class="text-xs text-gray-500 uppercase">
                                            <th class="text-left py-2">âcã∆íSìñ</th>
                                            <th class="text-center py-2">ñ‚çáÇπÅ®í≤ç∏</th>
                                            <th class="text-center py-2">í≤ç∏Å®å©êœ</th>
                                            <th class="text-center py-2">å©êœÅ®ê¨ñÒ</th>
                                            <th class="text-center py-2">çáåvì˙êî</th>
                                            <th class="text-center py-2">ê¨ñÒó¶</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-sm">
                                        <tr class="border-t border-gray-200">
                                            <td class="py-3 font-medium text-gray-900">ìcíÜëæòY</td>
                                            <td class="text-center text-green-600 font-medium">2.5ì˙</td>
                                            <td class="text-center text-green-600 font-medium">2.0ì˙</td>
                                            <td class="text-center text-green-600 font-medium">4.5ì˙</td>
                                            <td class="text-center font-bold text-gray-900">9.0ì˙</td>
                                            <td class="text-center">
                                                <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">75%</span>
                                            </td>
                                        </tr>
                                        <tr class="border-t border-gray-200">
                                            <td class="py-3 font-medium text-gray-900">ç≤ì°â‘éq</td>
                                            <td class="text-center text-yellow-600 font-medium">3.0ì˙</td>
                                            <td class="text-center text-yellow-600 font-medium">3.2ì˙</td>
                                            <td class="text-center text-yellow-600 font-medium">5.8ì˙</td>
                                            <td class="text-center font-bold text-gray-900">12.0ì˙</td>
                                            <td class="text-center">
                                                <span class="px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800">62%</span>
                                            </td>
                                        </tr>
                                        <tr class="border-t border-gray-200">
                                            <td class="py-3 font-medium text-gray-900">óÈñÿéüòY</td>
                                            <td class="text-center text-red-600 font-medium">4.5ì˙</td>
                                            <td class="text-center text-red-600 font-medium">3.8ì˙</td>
                                            <td class="text-center text-red-600 font-medium">7.2ì˙</td>
                                            <td class="text-center font-bold text-gray-900">15.5ì˙</td>
                                            <td class="text-center">
                                                <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800">45%</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                                <p class="text-xs text-blue-800">
                                    <strong>?? â¸ëPÉ|ÉCÉìÉg:</strong> å©êœíÒèoÇ©ÇÁê¨ñÒÇ‹Ç≈ÇÃä˙ä‘Ç™í∑Ç¢åXå¸Ç™Ç†ÇËÇ‹Ç∑ÅBÉtÉHÉçÅ[ÉAÉbÉvÇÃïpìxÇè„Ç∞ÇÈÇ±Ç∆Ç≈ê¨ñÒó¶å¸è„Ç™ä˙ë“Ç≈Ç´Ç‹Ç∑ÅB
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- reportsSectionÇÃèIóπ -->

            <!-- ÉJÉåÉìÉ_Å[ÉZÉNÉVÉáÉì -->
            <div id="calendarSection" class="section" style="display: none;">
                <div class="mb-6 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-900">ÉJÉåÉìÉ_Å[</h2>
                    <div class="flex items-center space-x-2">
                        <button onclick="changeCalendarView('month')" class="calendar-view-btn px-3 py-1 text-sm font-medium text-blue-600 bg-blue-50 rounded">åé</button>
                        <button onclick="changeCalendarView('week')" class="calendar-view-btn px-3 py-1 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded">èT</button>
                        <button onclick="changeCalendarView('day')" class="calendar-view-btn px-3 py-1 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded">ì˙</button>
                        <button onclick="addNewEvent()" class="ml-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                            </svg>
                            ó\íËÇí«â¡
                        </button>
                    </div>
                </div>
                
                <!-- ÉJÉåÉìÉ_Å[ÉiÉrÉQÅ[ÉVÉáÉì -->
                <div class="bg-white rounded-lg shadow mb-4">
                    <div class="p-4 flex justify-between items-center border-b">
                        <button onclick="previousMonth()" class="p-2 hover:bg-gray-100 rounded">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h3 id="currentMonth" class="text-lg font-semibold text-gray-900">2025îN10åé</h3>
                        <button onclick="nextMonth()" class="p-2 hover:bg-gray-100 rounded">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- åéï\é¶ÉJÉåÉìÉ_Å[ -->
                    <div id="calendarMonthView" class="p-4">
                        <div class="grid grid-cols-7 mb-2">
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">ì˙</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">åé</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">âŒ</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">êÖ</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">ñÿ</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">ã‡</div>
                            <div class="text-center text-sm font-medium text-gray-700 py-2 border-b">ìy</div>
                        </div>
                        <div id="calendarGrid" style="display: grid; grid-template-columns: repeat(7, 1fr);">
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="28">
                                <div style="font-weight: 500; font-size: 14px;">28</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="29">
                                <div style="font-weight: 500; font-size: 14px;">29</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="30">
                                <div style="font-weight: 500; font-size: 14px;">30</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="1" data-full-date="2025-10-01" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">1</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="2" data-full-date="2025-10-02" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">2</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="3" data-full-date="2025-10-03" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">3</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #e0f2fe;" data-date="4" data-full-date="2025-10-04" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#bae6fd'" onmouseout="this.style.background='#e0f2fe'">
                                <div style="font-weight: 500; font-size: 14px; color: #0284c7;">4</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: #eff6ff; background: #fee2e2; border: 2px solid #3b82f6;" data-date="5" data-full-date="2025-10-05" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#dbeafe'" onmouseout="this.style.background='#eff6ff'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">5</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="6" data-full-date="2025-10-06" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">6</div>
                                
                                <div class="mt-1 space-y-1">
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-4" onclick="showEventDetail(case-4)" oncontextmenu="showEventMenu(event, case-4)" ondragstart="handleDragStart(event, case-4)" title="å©êœçÏê¨íÜ: undefinedól">
                                        10:00 å©êœçÏê¨íÜ: undefinedól
                                    </div>
                                </div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="7" data-full-date="2025-10-07" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">7</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="8" data-full-date="2025-10-08" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">8</div>
                                
                                <div class="mt-1 space-y-1">
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-1" onclick="showEventDetail(case-1)" oncontextmenu="showEventMenu(event, case-1)" ondragstart="handleDragStart(event, case-1)" title="2024/01/18 14:00 ìdòbÉtÉHÉçÅ[: undefinedól">
                                        10:00 2024/01/18 14:00 ìdòbÉtÉHÉçÅ[: undefinedól
                                    </div>
                                
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-2" onclick="showEventDetail(case-2)" oncontextmenu="showEventMenu(event, case-2)" ondragstart="handleDragStart(event, case-2)" title="2024/01/20 14:00 åªíní≤ç∏: undefinedól">
                                        10:00 2024/01/20 14:00 åªíní≤ç∏: undefinedól
                                    </div>
                                
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-3" onclick="showEventDetail(case-3)" oncontextmenu="showEventMenu(event, case-3)" ondragstart="handleDragStart(event, case-3)" title="2024/01/22 10:00 å©êœê‡ñæñKñ‚: undefinedól">
                                        10:00 2024/01/22 10:00 å©êœê‡ñæñKñ‚: undefinedól
                                    </div>
                                
                                    <div class="text-xs p-1 bg-gray-500 text-white rounded truncate cursor-pointer hover:opacity-80 event-item" draggable="true" data-event-id="case-5" onclick="showEventDetail(case-5)" oncontextmenu="showEventMenu(event, case-5)" ondragstart="handleDragStart(event, case-5)" title="2024/01/25 çHéñäJén: undefinedól">
                                        10:00 2024/01/25 çHéñäJén: undefinedól
                                    </div>
                                </div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="9" data-full-date="2025-10-09" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">9</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="10" data-full-date="2025-10-10" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">10</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #e0f2fe;" data-date="11" data-full-date="2025-10-11" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#bae6fd'" onmouseout="this.style.background='#e0f2fe'">
                                <div style="font-weight: 500; font-size: 14px; color: #0284c7;">11</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #fee2e2;" data-date="12" data-full-date="2025-10-12" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#fecaca'" onmouseout="this.style.background='#fee2e2'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">12</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #fee2e2;" data-date="13" data-full-date="2025-10-13" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#fecaca'" onmouseout="this.style.background='#fee2e2'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">13</div>
                                <div style="font-size: 10px; color: #dc2626; font-weight: 500;">ÉXÉ|Å[ÉcÇÃì˙</div>
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="14" data-full-date="2025-10-14" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">14</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="15" data-full-date="2025-10-15" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">15</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="16" data-full-date="2025-10-16" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">16</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="17" data-full-date="2025-10-17" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">17</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #e0f2fe;" data-date="18" data-full-date="2025-10-18" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#bae6fd'" onmouseout="this.style.background='#e0f2fe'">
                                <div style="font-weight: 500; font-size: 14px; color: #0284c7;">18</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #fee2e2;" data-date="19" data-full-date="2025-10-19" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#fecaca'" onmouseout="this.style.background='#fee2e2'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">19</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="20" data-full-date="2025-10-20" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">20</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="21" data-full-date="2025-10-21" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">21</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="22" data-full-date="2025-10-22" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">22</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="23" data-full-date="2025-10-23" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">23</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="24" data-full-date="2025-10-24" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">24</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #e0f2fe;" data-date="25" data-full-date="2025-10-25" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#bae6fd'" onmouseout="this.style.background='#e0f2fe'">
                                <div style="font-weight: 500; font-size: 14px; color: #0284c7;">25</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; background: #fee2e2;" data-date="26" data-full-date="2025-10-26" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#fecaca'" onmouseout="this.style.background='#fee2e2'">
                                <div style="font-weight: 500; font-size: 14px; color: #dc2626;">26</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="27" data-full-date="2025-10-27" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">27</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="28" data-full-date="2025-10-28" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">28</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="29" data-full-date="2025-10-29" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">29</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="30" data-full-date="2025-10-30" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">30</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;" data-date="31" data-full-date="2025-10-31" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="handleCellClick(event)" onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='white'">
                                <div style="font-weight: 500; font-size: 14px; ">31</div>
                                
                                
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="1">
                                <div style="font-weight: 500; font-size: 14px;">1</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="2">
                                <div style="font-weight: 500; font-size: 14px;">2</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="3">
                                <div style="font-weight: 500; font-size: 14px;">3</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="4">
                                <div style="font-weight: 500; font-size: 14px;">4</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="5">
                                <div style="font-weight: 500; font-size: 14px;">5</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="6">
                                <div style="font-weight: 500; font-size: 14px;">6</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="7">
                                <div style="font-weight: 500; font-size: 14px;">7</div>
                            </div>
                        
                            <div style="border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white; color: #9ca3af; background: #f9fafb;" data-date="8">
                                <div style="font-weight: 500; font-size: 14px;">8</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- èTï\é¶Åièâä˙ÇÕîÒï\é¶Åj -->
                    <div id="calendarWeekView" class="p-4 hidden">
                        <div id="weekGrid" class="grid grid-cols-8 gap-0 border">
                            <!-- Week view content will be rendered here -->
                        </div>
                    </div>
                    
                    <!-- ì˙ï\é¶Åièâä˙ÇÕîÒï\é¶Åj -->
                    <div id="calendarDayView" class="p-4 hidden">
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-4 border-b">
                                <h3 id="dayViewDate" class="text-lg font-semibold">2024îN1åé15ì˙ÅiåéÅj</h3>
                            </div>
                            <div id="dayTimeSlots" class="p-4">
                                <!-- Day view time slots will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ñ}ó· -->
                <div class="bg-white rounded-lg shadow p-4">
                    <h4 class="text-sm font-medium text-gray-700 mb-3">ñ}ó·</h4>
                    <div class="flex flex-wrap gap-4 text-sm">
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-blue-500 rounded mr-2"></div>
                            <span>ÉqÉAÉäÉìÉOÅEåªíní≤ç∏</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-green-500 rounded mr-2"></div>
                            <span>çHéñ</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-yellow-500 rounded mr-2"></div>
                            <span>å©êœÇ‡ÇËíÒèo</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-purple-500 rounded mr-2"></div>
                            <span>ÉAÉtÉ^Å[ÉtÉHÉçÅ[</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-red-500 rounded mr-2"></div>
                            <span>èdóv</span>
                        </div>
                    </div>
                </div>
            </div><!-- calendarSectionÇÃèIóπ -->
            
            <!-- é©ìÆîzêMê›íËÉZÉNÉVÉáÉì -->
            <div id="autodeliverySection" class="section" style="display: none;">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">é©ìÆîzêMê›íË</h2>

                <div class="bg-white rounded-lg shadow p-6">
                    <!-- àÍéûí‚é~ê›íË -->
                    <div class="mb-8 p-6 bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">àÍéûí‚é~ê›íË</h3>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="autoPauseToggle" onchange="toggleAutoPause()" class="sr-only peer" checked="">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"></div>
                            </label>
                        </div>
                        <div id="pauseSettings" class="space-y-3">
                            <!-- àÍéûí‚é~äJénì˙ -->
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">àÍéûí‚é~äJénì˙</label>
                                <input type="date" id="pauseStartDate" class="w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500">
                            </div>

                            <!-- àÍéûí‚é~çƒäJì˙ -->
                            <div>
                                <div class="flex items-center justify-between mb-1.5">
                                    <label class="block text-sm font-medium text-gray-700">àÍéûí‚é~çƒäJì˙</label>
                                    <label class="flex items-center gap-1.5 cursor-pointer">
                                        <input type="checkbox" id="indefinitePause" onchange="toggleIndefinitePause()" class="rounded text-orange-600 focus:ring-orange-500" checked="">
                                        <span class="text-xs text-gray-600 whitespace-nowrap">ñ¢íË</span>
                                    </label>
                                </div>
                                <input type="text" id="pauseEndDateDisplay" class="w-full px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed text-gray-500 hidden" value="ñ¢íË" readonly="">
                                <input type="date" id="pauseEndDate" class="w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500">
                            </div>
                        </div>
                    </div>

                    <!-- ëŒâûâ¬î\ï®åèéÌï  -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ëŒâûâ¬î\ï®åèéÌï </h3>
                        <div class="space-y-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-3">
                                ëŒâûâ¬î\ï®åè<span class="text-red-500">*</span>Åiç≈ëÂëŒâûäKêîÅj
                            </label>
                            <div class="space-y-3">
                                <label class="flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                                    <input type="checkbox" class="mr-3" value="house" name="propertyType">
                                    <div class="flex-1 flex items-center">
                                        <span class="font-medium">?? åÀåöÇƒèZëÓ</span>
                                        <select class="ml-auto text-sm border rounded px-2 py-1">
                                            <option value="1">1äK</option>
                                            <option value="2">2äK</option>
                                            <option value="3" selected="">3äK</option>
                                            <option value="4">4äKà»è„</option>
                                        </select>
                                        <span class="ml-1 text-sm text-gray-600">Ç‹Ç≈</span>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                                    <input type="checkbox" class="mr-3" value="apartment" name="propertyType" onchange="checkLargeProperty(this)">
                                    <div class="flex-1 flex items-center">
                                        <span class="font-medium">?? ÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉì</span>
                                        <select class="ml-auto text-sm border rounded px-2 py-1" onchange="checkFloorSelection(this)">
                                            <option value="1">1äK</option>
                                            <option value="2">2äK</option>
                                            <option value="3" selected="">3äK</option>
                                            <option value="4">4äK</option>
                                            <option value="5">5äK</option>
                                            <option value="6">6äK</option>
                                            <option value="7">7äK</option>
                                            <option value="8">8äK</option>
                                            <option value="9">9äK</option>
                                            <option value="unlimited">10äKà»è„</option>
                                        </select>
                                        <span class="ml-1 text-sm text-gray-600">Ç‹Ç≈</span>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                                    <input type="checkbox" class="mr-3" value="commercial" name="propertyType" onchange="checkLargeProperty(this)">
                                    <div class="flex-1 flex items-center">
                                        <span class="font-medium">?? ìXï‹ÅEéññ±èä</span>
                                        <select class="ml-auto text-sm border rounded px-2 py-1" onchange="checkFloorSelection(this)">
                                            <option value="1">1äK</option>
                                            <option value="2">2äK</option>
                                            <option value="3" selected="">3äK</option>
                                            <option value="4">4äKà»è„</option>
                                        </select>
                                        <span class="ml-1 text-sm text-gray-600">Ç‹Ç≈</span>
                                    </div>
                                </label>
                                <label class="flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                                    <input type="checkbox" class="mr-3" value="factory" name="propertyType" onchange="checkLargeProperty(this)">
                                    <div class="flex-1 flex items-center">
                                        <span class="font-medium">?? çHèÍÅEëqå…</span>
                                        <select class="ml-auto text-sm border rounded px-2 py-1" onchange="checkFloorSelection(this)">
                                            <option value="1">1äK</option>
                                            <option value="2">2äK</option>
                                            <option value="3" selected="">3äK</option>
                                            <option value="4">4äKà»è„</option>
                                        </select>
                                        <span class="ml-1 text-sm text-gray-600">Ç‹Ç≈</span>
                                    </div>
                                </label>
                            </div>

                            <!-- ízîNêîëŒâûîÕàÕ -->
                            <div class="mt-6">
                                <label class="block mb-2 text-sm font-semibold text-gray-700">ízîNêîëŒâûîÕàÕ <span class="text-red-500">*</span></label>
                                <div class="bg-white border rounded-lg p-4">
                                    <div class="mb-2">
                                        <p class="text-center text-lg font-medium text-gray-800">
                                            íz<span id="ageRangeMinAuto">19</span>îNÅ`<span id="ageRangeMaxAuto">53</span>îNÇ‹Ç≈ëŒâû
                                        </p>
                                    </div>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="text-sm text-gray-600">ízîNêîâ∫å¿</label>
                                            <input type="range" min="0" max="50" value="0" class="w-full" oninput="updateAgeRangeAuto()">
                                            <div class="flex justify-between text-xs text-gray-400 mt-1">
                                                <span>0îN</span>
                                                <span>10îN</span>
                                                <span>20îN</span>
                                                <span>30îN</span>
                                                <span>40îN</span>
                                                <span>50îN</span>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">ízîNêîè„å¿</label>
                                            <input type="range" min="0" max="100" value="50" class="w-full" oninput="updateAgeRangeAuto()">
                                            <div class="flex justify-between text-xs text-gray-400 mt-1">
                                                <span>0îN</span>
                                                <span>20îN</span>
                                                <span>40îN</span>
                                                <span>60îN</span>
                                                <span>80îN</span>
                                                <span>100îN</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ëŒâûçHéñéÌï  -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-2">é{çHâ”èä <span class="text-red-500">*</span></h3>
                        <p class="text-sm text-gray-600 mb-2">ëŒâûâ¬î\Ç»çHéñì‡óeëSÇƒÇ…É`ÉFÉbÉNÇì¸ÇÍÇƒÇ≠ÇæÇ≥Ç¢</p>
                        <p class="text-sm text-gray-600 mb-4">ëIëÇµÇΩçÄñ⁄Ç™é©ìÆîzêMÇÃèåèÇ…ìñÇƒÇÕÇ‹Ç¡ÇΩèÍçáÅAãLç⁄ÇÃóøã‡ÅiÅ¶ê≈î≤ÅjÇ™ìKópÇ≥ÇÍÇ‹Ç∑ÅB</p>

                        <!-- \20,000çÄñ⁄ -->
                        <div class="mb-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="äOï«ìhëï" class="mr-3">
                                    <span class="flex-1">äOï«ìhëï</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="äOï«ÉJÉoÅ[çHñ@" class="mr-3">
                                    <span class="flex-1">äOï«ÉJÉoÅ[çHñ@</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="äOï«í£ë÷Ç¶" class="mr-3">
                                    <span class="flex-1">äOï«í£ë÷Ç¶</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™ìhëïÅiäOï«çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1">âÆç™ìhëïÅiäOï«çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆè„ñhêÖÅiäOï«çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1">âÆè„ñhêÖÅiäOï«çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô" class="mr-3">
                                    <span class="flex-1 text-sm">âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢" class="mr-3">
                                    <span class="flex-1">âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™ÉJÉoÅ[çHñ@" class="mr-3">
                                    <span class="flex-1">âÆç™ÉJÉoÅ[çHñ@</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="äOï«ï‚èCÅiäOï«çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1">äOï«ï‚èCÅiäOï«çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™ï‚èCÅiäOï«çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1">âÆç™ï‚èCÅiäOï«çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ÉxÉâÉìÉ_ñhêÖÅiäOï«çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1">ÉxÉâÉìÉ_ñhêÖÅiäOï«çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="äOï«âJòRÇËèCëUÅiäOï«çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1">äOï«âJòRÇËèCëUÅiäOï«çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅjÅiäOï«çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1 text-sm">ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅjÅiäOï«çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅjÅiäOï«çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1 text-sm">ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅjÅiäOï«çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™âJòRÇËèCëUÅiâÆç™çHéñä‹ÇﬁÅj" class="mr-3">
                                    <span class="flex-1">âÆç™âJòRÇËèCëUÅiâÆç™çHéñä‹ÇﬁÅj</span>
                                    <span class="text-sm font-semibold text-blue-600">\20,000</span>
                                </label>
                            </div>
                        </div>

                        <!-- \10,000çÄñ⁄ -->
                        <div class="mb-6">
                            <p class="text-sm text-gray-600 mb-2">à»â∫ÇÃíPïiàÀóäÇÕëäå©êœÇ‡ÇËéûÇÃóøã‡Çê≈î≤Ç´ï\é¶ÇµÇƒÇ®ÇËÇ‹Ç∑ÅB</p>
                            <p class="text-sm text-gray-600 mb-3">Å¶1é–è–âÓéûÇÕÇ∑Ç◊Çƒ\20,000Ç∆Ç»ÇËÇ‹Ç∑</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™ìhëïíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">âÆç™ìhëïíPïi</span>
                                    <span class="text-sm font-semibold text-green-600">\10,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆè„ñhêÖíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">âÆè„ñhêÖíPïi</span>
                                    <span class="text-sm font-semibold text-green-600">\10,000</span>
                                </label>
                            </div>
                        </div>

                        <!-- \5,000çÄñ⁄ -->
                        <div class="mb-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="äOï«ï‚èCíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">äOï«ï‚èCíPïi</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™ï‚èCíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">âÆç™ï‚èCíPïi</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="ÉxÉâÉìÉ_ñhêÖíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">ÉxÉâÉìÉ_ñhêÖíPïi</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="äOï«âJòRÇËèCëUíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">äOï«âJòRÇËèCëUíPïi</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                                <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                    <input type="checkbox" name="constructionTypes" value="âÆç™âJòRÇËèCëUíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj" class="mr-3" onchange="checkSingleItemSelection(this)">
                                    <span class="flex-1">âÆç™âJòRÇËèCëUíPïi</span>
                                    <span class="text-sm font-semibold text-red-600">\5,000</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- ì¡éÍëŒâûçÄñ⁄ÅiîCà”Åj -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ì¡éÍëŒâûçÄñ⁄ÅiîCà”Åj</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? é’îMÅEífîMìhóøíÒàƒâ¬î\">
                                <span class="text-sm">?? é’îMÅEífîMìhóøíÒàƒâ¬î\</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]">
                                <span class="text-sm">?? óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬">
                                <span class="text-sm">?? âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ÉGÉNÉXÉeÉäÉAÅiíÎÅEíìé‘èÍÅEäOç\Åj">
                                <span class="text-sm">?? ÉGÉNÉXÉeÉäÉAÅiíÎÅEíìé‘èÍÅEäOç\Åj</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ëæózåıÉpÉlÉãíEíÖÅiìPãéä‹ÇﬁÅj">
                                <span class="text-sm">?? ëæózåıÉpÉlÉãíEíÖÅiìPãéä‹ÇﬁÅj</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? íÒågêÊÉçÅ[ÉìóLÇË">
                                <span class="text-sm">?? íÒågêÊÉçÅ[ÉìóLÇË</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ÉNÉåÉWÉbÉgÉJÅ[Éhï•Ç¢â¬">
                                <span class="text-sm">?? ÉNÉåÉWÉbÉgÉJÅ[Éhï•Ç¢â¬</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? âŒç–ï€åØê\êøÉTÉ|Å[Ég">
                                <span class="text-sm">?? âŒç–ï€åØê\êøÉTÉ|Å[Ég</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? èïê¨ã‡ê\êøÉTÉ|Å[Ég">
                                <span class="text-sm">?? èïê¨ã‡ê\êøÉTÉ|Å[Ég</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? åöízãñâ¬èÿ">
                                <span class="text-sm">?? åöízãñâ¬èÿ</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="? åıêGî}ìhóøíÒàƒâ¬">
                                <span class="text-sm">? åıêGî}ìhóøíÒàƒâ¬</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 bg-white border rounded-lg cursor-pointer hover:border-blue-500 transition-colors">
                                <input type="checkbox" name="specialServices" value="?? ï™äÑï•Ç¢ÉvÉâÉìóL">
                                <span class="text-sm">?? ï™äÑï•Ç¢ÉvÉâÉìóL</span>
                            </label>
                        </div>
                    </div>

                    <!-- ëŒâûÉGÉäÉAëIë -->
                    <div class="mb-8">
                        <div class="bg-blue-600 text-white px-4 py-2 rounded-t-lg">
                            <h3 class="text-lg font-semibold">ëŒâûÉGÉäÉAëIë</h3>
                        </div>
                        <div class="border border-t-0 rounded-b-lg p-4">
                            <p class="text-sm text-gray-600 mb-4">ÉTÅ[ÉrÉXíÒãüâ¬î\Ç»ÉGÉäÉAÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢Åiç≈ëÂ5Ç¬Ç‹Ç≈Åj</p>

                            <!-- ëIëèÛãµÉTÉ}ÉäÅ[ -->
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <span class="text-sm text-gray-600">ëIëçœÇ›ìsìπï{åßÅF</span>
                                        <span id="selectedPrefCount" class="font-bold text-lg ml-2">5</span>
                                        <span class="text-sm text-gray-600">/ 5</span>
                                    </div>
                                    <div>
                                        <span class="text-sm text-gray-600">ëIëçœÇ›ésãÊí¨ë∫ÅF</span>
                                        <span id="selectedCityCount" class="font-bold text-lg ml-2">0</span>
                                    </div>
                                </div>
                            </div>

                            <!-- ìsìπï{åßëIë -->
                            <div class="mb-6">
                                <h4 class="text-md font-medium mb-3">ìsìπï{åßëIëÅiç≈ëÂ5Ç¬Ç‹Ç≈Åj</h4>
                                <div id="prefectureGrid" class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                    <!-- JavaScript VideìÆìIê∂ê¨Ç≥ÇÍÇÈ -->
                                </div>
                            </div>

                            <!-- STEP 1: ìsìπï{åßÇëIë -->
                            <div id="step1Area" class="mb-6">
                                <h4 class="text-md font-medium mb-3">STEP 1: ìsìπï{åßÇëIëÅiç≈ëÂ5ìsìπï{åßÅj</h4>
                                <div id="allPrefecturesGrid" class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2">
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ñkäCìπ" onclick="togglePrefecture('ñkäCìπ')">
                    ñkäCìπ
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ê¬êXåß" onclick="togglePrefecture('ê¬êXåß')">
                    ê¬êXåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ä‚éËåß" onclick="togglePrefecture('ä‚éËåß')">
                    ä‚éËåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ã{èÈåß" onclick="togglePrefecture('ã{èÈåß')">
                    ã{èÈåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="èHìcåß" onclick="togglePrefecture('èHìcåß')">
                    èHìcåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="éRå`åß" onclick="togglePrefecture('éRå`åß')">
                    éRå`åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ïüìáåß" onclick="togglePrefecture('ïüìáåß')">
                    ïüìáåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="àÔèÈåß" onclick="togglePrefecture('àÔèÈåß')">
                    àÔèÈåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ì»ñÿåß" onclick="togglePrefecture('ì»ñÿåß')">
                    ì»ñÿåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="åQînåß" onclick="togglePrefecture('åQînåß')">
                    åQînåß
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="çÈã åß" onclick="togglePrefecture('çÈã åß')">
                    çÈã åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="êÁótåß" onclick="togglePrefecture('êÁótåß')">
                    êÁótåß
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="ìåãûìs" onclick="togglePrefecture('ìåãûìs')">
                    ìåãûìs
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="ê_ìﬁêÏåß" onclick="togglePrefecture('ê_ìﬁêÏåß')">
                    ê_ìﬁêÏåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="êVäÉåß" onclick="togglePrefecture('êVäÉåß')">
                    êVäÉåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ïxéRåß" onclick="togglePrefecture('ïxéRåß')">
                    ïxéRåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="êŒêÏåß" onclick="togglePrefecture('êŒêÏåß')">
                    êŒêÏåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ïüà‰åß" onclick="togglePrefecture('ïüà‰åß')">
                    ïüà‰åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="éRóúåß" onclick="togglePrefecture('éRóúåß')">
                    éRóúåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="í∑ñÏåß" onclick="togglePrefecture('í∑ñÏåß')">
                    í∑ñÏåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="äÚïååß" onclick="togglePrefecture('äÚïååß')">
                    äÚïååß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ê√â™åß" onclick="togglePrefecture('ê√â™åß')">
                    ê√â™åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="à§ímåß" onclick="togglePrefecture('à§ímåß')">
                    à§ímåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="éOèdåß" onclick="togglePrefecture('éOèdåß')">
                    éOèdåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="é†âÍåß" onclick="togglePrefecture('é†âÍåß')">
                    é†âÍåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ãûìsï{" onclick="togglePrefecture('ãûìsï{')">
                    ãûìsï{
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ëÂç„ï{" onclick="togglePrefecture('ëÂç„ï{')">
                    ëÂç„ï{
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="ï∫å…åß" onclick="togglePrefecture('ï∫å…åß')">
                    ï∫å…åß
                </button>
            
                <button class="area-item p-2 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm selected bg-blue-500 text-white" data-prefecture="ìﬁó«åß" onclick="togglePrefecture('ìﬁó«åß')">
                    ìﬁó«åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="òaâÃéRåß" onclick="togglePrefecture('òaâÃéRåß')">
                    òaâÃéRåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="íπéÊåß" onclick="togglePrefecture('íπéÊåß')">
                    íπéÊåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ìáç™åß" onclick="togglePrefecture('ìáç™åß')">
                    ìáç™åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="â™éRåß" onclick="togglePrefecture('â™éRåß')">
                    â™éRåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="çLìáåß" onclick="togglePrefecture('çLìáåß')">
                    çLìáåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="éRå˚åß" onclick="togglePrefecture('éRå˚åß')">
                    éRå˚åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ìøìáåß" onclick="togglePrefecture('ìøìáåß')">
                    ìøìáåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="çÅêÏåß" onclick="togglePrefecture('çÅêÏåß')">
                    çÅêÏåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="à§ïQåß" onclick="togglePrefecture('à§ïQåß')">
                    à§ïQåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="çÇímåß" onclick="togglePrefecture('çÇímåß')">
                    çÇímåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ïüâ™åß" onclick="togglePrefecture('ïüâ™åß')">
                    ïüâ™åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ç≤âÍåß" onclick="togglePrefecture('ç≤âÍåß')">
                    ç≤âÍåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="í∑çËåß" onclick="togglePrefecture('í∑çËåß')">
                    í∑çËåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="åFñ{åß" onclick="togglePrefecture('åFñ{åß')">
                    åFñ{åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ëÂï™åß" onclick="togglePrefecture('ëÂï™åß')">
                    ëÂï™åß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="ã{çËåß" onclick="togglePrefecture('ã{çËåß')">
                    ã{çËåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="é≠éôìáåß" onclick="togglePrefecture('é≠éôìáåß')">
                    é≠éôìáåß
                </button>
            
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm" data-prefecture="â´ìÍåß" onclick="togglePrefecture('â´ìÍåß')">
                    â´ìÍåß
                </button>
            </div>
                            </div>

                            <!-- STEP 2: ésãÊí¨ë∫ÇëIë -->
                            <div id="citySelectionArea" class="mb-6">
                                <h4 class="text-md font-medium mb-3">STEP 2: ésãÊí¨ë∫ÇëIë</h4>
                                <div id="cityListContainer" class="space-y-4">
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">ìåãûìs</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 53 ëIëíÜ
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('ìåãûìs', this.checked)">
                                <span class="ml-2 text-sm font-medium">Ç∑Ç◊ÇƒëIë</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÁë„ìcãÊ" onchange="toggleCity('ìåãûìs', 'êÁë„ìcãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êÁë„ìcãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="íÜâõãÊ" onchange="toggleCity('ìåãûìs', 'íÜâõãÊ', this.checked)">
                                    <span class="ml-2 text-sm">íÜâõãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ç`ãÊ" onchange="toggleCity('ìåãûìs', 'ç`ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ç`ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êVèhãÊ" onchange="toggleCity('ìåãûìs', 'êVèhãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êVèhãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ï∂ãûãÊ" onchange="toggleCity('ìåãûìs', 'ï∂ãûãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ï∂ãûãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ë‰ìåãÊ" onchange="toggleCity('ìåãûìs', 'ë‰ìåãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ë‰ìåãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ñnìcãÊ" onchange="toggleCity('ìåãûìs', 'ñnìcãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ñnìcãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ç]ìåãÊ" onchange="toggleCity('ìåãûìs', 'ç]ìåãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ç]ìåãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ïiêÏãÊ" onchange="toggleCity('ìåãûìs', 'ïiêÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ïiêÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ñ⁄çïãÊ" onchange="toggleCity('ìåãûìs', 'ñ⁄çïãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ñ⁄çïãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëÂìcãÊ" onchange="toggleCity('ìåãûìs', 'ëÂìcãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ëÂìcãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê¢ìcíJãÊ" onchange="toggleCity('ìåãûìs', 'ê¢ìcíJãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê¢ìcíJãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="èaíJãÊ" onchange="toggleCity('ìåãûìs', 'èaíJãÊ', this.checked)">
                                    <span class="ml-2 text-sm">èaíJãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="íÜñÏãÊ" onchange="toggleCity('ìåãûìs', 'íÜñÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">íÜñÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êôï¿ãÊ" onchange="toggleCity('ìåãûìs', 'êôï¿ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êôï¿ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ñLìáãÊ" onchange="toggleCity('ìåãûìs', 'ñLìáãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ñLìáãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ñkãÊ" onchange="toggleCity('ìåãûìs', 'ñkãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ñkãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çrêÏãÊ" onchange="toggleCity('ìåãûìs', 'çrêÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">çrêÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="î¬ã¥ãÊ" onchange="toggleCity('ìåãûìs', 'î¬ã¥ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">î¬ã¥ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ó˚înãÊ" onchange="toggleCity('ìåãûìs', 'ó˚înãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ó˚înãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ë´óßãÊ" onchange="toggleCity('ìåãûìs', 'ë´óßãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ë´óßãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="äãè¸ãÊ" onchange="toggleCity('ìåãûìs', 'äãè¸ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">äãè¸ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ç]åÀêÏãÊ" onchange="toggleCity('ìåãûìs', 'ç]åÀêÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ç]åÀêÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="î™â§éqés" onchange="toggleCity('ìåãûìs', 'î™â§éqés', this.checked)">
                                    <span class="ml-2 text-sm">î™â§éqés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="óßêÏés" onchange="toggleCity('ìåãûìs', 'óßêÏés', this.checked)">
                                    <span class="ml-2 text-sm">óßêÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ïêë†ñÏés" onchange="toggleCity('ìåãûìs', 'ïêë†ñÏés', this.checked)">
                                    <span class="ml-2 text-sm">ïêë†ñÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="éOëÈés" onchange="toggleCity('ìåãûìs', 'éOëÈés', this.checked)">
                                    <span class="ml-2 text-sm">éOëÈés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê¬î~és" onchange="toggleCity('ìåãûìs', 'ê¬î~és', this.checked)">
                                    <span class="ml-2 text-sm">ê¬î~és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ï{íÜés" onchange="toggleCity('ìåãûìs', 'ï{íÜés', this.checked)">
                                    <span class="ml-2 text-sm">ï{íÜés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="è∫ìáés" onchange="toggleCity('ìåãûìs', 'è∫ìáés', this.checked)">
                                    <span class="ml-2 text-sm">è∫ìáés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="í≤ïzés" onchange="toggleCity('ìåãûìs', 'í≤ïzés', this.checked)">
                                    <span class="ml-2 text-sm">í≤ïzés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="í¨ìcés" onchange="toggleCity('ìåãûìs', 'í¨ìcés', this.checked)">
                                    <span class="ml-2 text-sm">í¨ìcés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="è¨ã‡à‰és" onchange="toggleCity('ìåãûìs', 'è¨ã‡à‰és', this.checked)">
                                    <span class="ml-2 text-sm">è¨ã‡à‰és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="è¨ïΩés" onchange="toggleCity('ìåãûìs', 'è¨ïΩés', this.checked)">
                                    <span class="ml-2 text-sm">è¨ïΩés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ì˙ñÏés" onchange="toggleCity('ìåãûìs', 'ì˙ñÏés', this.checked)">
                                    <span class="ml-2 text-sm">ì˙ñÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìåë∫éRés" onchange="toggleCity('ìåãûìs', 'ìåë∫éRés', this.checked)">
                                    <span class="ml-2 text-sm">ìåë∫éRés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çëï™éõés" onchange="toggleCity('ìåãûìs', 'çëï™éõés', this.checked)">
                                    <span class="ml-2 text-sm">çëï™éõés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çëóßés" onchange="toggleCity('ìåãûìs', 'çëóßés', this.checked)">
                                    <span class="ml-2 text-sm">çëóßés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ïüê∂és" onchange="toggleCity('ìåãûìs', 'ïüê∂és', this.checked)">
                                    <span class="ml-2 text-sm">ïüê∂és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çùç]és" onchange="toggleCity('ìåãûìs', 'çùç]és', this.checked)">
                                    <span class="ml-2 text-sm">çùç]és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìåëÂòaés" onchange="toggleCity('ìåãûìs', 'ìåëÂòaés', this.checked)">
                                    <span class="ml-2 text-sm">ìåëÂòaés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê¥ê£és" onchange="toggleCity('ìåãûìs', 'ê¥ê£és', this.checked)">
                                    <span class="ml-2 text-sm">ê¥ê£és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìåãvóØïƒés" onchange="toggleCity('ìåãûìs', 'ìåãvóØïƒés', this.checked)">
                                    <span class="ml-2 text-sm">ìåãvóØïƒés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ïêë†ë∫éRés" onchange="toggleCity('ìåãûìs', 'ïêë†ë∫éRés', this.checked)">
                                    <span class="ml-2 text-sm">ïêë†ë∫éRés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëΩñÄés" onchange="toggleCity('ìåãûìs', 'ëΩñÄés', this.checked)">
                                    <span class="ml-2 text-sm">ëΩñÄés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="àÓèÈés" onchange="toggleCity('ìåãûìs', 'àÓèÈés', this.checked)">
                                    <span class="ml-2 text-sm">àÓèÈés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="âHë∫és" onchange="toggleCity('ìåãûìs', 'âHë∫és', this.checked)">
                                    <span class="ml-2 text-sm">âHë∫és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç†Ç´ÇÈñÏés" onchange="toggleCity('ìåãûìs', 'Ç†Ç´ÇÈñÏés', this.checked)">
                                    <span class="ml-2 text-sm">Ç†Ç´ÇÈñÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êºìåãûés" onchange="toggleCity('ìåãûìs', 'êºìåãûés', this.checked)">
                                    <span class="ml-2 text-sm">êºìåãûés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êêï‰í¨" onchange="toggleCity('ìåãûìs', 'êêï‰í¨', this.checked)">
                                    <span class="ml-2 text-sm">êêï‰í¨</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ì˙ÇÃèoí¨" onchange="toggleCity('ìåãûìs', 'ì˙ÇÃèoí¨', this.checked)">
                                    <span class="ml-2 text-sm">ì˙ÇÃèoí¨</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ûwå¥ë∫" onchange="toggleCity('ìåãûìs', 'ûwå¥ë∫', this.checked)">
                                    <span class="ml-2 text-sm">ûwå¥ë∫</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="âúëΩñÄí¨" onchange="toggleCity('ìåãûìs', 'âúëΩñÄí¨', this.checked)">
                                    <span class="ml-2 text-sm">âúëΩñÄí¨</span>
                                </label>
                            
                        </div>
                    </div>
                
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">çÈã åß</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 49 ëIëíÜ
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('çÈã åß', this.checked)">
                                <span class="ml-2 text-sm font-medium">Ç∑Ç◊ÇƒëIë</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésêºãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésêºãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésêºãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésñkãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésñkãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésñkãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésëÂã{ãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésëÂã{ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésëÂã{ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹éså©è¿ãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹éså©è¿ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹éså©è¿ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésíÜâõãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésíÜâõãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésíÜâõãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésç˜ãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésç˜ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésç˜ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésâYòaãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésâYòaãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésâYòaãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésìÏãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésìÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésìÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésóŒãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésóŒãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésóŒãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç≥Ç¢ÇΩÇ‹ésä‚íŒãÊ" onchange="toggleCity('çÈã åß', 'Ç≥Ç¢ÇΩÇ‹ésä‚íŒãÊ', this.checked)">
                                    <span class="ml-2 text-sm">Ç≥Ç¢ÇΩÇ‹ésä‚íŒãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏâzés" onchange="toggleCity('çÈã åß', 'êÏâzés', this.checked)">
                                    <span class="ml-2 text-sm">êÏâzés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="åFíJés" onchange="toggleCity('çÈã åß', 'åFíJés', this.checked)">
                                    <span class="ml-2 text-sm">åFíJés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏå˚és" onchange="toggleCity('çÈã åß', 'êÏå˚és', this.checked)">
                                    <span class="ml-2 text-sm">êÏå˚és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çsìcés" onchange="toggleCity('çÈã åß', 'çsìcés', this.checked)">
                                    <span class="ml-2 text-sm">çsìcés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="íÅïÉés" onchange="toggleCity('çÈã åß', 'íÅïÉés', this.checked)">
                                    <span class="ml-2 text-sm">íÅïÉés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="èäëÚés" onchange="toggleCity('çÈã åß', 'èäëÚés', this.checked)">
                                    <span class="ml-2 text-sm">èäëÚés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="î—î\és" onchange="toggleCity('çÈã åß', 'î—î\és', this.checked)">
                                    <span class="ml-2 text-sm">î—î\és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â¡ê{és" onchange="toggleCity('çÈã åß', 'â¡ê{és', this.checked)">
                                    <span class="ml-2 text-sm">â¡ê{és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ñ{èØés" onchange="toggleCity('çÈã åß', 'ñ{èØés', this.checked)">
                                    <span class="ml-2 text-sm">ñ{èØés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìåèºéRés" onchange="toggleCity('çÈã åß', 'ìåèºéRés', this.checked)">
                                    <span class="ml-2 text-sm">ìåèºéRés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ètì˙ïîés" onchange="toggleCity('çÈã åß', 'ètì˙ïîés', this.checked)">
                                    <span class="ml-2 text-sm">ètì˙ïîés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ã∑éRés" onchange="toggleCity('çÈã åß', 'ã∑éRés', this.checked)">
                                    <span class="ml-2 text-sm">ã∑éRés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="âHê∂és" onchange="toggleCity('çÈã åß', 'âHê∂és', this.checked)">
                                    <span class="ml-2 text-sm">âHê∂és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çÉëÉés" onchange="toggleCity('çÈã åß', 'çÉëÉés', this.checked)">
                                    <span class="ml-2 text-sm">çÉëÉés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê[íJés" onchange="toggleCity('çÈã åß', 'ê[íJés', this.checked)">
                                    <span class="ml-2 text-sm">ê[íJés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="è„îˆés" onchange="toggleCity('çÈã åß', 'è„îˆés', this.checked)">
                                    <span class="ml-2 text-sm">è„îˆés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëêâ¡és" onchange="toggleCity('çÈã åß', 'ëêâ¡és', this.checked)">
                                    <span class="ml-2 text-sm">ëêâ¡és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="âzíJés" onchange="toggleCity('çÈã åß', 'âzíJés', this.checked)">
                                    <span class="ml-2 text-sm">âzíJés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ònés" onchange="toggleCity('çÈã åß', 'ònés', this.checked)">
                                    <span class="ml-2 text-sm">ònés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="åÀìcés" onchange="toggleCity('çÈã åß', 'åÀìcés', this.checked)">
                                    <span class="ml-2 text-sm">åÀìcés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ì¸ä‘és" onchange="toggleCity('çÈã åß', 'ì¸ä‘és', this.checked)">
                                    <span class="ml-2 text-sm">ì¸ä‘és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="í©â‡és" onchange="toggleCity('çÈã åß', 'í©â‡és', this.checked)">
                                    <span class="ml-2 text-sm">í©â‡és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="éuñÿés" onchange="toggleCity('çÈã åß', 'éuñÿés', this.checked)">
                                    <span class="ml-2 text-sm">éuñÿés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="òaåıés" onchange="toggleCity('çÈã åß', 'òaåıés', this.checked)">
                                    <span class="ml-2 text-sm">òaåıés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êVç¿és" onchange="toggleCity('çÈã åß', 'êVç¿és', this.checked)">
                                    <span class="ml-2 text-sm">êVç¿és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â±êÏés" onchange="toggleCity('çÈã åß', 'â±êÏés', this.checked)">
                                    <span class="ml-2 text-sm">â±êÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ãväÏés" onchange="toggleCity('çÈã åß', 'ãväÏés', this.checked)">
                                    <span class="ml-2 text-sm">ãväÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ñkñ{és" onchange="toggleCity('çÈã åß', 'ñkñ{és', this.checked)">
                                    <span class="ml-2 text-sm">ñkñ{és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="î™í™és" onchange="toggleCity('çÈã åß', 'î™í™és', this.checked)">
                                    <span class="ml-2 text-sm">î™í™és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ïxémå©és" onchange="toggleCity('çÈã åß', 'ïxémå©és', this.checked)">
                                    <span class="ml-2 text-sm">ïxémå©és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="éOãΩés" onchange="toggleCity('çÈã åß', 'éOãΩés', this.checked)">
                                    <span class="ml-2 text-sm">éOãΩés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ò@ìcés" onchange="toggleCity('çÈã åß', 'ò@ìcés', this.checked)">
                                    <span class="ml-2 text-sm">ò@ìcés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ç‚åÀés" onchange="toggleCity('çÈã åß', 'ç‚åÀés', this.checked)">
                                    <span class="ml-2 text-sm">ç‚åÀés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çKéËés" onchange="toggleCity('çÈã åß', 'çKéËés', this.checked)">
                                    <span class="ml-2 text-sm">çKéËés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="íﬂÉñìáés" onchange="toggleCity('çÈã åß', 'íﬂÉñìáés', this.checked)">
                                    <span class="ml-2 text-sm">íﬂÉñìáés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ì˙çÇés" onchange="toggleCity('çÈã åß', 'ì˙çÇés', this.checked)">
                                    <span class="ml-2 text-sm">ì˙çÇés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ãgêÏés" onchange="toggleCity('çÈã åß', 'ãgêÏés', this.checked)">
                                    <span class="ml-2 text-sm">ãgêÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="Ç”Ç∂Ç›ñÏés" onchange="toggleCity('çÈã åß', 'Ç”Ç∂Ç›ñÏés', this.checked)">
                                    <span class="ml-2 text-sm">Ç”Ç∂Ç›ñÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="îíâ™és" onchange="toggleCity('çÈã åß', 'îíâ™és', this.checked)">
                                    <span class="ml-2 text-sm">îíâ™és</span>
                                </label>
                            
                        </div>
                    </div>
                
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">ê_ìﬁêÏåß</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 44 ëIëíÜ
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('ê_ìﬁêÏåß', this.checked)">
                                <span class="ml-2 text-sm font-medium">Ç∑Ç◊ÇƒëIë</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésíﬂå©ãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésíﬂå©ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésíﬂå©ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésê_ìﬁêÏãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésê_ìﬁêÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésê_ìﬁêÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésêºãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésêºãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésêºãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésíÜãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésíÜãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésíÜãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésìÏãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésìÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésìÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésï€ìyÉPíJãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésï€ìyÉPíJãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésï€ìyÉPíJãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésàÈéqãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésàÈéqãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésàÈéqãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésã‡ëÚãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésã‡ëÚãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésã‡ëÚãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésç`ñkãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésç`ñkãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésç`ñkãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésåÀíÀãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésåÀíÀãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésåÀíÀãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésç`ìÏãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésç`ìÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésç`ìÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésàÆãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésàÆãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésàÆãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésóŒãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésóŒãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésóŒãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésê£íJãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésê£íJãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésê£íJãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésâhãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésâhãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésâhãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésêÚãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésêÚãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésêÚãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésê¬ótãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésê¬ótãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésê¬ótãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ïlésìsí}ãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ïlésìsí}ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">â°ïlésìsí}ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏçËésêÏçËãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'êÏçËésêÏçËãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êÏçËésêÏçËãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏçËésçKãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'êÏçËésçKãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êÏçËésçKãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏçËésíÜå¥ãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'êÏçËésíÜå¥ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êÏçËésíÜå¥ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏçËésçÇí√ãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'êÏçËésçÇí√ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êÏçËésçÇí√ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏçËésëΩñÄãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'êÏçËésëΩñÄãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êÏçËésëΩñÄãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏçËésã{ëOãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'êÏçËésã{ëOãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êÏçËésã{ëOãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏçËésñÉê∂ãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'êÏçËésñÉê∂ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">êÏçËésñÉê∂ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëäñÕå¥ésóŒãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'ëäñÕå¥ésóŒãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ëäñÕå¥ésóŒãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëäñÕå¥ésíÜâõãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'ëäñÕå¥ésíÜâõãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ëäñÕå¥ésíÜâõãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëäñÕå¥ésìÏãÊ" onchange="toggleCity('ê_ìﬁêÏåß', 'ëäñÕå¥ésìÏãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ëäñÕå¥ésìÏãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â°ê{âÍés" onchange="toggleCity('ê_ìﬁêÏåß', 'â°ê{âÍés', this.checked)">
                                    <span class="ml-2 text-sm">â°ê{âÍés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ïΩíÀés" onchange="toggleCity('ê_ìﬁêÏåß', 'ïΩíÀés', this.checked)">
                                    <span class="ml-2 text-sm">ïΩíÀés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="äôëqés" onchange="toggleCity('ê_ìﬁêÏåß', 'äôëqés', this.checked)">
                                    <span class="ml-2 text-sm">äôëqés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ì°ëÚés" onchange="toggleCity('ê_ìﬁêÏåß', 'ì°ëÚés', this.checked)">
                                    <span class="ml-2 text-sm">ì°ëÚés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="è¨ìcå¥és" onchange="toggleCity('ê_ìﬁêÏåß', 'è¨ìcå¥és', this.checked)">
                                    <span class="ml-2 text-sm">è¨ìcå¥és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="äùÉñçËés" onchange="toggleCity('ê_ìﬁêÏåß', 'äùÉñçËés', this.checked)">
                                    <span class="ml-2 text-sm">äùÉñçËés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÄéqés" onchange="toggleCity('ê_ìﬁêÏåß', 'êÄéqés', this.checked)">
                                    <span class="ml-2 text-sm">êÄéqés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="éOâYés" onchange="toggleCity('ê_ìﬁêÏåß', 'éOâYés', this.checked)">
                                    <span class="ml-2 text-sm">éOâYés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê`ñÏés" onchange="toggleCity('ê_ìﬁêÏåß', 'ê`ñÏés', this.checked)">
                                    <span class="ml-2 text-sm">ê`ñÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="å˙ñÿés" onchange="toggleCity('ê_ìﬁêÏåß', 'å˙ñÿés', this.checked)">
                                    <span class="ml-2 text-sm">å˙ñÿés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëÂòaés" onchange="toggleCity('ê_ìﬁêÏåß', 'ëÂòaés', this.checked)">
                                    <span class="ml-2 text-sm">ëÂòaés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="à…ê®å¥és" onchange="toggleCity('ê_ìﬁêÏåß', 'à…ê®å¥és', this.checked)">
                                    <span class="ml-2 text-sm">à…ê®å¥és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="äCòVñºés" onchange="toggleCity('ê_ìﬁêÏåß', 'äCòVñºés', this.checked)">
                                    <span class="ml-2 text-sm">äCòVñºés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ç¿ä‘és" onchange="toggleCity('ê_ìﬁêÏåß', 'ç¿ä‘és', this.checked)">
                                    <span class="ml-2 text-sm">ç¿ä‘és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìÏë´ïøés" onchange="toggleCity('ê_ìﬁêÏåß', 'ìÏë´ïøés', this.checked)">
                                    <span class="ml-2 text-sm">ìÏë´ïøés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="àªê£és" onchange="toggleCity('ê_ìﬁêÏåß', 'àªê£és', this.checked)">
                                    <span class="ml-2 text-sm">àªê£és</span>
                                </label>
                            
                        </div>
                    </div>
                
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">ìﬁó«åß</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 12 ëIëíÜ
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('ìﬁó«åß', this.checked)">
                                <span class="ml-2 text-sm font-medium">Ç∑Ç◊ÇƒëIë</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìﬁó«és" onchange="toggleCity('ìﬁó«åß', 'ìﬁó«és', this.checked)">
                                    <span class="ml-2 text-sm">ìﬁó«és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëÂòaçÇìcés" onchange="toggleCity('ìﬁó«åß', 'ëÂòaçÇìcés', this.checked)">
                                    <span class="ml-2 text-sm">ëÂòaçÇìcés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëÂòaåSéRés" onchange="toggleCity('ìﬁó«åß', 'ëÂòaåSéRés', this.checked)">
                                    <span class="ml-2 text-sm">ëÂòaåSéRés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìVóùés" onchange="toggleCity('ìﬁó«åß', 'ìVóùés', this.checked)">
                                    <span class="ml-2 text-sm">ìVóùés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="äÄå¥és" onchange="toggleCity('ìﬁó«åß', 'äÄå¥és', this.checked)">
                                    <span class="ml-2 text-sm">äÄå¥és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ç˜à‰és" onchange="toggleCity('ìﬁó«åß', 'ç˜à‰és', this.checked)">
                                    <span class="ml-2 text-sm">ç˜à‰és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="å‹ûäés" onchange="toggleCity('ìﬁó«åß', 'å‹ûäés', this.checked)">
                                    <span class="ml-2 text-sm">å‹ûäés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="å‰èäés" onchange="toggleCity('ìﬁó«åß', 'å‰èäés', this.checked)">
                                    <span class="ml-2 text-sm">å‰èäés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê∂ãÓés" onchange="toggleCity('ìﬁó«åß', 'ê∂ãÓés', this.checked)">
                                    <span class="ml-2 text-sm">ê∂ãÓés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çÅé≈és" onchange="toggleCity('ìﬁó«åß', 'çÅé≈és', this.checked)">
                                    <span class="ml-2 text-sm">çÅé≈és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="äãèÈés" onchange="toggleCity('ìﬁó«åß', 'äãèÈés', this.checked)">
                                    <span class="ml-2 text-sm">äãèÈés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="âFë…és" onchange="toggleCity('ìﬁó«åß', 'âFë…és', this.checked)">
                                    <span class="ml-2 text-sm">âFë…és</span>
                                </label>
                            
                        </div>
                    </div>
                
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">ï∫å…åß</h5>
                                <span class="text-sm text-gray-600">
                                    0 / 37 ëIëíÜ
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox" onchange="toggleAllCities('ï∫å…åß', this.checked)">
                                <span class="ml-2 text-sm font-medium">Ç∑Ç◊ÇƒëIë</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésìåìÂãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésìåìÂãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésìåìÂãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésìÂãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésìÂãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésìÂãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésï∫å…ãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésï∫å…ãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésï∫å…ãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésí∑ìcãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésí∑ìcãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésí∑ìcãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésê{ñÅãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésê{ñÅãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésê{ñÅãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésêÇêÖãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésêÇêÖãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésêÇêÖãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésñkãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésñkãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésñkãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésíÜâõãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésíÜâõãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésíÜâõãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê_åÀésêºãÊ" onchange="toggleCity('ï∫å…åß', 'ê_åÀésêºãÊ', this.checked)">
                                    <span class="ml-2 text-sm">ê_åÀésêºãÊ</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ïPòHés" onchange="toggleCity('ï∫å…åß', 'ïPòHés', this.checked)">
                                    <span class="ml-2 text-sm">ïPòHés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìÚçËés" onchange="toggleCity('ï∫å…åß', 'ìÚçËés', this.checked)">
                                    <span class="ml-2 text-sm">ìÚçËés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ñæêŒés" onchange="toggleCity('ï∫å…åß', 'ñæêŒés', this.checked)">
                                    <span class="ml-2 text-sm">ñæêŒés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êºã{és" onchange="toggleCity('ï∫å…åß', 'êºã{és', this.checked)">
                                    <span class="ml-2 text-sm">êºã{és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="èFñ{és" onchange="toggleCity('ï∫å…åß', 'èFñ{és', this.checked)">
                                    <span class="ml-2 text-sm">èFñ{és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="à∞âÆés" onchange="toggleCity('ï∫å…åß', 'à∞âÆés', this.checked)">
                                    <span class="ml-2 text-sm">à∞âÆés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="à…íOés" onchange="toggleCity('ï∫å…åß', 'à…íOés', this.checked)">
                                    <span class="ml-2 text-sm">à…íOés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ëäê∂és" onchange="toggleCity('ï∫å…åß', 'ëäê∂és', this.checked)">
                                    <span class="ml-2 text-sm">ëäê∂és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ñLâ™és" onchange="toggleCity('ï∫å…åß', 'ñLâ™és', this.checked)">
                                    <span class="ml-2 text-sm">ñLâ™és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â¡å√êÏés" onchange="toggleCity('ï∫å…åß', 'â¡å√êÏés', this.checked)">
                                    <span class="ml-2 text-sm">â¡å√êÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ê‘ï‰és" onchange="toggleCity('ï∫å…åß', 'ê‘ï‰és', this.checked)">
                                    <span class="ml-2 text-sm">ê‘ï‰és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êºòeés" onchange="toggleCity('ï∫å…åß', 'êºòeés', this.checked)">
                                    <span class="ml-2 text-sm">êºòeés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ïÛíÀés" onchange="toggleCity('ï∫å…åß', 'ïÛíÀés', this.checked)">
                                    <span class="ml-2 text-sm">ïÛíÀés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="éOñÿés" onchange="toggleCity('ï∫å…åß', 'éOñÿés', this.checked)">
                                    <span class="ml-2 text-sm">éOñÿés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="çÇçªés" onchange="toggleCity('ï∫å…åß', 'çÇçªés', this.checked)">
                                    <span class="ml-2 text-sm">çÇçªés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="êÏêºés" onchange="toggleCity('ï∫å…åß', 'êÏêºés', this.checked)">
                                    <span class="ml-2 text-sm">êÏêºés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="è¨ñÏés" onchange="toggleCity('ï∫å…åß', 'è¨ñÏés', this.checked)">
                                    <span class="ml-2 text-sm">è¨ñÏés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="éOìcés" onchange="toggleCity('ï∫å…åß', 'éOìcés', this.checked)">
                                    <span class="ml-2 text-sm">éOìcés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â¡êºés" onchange="toggleCity('ï∫å…åß', 'â¡êºés', this.checked)">
                                    <span class="ml-2 text-sm">â¡êºés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="íOîgé¬éRés" onchange="toggleCity('ï∫å…åß', 'íOîgé¬éRés', this.checked)">
                                    <span class="ml-2 text-sm">íOîgé¬éRés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ó{ïÉés" onchange="toggleCity('ï∫å…åß', 'ó{ïÉés', this.checked)">
                                    <span class="ml-2 text-sm">ó{ïÉés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="íOîgés" onchange="toggleCity('ï∫å…åß', 'íOîgés', this.checked)">
                                    <span class="ml-2 text-sm">íOîgés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ìÏÇ†ÇÌÇ∂és" onchange="toggleCity('ï∫å…åß', 'ìÏÇ†ÇÌÇ∂és', this.checked)">
                                    <span class="ml-2 text-sm">ìÏÇ†ÇÌÇ∂és</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="í©óàés" onchange="toggleCity('ï∫å…åß', 'í©óàés', this.checked)">
                                    <span class="ml-2 text-sm">í©óàés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="íWòHés" onchange="toggleCity('ï∫å…åß', 'íWòHés', this.checked)">
                                    <span class="ml-2 text-sm">íWòHés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="é≥àæés" onchange="toggleCity('ï∫å…åß', 'é≥àæés', this.checked)">
                                    <span class="ml-2 text-sm">é≥àæés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="â¡ìåés" onchange="toggleCity('ï∫å…åß', 'â¡ìåés', this.checked)">
                                    <span class="ml-2 text-sm">â¡ìåés</span>
                                </label>
                            
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox" value="ÇΩÇ¬ÇÃés" onchange="toggleCity('ï∫å…åß', 'ÇΩÇ¬ÇÃés', this.checked)">
                                    <span class="ml-2 text-sm">ÇΩÇ¬ÇÃés</span>
                                </label>
                            
                        </div>
                    </div>
                </div>
                            </div>

                            <!-- STEP 3: óDêÊÉGÉäÉAÇê›íË -->
                            <div id="priorityArea" class="hidden mb-6">
                                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 sm:p-6">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-3 gap-2">
                                        <h4 class="font-semibold text-sm sm:text-lg leading-tight">
                                            STEP 3: óDêÊÉGÉäÉAÇê›íË
                                            <span class="block sm:inline sm:ml-1 text-xs sm:text-base font-normal text-gray-600">
                                                Åiç≈ëÂ3ÉGÉäÉAÅj
                                            </span>
                                        </h4>
                                        <span class="text-orange-500 font-semibold text-base sm:text-lg">
                                            <span id="selectedPriorityCount">2</span> / 3 ëIëíÜ
                                        </span>
                                    </div>
                                    <p class="text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4">ì¡Ç…íçóÕÇµÇΩÇ¢ÉGÉäÉAÇç≈ëÂ3Ç¬Ç‹Ç≈ëIëÇ≈Ç´Ç‹Ç∑</p>
                                    <div id="prioritySelectionList" class="space-y-3 sm:space-y-4">
                                        <!-- óDêÊÉGÉäÉAëIëÉäÉXÉgÇ™Ç±Ç±Ç…ê∂ê¨Ç≥ÇÍÇÈÅiåßÇ≤Ç∆Ç…ÉJÅ[Éhå`éÆÅj -->
                                    </div>
                                </div>
                            </div>

                            <!-- ÉGÉäÉAëIëäÆóπÉ{É^ÉìÉZÉNÉVÉáÉìçÌèú -->
                        </div>
                    </div>

                    <div class="flex justify-end pb-20 relative z-10">
                        <button type="button" id="saveAutodeliveryBtn" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 min-h-[48px] cursor-pointer relative z-20 active:bg-blue-800">
                            ê›íËÇï€ë∂
                        </button>
                    </div>
                </div>
            </div>

            <!-- âÔé–èÓïÒÉZÉNÉVÉáÉì -->
            <div id="companySection" class="section" style="display: block;">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">âÔé–èÓïÒ</h2>
                        <p class="text-sm text-gray-600 mt-1">é¿ç€Ç…Ç®ãqólÇ…ï\é¶Ç≥ÇÍÇÈè⁄ç◊èÓïÒÇ…Ç»ÇËÇ‹Ç∑</p>
                    </div>
                    <button onclick="previewCompanyInfo()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                        </svg>
                        ÉvÉåÉrÉÖÅ[
                    </button>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <!-- ÉÅÉCÉìÉrÉWÉÖÉAÉãê›íË -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ÉÅÉCÉìÉrÉWÉÖÉAÉã</h3>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center relative" id="mainVisualUploadArea">
                            <input type="file" id="mainVisualInput" class="hidden" accept="image/*" onchange="handleMainVisualUpload(event)">
                            <div id="mainVisualPreview" class="">
                                <img id="mainVisualImage" src="https://drive.google.com/thumbnail?id=1USsRV4DxxSk0NCbwB_JsOrepMQ6jF4a2&amp;sz=w1000" alt="ÉÅÉCÉìÉrÉWÉÖÉAÉã" class="max-w-full h-48 mx-auto object-cover rounded">
                                <button onclick="removeMainVisual()" class="mt-2 px-4 py-2 text-red-600 hover:text-red-800 border border-red-300 rounded">çÌèú</button>
                            </div>
                            <div id="mainVisualPlaceholder" class="hidden">
                                <svg class="mx-auto h-12 w-12 text-gray-400 mb-3" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                                <p class="text-sm text-gray-600 mb-2">ÉÅÉCÉìÉrÉWÉÖÉAÉãâÊëúÇÉAÉbÉvÉçÅ[Éh</p>
                                <button onclick="document.getElementById('mainVisualInput').click()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                    âÊëúÇëIë
                                </button>
                                <p class="text-xs text-gray-500 mt-2">êÑèß: 1920x600px à»è„</p>
                            </div>
                        </div>
                    </div>

                    <!-- é{çHéñó· -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">é{çHéñó·</h3>
                        <button onclick="addConstructionExample()" class="mb-4 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">
                            é{çHéñó·Çí«â¡
                        </button>
                        <div id="constructionExamplesList" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- é{çHéñó·Ç™ìÆìIÇ…í«â¡Ç≥ÇÍÇÈ -->
                        <div class="border rounded-lg p-4" id="example_loaded_0">
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="é{çHÉ^ÉCÉgÉãÅió·ÅFåÀåöÇƒäOï«ìhëïÅj" value="åÀåöÇƒÇQF" onchange="updateConstructionExample('example_loaded_0', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">ízîNêî</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="20" onchange="updateConstructionExample('example_loaded_0', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">îN</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">é{çHã‡äzÅiñúâ~Åj</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="150" onchange="updateConstructionExample('example_loaded_0', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">ñúâ~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="é{çHì‡óeÅió·ÅFÉVÉäÉRÉììhóøÇ…ÇÊÇÈ3âÒìhÇËÅAêFÂÚÇπÇ∆âòÇÍÇâè¡Åj" onchange="updateConstructionExample('example_loaded_0', 'content', this.value)">ÉVÉäÉRÉì3âÒìhÇË</textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHëOÅiBeforeÅj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="é{çHëO">
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHå„ÅiAfterÅj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="é{çHå„">
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('example_loaded_0')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    Ç±ÇÃéñó·ÇçÌèú
                                </button>
                            </div>
                        </div><div class="border rounded-lg p-4" id="example_loaded_1">
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="é{çHÉ^ÉCÉgÉãÅió·ÅFåÀåöÇƒäOï«ìhëïÅj" value="íz45îN" onchange="updateConstructionExample('example_loaded_1', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">ízîNêî</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="50" onchange="updateConstructionExample('example_loaded_1', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">îN</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">é{çHã‡äzÅiñúâ~Åj</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="250" onchange="updateConstructionExample('example_loaded_1', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">ñúâ~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="é{çHì‡óeÅió·ÅFÉVÉäÉRÉììhóøÇ…ÇÊÇÈ3âÒìhÇËÅAêFÂÚÇπÇ∆âòÇÍÇâè¡Åj" onchange="updateConstructionExample('example_loaded_1', 'content', this.value)">ÉtÉbëf3âÒìhÇË</textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHëOÅiBeforeÅj</label>
                                    <img src="https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="é{çHëO">
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHå„ÅiAfterÅj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="é{çHå„">
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('example_loaded_1')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    Ç±ÇÃéñó·ÇçÌèú
                                </button>
                            </div>
                        </div><div class="border rounded-lg p-4" id="example_loaded_2">
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="é{çHÉ^ÉCÉgÉãÅió·ÅFåÀåöÇƒäOï«ìhëïÅj" value="âÆç™ï«ìhëï" onchange="updateConstructionExample('example_loaded_2', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">ízîNêî</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="40" onchange="updateConstructionExample('example_loaded_2', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">îN</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">é{çHã‡äzÅiñúâ~Åj</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="130" onchange="updateConstructionExample('example_loaded_2', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">ñúâ~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="é{çHì‡óeÅió·ÅFÉVÉäÉRÉììhóøÇ…ÇÊÇÈ3âÒìhÇËÅAêFÂÚÇπÇ∆âòÇÍÇâè¡Åj" onchange="updateConstructionExample('example_loaded_2', 'content', this.value)">åıêGî}ÉtÉbëf</textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHëOÅiBeforeÅj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="é{çHëO">
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHå„ÅiAfterÅj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="é{çHå„">
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('example_loaded_2')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    Ç±ÇÃéñó·ÇçÌèú
                                </button>
                            </div>
                        </div><div class="border rounded-lg p-4" id="example_loaded_3">
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="é{çHÉ^ÉCÉgÉãÅió·ÅFåÀåöÇƒäOï«ìhëïÅj" value="ÉXÉ}ÉzÇ≈Ç‡" onchange="updateConstructionExample('example_loaded_3', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">ízîNêî</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="200" onchange="updateConstructionExample('example_loaded_3', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">îN</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">é{çHã‡äzÅiñúâ~Åj</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="1000" onchange="updateConstructionExample('example_loaded_3', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">ñúâ~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="é{çHì‡óeÅió·ÅFÉVÉäÉRÉììhóøÇ…ÇÊÇÈ3âÒìhÇËÅAêFÂÚÇπÇ∆âòÇÍÇâè¡Åj" onchange="updateConstructionExample('example_loaded_3', 'content', this.value)"></textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHëOÅiBeforeÅj</label>
                                    <img src="https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="é{çHëO">
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHå„ÅiAfterÅj</label>
                                    <img src="https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000" class="w-full h-32 object-cover rounded" alt="é{çHå„">
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('example_loaded_3')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    Ç±ÇÃéñó·ÇçÌèú
                                </button>
                            </div>
                        </div></div>
                    </div>

                    <!-- é ê^ÉMÉÉÉâÉäÅ[ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">é ê^ÉMÉÉÉâÉäÅ[</h3>
                        <div id="photoGalleryList" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                            <div class="relative group gallery-item" id="gallery_loaded_0">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú1">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_0')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_1">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú2">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_1')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_2">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú3">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_2')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_3">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú4">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_3')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_4">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú5">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_4')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_5">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú6">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_5')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_6">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú7">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_6')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_7">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú8">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_7')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_8">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú9">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_8')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_9">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú10">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_9')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="relative group gallery-item" id="gallery_loaded_10">
                        <img loading="lazy" src="https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w200" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú11">
                        <button type="button" onclick="removeGalleryImage('gallery_loaded_10')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div><div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500" onclick="document.getElementById('galleryUpload').click()">
                                <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                </svg>
                                <span class="text-sm text-gray-500">âÊëúÇí«â¡</span>
                            </div>
                            <!-- ÉMÉÉÉâÉäÅ[âÊëúÇ™ìÆìIÇ…í«â¡Ç≥ÇÍÇÈ -->
                        </div>
                        <input type="file" id="galleryUpload" accept="image/*" multiple="" style="display: none;" onchange="handleGalleryUpload(event)">
                    </div>

                    <!-- âÔé–äÓñ{èÓïÒ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">äÓñ{èÓïÒ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">âÔé–ñº <span class="text-red-500">*</span></label>
                                <input type="text" id="companyName" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: äîéÆâÔé–Ç≠ÇÁÇ◊ÇÈìhëï" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">âÔé–ñºÉJÉi <span class="text-red-500">*</span></label>
                                <input type="text" id="companyNameKana" class="w-full px-3 py-2 border rounded-lg" placeholder="ÉJÉ^ÉJÉiÇ≈ì¸óÕ" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">âÆçÜ</label>
                                <input type="text" id="tradeName" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: Ç≠ÇÁÇ◊ÇÈÉyÉCÉìÉg" value="" onchange="updateTradeNameDisplay()">

                                <!-- âÆçÜï\é¶ÉIÉvÉVÉáÉì -->
                                <div class="mt-3 p-3 bg-gray-50 rounded-lg" id="tradeNameDisplayOptions" style="display: none;">
                                    <label class="block text-xs font-medium text-gray-700 mb-2">âÔé–ñºÇÃï\é¶ï˚ñ@</label>
                                    <div class="space-y-2">
                                        <!-- ÉpÉ^Å[Éì1ÅFé–ñºï\é¶ -->
                                        <label class="flex items-center p-2 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                            <input type="radio" name="tradeNameDisplay" value="company" class="mr-2" checked="" onchange="updateCompanyNameDisplay()">
                                            <div>
                                                <span class="text-xs font-medium">ÉpÉ^Å[Éì1ÅFé–ñºï\é¶</span>
                                                <div class="text-xs text-gray-600 mt-0.5">ó·: äîéÆâÔé–Ç≠ÇÁÇ◊ÇÈìhëï</div>
                                            </div>
                                        </label>

                                        <!-- ÉpÉ^Å[Éì2ÅFâÆçÜï\é¶ -->
                                        <label class="flex items-center p-2 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                            <input type="radio" name="tradeNameDisplay" value="trade" class="mr-2" onchange="updateCompanyNameDisplay()">
                                            <div>
                                                <span class="text-xs font-medium">ÉpÉ^Å[Éì2ÅFâÆçÜï\é¶</span>
                                                <div class="text-xs text-gray-600 mt-0.5">ó·: Ç≠ÇÁÇ◊ÇÈÉyÉCÉìÉg</div>
                                            </div>
                                        </label>

                                        <!-- ÉpÉ^Å[Éì3ÅFóºï˚ï\é¶ -->
                                        <label class="flex items-center p-2 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                            <input type="radio" name="tradeNameDisplay" value="both" class="mr-2" onchange="updateCompanyNameDisplay()">
                                            <div>
                                                <span class="text-xs font-medium">ÉpÉ^Å[Éì3ÅFóºï˚ï\é¶</span>
                                                <div class="text-xs text-gray-600 mt-0.5">ó·: äîéÆâÔé–Ç≠ÇÁÇ◊ÇÈìhëïÅbÇ≠ÇÁÇ◊ÇÈÉyÉCÉìÉg</div>
                                            </div>
                                        </label>

                                        <!-- ÉpÉ^Å[Éì3ÇÃÉJÉXÉ^É}ÉCÉYÉIÉvÉVÉáÉì -->
                                        <div id="bothDisplayOptions" class="ml-6 p-2 bg-blue-50 rounded-lg" style="display: none;">
                                            <h4 class="text-xs font-semibold text-gray-700 mb-2">ÉJÉXÉ^É}ÉCÉYÉIÉvÉVÉáÉì</h4>

                                            <!-- ï\é¶èáèò -->
                                            <div class="mb-2">
                                                <label class="flex items-center">
                                                    <input type="checkbox" id="reverseOrder" class="mr-2" onchange="updateCompanyNameDisplay()">
                                                    <span class="text-xs">èáî‘Çì¸ÇÍë÷Ç¶ÇÈ</span>
                                                </label>
                                                <div class="text-xs text-gray-500 ml-6">Å® Ç≠ÇÁÇ◊ÇÈÉyÉCÉìÉgÅbäîéÆâÔé–Ç≠ÇÁÇ◊ÇÈìhëï</div>
                                            </div>

                                            <!-- ï∂éöÉTÉCÉY -->
                                            <div>
                                                <label class="flex items-center">
                                                    <input type="checkbox" id="smallerSecond" class="mr-2" onchange="updateCompanyNameDisplay()">
                                                    <span class="text-xs">å„ÇÎÇÃï∂éöÇè¨Ç≥Ç≠Ç∑ÇÈÅi85%ÉTÉCÉYÅj</span>
                                                </label>
                                                <div class="text-xs text-gray-500 ml-6">Å® ëÂÇ´Ç¢ï∂éöÅb<span style="font-size:85%">è¨Ç≥Ç¢ï∂éö</span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">âÆçÜÉJÉi</label>
                                <input type="text" id="tradeNameKana" class="w-full px-3 py-2 border rounded-lg" placeholder="ÉJÉ^ÉJÉiÇ≈ì¸óÕ" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ë„ï\é“ñº <span class="text-red-500">*</span></label>
                                <input type="text" id="representative" class="w-full px-3 py-2 border rounded-lg" placeholder="ë„ï\é“ñºÇì¸óÕ" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ë„ï\é“ñºÉJÉi <span class="text-red-500">*</span></label>
                                <input type="text" id="representativeKana" class="w-full px-3 py-2 border rounded-lg" placeholder="ÉJÉ^ÉJÉiÇ≈ì¸óÕ" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">óXï÷î‘çÜ <span class="text-red-500">*</span></label>
                                <input type="text" id="zipCode" class="w-full px-3 py-2 border rounded-lg" placeholder="123-4567" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">èZèä <span class="text-red-500">*</span></label>
                                <input type="text" id="address" class="w-full px-3 py-2 border rounded-lg" placeholder="ìåãûìsç`ãÊê¬éR1-1-1" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ìdòbî‘çÜ <span class="text-red-500">*</span></label>
                                <input type="text" id="phone" class="w-full px-3 py-2 border rounded-lg" placeholder="03-1234-5678" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ÉEÉFÉuÉTÉCÉgURL</label>
                                <input type="text" id="website" class="w-full px-3 py-2 border rounded-lg" placeholder="https://example.com" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ê›óßîNåé</label>
                                <input type="text" id="established" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: 2010îN4åé" value="">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">PRï∂ <span class="text-red-500">*</span></label>
                                <textarea id="prText" class="w-full px-3 py-2 border rounded-lg resize-y" rows="10" placeholder="âÔé–ÇÃì¡í•Ç‚PRï∂Çì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢" style="min-height: 200px; height: 352px;"></textarea>
                                <p class="text-xs text-gray-500 mt-1 text-right">
                                    <span id="prTextCharCount">197</span>ï∂éö
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- éxìXèÓïÒ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">éxìXèÓïÒ</h3>
                        <div id="branchList"><div id="branch-1" class="border rounded-lg p-4 mb-3 bg-gray-50">
                            <div class="flex justify-between items-start mb-3">
                                <h4 class="font-medium text-gray-700">éxìX 1</h4>
                                <button onclick="removeBranch(1)" class="text-red-600 hover:text-red-800">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">éxìXñº</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: â°ïléxìX" value="ñºå√âÆéxìX" onchange="updateBranch(1, 'name', this.value)">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">éxìXèZèä</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: ê_ìﬁêÏåßâ°ïlés..." value="ñºå√âÆ1-1" onchange="updateBranch(1, 'address', this.value)">
                                </div>
                            </div>
                        </div><div id="branch-2" class="border rounded-lg p-4 mb-3 bg-gray-50">
                            <div class="flex justify-between items-start mb-3">
                                <h4 class="font-medium text-gray-700">éxìX 2</h4>
                                <button onclick="removeBranch(2)" class="text-red-600 hover:text-red-800">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">éxìXñº</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: â°ïléxìX" value="ñkäCìπ" onchange="updateBranch(2, 'name', this.value)">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">éxìXèZèä</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: ê_ìﬁêÏåßâ°ïlés..." value="ñ‘ëñ1-1" onchange="updateBranch(2, 'address', this.value)">
                                </div>
                            </div>
                        </div></div>
                        <button onclick="addBranch()" class="mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium">+ éxìXÇí«â¡</button>
                    </div>

                    <!-- òAóçêÊèÓïÒ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">òAóçêÊèÓïÒ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">êøãÅópÉÅÅ[ÉãÉAÉhÉåÉX <span class="text-red-500">*</span></label>
                                <input type="email" id="billingEmail" class="w-full px-3 py-2 border rounded-lg" placeholder="billing@example.com" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">âcã∆ópÉÅÅ[ÉãÉAÉhÉåÉX <span class="text-red-500">*</span></label>
                                <input type="email" id="salesEmail" class="w-full px-3 py-2 border rounded-lg" placeholder="sales@company.co.jp" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">âcã∆íSìñé“éÅñº <span class="text-red-500">*</span></label>
                                <input type="text" id="salesPersonName" class="w-full px-3 py-2 border rounded-lg" placeholder="âcã∆íSìñé“ÇÃéÅñºÇì¸óÕ" value="">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">âcã∆íSìñé“ÉJÉi <span class="text-red-500">*</span></label>
                                <input type="text" id="salesPersonKana" class="w-full px-3 py-2 border rounded-lg" placeholder="ÉÑÉ}É_ É^ÉçÉE" value="">
                            </div>
                        </div>
                    </div>

                    <!-- éñã∆è⁄ç◊ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">éñã∆è⁄ç◊</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">è]ã∆àıêî <span class="text-red-500">*</span></label>
                                <select id="employees" class="w-full px-3 py-2 border rounded-lg">
                                    <option value="">ëIëÇµÇƒÇ≠ÇæÇ≥Ç¢</option>
                                    <option value="1-2">1Å`2ñº</option>
                                    <option value="3-5">3Å`5ñº</option>
                                    <option value="6-10">6Å`10ñº</option>
                                    <option value="11+">11ñºà»è„</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">îÑè„ãKñÕ <span class="text-red-500">*</span></label>
                                <select id="salesScale" class="w-full px-3 py-2 border rounded-lg">
                                    <option value="">ëIëÇµÇƒÇ≠ÇæÇ≥Ç¢</option>
                                    <option value="under-10m">1,000ñúâ~ñ¢ñû</option>
                                    <option value="10m-30m">1,000ñúâ~Å`3,000ñúâ~</option>
                                    <option value="30m-50m">3,000ñúâ~Å`5,000ñúâ~</option>
                                    <option value="50m-100m">5,000ñúâ~Å`1â≠â~</option>
                                    <option value="100m-300m">1â≠â~Å`3â≠â~</option>
                                    <option value="over-300m">3â≠â~à»è„</option>
                                </select>
                            </div>
                        </div>
                    </div>


                    <!-- ëŒâûÉGÉäÉA -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ëŒâûÉGÉäÉA</h3>
                        <p class="text-sm text-gray-600 mb-3">Å¶ é©ìÆîzêMê›íËÇ©ÇÁé©ìÆìIÇ…îΩâfÇ≥ÇÍÇ‹Ç∑</p>

                        <!-- é©ìÆîΩâfï\é¶ -->
                        <div id="companyAreaAuto" class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                            <div id="companyAreaDisplay">
                                <!-- ìsìπï{åß -->
                                <div class="p-4 border-b border-gray-100">
                                    <div class="flex items-center mb-3">
                                        <span class="text-lg mr-2">??</span>
                                        <h4 class="text-sm font-semibold text-gray-800">ëŒâûìsìπï{åß</h4>
                                    </div>
                                    <div id="companyPrefecturesDisplay" class="flex flex-wrap gap-2"><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            ìåãûìs
                        </span><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            çÈã åß
                        </span><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            ê_ìﬁêÏåß
                        </span><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            ìﬁó«åß
                        </span><span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            ï∫å…åß
                        </span></div>
                                </div>

                                <!-- ésãÊí¨ë∫ -->
                                <div class="p-4 border-b border-gray-100 bg-gray-50">
                                    <div class="flex items-center mb-3">
                                        <span class="text-lg mr-2">???</span>
                                        <h4 class="text-sm font-semibold text-gray-800">ëŒâûésãÊí¨ë∫</h4>
                                    </div>
                                    <div id="companyCitiesDisplay" class="flex flex-wrap gap-1.5 max-h-64 overflow-y-auto p-2 bg-white rounded border border-gray-200"><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            {"type":"compressed"
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            "full":"êÁë„ìcãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            íÜâõãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ç`ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êVèhãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ï∂ãûãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ë‰ìåãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ñnìcãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ç]ìåãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ïiêÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ñ⁄çïãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëÂìcãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê¢ìcíJãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            èaíJãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            íÜñÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êôï¿ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ñLìáãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ñkãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çrêÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            î¬ã¥ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ó˚înãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ë´óßãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            äãè¸ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ç]åÀêÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            î™â§éqés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            óßêÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ïêë†ñÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            éOëÈés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê¬î~és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ï{íÜés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            è∫ìáés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            í≤ïzés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            í¨ìcés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            è¨ã‡à‰és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            è¨ïΩés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ì˙ñÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìåë∫éRés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çëï™éõés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çëóßés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ïüê∂és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çùç]és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìåëÂòaés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê¥ê£és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìåãvóØïƒés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ïêë†ë∫éRés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëΩñÄés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            àÓèÈés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            âHë∫és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç†Ç´ÇÈñÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êºìåãûés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êêï‰í¨
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ì˙ÇÃèoí¨
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ûwå¥ë∫
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            âúëΩñÄí¨
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésêºãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésñkãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésëÂã{ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹éså©è¿ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésíÜâõãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésç˜ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésâYòaãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésìÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésóŒãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç≥Ç¢ÇΩÇ‹ésä‚íŒãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏâzés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            åFíJés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏå˚és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çsìcés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            íÅïÉés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            èäëÚés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            î—î\és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â¡ê{és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ñ{èØés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìåèºéRés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ètì˙ïîés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ã∑éRés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            âHê∂és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çÉëÉés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê[íJés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            è„îˆés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëêâ¡és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            âzíJés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ònés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            åÀìcés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ì¸ä‘és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            í©â‡és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            éuñÿés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            òaåıés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êVç¿és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â±êÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ãväÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ñkñ{és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            î™í™és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ïxémå©és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            éOãΩés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ò@ìcés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ç‚åÀés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çKéËés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            íﬂÉñìáés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ì˙çÇés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ãgêÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            Ç”Ç∂Ç›ñÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            îíâ™és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésíﬂå©ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésê_ìﬁêÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésêºãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésíÜãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésìÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésï€ìyÉPíJãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésàÈéqãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésã‡ëÚãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésç`ñkãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésåÀíÀãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésç`ìÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésàÆãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésóŒãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésê£íJãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésâhãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésêÚãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésê¬ótãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ïlésìsí}ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏçËésêÏçËãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏçËésçKãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏçËésíÜå¥ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏçËésçÇí√ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏçËésëΩñÄãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏçËésã{ëOãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏçËésñÉê∂ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëäñÕå¥ésóŒãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëäñÕå¥ésíÜâõãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëäñÕå¥ésìÏãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â°ê{âÍés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ïΩíÀés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            äôëqés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ì°ëÚés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            è¨ìcå¥és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            äùÉñçËés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÄéqés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            éOâYés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê`ñÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            å˙ñÿés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëÂòaés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            à…ê®å¥és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            äCòVñºés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ç¿ä‘és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìÏë´ïøés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            àªê£és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìﬁó«és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëÂòaçÇìcés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëÂòaåSéRés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìVóùés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            äÄå¥és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ç˜à‰és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            å‹ûäés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            å‰èäés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê∂ãÓés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çÅé≈és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            äãèÈés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            âFë…és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésìåìÂãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésìÂãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésï∫å…ãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésí∑ìcãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésê{ñÅãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésêÇêÖãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésñkãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésíÜâõãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê_åÀésêºãÊ
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ïPòHés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìÚçËés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ñæêŒés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êºã{és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            èFñ{és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            à∞âÆés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            à…íOés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ëäê∂és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ñLâ™és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â¡å√êÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ê‘ï‰és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êºòeés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ïÛíÀés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            éOñÿés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            çÇçªés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            êÏêºés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            è¨ñÏés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            éOìcés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â¡êºés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            íOîgé¬éRés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ó{ïÉés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            íOîgés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ìÏÇ†ÇÌÇ∂és
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            í©óàés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            íWòHés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            é≥àæés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            â¡ìåés
                        </span><span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ÇΩÇ¬ÇÃés"}
                        </span></div>
                                </div>

                                <!-- óDêÊÉGÉäÉA -->
                                <div class="p-4">
                                    <div class="flex items-center mb-3">
                                        <span class="text-lg mr-2">?</span>
                                        <h4 class="text-sm font-semibold text-gray-800">óDêÊÉGÉäÉA</h4>
                                    </div>
                                    <div id="companyPrioritiesDisplay" class="flex flex-wrap gap-2"><span class="inline-flex items-center gap-1 px-4 py-2 bg-gradient-to-r from-amber-400 to-yellow-400 text-amber-900 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-shadow">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                            </svg>
                            à§ímåß_ñºå√âÆésìåãÊ
                        </span><span class="inline-flex items-center gap-1 px-4 py-2 bg-gradient-to-r from-amber-400 to-yellow-400 text-amber-900 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-shadow">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                            </svg>
                            ìﬁó«åß_ìﬁó«és
                        </span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ëŒâûçHéñì‡óe -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ëŒâûçHéñì‡óe</h3>
                        <p class="text-sm text-gray-600 mb-3">Å¶ é©ìÆîzêMê›íËÇ©ÇÁé©ìÆìIÇ…îΩâfÇ≥ÇÍÇ‹Ç∑</p>

                        <!-- é©ìÆîΩâfï\é¶ -->
                        <div id="companyConstructionAuto" class="bg-white border border-gray-200 rounded-lg p-4">
                            <div id="companyConstructionDisplay" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">äOï«ìhëï</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">???</span>
                            <span class="text-sm font-medium text-gray-700">äOï«ÉJÉoÅ[çHñ@</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">äOï«í£ë÷Ç¶</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">âÆç™ìhëï</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">?</span>
                            <span class="text-sm font-medium text-gray-700">âÆè„ñhêÖ</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">???</span>
                            <span class="text-sm font-medium text-gray-700">âÆç™ÉJÉoÅ[çHñ@</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">äOï«ï‚èC</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">???</span>
                            <span class="text-sm font-medium text-gray-700">âÆç™ï‚èC</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">ÉxÉâÉìÉ_ñhêÖ</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">?</span>
                            <span class="text-sm font-medium text-gray-700">äOï«âJòRÇËèCëU</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅj</span>
                        </div><div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">??</span>
                            <span class="text-sm font-medium text-gray-700">ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅj</span>
                        </div></div>
                        </div>
                    </div>

                    <!-- ÉAÉsÅ[ÉãÉ|ÉCÉìÉgÅié©ìÆîzêMê›íËÇ©ÇÁé©ìÆîΩâfÅj -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ÉAÉsÅ[ÉãÉ|ÉCÉìÉg</h3>
                        <p class="text-sm text-gray-600 mb-3">Å¶ é©ìÆîzêMê›íËÇ©ÇÁé©ìÆìIÇ…îΩâfÇ≥ÇÍÇ‹Ç∑</p>

                        <!-- é©ìÆîΩâfï\é¶ -->
                        <div id="companyAppealPointsAuto" class="bg-white border border-gray-200 rounded-lg p-4">
                            <div id="companyAppealPointsDisplay" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? é’îMÅEífîMìhóøíÒàƒâ¬î\</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ÉGÉNÉXÉeÉäÉAÅiíÎÅEíìé‘èÍÅEäOç\Åj</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ëæózåıÉpÉlÉãíEíÖÅiìPãéä‹ÇﬁÅj</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? íÒågêÊÉçÅ[ÉìóLÇË</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? ÉNÉåÉWÉbÉgÉJÅ[Éhï•Ç¢â¬</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? âŒç–ï€åØê\êøÉTÉ|Å[Ég</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? èïê¨ã‡ê\êøÉTÉ|Å[Ég</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">?? åöízãñâ¬èÿ</span>
                            </div><div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">?</span>
                                <span class="text-sm font-medium text-gray-700">? åıêGî}ìhóøíÒàƒâ¬</span>
                            </div></div>
                        </div>
                    </div>

                    <!-- ï€óLéëäi -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ï€óLéëäi</h3>
                        <p class="text-sm text-gray-600 mb-4">äYìñÇ∑ÇÈéëäiÇÇ∑Ç◊ÇƒëIëÇµÇƒÇ≠ÇæÇ≥Ç¢Åiï°êîëIëâ¬Åj</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4">
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="àÍãâìhëïãZî\ém" class="mr-3">
                                <span class="text-sm">àÍãâìhëïãZî\ém</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ìÒãâìhëïãZî\ém" class="mr-3">
                                <span class="text-sm">ìÒãâìhëïãZî\ém</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ë´èÍëgóßçÏã∆éÂîCé“" class="mr-3">
                                <span class="text-sm">ë´èÍëgóßçÏã∆éÂîCé“</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="êŒñ»çÏã∆éÂîCé“" class="mr-3">
                                <span class="text-sm">êŒñ»ÅiÉAÉXÉxÉXÉgÅjçÏã∆éÂîCé“</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="äOï«êfífém" class="mr-3">
                                <span class="text-sm">äOï«êfífém</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="äOï«óÚâªêfífém" class="mr-3">
                                <span class="text-sm">äOï«óÚâªêfífém</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="äOï«ÉAÉhÉoÉCÉUÅ[" class="mr-3">
                                <span class="text-sm">äOï«ÉAÉhÉoÉCÉUÅ[</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="âÆç™êfífém" class="mr-3">
                                <span class="text-sm">âÆç™êfífém</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="âJòRÇËêfífém" class="mr-3">
                                <span class="text-sm">âJòRÇËêfífém</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ëùâ¸ízëäíkàı" class="mr-3">
                                <span class="text-sm">ëùâ¸ízëäíkàı</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="ëÊìÒéÌìdãCçHéñém" class="mr-3">
                                <span class="text-sm">ëÊìÒéÌìdãCçHéñém</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="óLã@ónç‹çÏã∆éÂîCé“" class="mr-3">
                                <span class="text-sm">óLã@ónç‹çÏã∆éÂîCé“</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="qualifications" value="àÍãâñhêÖé{çHãZî\ém" class="mr-3">
                                <span class="text-sm">àÍãâñhêÖé{çHãZî\ém</span>
                            </label>
                        </div>
                        <!-- ÇªÇÃëºÇÃéëäiÇí«â¡ -->
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ÇªÇÃëºÇÃéëäi</label>
                            <div class="flex gap-2" id="customQualifications">
                                <input type="text" id="customQualificationInput" class="flex-1 px-3 py-2 border rounded-lg" placeholder="ÇªÇÃëºÇÃéëäiÇì¸óÕ">
                                <button onclick="addCustomQualification()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                    í«â¡
                                </button>
                            </div>
                            <div id="customQualificationsList" class="mt-3 flex flex-wrap gap-2"></div>
                        </div>
                    </div>

                    <!-- â¡ì¸ï€åØ -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">â¡ì¸ï€åØ</h3>
                        <p class="text-sm text-gray-600 mb-4">â¡ì¸ÇµÇƒÇ¢ÇÈï€åØÇÇ∑Ç◊ÇƒëIëÇµÇƒÇ≠ÇæÇ≥Ç¢Åiï°êîëIëâ¬Åj</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4">
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="çHéñï€åØ" class="mr-3">
                                <span class="text-sm">çHéñï€åØ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="îÖèûê”îCï€åØ" class="mr-3">
                                <span class="text-sm">îÖèûê”îCï€åØ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="ÉäÉtÉHÅ[ÉÄ‡Í·rï€åØ" class="mr-3">
                                <span class="text-sm">ÉäÉtÉHÅ[ÉÄ‡Í·rï€åØ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="åöê›çHéñï€åØ" class="mr-3">
                                <span class="text-sm">åöê›çHéñï€åØ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="êøïâã∆é“îÖèûê”îCï€åØ" class="mr-3">
                                <span class="text-sm">êøïâã∆é“îÖèûê”îCï€åØ</span>
                            </label>
                            <label class="flex items-center p-3 bg-white border rounded-lg hover:bg-blue-50 cursor-pointer">
                                <input type="checkbox" name="insurance" value="ê∂éYï®îÖèûê”îCï€åØ" class="mr-3">
                                <span class="text-sm">ê∂éYï®îÖèûê”îCï€åØÅiPLï€åØÅj</span>
                            </label>
                        </div>
                        <!-- ÇªÇÃëºÇÃï€åØÇí«â¡ -->
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ÇªÇÃëºÇÃï€åØ</label>
                            <div class="flex gap-2" id="customInsurance">
                                <input type="text" id="customInsuranceInput" class="flex-1 px-3 py-2 border rounded-lg" placeholder="ÇªÇÃëºÇÃï€åØÇì¸óÕ">
                                <button onclick="addCustomInsurance()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                    í«â¡
                                </button>
                            </div>
                            <div id="customInsuranceList" class="mt-3 flex flex-wrap gap-2"></div>
                        </div>
                    </div>

                    <!-- ï€ë∂É{É^Éì -->
                    <div class="flex justify-end mt-8 gap-3">
                        <button onclick="resetCompanyInfo()" class="px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium">
                            ÉäÉZÉbÉg
                        </button>
                        <button onclick="saveCompanyInfo()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                            </svg>
                            ïœçXÇï€ë∂
                        </button>
                    </div>
                </div>
            </div>

            <!-- ÉLÉÉÉìÉZÉãê\êøÉZÉNÉVÉáÉì -->
            <div id="cancelSection" class="section" style="display: none;">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">ÉLÉÉÉìÉZÉãê\êø</h2>
                        <p class="text-sm text-gray-600 mt-1">àƒåèÇÃÉLÉÉÉìÉZÉãóùóRÇëIëÇµÇƒê\êøÇµÇƒÇ≠ÇæÇ≥Ç¢</p>
                    </div>
                </div>

                <!-- åüçıÉoÅ[ -->
                <div class="bg-white rounded-lg shadow p-4 mb-6">
                    <!-- äÓñ{åüçı -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                        <div class="lg:col-span-2">
                            <input type="text" id="cancelSearchInput" placeholder="å⁄ãqñºÅEìdòbî‘çÜÅEèZèäÇ≈åüçıÅiïîï™àÍívÅj" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-blue-500" onkeyup="searchCancelCases()">
                        </div>
                        <div>
                            <select id="cancelAssigneeFilter" class="w-full px-4 py-2 border rounded-lg" onchange="searchCancelCases()">
                                <option value="">íSìñé“Ç≈åüçı</option>
                                <option value="self">é©ï™ÇÃàƒåè</option>
                                <option value="ìcíÜëæòY">ìcíÜëæòY</option>
                                <option value="ç≤ì°â‘éq">ç≤ì°â‘éq</option>
                                <option value="óÈñÿàÍòY">óÈñÿàÍòY</option>
                                <option value="çÇã¥Ç›Ç‰Ç´">çÇã¥Ç›Ç‰Ç´</option>
                                <option value="à…ì°åí">à…ì°åí</option>
                                <option value="ñ¢äÑìñ">ñ¢äÑìñ</option>
                            </select>
                        </div>
                    </div>

                    <!-- ä˙ä‘åüçı -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="flex items-center gap-2">
                            <label class="text-xs text-gray-600">ó¨ì¸ä˙ä‘</label>
                            <input type="date" id="cancelStartDate" class="px-3 py-2 border rounded-lg" onchange="searchCancelCases()">
                            <span class="text-xs text-gray-600">Å`</span>
                            <input type="date" id="cancelEndDate" class="px-3 py-2 border rounded-lg" onchange="searchCancelCases()">
                        </div>
                        <div class="flex items-center justify-end">
                            <button onclick="searchCancelCases()" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                åüçı
                            </button>
                        </div>
                    </div>
                </div>

                <!-- àƒåèàÍóó -->
                <div id="cancelCasesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6">
                    <!-- àƒåèÉJÅ[ÉhÇ™ìÆìIÇ…ï\é¶Ç≥ÇÍÇÈ -->
                </div>

                <!-- ÉLÉÉÉìÉZÉãê\êøÉtÉHÅ[ÉÄÅiÉÇÅ[É_ÉãÅj -->
                <div id="cancelModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                    <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-4">ÉLÉÉÉìÉZÉãóùóRÇÃëIë</h3>
                            <div id="cancelQuestionContainer">
                                <!-- éøñ‚Ç™ìÆìIÇ…ï\é¶Ç≥ÇÍÇÈ -->
                            </div>
                            <div id="cancelAIResponse" class="hidden mt-6 p-4 bg-blue-50 rounded-lg">
                                <h4 class="font-semibold text-gray-800 mb-2">AIê∂ê¨ÇÃê\êøï∂</h4>
                                <div id="cancelAIText" class="text-gray-700 whitespace-pre-wrap"></div>
                                <div class="mt-4 flex gap-3">
                                    <button onclick="submitCancelRequest()" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                        Ç±ÇÃì‡óeÇ≈ê\êø
                                    </button>
                                    <button onclick="regenerateCancelText()" class="px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">
                                        çƒê∂ê¨
                                    </button>
                                </div>
                            </div>
                            <button onclick="closeCancelModal()" class="mt-4 text-gray-500 hover:text-gray-700">
                                ÉLÉÉÉìÉZÉã
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê¨ñÒïÒçêÉZÉNÉVÉáÉì -->
            <div id="contractSection" class="section" style="display: none;">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">ê¨ñÒïÒçê</h2>
                        <p class="text-sm text-gray-600 mt-1">ê¨ñÒÇµÇΩàƒåèÇÃè⁄ç◊ÇïÒçêÇµÇƒÇ≠ÇæÇ≥Ç¢</p>
                    </div>
                </div>

                <!-- åüçıÉoÅ[ -->
                <div class="bg-white rounded-lg shadow p-4 mb-6">
                    <!-- äÓñ{åüçı -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                        <div class="lg:col-span-2">
                            <input type="text" id="contractSearchInput" placeholder="å⁄ãqñºÅEìdòbî‘çÜÅEèZèäÇ≈åüçıÅiïîï™àÍívÅj" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-blue-500" onkeyup="searchContractCases()">
                        </div>
                        <div>
                            <select id="contractAssigneeFilter" class="w-full px-4 py-2 border rounded-lg" onchange="searchContractCases()">
                                <option value="">íSìñé“Ç≈åüçı</option>
                                <option value="self">é©ï™ÇÃàƒåè</option>
                                <option value="ìcíÜëæòY">ìcíÜëæòY</option>
                                <option value="ç≤ì°â‘éq">ç≤ì°â‘éq</option>
                                <option value="óÈñÿàÍòY">óÈñÿàÍòY</option>
                                <option value="çÇã¥Ç›Ç‰Ç´">çÇã¥Ç›Ç‰Ç´</option>
                                <option value="à…ì°åí">à…ì°åí</option>
                                <option value="ñ¢äÑìñ">ñ¢äÑìñ</option>
                            </select>
                        </div>
                    </div>

                    <!-- ä˙ä‘åüçı -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="flex items-center gap-2">
                            <label class="text-xs text-gray-600">ó¨ì¸ä˙ä‘</label>
                            <input type="date" id="contractStartDate" class="px-3 py-2 border rounded-lg" onchange="searchContractCases()">
                            <span class="text-xs text-gray-600">Å`</span>
                            <input type="date" id="contractEndDate" class="px-3 py-2 border rounded-lg" onchange="searchContractCases()">
                        </div>
                        <div class="flex items-center justify-end">
                            <button onclick="searchContractCases()" class="px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                åüçı
                            </button>
                        </div>
                    </div>
                </div>

                <!-- àƒåèàÍóó -->
                <div id="contractCasesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6">
                    <!-- àƒåèÉJÅ[ÉhÇ™ìÆìIÇ…ï\é¶Ç≥ÇÍÇÈ -->
                </div>

                <!-- ê¨ñÒïÒçêÉÇÅ[É_Éã -->
                <div id="contractModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
                    <div class="bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto relative">
                        <!-- ï¬Ç∂ÇÈÉ{É^ÉìÅiâEè„Åj -->
                        <button onclick="closeContractModal()" class="absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 transition-colors z-10">
                            <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>

                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-4">ê¨ñÒïÒçê</h3>

                            <!-- å⁄ãqèÓïÒï\é¶ -->
                            <div id="contractCustomerInfo" class="hidden mb-4 p-4 bg-blue-50 rounded-lg">
                                <div class="text-lg font-semibold" id="contractCustomerName"></div>
                                <div class="text-gray-600" id="contractCustomerAddress"></div>
                            </div>

                            <!-- éøñ‚ÉtÉFÅ[ÉY -->
                            <div id="contractQuestionContainer">
                                <!-- éøñ‚Ç™ìÆìIÇ…ï\é¶Ç≥ÇÍÇÈ -->
                            </div>

                            <!-- ÉtÉHÅ[ÉÄÉtÉFÅ[ÉY -->
                            <div id="contractFormPhase" class="hidden">
                                <form id="contractReportForm">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <!-- å_ñÒã‡äz -->
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">å_ñÒã‡äzÅiê≈çûÅj</label>
                                            <div class="flex items-center">
                                                <span class="mr-2">\</span>
                                                <input type="number" id="contractAmount" class="flex-1 px-3 py-2 border rounded-lg" placeholder="1234567" min="0" step="1" required="">
                                                <span class="ml-2">â~</span>
                                            </div>
                                        </div>

                                        <!-- äÆçHì˙ -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2" id="completionDateLabel">äÆçHó\íËì˙</label>
                                            <input type="date" id="completionDate" class="w-full px-3 py-2 border rounded-lg" required="">
                                        </div>

                                        <!-- íÖã‡ì˙ -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2" id="paymentDateLabel">íÖã‡ó\íËì˙</label>
                                            <input type="date" id="paymentDate" class="w-full px-3 py-2 border rounded-lg" required="">
                                        </div>

                                        <!-- ëŒè€ï®åèéÌï  -->
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">ëŒè€ï®åèéÌï </label>

                                            <!-- ï®åèÉ^ÉCÉvÅiï°êîëIëâ¬Åj -->
                                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-3">
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="åÀåöÇƒ" class="mr-2">
                                                    <span>åÀåöÇƒ</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="ÉAÉpÅ[Ég" class="mr-2">
                                                    <span>ÉAÉpÅ[Ég</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="É}ÉìÉVÉáÉì" class="mr-2">
                                                    <span>É}ÉìÉVÉáÉì</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="ìXï‹" class="mr-2">
                                                    <span>ìXï‹</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="éññ±èä" class="mr-2">
                                                    <span>éññ±èä</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="çHèÍ" class="mr-2">
                                                    <span>çHèÍ</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="ëqå…" class="mr-2">
                                                    <span>ëqå…</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="propertyType" value="ÇªÇÃëº" class="mr-2" onchange="toggleOtherPropertyDetails()">
                                                    <span>ÇªÇÃëº</span>
                                                </label>
                                            </div>
                                            <input type="text" id="otherPropertyDetails" class="w-full px-3 py-2 border rounded-lg hidden" placeholder="ÇªÇÃëºÇÃï®åèéÌï Çì¸óÕ">

                                            <!-- äKêîëIë -->
                                            <div class="mt-3">
                                                <label class="block text-xs text-gray-600 mb-1">äKêî</label>
                                                <select id="buildingFloors" class="w-full px-3 py-2 border rounded-lg">
                                                    <option value="">ëIëÇµÇƒÇ≠ÇæÇ≥Ç¢</option>
                                                    <option value="1F">1F</option>
                                                    <option value="2F">2F</option>
                                                    <option value="3F">3F</option>
                                                    <option value="4F">4F</option>
                                                    <option value="5F">5F</option>
                                                    <option value="6F">6F</option>
                                                    <option value="7F">7F</option>
                                                    <option value="8F">8F</option>
                                                    <option value="9F">9F</option>
                                                    <option value="10Fà»è„">10Fà»è„</option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- é{çHì‡óe -->
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">é{çHì‡óeÅiï°êîëIëâ¬Åj</label>
                                            <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-3">
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="äOï«ìhëï" class="mr-2">
                                                    <span>äOï«ìhëï</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="äOï«ÉJÉoÅ[çHñ@" class="mr-2">
                                                    <span>äOï«ÉJÉoÅ[çHñ@</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="äOï«í£ë÷Ç¶" class="mr-2">
                                                    <span>äOï«í£ë÷Ç¶</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="âÆç™ìhëï" class="mr-2">
                                                    <span>âÆç™ìhëï</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="âÆè„ñhêÖ" class="mr-2">
                                                    <span>âÆè„ñhêÖ</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="âÆç™ïòÇ´ë÷Ç¶ÅiÉXÉåÅ[ÉgÅEÉKÉãÉoÅj" class="mr-2">
                                                    <span>âÆç™ïòÇ´ë÷Ç¶ÅiÉXÉåÅ[ÉgÅEÉKÉãÉoÅj</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="âÆç™ïòÇ´ë÷Ç¶Åiä¢Åj" class="mr-2">
                                                    <span>âÆç™ïòÇ´ë÷Ç¶Åiä¢Åj</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="âÆç™ÉJÉoÅ[çHñ@" class="mr-2">
                                                    <span>âÆç™ÉJÉoÅ[çHñ@</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="äOï«ï‚èC" class="mr-2">
                                                    <span>äOï«ï‚èC</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="âÆç™ï‚èC" class="mr-2">
                                                    <span>âÆç™ï‚èC</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ÉxÉâÉìÉ_ñhêÖ" class="mr-2">
                                                    <span>ÉxÉâÉìÉ_ñhêÖ</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="âJòRÇËèCëU" class="mr-2">
                                                    <span>âJòRÇËèCëU</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅj" class="mr-2">
                                                    <span>ì‡ëïêÖâÒÇË</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ì‡ëïÅiè∞ÅEÉNÉçÉXìôÅj" class="mr-2">
                                                    <span>ì‡ëïÅiè∞ÅEÉNÉçÉXìôÅj</span>
                                                </label>
                                                <label class="flex items-center">
                                                    <input type="checkbox" name="workType" value="ÇªÇÃëº" class="mr-2" onchange="toggleOtherWorkDetails()">
                                                    <span>ÇªÇÃëº</span>
                                                </label>
                                            </div>
                                            <textarea id="workDetails" class="w-full px-3 py-2 border rounded-lg hidden" rows="3" placeholder="ÇªÇÃëºÇÃé{çHì‡óeÇì¸óÕ"></textarea>
                                        </div>

                                        <!-- å©êœèëÉAÉbÉvÉçÅ[Éh -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">å©êœèë</label>
                                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                                                <input type="file" id="estimateFile" accept="image/*,application/pdf" class="hidden" onchange="handleFileUpload(event, 'estimate')">
                                                <div id="estimatePreview" class="mb-2">
                                                    <svg class="w-12 h-12 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                                    </svg>
                                                </div>
                                                <button type="button" onclick="document.getElementById('estimateFile').click()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                                    ÉtÉ@ÉCÉãÇëIë
                                                </button>
                                                <p class="text-xs text-gray-500 mt-2">âÊëúÇ‹ÇΩÇÕPDF</p>
                                            </div>
                                        </div>

                                        <!-- óÃé˚èëÉAÉbÉvÉçÅ[Éh -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">óÃé˚èë</label>
                                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                                                <input type="file" id="receiptFile" accept="image/*,application/pdf" class="hidden" onchange="handleFileUpload(event, 'receipt')">
                                                <div id="receiptPreview" class="mb-2">
                                                    <svg class="w-12 h-12 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                                    </svg>
                                                </div>
                                                <button type="button" onclick="document.getElementById('receiptFile').click()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                                    ÉtÉ@ÉCÉãÇëIë
                                                </button>
                                                <p class="text-xs text-gray-500 mt-2">âÊëúÇ‹ÇΩÇÕPDF</p>
                                            </div>
                                        </div>

                                        <!-- îıçl -->
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">îıçl</label>
                                            <textarea id="contractNotes" class="w-full px-3 py-2 border rounded-lg" rows="3" placeholder="ì¡ãLéñçÄÇ™Ç†ÇÍÇŒì¸óÕ"></textarea>
                                        </div>
                                    </div>

                                    <div class="mt-6 flex justify-center">
                                        <button type="submit" class="px-8 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium">
                                            ê¨ñÒïÒçêÇëóêM
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê›íËÉZÉNÉVÉáÉì -->
            <div id="settingsSection" class="section" style="display: none;">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ê›íË</h2>
                
                <!-- É^ÉuÉiÉrÉQÅ[ÉVÉáÉì -->
                <!-- É^ÉuÇçÌèúÇµÇƒ1ÉyÅ[ÉWìùçá -->
                
                <!-- ÉvÉçÉtÉBÅ[ÉãèÓïÒ -->
                <div id="profileSection">
                    <div class="bg-white shadow rounded-lg p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">ÉvÉçÉtÉBÅ[ÉãèÓïÒ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">éÅñº</label>
                                <input type="text" id="profileName" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="ìcíÜëæòY">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ìdòbî‘çÜ</label>
                                <input type="tel" id="profilePhone" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="090-1234-5678">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ÉÅÅ[ÉãÉAÉhÉåÉX</label>
                                <input type="email" id="profileEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="tanaka@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">LINE ID</label>
                                <input type="text" id="profileLineId" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="@tanaka_taro">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- í ímÅEÉAÉâÅ[Égê›íË -->
                <div id="notificationSection" class="mt-6">
                    <div class="bg-white shadow rounded-lg p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">í ímÅEÉAÉâÅ[Égê›íË</h3>
                        
                        <!-- í ímï˚ñ@ -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">í ímï˚ñ@</h4>
                            <div class="space-y-3">
                                <label class="flex items-center justify-between">
                                    <span class="text-sm text-gray-700">ÉÅÅ[Éãí ím</span>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="notifyEmail" class="toggle-switch" checked="">
                                        <button onclick="testNotification('email')" class="ml-3 text-xs text-blue-600 hover:text-blue-800">ÉeÉXÉgëóêM</button>
                                    </div>
                                </label>
                                <label class="flex items-center justify-between">
                                    <span class="text-sm text-gray-700">SMSí ím</span>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="notifySms" class="toggle-switch">
                                        <button onclick="testNotification('sms')" class="ml-3 text-xs text-blue-600 hover:text-blue-800">ÉeÉXÉgëóêM</button>
                                    </div>
                                </label>
                                <label class="flex items-center justify-between">
                                    <span class="text-sm text-gray-700">LINEí ím</span>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="notifyLine" class="toggle-switch">
                                        <button onclick="testNotification('line')" class="ml-3 text-xs text-blue-600 hover:text-blue-800">ÉeÉXÉgëóêM</button>
                                    </div>
                                </label>
                                <label class="flex items-center justify-between">
                                    <span class="text-sm text-gray-700">ÉuÉâÉEÉUí ím</span>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="notifyBrowser" class="toggle-switch" checked="">
                                        <button onclick="testNotification('browser')" class="ml-3 text-xs text-blue-600 hover:text-blue-800">ÉeÉXÉgëóêM</button>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- í íméÌï  -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">í íméÌï </h4>
                            <div class="space-y-3">
                                <!-- ÉAÉ|ÉCÉìÉgÉäÉ}ÉCÉìÉ_Å[ -->
                                <div class="border rounded-lg p-3 bg-gray-50 group relative">
                                    <label class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">??</span>
                                            <span class="text-sm font-medium text-gray-700">åªí≤ëOì˙ÉäÉ}ÉCÉìÉ_Å[</span>
                                            <span class="ml-1 text-gray-400 cursor-help">?</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="time" id="appointmentAlertTime" value="18:00" class="px-2 py-1 border rounded text-sm">
                                            <input type="checkbox" id="appointmentReminder" class="toggle-switch" checked="" onchange="updateAlertSetting('appointment_reminder', this.checked)">
                                        </div>
                                    </label>
                                    <div class="absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-10 whitespace-nowrap">
                                        åªíní≤ç∏ÇÃëOì˙Ç…í ímÇµÇ‹Ç∑
                                    </div>
                                </div>

                                <!-- âÀìdÉäÉ}ÉCÉìÉ_Å[ -->
                                <div class="border rounded-lg p-3 bg-gray-50 group relative">
                                    <label class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">??</span>
                                            <span class="text-sm font-medium text-gray-700">âÀìdÉäÉ}ÉCÉìÉ_Å[</span>
                                            <span class="ml-1 text-gray-400 cursor-help">?</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="time" id="callAlertTime" value="10:00" class="px-2 py-1 border rounded text-sm">
                                            <input type="checkbox" id="callReminder" class="toggle-switch" checked="" onchange="updateAlertSetting('call_reminder', this.checked)">
                                        </div>
                                    </label>
                                    <div class="absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-10 whitespace-nowrap">
                                        ñ¢ëŒâûàƒåèÇÃóÇì˙Ç…í ímÇµÇ‹Ç∑
                                    </div>
                                </div>

                                <!-- å©êœÉtÉHÉçÅ[ -->
                                <div class="border rounded-lg p-3 bg-gray-50 group relative">
                                    <label class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">??</span>
                                            <span class="text-sm font-medium text-gray-700">å©êœÉtÉHÉçÅ[ÉAÉbÉv</span>
                                            <span class="ml-1 text-gray-400 cursor-help">?</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="number" id="followupDays" value="7" min="1" max="30" class="w-16 px-2 py-1 border rounded text-sm">
                                            <span class="text-sm text-gray-600">ì˙å„</span>
                                            <input type="checkbox" id="estimateFollowup" class="toggle-switch" checked="" onchange="updateAlertSetting('estimate_followup', this.checked)">
                                        </div>
                                    </label>
                                    <div class="absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-10 whitespace-nowrap">
                                        å©êœíÒèoå„Ç…é©ìÆÇ≈ÉtÉHÉçÅ[í ímÇµÇ‹Ç∑
                                    </div>
                                </div>

                                <!-- ì¸ã‡ämîF -->
                                <div class="border rounded-lg p-3 bg-gray-50 group relative">
                                    <label class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">??</span>
                                            <span class="text-sm font-medium text-gray-700">ì¸ã‡ämîFÉAÉâÅ[Ég</span>
                                            <span class="ml-1 text-gray-400 cursor-help">?</span>
                                        </div>
                                        <input type="checkbox" id="paymentAlert" class="toggle-switch" checked="" onchange="updateAlertSetting('payment_alert', this.checked)">
                                    </label>
                                    <div class="absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-10 whitespace-nowrap">
                                        ì¸ã‡ó\íËì˙Ç…é©ìÆÇ≈í ímÇµÇ‹Ç∑
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- í íméûä‘ÅEãxì˙ê›íË -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">í íméûä‘ÅEãxì˙ê›íË</h4>
                            <div class="space-y-4">
                                <!-- ãxì˙ê›íË -->
                                <div class="border rounded-lg p-4 bg-gray-50">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enableHolidays" onchange="toggleHolidaySettings()" checked="">
                                        <span class="ml-2 text-sm font-medium text-gray-700">?? ãxì˙ê›íËÅiÉ`ÉFÉbÉNÇµÇΩójì˙ÇÕí ímÇ≥ÇÍÇ‹ÇπÇÒÅj</span>
                                    </label>
                                    <div id="holidaySettings" class="mt-3 flex flex-wrap gap-3">
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayMon" class="mr-2">
                                            <span class="text-sm">åé</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayTue" class="mr-2">
                                            <span class="text-sm">âŒ</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayWed" class="mr-2">
                                            <span class="text-sm">êÖ</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayThu" class="mr-2">
                                            <span class="text-sm">ñÿ</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidayFri" class="mr-2">
                                            <span class="text-sm">ã‡</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidaySat" class="mr-2" checked="">
                                            <span class="text-sm font-medium text-blue-600">ìy</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="holidaySun" class="mr-2" checked="">
                                            <span class="text-sm font-medium text-red-600">ì˙</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- í ímêßå¿éûä‘ -->
                                <div class="border rounded-lg p-4 bg-gray-50">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enableQuietHours" onchange="toggleQuietHours()" checked="">
                                        <span class="ml-2 text-sm font-medium text-gray-700">?? í ímÇêßå¿Ç∑ÇÈéûä‘ë—</span>
                                    </label>
                                    <div id="quietHoursSettings" class="mt-3 space-y-2">
                                        <div class="flex items-center space-x-2">
                                            <input type="time" id="quietStart" value="22:00" class="px-3 py-2 border border-gray-300 rounded-lg">
                                            <span class="text-sm text-gray-500">Ç©ÇÁ</span>
                                            <input type="time" id="quietEnd" value="08:00" class="px-3 py-2 border border-gray-300 rounded-lg">
                                            <span class="text-sm text-gray-500">Ç‹Ç≈</span>
                                        </div>
                                        <p class="text-xs text-gray-500">Ç±ÇÃéûä‘ë—ÇÕí ímÇëóêMÇµÇ‹ÇπÇÒ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ìùçáï€ë∂É{É^Éì -->
                    <div class="mt-6 flex justify-end">
                        <button onclick="saveAllSettings()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">
                            ê›íËÇï€ë∂
                        </button>
                    </div>
                </div>
            </div>
        </main></div><!-- settingsSectionÇÃèIóπ -->
    

    <!-- å†å¿ê›íËÉÇÅ[É_Éã -->
    <div id="permissionModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mb-4">
                <h3 class="text-lg font-bold text-gray-900" id="modalTitle">âcã∆å†å¿ê›íË</h3>
                <p class="text-sm text-gray-500 mt-1">âcã∆íSìñé“ÇÃå†å¿Çè⁄ç◊Ç…ê›íËÇ≈Ç´Ç‹Ç∑</p>
            </div>
            <!-- êVãKí«â¡éûÇÃì¸óÕÉtÉBÅ[ÉãÉh -->
            <div id="newSalesFields" class="mb-6 hidden">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">éÅñº <span class="text-red-500">*</span></label>
                        <input type="text" id="newSalesName" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ó·ÅFéRìcëæòY">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ÉÅÅ[ÉãÉAÉhÉåÉX <span class="text-red-500">*</span></label>
                        <input type="email" id="newSalesEmail" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="example@company.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ìdòbî‘çÜ</label>
                        <input type="tel" id="newSalesPhone" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="090-1234-5678">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ñêE</label>
                        <select id="newSalesRole" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="àÍî âcã∆">àÍî âcã∆</option>
                            <option value="ÉäÅ[É_Å[">ÉäÅ[É_Å[</option>
                            <option value="àÍî éññ±">àÍî éññ±</option>
                            <option value="åªèÍäƒì¬">åªèÍäƒì¬</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">å†å¿ÉvÉäÉZÉbÉg</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setPreset('office')" class="preset-btn px-4 py-2 border rounded-lg hover:bg-gray-50">àÍî éññ±</button>
                    <button onclick="setPreset('standard')" class="preset-btn px-4 py-2 border rounded-lg hover:bg-gray-50">àÍî âcã∆</button>
                    <button onclick="setPreset('leader')" class="preset-btn px-4 py-2 border rounded-lg hover:bg-gray-50">ÉäÅ[É_Å[</button>
                    <button onclick="setPreset('admin')" class="preset-btn px-4 py-2 border rounded-lg hover:bg-gray-50">ïõä«óùé“</button>
                </div>
            </div>

            <h3 class="text-sm font-medium text-gray-700 mb-3">ÉJÉXÉ^ÉÄê›íË</h3>
            <div class="permission-grid mb-6">
                <!-- àƒåèä÷òA -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">àƒåèä÷òA</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.view.all">
                            <span class="ml-2">ëºíSìñé“ÇÃàƒåèâ{óó</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ëºÇÃíSìñé“ÇÃàƒåèÇ‡â{óóÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.edit">
                            <span class="ml-2">ëºíSìñé“ÇÃàƒåèï“èW</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ëºÇÃíSìñé“ÇÃàƒåèÇ‡ï“èWÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.hide">
                            <span class="ml-2">àƒåèîÒï\é¶âª</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                îCà”ÇÃàƒåèÇàÍéûìIÇ…îÒï\é¶Ç…Ç≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.delete">
                            <span class="ml-2">àƒåèçÌèúÅi24éûä‘à»ì‡Åj</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                åÎì¸óÕÇµÇΩàƒåèÇ24éûä‘à»ì‡Ç…å¿ÇËçÌèúÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.cancel">
                            <span class="ml-2">ÉLÉÉÉìÉZÉãê\êø</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                é©ï™Ç™íSìñÇ∑ÇÈàƒåèÇÃÉLÉÉÉìÉZÉãê\êøÇçsÇ¶ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="case.contract">
                            <span class="ml-2">ê¨ñÒïÒçê</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                é©ï™Ç™íSìñÇ∑ÇÈàƒåèÇÃê¨ñÒïÒçêÇìoò^Ç≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                    </div>
                </div>

                <!-- é©ìÆîzêMê›íË -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">é©ìÆîzêMê›íË</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="automail.view">
                            <span class="ml-2">îzêMèåèâ{óó</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                é©ìÆîzêMÇÃê›íËÇâ{óóÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="automail.edit">
                            <span class="ml-2">îzêMèåèï“èW</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                é©ìÆîzêMÇÃèåèÇï“èWÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                    </div>
                </div>

                <!-- ç‡ñ±èÓïÒ -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">ç‡ñ±èÓïÒ</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="finance.view">
                            <span class="ml-2">îÑè„â{óó</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                îÑè„ÅEç‡ñ±èÓïÒÇâ{óóÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="finance.export">
                            <span class="ml-2">ÉfÅ[É^ÉGÉNÉXÉ|Å[Ég</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ç‡ñ±ÉfÅ[É^ÇCSVèoóÕÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                    </div>
                </div>

                <!-- ÉåÉ|Å[ÉgÅEâcã∆ä«óù -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">ÉåÉ|Å[ÉgÅEâcã∆ä«óù</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="report.self">
                            <span class="ml-2">ÉåÉ|Å[Égâ{óóÅié©ï™ÇÃê¨ê—ÇÃÇ›Åj</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                é©ï™ÇÃê¨ê—ÉåÉ|Å[ÉgÇâ{óóÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="report.all">
                            <span class="ml-2">ëSëÃÉåÉ|Å[Égâ{óó</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ëSâcã∆íSìñé“ÇÃê¨ê—Çâ{óóÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="report.export">
                            <span class="ml-2">ÉåÉ|Å[ÉgCSVèoóÕ</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                ÉåÉ|Å[ÉgÉfÅ[É^ÇCSVèoóÕÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="sales.manage">
                            <span class="ml-2">âcã∆íSìñé“ä«óù</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                âcã∆íSìñé“Çí«â¡ÅEçÌèúÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                    </div>
                </div>

                <!-- âÔé–èÓïÒ -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-medium text-gray-900 mb-3">âÔé–èÓïÒ</h4>
                    <div class="space-y-2">
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="company.view">
                            <span class="ml-2">âÔé–èÓïÒâ{óó</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                âÔé–èÓïÒÇâ{óóÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                        <label class="flex items-center text-sm group relative">
                            <input type="checkbox" class="permission-checkbox rounded" data-permission="company.edit">
                            <span class="ml-2">âÔé–èÓïÒèCê≥</span>
                            <span class="invisible group-hover:visible absolute left-0 -top-8 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">
                                âÔé–èÓïÒÇï“èWÇ≈Ç´ÇÈå†å¿
                            </span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="flex justify-end space-x-3">
                <button onclick="closePermissionModal()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                    ÉLÉÉÉìÉZÉã
                </button>
                <button onclick="savePermissions()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    ï€ë∂
                </button>
            </div>
        </div>
    </div>
    <!-- mainApp end -->

    <!-- ÉAÉâÅ[Égí ímÉpÉlÉã -->
    <!-- ñ{ïîÇ©ÇÁÇÃí ímÉpÉlÉã -->
    <div id="notificationPanel" class="fixed top-20 right-4 w-96 max-h-[600px] bg-white rounded-lg shadow-2xl hidden z-50 overflow-hidden">
        <div class="bg-gradient-to-r from-yellow-500 to-orange-600 text-white p-4">
            <div class="flex items-center justify-between">
                <h3 class="font-bold text-lg flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                    </svg>
                    ñ{ïîÇ©ÇÁÇÃí ím
                </h3>
                <button onclick="toggleNotificationPanel()" class="hover:bg-white hover:bg-opacity-20 rounded-lg p-1">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>

        <div class="overflow-y-auto max-h-[500px]">
            <div id="notificationList" class="p-4">
                <p class="text-gray-500 text-center py-8">êVÇµÇ¢í ímÇÕÇ†ÇËÇ‹ÇπÇÒ</p>
            </div>
        </div>
    </div>

    <!-- ÉAÉâÅ[ÉgÅEÉäÉ}ÉCÉìÉ_Å[ÉpÉlÉã -->
    <div id="alertPanel" class="fixed top-20 right-4 w-96 max-h-[600px] bg-white rounded-lg shadow-2xl hidden z-50 overflow-hidden">
        <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4">
            <div class="flex items-center justify-between">
                <h3 class="font-bold text-lg flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                    </svg>
                    ÉAÉâÅ[ÉgÅEÉäÉ}ÉCÉìÉ_Å[
                </h3>
                <button onclick="toggleAlertPanel()" class="hover:bg-white hover:bg-opacity-20 rounded-lg p-1">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>

        <div class="overflow-y-auto max-h-[500px]">
            <!-- ç°ì˙ÇÃÉ^ÉXÉN -->
            <div class="border-b">
                <div class="p-4">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                        ç°ì˙ÇÃÉ^ÉXÉN
                    </h4>
                    <div id="todayTasks" class="space-y-2">
                        <!-- ìÆìIÇ…ê∂ê¨ -->
                    </div>
                </div>
            </div>

            <!-- ñæì˙ÇÃó\íË -->
            <div class="border-b">
                <div class="p-4">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                        ñæì˙ÇÃó\íË
                    </h4>
                    <div id="tomorrowTasks" class="space-y-2">
                        <!-- ìÆìIÇ…ê∂ê¨ -->
                    </div>
                </div>
            </div>

            <!-- é©ìÆÉAÉâÅ[Ég -->
            <div class="border-b">
                <div class="p-4">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
                        é©ìÆÉäÉ}ÉCÉìÉ_Å[
                    </h4>
                    <div id="autoAlerts" class="space-y-2">
                        <!-- ìÆìIÇ…ê∂ê¨ -->
                    </div>
                </div>
            </div>

            <!-- ÉAÉNÉVÉáÉìÉ{É^Éì -->
            <div class="p-4 bg-gray-50">
                <button onclick="showSection('settings'); setTimeout(() =&gt; { document.getElementById('notificationSection').scrollIntoView({ behavior: 'smooth' }); }, 100)" class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                    ÉAÉâÅ[Égê›íËÇäJÇ≠
                </button>
            </div>
        </div>
    </div>


    <!-- âÔé–èÓïÒÉvÉåÉrÉÖÅ[ÉÇÅ[É_Éã -->
    <div id="companyPreviewModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto hidden">
        <div class="relative min-h-screen py-12 px-4">
            <div class="relative bg-white rounded-2xl max-w-6xl mx-auto shadow-2xl">
                <!-- ÉÇÅ[É_ÉãÉwÉbÉ_Å[ -->
                <div class="sticky top-0 bg-white rounded-t-2xl border-b z-10">
                    <div class="flex justify-between items-center p-6">
                        <h2 class="text-2xl font-bold text-gray-900">âÔé–èÓïÒÉvÉåÉrÉÖÅ[</h2>
                        <div class="flex items-center gap-4">
                            <button onclick="togglePreviewSettings()" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </button>
                            <button onclick="closePreviewModal()" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- ï\é¶ê›íËÉpÉlÉã -->
                    <div id="previewSettings" class="hidden border-t bg-gray-50 p-4">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3">ï\é¶çÄñ⁄ÇÃê›íË</h3>

                        <!-- ÉÅÉCÉìÉZÉNÉVÉáÉìÅié¿ç€ÇÃï\é¶èáÅj -->
                        <div class="mb-3">
                            <h4 class="text-xs font-semibold text-gray-600 mb-2">ï\é¶ÉZÉNÉVÉáÉì</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('prText')">
                                    <span>âÔé–ÇÃì¡í•</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('examples')">
                                    <span>é{çHéñó·</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('contact')">
                                    <span>Ç®ñ‚Ç¢çáÇÌÇπ</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('areas')">
                                    <span>ëŒâûÉGÉäÉA</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('services')">
                                    <span>ëŒâûçHéñ</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('gallery')">
                                    <span>é ê^ÉMÉÉÉâÉäÅ[</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('insurance')">
                                    <span>â¡ì¸ï€åØ</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('features')">
                                    <span>ìñé–ÇÃã≠Ç›</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('qualifications')">
                                    <span>ï€óLéëäi</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('reviews')">
                                    <span>Ç®ãqólÇÃê∫</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" checked="" onchange="togglePreviewSection('basicInfo')">
                                    <span>âÔé–äTóv</span>
                                </label>
                            </div>
                        </div>

                        <!-- âÔé–äTóvÇÃè⁄ç◊çÄñ⁄ -->
                        <div>
                            <h4 class="text-xs font-semibold text-gray-600 mb-2">âÔé–äTóvÇÃï\é¶çÄñ⁄</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" id="showCompanyName" checked="" onchange="toggleBasicInfoField('companyName')">
                                    <span>âÔé–ñº</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" id="showRepresentative" checked="" onchange="toggleBasicInfoField('representative')">
                                    <span>ë„ï\é“</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" id="showAddress" checked="" onchange="toggleBasicInfoField('address')">
                                    <span>èZèäÅEínê}</span>
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="mr-2" id="showEstablished" checked="" onchange="toggleBasicInfoField('established')">
                                    <span>ê›óßîN</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÉvÉåÉrÉÖÅ[ÉRÉìÉeÉìÉc -->
                <div class="px-4 sm:px-6 py-6">
                    <!-- ÉÅÉCÉìÉrÉWÉÖÉAÉãÉZÉNÉVÉáÉì -->
                    <div id="mainVisualSection" class="relative mb-12 overflow-hidden" style="display: block;">
                        <div class="relative" style="height: 500px; overflow: hidden; cursor: move;" id="mainVisualContainer">
                            <img id="previewMainVisual" src="https://drive.google.com/thumbnail?id=1USsRV4DxxSk0NCbwB_JsOrepMQ6jF4a2&amp;sz=w1000" alt="" class="w-full h-full object-cover" style="object-position: center;" draggable="false">
                            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/30" style="pointer-events: none; background: linear-gradient(transparent, transparent, rgba(0, 0, 0, 0));"></div>

                            <!-- âÔé–ñºÇ∆èÓïÒÇÉIÅ[ÉoÅ[ÉåÉC -->
                            <div class="absolute bottom-0 left-0 right-0 p-4 sm:p-8 text-white">
                                <h1 id="previewCompanyNameOverlay" class="text-5xl sm:text-7xl font-bold mb-2 drop-shadow-lg text-center sm:text-left whitespace-nowrap overflow-hidden text-ellipsis text-gray-800" style="min-width: 0px; color: rgb(31, 41, 55);">äîéÆâÔé–Ç†ÇΩÇÈ</h1>
                                <p id="previewTaglineOverlay" class="text-lg sm:text-3xl mb-4 drop-shadow-md text-center sm:text-left text-gray-800" style="color: rgb(31, 41, 55);">ÉtÉ@ÉCÉìÉeÉbÉNÇÕÅAä÷êºàÍâ~Ç≈äOï«ÅEâÆç™ìhëïÅAñhêÖçHéñÅAÉäÉtÉHÅ[ÉÄÇéËä|ÇØÇÈìhëïÅEÉäÉtÉHÅ[ÉÄâÔé–Ç≈Ç∑</p>
                                <div class="flex flex-wrap gap-4 text-gray-800" style="color: rgb(31, 41, 55);">
                                    <div class="flex items-center bg-white/20 backdrop-blur px-4 py-2 rounded-full text-gray-800" style="color: rgb(31, 41, 55);">
                                        <svg class="w-5 h-5 mr-2 text-gray-800" fill="currentColor" viewBox="0 0 20 20" style="color: rgb(31, 41, 55);">
                                            <path d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm3 1h6v4H7V5zm6 6H7v2h6v-2z" class="text-gray-800" style="color: rgb(31, 41, 55);"></path>
                                        </svg>
                                        <span id="previewEstablishedOverlay" class="text-gray-800" style="color: rgb(31, 41, 55);">2010îN4åé</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- í≤êÆÉRÉìÉgÉçÅ[ÉãÉgÉOÉãÉ{É^Éì -->
                        <button onclick="toggleImageControls()" class="absolute top-4 right-4 bg-white rounded-lg shadow-lg p-2 hover:bg-gray-50 transition" title="âÊëúí≤êÆ">
                            <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
                            </svg>
                        </button>

                        <!-- í≤êÆÉRÉìÉgÉçÅ[ÉãÉpÉlÉã -->
                        <div id="visualControls" class="absolute top-14 right-4 bg-white rounded-lg shadow-lg p-3 hidden">
                            <div class="text-sm font-medium text-gray-700 mb-2">âÊëúí≤êÆ</div>
                            <div class="space-y-3">
                                <div>
                                    <label class="text-xs text-gray-600">à íuí≤êÆ</label>
                                    <div class="grid grid-cols-3 gap-1 w-32 mx-auto mt-2">
                                        <div></div>
                                        <button onclick="adjustImagePosition('up')" class="p-2 hover:bg-gray-100 rounded" title="è„Ç…à⁄ìÆ">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
                                        </button>
                                        <div></div>
                                        <button onclick="adjustImagePosition('left')" class="p-2 hover:bg-gray-100 rounded" title="ç∂Ç…à⁄ìÆ">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                                        </button>
                                        <button onclick="adjustImagePosition('center')" class="p-2 hover:bg-gray-100 rounded" title="íÜâõÇ…ÉäÉZÉbÉg">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3" stroke-width="2"></circle></svg>
                                        </button>
                                        <button onclick="adjustImagePosition('right')" class="p-2 hover:bg-gray-100 rounded" title="âEÇ…à⁄ìÆ">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                                        </button>
                                        <div></div>
                                        <button onclick="adjustImagePosition('down')" class="p-2 hover:bg-gray-100 rounded" title="â∫Ç…à⁄ìÆ">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                        </button>
                                        <div></div>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600">ÉYÅ[ÉÄ</label>
                                    <input type="range" id="imageZoom" min="100" max="150" value="100" class="w-full" onchange="adjustImageZoom(this.value)">
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600">ñæÇÈÇ≥</label>
                                    <input type="range" id="imageOpacity" min="20" max="100" value="70" class="w-full" onchange="adjustImageOpacity(this.value)">
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 block mb-1">ï∂éöêF</label>
                                    <div class="flex gap-2">
                                        <button id="textColorWhite" onclick="adjustTextColor('white')" class="flex-1 px-3 py-1.5 bg-gray-800 text-white text-xs rounded hover:bg-gray-700 transition border-2 border-gray-800">
                                            îí
                                        </button>
                                        <button id="textColorBlack" onclick="adjustTextColor('black')" class="flex-1 px-3 py-1.5 bg-white text-gray-800 text-xs rounded hover:bg-gray-100 transition border-2 border-blue-500">
                                            çï
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÉqÅ[ÉçÅ[ÉZÉNÉVÉáÉìÅiÉÅÉCÉìÉrÉWÉÖÉAÉãÇ™Ç»Ç¢èÍçáÅj -->
                    <div id="heroSection" class="relative bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-12 mb-12 text-white overflow-hidden" style="display: none;">
                        <div class="absolute inset-0 bg-black opacity-10"></div>
                        <div class="relative z-10">
                            <h1 id="previewCompanyNameHero" class="text-2xl sm:text-4xl font-bold mb-2 text-center sm:text-left">äîéÆâÔé–Ç†ÇΩÇÈ</h1>
                            <p id="previewTaglineHero" class="text-base sm:text-lg opacity-90 text-center sm:text-left">ÉtÉ@ÉCÉìÉeÉbÉNÇÕÅAä÷êºàÍâ~Ç≈äOï«ÅEâÆç™ìhëïÅAñhêÖçHéñÅAÉäÉtÉHÅ[ÉÄÇéËä|ÇØÇÈìhëïÅEÉäÉtÉHÅ[ÉÄâÔé–Ç≈Ç∑</p>
                            <div class="flex flex-wrap gap-4 mt-6">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm3 1h6v4H7V5zm6 6H7v2h6v-2z"></path>
                                    </svg>
                                    <span id="previewEstablishedHero">2010îN4åé</span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>é¿ê—1000åèà»è„</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="p-8">
                    <!-- âÔé–ÇÃì¡í•ÅEã≠Ç›ÅiëIÇŒÇÍÇÈóùóRÅj -->
                    <div id="preview-prText" class="mb-12">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-yellow-500 mr-3 rounded"></span>
                            âÔé–ÇÃì¡í•ÅEã≠Ç›
                        </h3>
                        <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-8 border border-yellow-200">
                            <p id="previewPrText" class="text-gray-700 leading-relaxed">ÉtÉ@ÉCÉìÉeÉbÉNÇÕÅAä÷êºàÍâ~Ç≈äOï«ÅEâÆç™ìhëïÅAñhêÖçHéñÅAÉäÉtÉHÅ[ÉÄÇéËä|ÇØÇÈìhëïÅEÉäÉtÉHÅ[ÉÄâÔé–Ç≈Ç∑ÅBë„ï\é“é©ÇÁÇ™íºê⁄å©êœÇ‡ÇËÇçsÇ§Åuñ{ï®ÇÃé©é–é{çHÅvÇìOíÍÇµÅAíÜä‘É}Å[ÉWÉìÇîrèúÇ∑ÇÈÇ±Ç∆Ç≈çÇïiéøÇ»Ç™ÇÁìKê≥âøäiÇé¿åªÅBì∆é©ÇÃ3DçHñ@Ç…ÇÊÇÈà”è†ÉTÉCÉfÉBÉìÉOÇÃçƒåªìhëïÇ‚ëΩêFìhÇËï™ÇØÉfÉUÉCÉìÇ»Ç«ÅAçÇÇ¢ãZèpóÕÇ≈Ç®ãqólÇÃÇ±ÇæÇÌÇËÇç◊ïîÇ‹Ç≈çƒåªÅBí∑ä˙ï€èÿÇ∆íöîJÇ»ÉAÉtÉ^Å[ÉÅÉìÉeÉiÉìÉXÇ≈é{çHå„Ç‡à¿êSÇ™ë±Ç´Ç‹Ç∑ÅB</p>
                        </div>
                    </div>

                    <!-- 1. é{çHéñó·ÉZÉNÉVÉáÉìÅiç≈èâÇ…é¿ê—Çå©ÇπÇÈÅj -->
                    <div id="preview-examples" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-pink-600 mr-3 rounded"></span>
                            é{çHéñó·
                        </h3>
                        <!-- ÉJÉãÅ[ÉZÉãÉRÉìÉeÉi -->
                        <div class="relative">
                            <!-- ç∂ñÓàÛ -->
                            <button onclick="scrollExamples('left')" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-50 transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>
                            <!-- é{çHéñó·ÉJÉãÅ[ÉZÉã -->
                            <div id="examplesCarousel" class="overflow-hidden">
                                <div id="previewExamplesList" class="flex gap-4 transition-transform duration-300" style="transform: translateX(-2224px);">
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz20îN åÀåöÇƒÇQF</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                150ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ÉVÉäÉRÉì3âÒìhÇË</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz50îN íz45îN</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                250ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ÉtÉbëf3âÒìhÇË</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz40îN âÆç™ï«ìhëï</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                130ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">åıêGî}ÉtÉbëf</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz200îN ÉXÉ}ÉzÇ≈Ç‡</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                1,000ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">è⁄ç◊èÓïÒ</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz20îN åÀåöÇƒÇQF</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                150ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ÉVÉäÉRÉì3âÒìhÇË</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz50îN íz45îN</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                250ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ÉtÉbëf3âÒìhÇË</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz40îN âÆç™ï«ìhëï</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                130ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">åıêGî}ÉtÉbëf</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz200îN ÉXÉ}ÉzÇ≈Ç‡</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                1,000ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">è⁄ç◊èÓïÒ</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1gC7TC4okEpgQoW3GTXV2IB7xEaoo2X8X&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1plGReQL9lUBT0RWY5YML-EnqJTig1vxh&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz20îN åÀåöÇƒÇQF</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                150ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ÉVÉäÉRÉì3âÒìhÇË</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=10BsSuaYzQP2KZyOg5c6R3TSja2FFkzha&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1ppjNTZmgMHaRXNPPPqFtMeGVf3JGNA82&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz50îN íz45îN</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                250ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">ÉtÉbëf3âÒìhÇË</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1VgWpZ4o_tQViSKXkbScS_zIQqKm98DhC&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=1rOLVBNsaQer6AKCpdiEGUgxmDbik7Gx7&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz40îN âÆç™ï«ìhëï</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                130ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">åıêGî}ÉtÉbëf</p>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000', 'é{çHëO')">
                                            <img src="https://drive.google.com/thumbnail?id=1D2Jy3hHMYvp8X58hv6Eh0EWaUAG5bSB5&amp;sz=w1000" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000', 'é{çHå„')">
                                            <img src="https://drive.google.com/thumbnail?id=14Le1y5t7g6lv1tZgSgN7Mch4bJEMz0dR&amp;sz=w1000" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">íz200îN ÉXÉ}ÉzÇ≈Ç‡</h4>
                                    
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                1,000ñúâ~
                                            </span>
                                        </div>
                                    
                                </div>
                                <p class="text-sm text-gray-600">è⁄ç◊èÓïÒ</p>
                            </div>
                        </div>
                    </div>
                            </div>
                            <!-- âEñÓàÛ -->
                            <button onclick="scrollExamples('right')" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-50 transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>
                        <!-- ÉCÉìÉWÉPÅ[É^Å[ -->
                        <div id="examplesIndicators" class="flex justify-center gap-1 mt-4">
                            <button onclick="goToExample(0)" class="w-2 h-2 rounded-full transition bg-blue-600"></button>
                        
                            <button onclick="goToExample(1)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToExample(2)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToExample(3)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                        </div>
                    </div>

                    <!-- 2. Ç®ãqólÇÃê∫ÅiêMóäê´ÇçÇÇﬂÇÈÅj -->
                    <div id="preview-reviews" class="mb-12 bg-gradient-to-br from-purple-50 via-blue-50 to-purple-50 rounded-2xl p-8" style="display: block;">
                        <div class="mb-4">
                            <h3 class="text-xl font-bold text-gray-900 mb-2 inline-flex items-center">
                                <span class="w-1 h-6 bg-gradient-to-b from-purple-600 to-blue-600 mr-3 rounded"></span>
                                Ç®ãqólÇÃê∫
                            </h3>
                        </div>

                        <!-- ÉJÉãÅ[ÉZÉãÉRÉìÉeÉi -->
                        <div class="relative max-w-2xl mx-auto">
                            <!-- ç∂ñÓàÛ -->
                            <button onclick="scrollReviews('left')" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-12 z-10 bg-white shadow-lg rounded-full p-3 hover:bg-gray-50 transition">
                                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>

                            <!-- ÉNÉ`ÉRÉ~ÉJÉãÅ[ÉZÉã -->
                            <div id="reviewCarousel" class="overflow-hidden px-4">
                                <div id="previewReviewsList" class="flex transition-transform duration-300" style="transform: translateX(0px);">
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">5.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">íöîJÇ»ëŒâûÇ≈à¿êSÇµÇƒÇ®îCÇπÇ≈Ç´Ç‹ÇµÇΩÅBå©êœÇ‡ÇËÇ‡ñæämÇ≈ÅAí«â¡óøã‡Ç»Ç≠ó\íËí ÇËÇ…äÆê¨ÇµÇ‹ÇµÇΩÅB</p>

                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">ìåãûìs Yól</div>
                                        <div class="text-xs text-gray-500 mt-1">2024îN1åé</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        íºê⁄Ç¢ÇΩÇæÇ¢ÇΩê∫
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 text-gray-300" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">4.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">êEêlÇ≥ÇÒÇÃãZèpÇ™çÇÇ≠ÅAédè„Ç™ÇËÇ…ñûë´ÇµÇƒÇ¢Ç‹Ç∑ÅBãﬂó◊Ç÷ÇÃîzó∂Ç‡ÇµÇ¡Ç©ÇËÇµÇƒÇ¢Ç‹ÇµÇΩÅB</p>

                            
                                <div class="mb-6 flex justify-center">
                                    <img src="data:image/svg+xml,%3Csvg xmlns=" http:="" www.w3.org="" 2000="" svg"="" width="150" height="100" %3e%3crect="" fill="%23ddd" %3e%3ctext="" x="50%25" y="50%25" font-family="Arial" font-size="14" text-anchor="middle" dy=".3em" %3e150x100%3c="" text%3e%3c="" svg%3e"="" class="h-32 rounded-lg object-cover shadow-md" alt="é{çHé ê^">
                                </div>
                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">ê_ìﬁêÏåß Tól</div>
                                        <div class="text-xs text-gray-500 mt-1">2024îN2åé</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        íºê⁄Ç¢ÇΩÇæÇ¢ÇΩê∫
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">5.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">15îNëOÇ…åöÇƒÇΩâ∆ÇÃäOï«Ç™êFÂÚÇπÇƒÇ´ÇΩÇÃÇ≈àÀóäÇµÇ‹ÇµÇΩÅBï°êîé–Ç©ÇÁå©êœÇ‡ÇËÇéÊÇËÇ‹ÇµÇΩÇ™ÅAê‡ñæÇ™àÍî‘íöîJÇ≈à¿êSä¥Ç™Ç†ÇËÇ‹ÇµÇΩÅB</p>

                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">êÁótåß Mól</div>
                                        <div class="text-xs text-gray-500 mt-1">2024îN2åé</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        íºê⁄Ç¢ÇΩÇæÇ¢ÇΩê∫
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">5.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">êEêlÇ≥ÇÒÇÃà•éAÇ©ÇÁénÇ‹ÇËÅAñàì˙ÇÃçÏã∆ïÒçêÅAãﬂó◊Ç÷ÇÃîzó∂Ç»Ç«ÅAÇ∑Ç◊ÇƒÇ…Ç®Ç¢Çƒñûë´Ç≈ÇµÇΩÅB</p>

                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">çÈã åß Kól</div>
                                        <div class="text-xs text-gray-500 mt-1">2024îN3åé</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        íºê⁄Ç¢ÇΩÇæÇ¢ÇΩê∫
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 fill-current" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                        <svg class="w-6 h-6 text-gray-300" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"></path>
                                        </svg>
                                    
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">4.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">å©êœÇ‡ÇËÇ™ñæämÇ≈ÅAí«â¡óøã‡Ç‡Ç»Ç≠ó\íËí ÇËÇ…èIÇÌÇËÇ‹ÇµÇΩÅBédè„Ç™ÇËÇ‡ä˙ë“à»è„Ç≈Ç∑ÅB</p>

                            

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">ìåãûìs Sól</div>
                                        <div class="text-xs text-gray-500 mt-1">2024îN3åé</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        íºê⁄Ç¢ÇΩÇæÇ¢ÇΩê∫
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                            </div>

                            <!-- âEñÓàÛ -->
                            <button onclick="scrollReviews('right')" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-12 z-10 bg-white shadow-lg rounded-full p-3 hover:bg-gray-50 transition">
                                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>

                        <!-- ÉCÉìÉWÉPÅ[É^Å[ -->
                        <div id="reviewIndicators" class="flex justify-center gap-2 mt-6">
                            <button onclick="goToReview(0)" class="w-3 h-3 rounded-full transition bg-blue-600 scale-125"></button>
                        
                            <button onclick="goToReview(1)" class="w-3 h-3 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToReview(2)" class="w-3 h-3 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToReview(3)" class="w-3 h-3 rounded-full transition bg-gray-300"></button>
                        
                            <button onclick="goToReview(4)" class="w-3 h-3 rounded-full transition bg-gray-300"></button>
                        </div>
                    </div>

                    <!-- 10. Ç®ñ‚Ç¢çáÇÌÇπÉZÉNÉVÉáÉìÅiç≈èICTAÅj -->
                    <div id="preview-contact" class="mb-12">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-purple-600 mr-3 rounded"></span>
                            Ç®ñ‚Ç¢çáÇÌÇπ
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-600">Ç®ìdòbÇ≈ÇÃÇ®ñ‚Ç¢çáÇÌÇπ</p>
                                        <p class="text-lg font-semibold text-gray-900">0120-XXX-XXX</p>
                                        <p class="text-xs text-gray-500">éÛïtéûä‘: 9:00-18:00ÅiîNíÜñ≥ãxÅj</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <div class="overflow-hidden min-w-0">
                                        <p class="text-sm text-gray-600">ÉÅÅ[ÉãÇ≈ÇÃÇ®ñ‚Ç¢çáÇÌÇπ</p>
                                        <p class="text-sm sm:text-base font-semibold text-gray-900 break-all">info@gaihekikuraberu.com</p>
                                        <p class="text-xs text-gray-500">24éûä‘éÛïtíÜ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 9Ç¬ÇÃì¡ìTè⁄ç◊ÉZÉNÉVÉáÉì -->
                    <div class="mb-12 bg-gradient-to-br from-orange-50 via-orange-100 to-red-50 rounded-2xl p-10">
                        <div class="text-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">?? ç°ÇæÇØÅI9Ç¬ÇÃñ≥óøì¡ìT</h3>
                            <p class="text-sm text-gray-600">ä˙ä‘å¿íËÉLÉÉÉìÉyÅ[Éìé¿é{íÜÅI</p>
                        </div>

                        <div class="max-w-4xl mx-auto mb-6 px-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- ì¡ìT1: ñ≥óøì_åü -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ñ≥óøì_åü</h4>
                                            <p class="text-xs text-gray-600">ÉvÉçÇÃñ⁄Ç≈äOï«ÅEâÆç™ÇìOíÍÉ`ÉFÉbÉNÅIÇ®â∆ÇÃèÛë‘Çè⁄ç◊Ç…ïÒçê</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT2: ÉGÉäÉAç≈í·âøäiï€èÿ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ÉGÉäÉAç≈í·âøäiï€èÿ</h4>
                                            <p class="text-xs text-gray-600">ínàÊç≈à¿ílÇÇ®ñÒë©ÅIëºé–ÇÊÇËçÇÇØÇÍÇŒílà¯Ç´ëŒâû</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT3: Ç®ílà¯Ç´åè¬ë„çs -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">Ç®ílà¯Ç´åè¬ë„çs</h4>
                                            <p class="text-xs text-gray-600">ëºé–å©êœÇ‡ÇËÇÇ®éùÇøÇ»ÇÁÅAë„ÇÌÇËÇ…åè¬ÇµÇƒç≈à¿ílÇé¿åª</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT4: èïê¨ã‡ê\êøÉTÉ|Å[Ég -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">èïê¨ã‡ê\êøÉTÉ|Å[Ég</h4>
                                            <p class="text-xs text-gray-600">ç≈ëÂ10?70ñúâ~ÅIäeéÌèïê¨ã‡ÇÃê\êøéËë±Ç´ÇäÆëSÉTÉ|Å[Ég</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT5: âŒç–ï€åØê\êøÉTÉ|Å[Ég -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">???</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">âŒç–ï€åØê\êøÉTÉ|Å[Ég</h4>
                                            <p class="text-xs text-gray-600">ë‰ïóÅEê·äQìôÇÃëπäQÇ…âŒç–ï€åØìKópâ¬î\ÅIñ≥óøÇ≈í≤ç∏</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT6: Ç®ífÇËë„çsÉTÅ[ÉrÉX -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">Ç®ífÇËë„çsÉTÅ[ÉrÉX</h4>
                                            <p class="text-xs text-gray-600">ê¨ñÒéûÇÃëºé–Ç÷ÇÃÇ®ífÇËÇ‡ë„çsâ¬î\ÅIñ ì|Ç»Ç‚ÇËéÊÇËïsóv</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT7: ñ≥óøÇ®ìdòbÉTÉ|Å[Ég -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ñ≥óøÇ®ìdòbÉTÉ|Å[Ég</h4>
                                            <p class="text-xs text-gray-600">çHéñäÆóπå„Ç‡à¿êSÅI365ì˙ìdòbÉTÉ|Å[ÉgÇ≈Ç®îYÇ›âåà</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT8: ñKñ‚ã∆é“É}ÉjÉÖÉAÉãêiíÊ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ñKñ‚ã∆é“É}ÉjÉÖÉAÉãêiíÊ</h4>
                                            <p class="text-xs text-gray-600">à´ìøã∆é“ÇÃéËå˚Ç‚ëŒèàñ@ÇäÆëSâê‡ÅIà¿êSÉKÉCÉh</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT9: Ç®óFíBè–âÓÉLÉÉÉìÉyÅ[Éì -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">Ç®óFíBè–âÓÉLÉÉÉìÉyÅ[Éì</h4>
                                            <p class="text-xs text-gray-600">è–âÓÇ≈ëoï˚Ç…ì¡ìTÅIç≈ëÂ30,000â~ï™ÇÃÉMÉtÉgÉJÅ[Éh</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-6">
                            <button class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-10 py-4 rounded-lg hover:shadow-xl transition font-bold text-lg transform hover:scale-105">
                                ç°Ç∑ÇÆñ≥óøå©êœÇ‡ÇËÇàÀóäÇ∑ÇÈ
                            </button>
                            <p class="text-xs text-gray-500 mt-2">Å¶24éûä‘à»ì‡Ç…Ç≤òAóçÇ¢ÇΩÇµÇ‹Ç∑</p>
                        </div>
                    </div>



                    <!-- 8. ëŒâûÉGÉäÉAÉZÉNÉVÉáÉì -->
                    <div id="preview-areas" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-orange-600 mr-3 rounded"></span>
                            ëŒâûÉGÉäÉA
                        </h3>
                        <div class="bg-white rounded-xl p-6 border border-gray-200">
                            <div id="previewCitiesContainer"></div>
                        </div>
                    </div>

                    <!-- 4. ëŒâûâ¬î\Ç»çHéñÅiÉTÅ[ÉrÉXì‡óeÅj -->
                    <div id="preview-services" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-green-600 mr-3 rounded"></span>
                            ëŒâûâ¬î\Ç»çHéñ
                        </h3>
                        <div id="previewServicesList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">äOï«ìhëï</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium text-gray-800">äOï«ÉJÉoÅ[çHñ@</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">äOï«í£ë÷Ç¶</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">âÆç™ìhëï</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">âÆè„ñhêÖ</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium text-gray-800">âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">âÆç™ÉJÉoÅ[çHñ@</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">äOï«ï‚èC</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium text-gray-800">âÆç™ï‚èC</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">??</span>
                            <span class="text-sm font-medium text-gray-800">ÉxÉâÉìÉ_ñhêÖ</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">?</span>
                            <span class="text-sm font-medium text-gray-800">äOï«âJòRÇËèCëU</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">?</span>
                            <span class="text-sm font-medium text-gray-800">ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅj</span>
                        </div><div class="bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition">
                            <span class="text-2xl mr-2">?</span>
                            <span class="text-sm font-medium text-gray-800">ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅj</span>
                        </div></div>
                    </div>

                    <!-- CTAÉ{É^ÉìÅi1âÒñ⁄ÅjçÌèú -->
                    <div class="hidden">
                        <div class="text-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">?? ç°ÇæÇØÅI9Ç¬ÇÃñ≥óøì¡ìT</h3>
                            <p class="text-sm text-gray-600">ä˙ä‘å¿íËÉLÉÉÉìÉyÅ[Éìé¿é{íÜÅI</p>
                        </div>

                        <div class="max-w-4xl mx-auto mb-6 px-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- ì¡ìT1: ñ≥óøì_åü -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ñ≥óøì_åü</h4>
                                            <p class="text-xs text-gray-600">ÉvÉçÇÃñ⁄Ç≈äOï«ÅEâÆç™ÇìOíÍÉ`ÉFÉbÉNÅIÇ®â∆ÇÃèÛë‘Çè⁄ç◊Ç…ïÒçê</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT2: ÉGÉäÉAç≈í·âøäiï€èÿ -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ÉGÉäÉAç≈í·âøäiï€èÿ</h4>
                                            <p class="text-xs text-gray-600">ínàÊç≈à¿ílÇÇ®ñÒë©ÅIëºé–ÇÊÇËçÇÇØÇÍÇŒílà¯Ç´ëŒâû</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT3: Ç®ílà¯Ç´åè¬ë„çs -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">Ç®ílà¯Ç´åè¬ë„çs</h4>
                                            <p class="text-xs text-gray-600">ëºé–å©êœÇ‡ÇËÇÇ®éùÇøÇ»ÇÁÅAë„ÇÌÇËÇ…åè¬ÇµÇƒç≈à¿ílÇé¿åª</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT4: èïê¨ã‡ê\êøÉTÉ|Å[Ég -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">èïê¨ã‡ê\êøÉTÉ|Å[Ég</h4>
                                            <p class="text-xs text-gray-600">ç≈ëÂ10?70ñúâ~ÅIäeéÌèïê¨ã‡ÇÃê\êøéËë±Ç´ÇäÆëSÉTÉ|Å[Ég</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT5: âŒç–ï€åØê\êøÉTÉ|Å[Ég -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">???</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">âŒç–ï€åØê\êøÉTÉ|Å[Ég</h4>
                                            <p class="text-xs text-gray-600">ë‰ïóÅEê·äQìôÇÃëπäQÇ…âŒç–ï€åØìKópâ¬î\ÅIñ≥óøÇ≈í≤ç∏</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT6: Ç®ífÇËë„çsÉTÅ[ÉrÉX -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">Ç®ífÇËë„çsÉTÅ[ÉrÉX</h4>
                                            <p class="text-xs text-gray-600">ê¨ñÒéûÇÃëºé–Ç÷ÇÃÇ®ífÇËÇ‡ë„çsâ¬î\ÅIñ ì|Ç»Ç‚ÇËéÊÇËïsóv</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT8: ñKñ‚ã∆é“É}ÉjÉÖÉAÉã -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ñKñ‚ã∆é“É}ÉjÉÖÉAÉãêiíÊ</h4>
                                            <p class="text-xs text-gray-600">à´ìøã∆é“ÇÃéËå˚Ç‚ëŒèàñ@ÇäÆëSâê‡ÅIà¿êSÉKÉCÉh</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT7: ñ≥óøÇ®ìdòbÉTÉ|Å[Ég -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">ñ≥óøÇ®ìdòbÉTÉ|Å[Ég</h4>
                                            <p class="text-xs text-gray-600">çHéñäÆóπå„Ç‡à¿êSÅI365ì˙ìdòbÉTÉ|Å[ÉgÇ≈Ç®îYÇ›âåà</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì¡ìT8: Ç®óFíBè–âÓÉLÉÉÉìÉyÅ[Éì -->
                                <div class="bg-white rounded-lg p-4 shadow-md border-l-4 border-orange-500 hover:shadow-lg transition">
                                    <div class="flex items-start">
                                        <span class="text-2xl mr-3">??</span>
                                        <div>
                                            <h4 class="font-bold text-orange-600 mb-1">Ç®óFíBè–âÓÉLÉÉÉìÉyÅ[Éì</h4>
                                            <p class="text-xs text-gray-600">è–âÓÇ≈ëoï˚Ç…ì¡ìTÅIç≈ëÂ30,000â~ï™ÇÃÉMÉtÉgÉJÅ[Éh</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <button class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-10 py-4 rounded-lg hover:shadow-xl transition font-bold text-lg transform hover:scale-105">
                                ç°Ç∑ÇÆñ≥óøå©êœÇ‡ÇËÇàÀóäÇ∑ÇÈ
                            </button>
                            <p class="text-xs text-gray-500 mt-2">Å¶24éûä‘à»ì‡Ç…Ç≤òAóçÇ¢ÇΩÇµÇ‹Ç∑</p>
                        </div>
                    </div>

                    <!-- 5. é ê^ÉMÉÉÉâÉäÅ[ÉZÉNÉVÉáÉìÅiédéñÇÃóléqÅj -->
                    <div id="preview-gallery" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-purple-600 mr-3 rounded"></span>
                            ï€óLéëäi
                        </h3>
                        <div id="qualificationsList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">àÍãâìhëïãZî\ém</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ìÒãâìhëïãZî\ém</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ë´èÍëgóßçÏã∆éÂîCé“</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">êŒñ»çÏã∆éÂîCé“</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">äOï«êfífém</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">äOï«óÚâªêfífém</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">äOï«ÉAÉhÉoÉCÉUÅ[</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">âÆç™êfífém</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">âJòRÇËêfífém</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ëùâ¸ízëäíkàı</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ëÊìÒéÌìdãCçHéñém</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">óLã@ónç‹çÏã∆éÂîCé“</span>
                    </div><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">àÍãâñhêÖé{çHãZî\ém</span>
                    </div></div>
                    </div>

                    <div id="preview-insurance" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-indigo-600 mr-3 rounded"></span>
                            â¡ì¸ï€åØ
                        </h3>
                        <div id="insuranceList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">çHéñï€åØ</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">îÖèûê”îCï€åØ</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ÉäÉtÉHÅ[ÉÄ‡Í·rï€åØ</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">åöê›çHéñï€åØ</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">êøïâã∆é“îÖèûê”îCï€åØ</span>
                    </div><div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center">
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">ê∂éYï®îÖèûê”îCï€åØ</span>
                    </div></div>
                    </div>

                    <!-- CTAÉ{É^ÉìÅi2âÒñ⁄Åj -->
                    <div class="text-center py-8 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg">
                        <h3 class="text-lg font-bold text-gray-900 mb-3">à¿êSÇÃï€èÿëÃêßÇ≈Ç®ãqólÇÉTÉ|Å[Ég</h3>
                        <button class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg hover:shadow-lg transition font-semibold">
                            Ç‹Ç∏ÇÕñ≥óøëäíkÇ©ÇÁ
                        </button>
                    </div>

                    <!-- 7. ìñé–ÇÃã≠Ç›Åiì¡ï Ç»ÉÅÉäÉbÉgÅj -->
                    <div id="preview-features" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-orange-600 mr-3 rounded"></span>
                            ìñé–ÇÃã≠Ç›
                        </h3>
                        <div id="previewFeaturesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">é’îMÅEífîMìhóøíÒàƒâ¬î\</h4>
                    </div><div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">ÉGÉNÉXÉeÉäÉAÅiíÎÅEíìé‘èÍÅEäOç\Åj</h4>
                    </div><div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">ëæózåıÉpÉlÉãíEíÖÅiìPãéä‹ÇﬁÅj</h4>
                    </div><div class="bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">íÒågêÊÉçÅ[ÉìóLÇË</h4>
                    </div><div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">ÉNÉåÉWÉbÉgÉJÅ[Éhï•Ç¢â¬</h4>
                    </div><div class="bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">âŒç–ï€åØê\êøÉTÉ|Å[Ég</h4>
                    </div><div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">èïê¨ã‡ê\êøÉTÉ|Å[Ég</h4>
                    </div><div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">??</div>
                        <h4 class="font-semibold text-gray-900 mb-1">åöízãñâ¬èÿ</h4>
                    </div><div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4">
                        <div class="text-3xl mb-2">?</div>
                        <h4 class="font-semibold text-gray-900 mb-1">åıêGî}ìhóøíÒàƒâ¬</h4>
                    </div></div>
                    </div>

                    <!-- 6. ï€óLéëäiÅEâ¡ì¸ï€åØÅià¿êSä¥Åj -->
                    <div id="preview-qualifications" class="mb-12" style="display: block;">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-indigo-600 mr-3 rounded"></span>
                            é ê^ÉMÉÉÉâÉäÅ[
                        </h3>

                        <!-- ÉJÉãÅ[ÉZÉãÉRÉìÉeÉi -->
                        <div class="relative">
                            <!-- ç∂ñÓàÛ -->
                            <button onclick="scrollGallery('left')" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-50 transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>

                            <!-- ÉMÉÉÉâÉäÅ[ÉJÉãÅ[ÉZÉã -->
                            <div id="galleryCarousel" class="overflow-hidden">
                                <div id="previewGalleryList" class="flex gap-4 transition-transform duration-300" style="transform: translateX(-6688px);">
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú1')">
                        <img src="https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú1" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú2')">
                        <img src="https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú2" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú3')">
                        <img src="https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú3" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú4')">
                        <img src="https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú4" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú5')">
                        <img src="https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú5" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú6')">
                        <img src="https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú6" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú7')">
                        <img src="https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú7" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú8')">
                        <img src="https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú8" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú9')">
                        <img src="https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú9" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú10')">
                        <img src="https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú10" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú11')">
                        <img src="https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú11" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú1')">
                        <img src="https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú1" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú2')">
                        <img src="https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú2" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú3')">
                        <img src="https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú3" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú4')">
                        <img src="https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú4" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú5')">
                        <img src="https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú5" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú6')">
                        <img src="https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú6" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú7')">
                        <img src="https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú7" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú8')">
                        <img src="https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú8" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú9')">
                        <img src="https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú9" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú10')">
                        <img src="https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú10" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú11')">
                        <img src="https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú11" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú1')">
                        <img src="https://drive.google.com/thumbnail?id=1wPa5qlnbVjyiZ9-rKZWfiaYxVbsYueFd&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú1" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú2')">
                        <img src="https://drive.google.com/thumbnail?id=1eh6VsUdDgcOGp1uH3cgWk8beBTrvvy_T&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú2" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú3')">
                        <img src="https://drive.google.com/thumbnail?id=1MhcTeKWmuHTHvo5xVitNp57iL1iCQLxd&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú3" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú4')">
                        <img src="https://drive.google.com/thumbnail?id=1WTGr6YnN9t8BA9gbj6SwB2YhvkN7tU4-&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú4" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú5')">
                        <img src="https://drive.google.com/thumbnail?id=1BOPtkoklUZF5-vA805UInmq2eiCEbXdu&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú5" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú6')">
                        <img src="https://drive.google.com/thumbnail?id=1pCLD4Uz2ddsar2KN024S0ixk3thSxAOA&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú6" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú7')">
                        <img src="https://drive.google.com/thumbnail?id=1jcNwDTcpXHkVo5eahtR_GWacrgFgu04T&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú7" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú8')">
                        <img src="https://drive.google.com/thumbnail?id=1T01Q88Me9j_FriI8stvG0vk5T5WjnUgb&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú8" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú9')">
                        <img src="https://drive.google.com/thumbnail?id=1VFhHXI6Nnkw7LRAKfFXVfdReYUn-rZfI&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú9" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú10')">
                        <img src="https://drive.google.com/thumbnail?id=1AVw6Br9A9HytjmjTZUOllLUCj3Ec0-kB&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú10" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000', 'ÉMÉÉÉâÉäÅ[âÊëú11')">
                        <img src="https://drive.google.com/thumbnail?id=12h4hwVM95fX0Tt8S0YoPOwrjiKWpTZTe&amp;sz=w1000" alt="ÉMÉÉÉâÉäÅ[âÊëú11" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                </div>
                            </div>

                            <!-- âEñÓàÛ -->
                            <button onclick="scrollGallery('right')" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-50 transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>

                        <!-- ÉCÉìÉWÉPÅ[É^Å[ -->
                        <div id="galleryIndicators" class="flex justify-center gap-1 mt-4">
                        <button onclick="goToGalleryImage(0)" class="w-2 h-2 rounded-full transition bg-blue-600"></button>
                    
                        <button onclick="goToGalleryImage(1)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(2)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(3)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(4)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(5)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(6)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(7)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(8)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(9)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    
                        <button onclick="goToGalleryImage(10)" class="w-2 h-2 rounded-full transition bg-gray-300"></button>
                    </div>
                    </div>

                    <!-- 9. âÔé–äTóvÅiêMóäê´ÇÃï‚ã≠Åj -->
                    <div id="preview-basicInfo" class="mb-12">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="w-1 h-6 bg-blue-600 mr-3 rounded"></span>
                            âÔé–äTóv
                        </h3>
                        <div class="bg-gray-50 rounded-xl p-8">
                            <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div id="basicInfo-companyName">
                                    <dt class="text-sm font-medium text-gray-600">âÔé–ñº</dt>
                                    <dd id="previewCompanyNameFull" class="mt-1 text-base sm:text-lg text-gray-900 break-words">äîéÆâÔé–Ç†ÇΩÇÈ</dd>
                                </div>
                                <div id="basicInfo-representative">
                                    <dt class="text-sm font-medium text-gray-600">ë„ï\é“</dt>
                                    <dd id="previewRepresentative" class="mt-1 text-lg text-gray-900">è¨êÚèÉàÍ</dd>
                                </div>
                                <div id="basicInfo-address">
                                    <dt class="text-sm font-medium text-gray-600">èäç›ín</dt>
                                    <dd id="previewAddress" class="mt-1 text-lg text-gray-900">Åß2250024 ê_ìﬁêÏåßâ°ïlésê¬ótãÊésÉPîˆí¨537-3</dd>
                                </div>
                                <div id="basicInfo-established">
                                    <dt class="text-sm font-medium text-gray-600">ê›óß</dt>
                                    <dd id="previewEstablishedDate" class="mt-1 text-lg text-gray-900">2010îN4åé</dd>
                                </div>
                            </dl>
                        </div>
                        <!-- GoogleÉ}ÉbÉvñÑÇﬂçûÇ› -->
                        <div class="mt-4" id="basicInfo-map">
                            <h4 class="text-sm font-medium text-gray-600 mb-2">ÉAÉNÉZÉX</h4>
                            <div id="googleMapContainer" class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                    <iframe width="100%" height="100%" frameborder="0" style="border:0" src="https://www.google.com/maps?q=%E3%80%922250024%20%E7%A5%9E%E5%A5%88%E5%B7%9D%E7%9C%8C%E6%A8%AA%E6%B5%9C%E5%B8%82%E9%9D%92%E8%91%89%E5%8C%BA%E5%B8%82%E3%82%B1%E5%B0%BE%E7%94%BA537-3&amp;output=embed" allowfullscreen="">
                    </iframe>
                </div>
                        </div>
                        <!-- éxìXÉ}ÉbÉvÉRÉìÉeÉiÅ[ -->
                        <div id="branchMapsContainer" class="mt-6" style="display: block;">
                        <h4 class="text-sm font-medium text-gray-600 mb-3 mt-4">éxìXèÓïÒ</h4>
                        <div class="space-y-4">
                    </div><div class="border rounded-lg p-4 bg-gray-50">
                            <h5 class="text-lg font-semibold text-gray-800 mb-2">ñºå√âÆéxìX</h5>
                            <p class="text-sm text-gray-600 mb-3">
                                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                ñºå√âÆ1-1
                            </p>
                            <div class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                                <iframe width="100%" height="100%" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&amp;q=%E5%90%8D%E5%8F%A4%E5%B1%8B1-1&amp;zoom=16&amp;language=ja" allowfullscreen="">
                                </iframe>
                            </div>
                        </div><div class="border rounded-lg p-4 bg-gray-50">
                            <h5 class="text-lg font-semibold text-gray-800 mb-2">ñkäCìπ</h5>
                            <p class="text-sm text-gray-600 mb-3">
                                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                ñ‘ëñ1-1
                            </p>
                            <div class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                                <iframe width="100%" height="100%" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&amp;q=%E7%B6%B2%E8%B5%B01-1&amp;zoom=16&amp;language=ja" allowfullscreen="">
                                </iframe>
                            </div>
                        </div><div></div></div>
                    </div>

                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-600">Ç®ìdòbÇ≈ÇÃÇ®ñ‚Ç¢çáÇÌÇπ</p>
                                        <p class="text-lg font-semibold text-gray-900">0120-XXX-XXX</p>
                                        <p class="text-xs text-gray-500">éÛïtéûä‘: 9:00-18:00ÅiîNíÜñ≥ãxÅj</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white border rounded-xl p-4 hover:shadow-lg transition">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    <div class="overflow-hidden min-w-0">
                                        <p class="text-sm text-gray-600">ÉÅÅ[ÉãÇ≈ÇÃÇ®ñ‚Ç¢çáÇÌÇπ</p>
                                        <p class="text-sm sm:text-base font-semibold text-gray-900 break-all">info@gaihekikuraberu.com</p>
                                        <p class="text-xs text-gray-500">24éûä‘éÛïtíÜ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ç≈â∫ïîCTA -->
                    <div class="text-center py-8 border-t">
                        <h3 class="text-2xl font-bold text-gray-900 mb-4">ç°Ç∑ÇÆñ≥óøå©êœÇ‡ÇËÇàÀóä</h3>
                        <p class="text-gray-600 mb-6">Ç®ãCåyÇ…Ç®ñ‚Ç¢çáÇÌÇπÇ≠ÇæÇ≥Ç¢</p>
                        <button class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 py-4 rounded-lg hover:shadow-xl transition text-lg font-semibold">
                            ñ≥óøå©êœÇ‡ÇËÇàÀóäÇ∑ÇÈ
                        </button>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    

    <script>
        // ÉÅÉjÉÖÅ[ÉgÉOÉãã@î\
        function toggleMenu() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                sidebar.classList.toggle('-translate-x-full');
            }
        }

        // ÉÜÅ[ÉUÅ[èÛë‘ä«óù
        let currentUser = 'ä«óùé“';

        // éxìXèÓïÒä«óù
        window.branches = [];
        let branchIdCounter = 0;

        // éxìXí«â¡
        function addBranch() {
            const branchId = ++branchIdCounter;
            const branch = {
                id: branchId,
                name: '',
                address: ''
            };
            window.branches.push(branch);

            const branchList = document.getElementById('branchList');
            const branchDiv = document.createElement('div');
            branchDiv.id = `branch-${branchId}`;
            branchDiv.className = 'border rounded-lg p-4 mb-3 bg-gray-50';
            branchDiv.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h4 class="font-medium text-gray-700">éxìX ${branchId}</h4>
                    <button onclick="removeBranch(${branchId})" class="text-red-600 hover:text-red-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </button>
                </div>
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">éxìXñº</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: â°ïléxìX"
                               onchange="updateBranch(${branchId}, 'name', this.value)">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">èZèä</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: ê_ìﬁêÏåßâ°ïlés..."
                               onchange="updateBranch(${branchId}, 'address', this.value)">
                    </div>
                </div>
            `;
            branchList.appendChild(branchDiv);
        }

        // éxìXèÓïÒçXêV
        function updateBranch(branchId, field, value) {
            const branch = window.branches.find(b => b.id === branchId);
            if (branch) {
                branch[field] = value;
                updateBranchMaps();
            }
        }

        // éxìXçÌèú
        function removeBranch(branchId) {
            window.branches = window.branches.filter(b => b.id !== branchId);
            const branchDiv = document.getElementById(`branch-${branchId}`);
            if (branchDiv) {
                branchDiv.remove();
            }
            updateBranchMaps();
        }

        // éxìXÉ}ÉbÉvçXêV
        function updateBranchMaps() {
            // ÉvÉåÉrÉÖÅ[ÇÃéxìXÉ}ÉbÉvÇçXêV
            const branchMapsContainer = document.getElementById('branchMapsContainer');
            if (branchMapsContainer) {
                const validBranches = window.branches.filter(b => b.name && b.address);
                if (validBranches.length > 0) {
                    branchMapsContainer.innerHTML = `
                        <h4 class="text-sm font-medium text-gray-600 mb-3 mt-4">éxìXèÓïÒ</h4>
                        <div class="space-y-4">
                    `;
                    validBranches.forEach((branch, index) => {
                        const mapDiv = document.createElement('div');
                        mapDiv.className = 'border rounded-lg p-4 bg-gray-50';
                        mapDiv.innerHTML = `
                            <h5 class="text-lg font-semibold text-gray-800 mb-2">${branch.name}</h5>
                            <p class="text-sm text-gray-600 mb-3">
                                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                ${branch.address}
                            </p>
                            <div class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                                <iframe
                                    width="100%"
                                    height="100%"
                                    frameborder="0"
                                    style="border:0"
                                    src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${encodeURIComponent(branch.address)}&zoom=16&language=ja"
                                    allowfullscreen>
                                </iframe>
                            </div>
                        `;
                        branchMapsContainer.appendChild(mapDiv);
                    });
                    const closeDiv = document.createElement('div');
                    closeDiv.innerHTML = '</div>';
                    branchMapsContainer.appendChild(closeDiv);
                    branchMapsContainer.style.display = 'block';
                } else {
                    branchMapsContainer.style.display = 'none';
                }
            }
        }
        let userRole = 'admin';

        // ÉçÉOÉCÉìèàóù
        // GAS APIÇÃURLÅienv-loader.jsÇ©ÇÁéÊìæÅj
        const GAS_URL = ENV.GAS_URL;

        // ÉXÉeÅ[É^ÉXÇÉXÉvÉåÉbÉhÉVÅ[ÉgÇ©ÇÁì«Ç›çûÇﬁä÷êî
        async function loadMerchantStatus(merchantId) {
            try {
                const result = await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_status_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const script = document.createElement('script');

                    window[callbackName] = (data) => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        resolve(data);
                    };

                    script.src = `${GAS_URL}?action=getMerchantStatus&merchantId=${encodeURIComponent(merchantId)}&callback=${callbackName}`;
                    script.onerror = (error) => {
                        console.error('[loadMerchantStatus] Error:', error);
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        reject(new Error('JSONP request failed'));
                    };
                    document.body.appendChild(script);
                });

                if (result.success) {
                    const statusSpan = document.getElementById('merchantStatus');
                    if (statusSpan) {
                        // ÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃÉXÉeÅ[É^ÉXÇÇªÇÃÇ‹Ç‹ï\é¶ÅiÉAÉNÉeÉBÉuÅAàÍéûí‚é~ÅAãxé~Åj
                        let displayStatus = result.status || 'ãxé~';

                        // ê≥ãKâªÅiîOÇÃÇΩÇﬂÅj
                        if (displayStatus === 'â“ì≠íÜ' || displayStatus === 'active') {
                            displayStatus = 'ÉAÉNÉeÉBÉu';
                        } else if (displayStatus === 'àÍéûí‚é~íÜ' || displayStatus === 'paused') {
                            displayStatus = 'àÍéûí‚é~';
                        }

                        statusSpan.textContent = displayStatus;

                        // ÉXÉeÅ[É^ÉXÇ…âûÇ∂ÇΩêFÇê›íË
                        statusSpan.classList.remove('bg-green-100', 'text-green-800', 'border-green-300');
                        statusSpan.classList.remove('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
                        statusSpan.classList.remove('bg-gray-100', 'text-gray-800', 'border-gray-300');
                        statusSpan.classList.remove('bg-red-100', 'text-red-800', 'border-red-300');

                        if (displayStatus === 'ÉAÉNÉeÉBÉu') {
                            statusSpan.classList.add('bg-green-100', 'text-green-800', 'border-green-300');
                        } else if (displayStatus === 'àÍéûí‚é~') {
                            statusSpan.classList.add('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
                        } else if (displayStatus === 'ãxé~') {
                            statusSpan.classList.add('bg-red-100', 'text-red-800', 'border-red-300');
                        } else {
                            statusSpan.classList.add('bg-gray-100', 'text-gray-800', 'border-gray-300');
                        }
                    }
                }
            } catch (error) {
                console.error('[loadMerchantStatus] Error:', error);
            }
        }

        // ÉwÉbÉ_Å[ÇÃÉXÉeÅ[É^ÉXï\é¶ÇçXêVÇ∑ÇÈä÷êî
        function updateHeaderStatus(status) {
            const statusSpan = document.getElementById('merchantStatus');
            if (!statusSpan) return;

            // ê≥ãKâª
            let displayStatus = status;
            if (displayStatus === 'â“ì≠íÜ' || displayStatus === 'active') {
                displayStatus = 'ÉAÉNÉeÉBÉu';
            } else if (displayStatus === 'àÍéûí‚é~íÜ' || displayStatus === 'paused') {
                displayStatus = 'àÍéûí‚é~';
            }

            statusSpan.textContent = displayStatus;

            // ÉXÉeÅ[É^ÉXÇ…âûÇ∂ÇΩêFÇê›íË
            statusSpan.classList.remove('bg-green-100', 'text-green-800', 'border-green-300');
            statusSpan.classList.remove('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
            statusSpan.classList.remove('bg-gray-100', 'text-gray-800', 'border-gray-300');
            statusSpan.classList.remove('bg-red-100', 'text-red-800', 'border-red-300');

            if (displayStatus === 'ÉAÉNÉeÉBÉu') {
                statusSpan.classList.add('bg-green-100', 'text-green-800', 'border-green-300');
            } else if (displayStatus === 'àÍéûí‚é~') {
                statusSpan.classList.add('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
            } else if (displayStatus === 'ãxé~') {
                statusSpan.classList.add('bg-red-100', 'text-red-800', 'border-red-300');
            } else {
                statusSpan.classList.add('bg-gray-100', 'text-gray-800', 'border-gray-300');
            }

            console.log('[updateHeaderStatus] Updated status to:', displayStatus);
        }

        // â¡ñøìXÉfÅ[É^ÇéÊìæÇ∑ÇÈä÷êî
        async function fetchMerchantData(merchantId) {
            console.log('[fetchMerchantData] Fetching data for:', merchantId);
            try {
                // JSONP Ç≈ÉfÅ[É^éÊìæ
                const result = await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_data_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const script = document.createElement('script');

                    window[callbackName] = (data) => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        resolve(data);
                    };

                    script.src = `${GAS_URL}?action=getMerchantData&merchantId=${encodeURIComponent(merchantId)}&callback=${callbackName}`;
                    script.onerror = () => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        reject(new Error('JSONP request failed'));
                    };
                    document.body.appendChild(script);
                });

                console.log('[fetchMerchantData] Response:', result);
                console.log('[fetchMerchantData] result.success:', result.success);
                console.log('[fetchMerchantData] result.data:', result.data);
                console.log('[fetchMerchantData] result.error:', result.error);

                if (result.success && result.data) {
                    window.merchantData = result.data;
                    window.merchantId = merchantId; // merchantIdÇ‡ÉZÉbÉg

                    // âcã∆íSìñé“éÅñºÇñæé¶ìIÇ…íäèoÅiXóÒÅj
                    const salesPersonName = result.data['âcã∆íSìñé“éÅñº'] || result.data.salesPersonName || result.data.sales_person_name || '';
                    if (salesPersonName) {
                        window.merchantData.salesPerson = salesPersonName;
                        console.log('[fetchMerchantData] Sales person extracted:', salesPersonName);
                    }

                    console.log('[fetchMerchantData] Merchant data loaded:', window.merchantData);
                    console.log('[fetchMerchantData] merchantId set to:', window.merchantId);
                    console.log('[fetchMerchantData] salesPerson:', window.merchantData.salesPerson);
                } else {
                    console.warn('[fetchMerchantData] No data returned - success:', result.success, 'data:', result.data);
                    window.merchantData = {};
                }
            } catch (error) {
                console.error('[fetchMerchantData] Error:', error);
                window.merchantData = {};
            }
        }

        // îƒópGAS APIåƒÇ—èoÇµÅiJSONPÅj
        async function callGasApi(action, params = {}) {
            console.log('[callGasApi] Calling action:', action, 'with params:', params);
            return new Promise((resolve, reject) => {
                const callbackName = 'jsonp_' + action + '_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                const script = document.createElement('script');

                window[callbackName] = (data) => {
                    delete window[callbackName];
                    if (script.parentNode) {
                        script.parentNode.removeChild(script);
                    }
                    resolve(data);
                };

                const queryParams = new URLSearchParams({
                    action: action,
                    callback: callbackName,
                    ...params
                });

                script.src = `${window.ENV.GAS_URL}?${queryParams.toString()}`;
                script.onerror = () => {
                    delete window[callbackName];
                    if (script.parentNode) {
                        script.parentNode.removeChild(script);
                    }
                    reject(new Error('Script load error'));
                };

                document.body.appendChild(script);
            });
        }

        // âcã∆íSìñé“ñºï“èW
        function editSalesPerson() {
            const userRoleDiv = document.getElementById('userRole');
            const userRoleInput = document.getElementById('userRoleInput');

            userRoleInput.value = userRoleDiv.textContent;
            userRoleDiv.classList.add('hidden');
            userRoleInput.classList.remove('hidden');
            userRoleInput.focus();
            userRoleInput.select();
        }

        // âcã∆íSìñé“ñºï€ë∂
        async function saveSalesPerson() {
            const userRoleDiv = document.getElementById('userRole');
            const userRoleInput = document.getElementById('userRoleInput');
            const newSalesPerson = userRoleInput.value.trim();

            if (!newSalesPerson) {
                alert('âcã∆íSìñé“éÅñºÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢');
                return;
            }

            try {
                // JSONP Ç≈ÉfÅ[É^ï€ë∂
                const result = await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_sales_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const script = document.createElement('script');

                    window[callbackName] = (data) => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        resolve(data);
                    };

                    script.src = `${GAS_URL}?action=updateSalesPerson&merchantId=${encodeURIComponent(currentUser)}&salesPerson=${encodeURIComponent(newSalesPerson)}&callback=${callbackName}`;
                    script.onerror = () => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        reject(new Error('JSONP request failed'));
                    };
                    document.body.appendChild(script);
                });

                if (result.success) {
                    // ê¨å˜ - ï\é¶ÇçXêV
                    userRoleDiv.textContent = newSalesPerson;
                    if (window.merchantData) {
                        window.merchantData.salesPerson = newSalesPerson;
                    }
                } else {
                    // é∏îs - å≥Ç…ñﬂÇ∑
                    console.error('Save failed:', result.error);
                }
            } catch (error) {
                console.error('Save error:', error);
            }

            // ì¸óÕóìÇîÒï\é¶ÅAÉeÉLÉXÉgÇï\é¶
            userRoleInput.classList.add('hidden');
            userRoleDiv.classList.remove('hidden');
        }

        // ÉçÅ[Éãï\é¶çXêV
        function updateRoleDisplay() {
            // ÉÜÅ[ÉUÅ[ñºÇ∆ÉçÅ[ÉãÇï\é¶
            document.getElementById('userName').textContent = currentUser;

            // âcã∆íSìñé“éÅñºÇï\é¶Åiwindow.merchantDataÇÃXóÒÇ©ÇÁéÊìæÅj
            let salesPerson = 'âcã∆íSìñé“ñ¢ê›íË';
            if (window.merchantData && window.merchantData.salesPerson) {
                salesPerson = window.merchantData.salesPerson;
            }
            document.getElementById('userRole').textContent = salesPerson;
            
            // å†å¿Ç…âûÇ∂ÇƒUIÇïœçX
            if (userRole === 'admin') {
                // ä«óùé“: Ç∑Ç◊Çƒï\é¶ÅAéáånÇÃîzêF
                document.getElementById('systemTitle').textContent = 'â¡ñøìXä«óùÉVÉXÉeÉÄ';
                document.getElementById('companyLogo').style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                document.getElementById('userRole').className = 'ml-2 text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-800';
            } else {
                // âcã∆: äÓñ{ã@î\ÇÃÇ›ÅAê¬ånÇÃîzêF
                document.getElementById('systemTitle').textContent = 'â¡ñøìXä«óùÉVÉXÉeÉÄ';
                document.getElementById('companyLogo').style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
                document.getElementById('userRole').className = 'ml-2 text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800';
            }
            
            // ä«óùé“êÍópÉÅÉjÉÖÅ[ÇÃï\é¶êßå‰
            const adminElements = document.querySelectorAll('.admin-only');
            adminElements.forEach(el => {
                el.style.display = userRole === 'admin' ? 'flex' : 'none';
            });
            
            // ÉäÅ[É_Å[êÍópóvëfÇ™Ç†ÇÍÇŒä«óùé“ÇÃÇ›ï\é¶
            const leaderElements = document.querySelectorAll('.leader-only');
            leaderElements.forEach(el => {
                el.style.display = userRole === 'admin' ? 'flex' : 'none';
            });
        }

        // í ímå†å¿ÉäÉNÉGÉXÉg
        // í ímãñâ¬ÉäÉNÉGÉXÉgÇÉAÉâÅ[ÉgÉpÉlÉãì‡Ç…ìùçá
        window.requestNotificationPermission = function() {
            if ('Notification' in window && Notification.permission !== 'granted') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        showNotification('í ímê›íË', 'ÉuÉâÉEÉUí ímÇóLå¯Ç…ÇµÇ‹ÇµÇΩ', 'success');
                    } else {
                        showInAppNotification('í ímê›íË', 'ÉuÉâÉEÉUí ímÇÕñ≥å¯Ç≈Ç∑', 'warning');
                    }
                });
            }
        }

        // ÉAÉâÅ[ÉgÉpÉlÉãÇäJÇ≠éûÇ…í ímãñâ¬ÇämîF
        function checkNotificationPermission() {
            if ('Notification' in window && Notification.permission === 'default') {
                const alertPanel = document.getElementById('alertPanel');
                if (alertPanel && !alertPanel.classList.contains('hidden')) {
                    // í ímãñâ¬ÉoÉiÅ[Çï\é¶
                    const banner = document.createElement('div');
                    banner.className = 'bg-yellow-100 border-l-4 border-yellow-500 p-3 m-3';
                    banner.innerHTML = `
                        <div class="flex items-center justify-between">
                            <span class="text-sm">?? ÉuÉâÉEÉUí ímÇóLå¯Ç…ÇµÇ‹Ç∑Ç©ÅH</span>
                            <button onclick="requestNotificationPermission(); this.parentElement.parentElement.remove()"
                                    class="text-sm bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600">
                                óLå¯Ç…Ç∑ÇÈ
                            </button>
                        </div>
                    `;
                    alertPanel.insertBefore(banner, alertPanel.firstChild.nextSibling);
                }
            }
        }

        // é©ìÆîzêMê›íËÇÃï€ë∂
        async function saveAutoDeliverySettings() {
            console.log('[saveAutoDeliverySettings] Function called');
            const saveBtn = document.getElementById('saveAutodeliveryBtn');
            const originalText = saveBtn ? saveBtn.innerHTML : '';

            try {
                // É{É^ÉìÇÉçÅ[ÉfÉBÉìÉOèÛë‘Ç…
                if (saveBtn) {
                    saveBtn.disabled = true;
                    saveBtn.innerHTML = '<svg class="animate-spin inline-block w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>ï€ë∂íÜ...';
                }

                console.log('[saveAutoDeliverySettings] Collecting data...');
                const autoDeliveryData = collectAutoDeliveryData();
                console.log('[saveAutoDeliverySettings] Data collected:', autoDeliveryData);

                if (!autoDeliveryData) {
                    alert('ÉGÉâÅ[: ïKê{çÄñ⁄Çì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢');
                    return;
                }

                console.log('[saveAutoDeliverySettings] Sending data:', autoDeliveryData);

                // âÔé–èÓïÒÇ∆ìØÇ∂ï˚éÆÇ≈POSTëóêM
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: JSON.stringify({
                        action: 'updateMerchantData',
                        merchantId: window.merchantId,
                        data: autoDeliveryData
                    })
                });

                console.log('[saveAutoDeliverySettings] Response status:', response.status);
                const result = await response.json();
                console.log('[saveAutoDeliverySettings] Result:', result);

                if (result.success) {
                    // ê¨å˜éû: É`ÉFÉbÉNÉ}Å[ÉNÇï\é¶
                    if (saveBtn) {
                        saveBtn.innerHTML = '<svg class="inline-block w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>ï€ë∂äÆóπ';
                    }

                    setTimeout(() => {
                        alert('ï€ë∂äÆóπ: é©ìÆîzêMê›íËÇï€ë∂ÇµÇ‹ÇµÇΩ');
                    }, 300);

                    resetAutodeliveryChanged();

                    // ÉXÉeÅ[É^ÉXÇ™ïœçXÇ≥ÇÍÇΩèÍçáÅAÉwÉbÉ_Å[ÇÃï\é¶Çë¶ç¿Ç…çXêV
                    console.log('[saveAutoDeliverySettings] autoDeliveryData.status:', autoDeliveryData.status);
                    if (autoDeliveryData.status) {
                        console.log('[saveAutoDeliverySettings] Calling updateHeaderStatus with:', autoDeliveryData.status);
                        updateHeaderStatus(autoDeliveryData.status);
                    } else {
                        console.warn('[saveAutoDeliverySettings] No status in autoDeliveryData');
                    }

                    // 2ïbå„Ç…É{É^ÉìÇå≥Ç…ñﬂÇ∑
                    setTimeout(() => {
                        if (saveBtn) {
                            saveBtn.innerHTML = originalText;
                            saveBtn.disabled = false;
                        }
                    }, 2000);
                } else {
                    alert('ÉGÉâÅ[: ' + (result.error || 'ï€ë∂Ç…é∏îsÇµÇ‹ÇµÇΩ'));
                }
            } catch (error) {
                console.error('[saveAutoDeliverySettings] Error:', error);
                alert('ÉGÉâÅ[: ï€ë∂íÜÇ…ÉGÉâÅ[Ç™î≠ê∂ÇµÇ‹ÇµÇΩ: ' + error.message);
            } finally {
                // ÉGÉâÅ[éûÇÕÇ∑ÇÆÇ…å≥Ç…ñﬂÇ∑
                if (saveBtn && saveBtn.disabled) {
                    setTimeout(() => {
                        saveBtn.innerHTML = originalText;
                        saveBtn.disabled = false;
                    }, 500);
                }
            }
        }

        // é©ìÆîzêMê›íËÉfÅ[É^Çé˚èW
        function collectAutoDeliveryData() {
            // ï®åèéÌï ÅiautodeliverySectionÇ…å¿íËÅj
            const propertyTypes = Array.from(document.querySelectorAll('#autodeliverySection input[name="propertyType"]:checked'))
                .map(cb => {
                    const typeMap = {
                        'house': 'åÀåöÇƒèZëÓ',
                        'apartment': 'ÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉì',
                        'commercial': 'ìXï‹ÅEéññ±èä',
                        'factory': 'çHèÍÅEëqå…'
                    };
                    return typeMap[cb.value];
                });

            // ï®åèéÌï Ç™1Ç¬Ç‡ëIëÇ≥ÇÍÇƒÇ¢Ç»Ç¢èÍçáÇÕÉGÉâÅ[
            if (propertyTypes.length === 0) {
                alert('ÉGÉâÅ[: ëŒâûâ¬î\ï®åèéÌï Çç≈í·1Ç¬ëIëÇµÇƒÇ≠ÇæÇ≥Ç¢');
                return null;
            }

            // ç≈ëÂëŒâûäKêî
            const selects = document.querySelectorAll('#autodeliverySection select');
            const maxFloorsList = [];
            const typeNames = ['åÀåöÇƒèZëÓ', 'ÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉì', 'ìXï‹ÅEéññ±èä', 'çHèÍÅEëqå…'];
            selects.forEach((select, idx) => {
                if (propertyTypes.includes(typeNames[idx])) {
                    // selectóvëfÇÃëIëÇ≥ÇÍÇΩoptionÇÃÉeÉLÉXÉgÇéÊìæ
                    const selectedOption = select.options[select.selectedIndex];
                    const optionText = selectedOption ? selectedOption.text : select.value;
                    maxFloorsList.push(`${typeNames[idx]}(${optionText}Ç‹Ç≈)`);
                }
            });

            // ízîNêîîÕàÕ
            const ageSliders = document.querySelectorAll('#autodeliverySection input[type="range"]');
            const ageMin = ageSliders[0] ? parseInt(ageSliders[0].value) : 0;
            const ageMax = ageSliders[1] ? parseInt(ageSliders[1].value) : 50;

            // é{çHâ”èäÅiäÆëSàÍívÇ≈ï€ë∂ÅjÅiautodeliverySectionÇ…å¿íËÅj
            const constructionTypes = Array.from(document.querySelectorAll('#autodeliverySection input[name="constructionTypes"]:checked'))
                .map(cb => cb.value);

            // ì¡éÍëŒâûçÄñ⁄ÅiäÆëSàÍívÇ≈ï€ë∂ÅjÅiautodeliverySectionÇ…å¿íËÅj
            const specialServices = Array.from(document.querySelectorAll('#autodeliverySection input[name="specialServices"]:checked'))
                .map(cb => cb.value);

            // ëŒâûìsìπï{åßÅEésãÊí¨ë∫
            const prefectures = areaSelectionData.prefectures.join(',');

            // ésãÊí¨ë∫ÇJSONà≥èkå`éÆÇ≈ï€ë∂ÅiÉXÉvÉVÇ∆ìØÇ∂å`éÆÅj
            const allCities = [];
            Object.entries(areaSelectionData.cities).forEach(([pref, cities]) => {
                allCities.push(...cities);
            });
            const citiesStr = JSON.stringify({
                type: "compressed",
                full: allCities.join(','),
                preview: allCities.slice(0, 100).join(',') + (allCities.length > 100 ? '...' : '')
            });

            // óDêÊÉGÉäÉA: ÉAÉìÉ_Å[ÉXÉRÉAå`éÆÇÃÇ‹Ç‹ï€ë∂ÅiÉXÉvÉVÇÃå`éÆÇ…çáÇÌÇπÇÈÅj
            const priorities = areaSelectionData.priorities.join(',');

            // àÍéûí‚é~ê›íËÉfÅ[É^
            const autoPauseToggle = document.getElementById('autoPauseToggle');
            const pauseStartDate = document.getElementById('pauseStartDate');
            const pauseEndDate = document.getElementById('pauseEndDate');
            const indefinitePause = document.getElementById('indefinitePause');

            const pauseFlag = autoPauseToggle ? autoPauseToggle.checked : false;
            const pauseStart = pauseFlag && pauseStartDate ? pauseStartDate.value : '';
            const pauseEnd = pauseFlag && pauseEndDate && !indefinitePause.checked ? pauseEndDate.value : '';
            const isIndefinite = pauseFlag && indefinitePause && indefinitePause.checked;

            // àÍéûí‚é~ÉoÉäÉfÅ[ÉVÉáÉì
            if (pauseFlag) {
                // àÍéûí‚é~ONÇÃèÍçáÅAäJénì˙ÇÕïKê{
                if (!pauseStart) {
                    showNotification('ÉGÉâÅ[', 'àÍéûí‚é~äJénì˙Çì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢', 'error');
                    return null;
                }
                // çƒäJó\íËì˙Ç‡ïKê{Åiñ¢íËÉ`ÉFÉbÉNÇ™OFFÇÃèÍçáÅj
                if (!isIndefinite && !pauseEnd) {
                    showNotification('ÉGÉâÅ[', 'àÍéûí‚é~çƒäJó\íËì˙Çì¸óÕÇ∑ÇÈÇ©ÅAÅuñ¢íËÅvÇ…É`ÉFÉbÉNÇì¸ÇÍÇƒÇ≠ÇæÇ≥Ç¢', 'error');
                    return null;
                }
            }

            // ÉXÉeÅ[É^ÉXÇÃåàíË
            // - àÍéûí‚é~OFF Å® ÉAÉNÉeÉBÉu
            // - àÍéûí‚é~ON + äJénì˙Ç™ñ¢óà Å® ÉAÉNÉeÉBÉuÅiÉXÉPÉWÉÖÅ[Éãó\ñÒÅj
            // - àÍéûí‚é~ON + äJénì˙Ç™ç°ì˙à»ëO + çƒäJì˙ñ¢íË Å® ãxé~
            // - àÍéûí‚é~ON + äJénì˙Ç™ç°ì˙à»ëO + çƒäJì˙Ç†ÇË Å® àÍéûí‚é~
            let status = 'ÉAÉNÉeÉBÉu';
            if (pauseFlag && pauseStart) {
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const startDate = new Date(pauseStart);
                startDate.setHours(0, 0, 0, 0);

                // äJénì˙Ç™ç°ì˙Ç‹ÇΩÇÕâﬂãéÇÃèÍçáÇÃÇ›ÉXÉeÅ[É^ÉXïœçX
                if (startDate <= today) {
                    status = isIndefinite ? 'ãxé~' : 'àÍéûí‚é~';
                }
                // äJénì˙Ç™ñ¢óàÇÃèÍçáÇÕÉAÉNÉeÉBÉuÇÃÇ‹Ç‹Åió\ñÒèÛë‘Åj
            }

            return {
                // GASÇÃupdateMerchantDataÇ≈ä˙ë“Ç∑ÇÈÉtÉBÅ[ÉãÉhñºÇ…çáÇÌÇπÇÈ
                propertyTypes: propertyTypes.join(','),               // ëŒâûï®åèéÌï 
                maxFloors: maxFloorsList.join(','),                    // ç≈ëÂëŒâûäKêî
                buildingAge: `{min=${ageMin}, max=${ageMax}}`,        // ízîNêîëŒâûîÕàÕ
                constructionTypes: constructionTypes.join(','),        // ëŒâûçHéñéÌï Åié{çHâ”èäóÒÇ…ï€ë∂Åj
                specialServices: specialServices.join(','),           // ì¡éÍëŒâûçÄñ⁄
                prefectures: prefectures,                             // ëŒâûìsìπï{åß
                cities: citiesStr,                                    // ëŒâûésãÊí¨ë∫
                priorityAreas: priorities,                            // óDêÊÉGÉäÉA
                // àÍéûí‚é~ê›íË
                status: status,                                       // ÉXÉeÅ[É^ÉX (AJóÒ)
                pauseFlag: pauseFlag ? 'TRUE' : 'FALSE',             // àÍéûí‚é~ÉtÉâÉO (AOóÒ)
                pauseStartDate: pauseStart || '',                     // àÍéûí‚é~äJénì˙ (APóÒ)
                pauseEndDate: isIndefinite ? 'ñ¢íË' : (pauseEnd || '') // àÍéûí‚é~çƒäJó\íËì˙ (AQóÒ)
            };
        }

        // âÆçÜï\é¶ÉIÉvÉVÉáÉìÇÃï\é¶/îÒï\é¶
        function updateTradeNameDisplay() {
            const tradeName = document.getElementById('tradeName').value;
            const tradeNameOptions = document.getElementById('tradeNameDisplayOptions');

            if (tradeName && tradeName.trim() !== '') {
                tradeNameOptions.style.display = 'block';
            } else {
                tradeNameOptions.style.display = 'none';
            }
        }

        // ãåä÷êîñºÇÃå›ä∑ê´à€éù
        function updateBranchDisplay() {
            updateTradeNameDisplay();
        }

        // âÔé–ñºï\é¶ÇçXêV
        function updateCompanyNameDisplay() {
            // óºï˚ï\é¶ÉIÉvÉVÉáÉìÇÃï\é¶/îÒï\é¶
            const displayOption = document.querySelector('input[name="tradeNameDisplay"]:checked')?.value;
            const bothOptions = document.getElementById('bothDisplayOptions');

            if (displayOption === 'both' && bothOptions) {
                bothOptions.style.display = 'block';
            } else if (bothOptions) {
                bothOptions.style.display = 'none';
            }
        }

        // é©ìÆï€ë∂
        async function autoSave() {
            // ï€ë∂ÉCÉìÉWÉPÅ[É^Å[Çï\é¶
            const saveIndicator = document.querySelector('#companySection .text-green-500');
            if (saveIndicator) {
                saveIndicator.parentElement.parentElement.style.opacity = '0.5';
            }

            // âÊëúÉAÉbÉvÉçÅ[ÉhèàóùÅiÉÅÉCÉìÉrÉWÉÖÉAÉãÅj
            if (mainVisualData && mainVisualFileName) {
                try {
                    console.log('[autoSave] Uploading main visual...');
                    const response = await fetch(GAS_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'text/plain' },
                        body: JSON.stringify({
                            action: 'companyinfo_uploadImage',
                            merchantId: window.merchantId,
                            base64Data: mainVisualData,
                            fileName: mainVisualFileName,
                            imageType: 'main-visual'
                        })
                    });
                    const result = await response.json();
                    console.log('[autoSave] Main visual response:', result);
                    if (result.success) {
                        mainVisualUrl = result.url;
                        console.log('[autoSave] Main visual uploaded:', result.url);
                    } else {
                        console.error('[autoSave] Main visual upload failed:', result.error);
                    }
                } catch (error) {
                    console.error('[autoSave] Main visual upload error:', error);
                }
            }

            // âÊëúÉAÉbÉvÉçÅ[ÉhèàóùÅié ê^ÉMÉÉÉâÉäÅ[Åj
            const uploadedGalleryUrls = [];
            if (galleryFilesToUpload.length > 0) {
                try {
                    console.log('[autoSave] Uploading gallery images:', galleryFilesToUpload.length);
                    for (const file of galleryFilesToUpload) {
                        const response = await fetch(GAS_URL, {
                            method: 'POST',
                            headers: { 'Content-Type': 'text/plain' },
                            body: JSON.stringify({
                                action: 'companyinfo_uploadImage',
                                merchantId: window.merchantId,
                                base64Data: file.base64Data,
                                fileName: file.fileName,
                                imageType: 'gallery'
                            })
                        });
                        const result = await response.json();
                        if (result.success) {
                            console.log('[autoSave] Gallery image uploaded:', result.url);
                            uploadedGalleryUrls.push(result.url);
                        }
                    }
                    // ÉAÉbÉvÉçÅ[ÉhäÆóπå„ÅAîzóÒÇÉNÉäÉA
                    galleryFilesToUpload = [];
                } catch (error) {
                    console.error('[autoSave] Gallery upload error:', error);
                }
            }

            // é{çHéñó·ÇÃÉAÉbÉvÉçÅ[Éhèàóù
            if (constructionExamples && constructionExamples.length > 0) {
                try {
                    console.log('[autoSave] Uploading construction examples:', constructionExamples.length);
                    for (const example of constructionExamples) {
                        // âÊëúÇ™Ç†ÇÈèÍçáÇÃÇ›ÉAÉbÉvÉçÅ[Éh
                        if (example.beforeImage || example.afterImage) {
                            const response = await fetch(GAS_URL, {
                                method: 'POST',
                                headers: { 'Content-Type': 'text/plain' },
                                body: JSON.stringify({
                                    action: 'saveConstructionExample',
                                    merchantId: window.merchantId,
                                    exampleData: {
                                        title: example.title,
                                        buildingAge: example.buildingAge,
                                        price: example.price,
                                        content: example.content,
                                        beforeImage: example.beforeImage,
                                        afterImage: example.afterImage
                                    }
                                })
                            });
                            const result = await response.json();
                            if (result.success) {
                                console.log('[autoSave] Construction example saved:', result.exampleId);
                            } else {
                                console.error('[autoSave] Construction example save failed:', result.error);
                            }
                        }
                    }
                } catch (error) {
                    console.error('[autoSave] Construction example upload error:', error);
                }
            }

            // ÉtÉHÅ[ÉÄÇ©ÇÁÉfÅ[É^Çé˚èW
            // Å¶ÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃóÒÇ∆ÇÃëŒâû:
            // CóÒ: âÔé–ñº, DóÒ: âÔé–ñºÉJÉi, EóÒ: âÆçÜ, FóÒ: âÆçÜÉJÉi
            // GóÒ: ë„ï\é“ñº, HóÒ: ë„ï\é“ñºÉJÉi, IóÒ: óXï÷î‘çÜ, JóÒ: èZèä
            // KóÒ: ìdòbî‘çÜ, LóÒ: ÉEÉFÉuÉTÉCÉgURL, MóÒ: ê›óßîNåé, NóÒ: PRÉeÉLÉXÉg
            // OóÒ: éxìXñº, PóÒ: éxìXèZèä
            // VóÒ: êøãÅópÉÅÅ[ÉãÉAÉhÉåÉX, WóÒ: âcã∆ópÉÅÅ[ÉãÉAÉhÉåÉX
            // XóÒ: âcã∆íSìñé“éÅñº, YóÒ: âcã∆íSìñé“ÉJÉi
            // ZóÒ: è]ã∆àıêî, AAóÒ: îÑè„ãKñÕ
            // ARóÒ: ÉÅÉCÉìÉrÉWÉÖÉAÉã, ASóÒ: é ê^ÉMÉÉÉâÉäÅ[
            // ATóÒ: ï€óLéëäi, AUóÒ: â¡ì¸ï€åØ

            const formData = {
                // äÓñ{èÓïÒ
                companyName: document.getElementById('companyName')?.value || '', // CóÒ: âÔé–ñº
                companyNameKana: document.getElementById('companyNameKana')?.value || '', // DóÒ: âÔé–ñºÉJÉi
                tradeName: document.getElementById('tradeName')?.value || '', // EóÒ: âÆçÜ
                tradeNameKana: document.getElementById('tradeNameKana')?.value || '', // FóÒ: âÆçÜÉJÉi
                representative: document.getElementById('representative')?.value || '', // GóÒ: ë„ï\é“ñº
                representativeKana: document.getElementById('representativeKana')?.value || '', // HóÒ: ë„ï\é“ñºÉJÉi
                postalCode: document.getElementById('zipCode')?.value || '', // IóÒ: óXï÷î‘çÜ
                address: document.getElementById('address')?.value || '', // JóÒ: èZèä
                phone: document.getElementById('phone')?.value || '', // KóÒ: ìdòbî‘çÜ
                website: document.getElementById('website')?.value || '', // LóÒ: ÉEÉFÉuÉTÉCÉgURL
                established: document.getElementById('established')?.value || '', // MóÒ: ê›óßîNåé
                prText: document.getElementById('prText')?.value || '', // NóÒ: PRÉeÉLÉXÉg

                // OóÒ: éxìXñº, PóÒ: éxìXèZèä
                branchName: (window.branches || []).map(b => b.name).filter(v => v).join('ÅA') || '',
                branchAddress: (window.branches || []).map(b => b.address).filter(v => v).join('ÅA') || '',

                // VóÒ: êøãÅópÉÅÅ[ÉãÉAÉhÉåÉX, WóÒ: âcã∆ópÉÅÅ[ÉãÉAÉhÉåÉX
                // XóÒ: âcã∆íSìñé“éÅñº, YóÒ: âcã∆íSìñé“ÉJÉi
                billingEmail: document.getElementById('billingEmail')?.value || '',
                salesEmail: document.getElementById('salesEmail')?.value || '',
                salesPersonName: document.getElementById('salesPersonName')?.value || '',
                salesPersonKana: document.getElementById('salesPersonKana')?.value || '',

                // ZóÒ: è]ã∆àıêî, AAóÒ: îÑè„ãKñÕ
                employees: document.getElementById('employees')?.value || '',
                salesScale: document.getElementById('salesScale')?.value || '',

                // ATóÒ: ï€óLéëäi, AUóÒ: â¡ì¸ï€åØÅiÉJÉXÉ^ÉÄçÄñ⁄Ç‡ä‹ÇﬂÇÈÅj
                qualifications: (() => {
                    const checked = Array.from(document.querySelectorAll('input[name="qualifications"]:checked')).map(cb => cb.value);
                    const custom = Array.from(document.querySelectorAll('#customQualificationsList > div > span')).map(el => el.textContent.trim());
                    return [...checked, ...custom].filter(v => v).join(',') || '';
                })(),
                insurance: (() => {
                    const checked = Array.from(document.querySelectorAll('input[name="insurance"]:checked')).map(cb => cb.value);
                    const custom = Array.from(document.querySelectorAll('#customInsuranceList > div > span')).map(el => el.textContent.trim());
                    return [...checked, ...custom].filter(v => v).join(',') || '';
                })()
            };

            // âÊëúURLÇí«â¡ÅiÉAÉbÉvÉçÅ[ÉhçœÇ›ÇÃèÍçáÅj
            if (mainVisualUrl) {
                formData['ÉÅÉCÉìÉrÉWÉÖÉAÉã'] = mainVisualUrl; // ARóÒ: ÉÅÉCÉìÉrÉWÉÖÉAÉã
                console.log('[autoSave] Added main visual to formData:', mainVisualUrl);
            }

            // ÉvÉåÉrÉÖÅ[ê›íËÇÉvÉåÉrÉÖÅ[ÉVÅ[ÉgÇ…ï€ë∂
            try {
                const previewData = {
                    imagePositionX: imagePositionX,
                    imagePositionY: imagePositionY,
                    imageZoom: currentZoom,
                    imageBrightness: document.getElementById('imageOpacity')?.value || 70,
                    textColor: currentTextColor
                };

                const previewResponse = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify({
                        action: 'savePreviewSettings',
                        merchantId: window.merchantId,
                        previewSettings: previewData
                    })
                });
                const previewResult = await previewResponse.json();
                console.log('[autoSave] Preview settings saved:', previewResult);
            } catch (error) {
                console.error('[autoSave] Preview settings save error:', error);
            }

            // ÉMÉÉÉâÉäÅ[URLÇí«â¡Åiä˘ë∂URLÇÕï€ë∂éûÇ…ç≈êVÇéÊìæÅj
            if (uploadedGalleryUrls.length > 0) {
                try {
                    // ÉXÉvÉåÉbÉhÉVÅ[ÉgÇ©ÇÁç≈êVÇÃé ê^ÉMÉÉÉâÉäÅ[URLÇéÊìæ
                    const merchantDataResponse = await fetch(GAS_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'text/plain' },
                        body: JSON.stringify({
                            action: 'getMerchantData',
                            merchantId: window.merchantId
                        })
                    });
                    const merchantDataResult = await merchantDataResponse.json();
                    const existingGalleryUrls = merchantDataResult.data?.['é ê^ÉMÉÉÉâÉäÅ[']
                        ? merchantDataResult.data['é ê^ÉMÉÉÉâÉäÅ['].split(',').map(url => url.trim()).filter(url => url)
                        : [];

                    const allGalleryUrls = [...existingGalleryUrls, ...uploadedGalleryUrls].slice(0, 20);
                    formData['é ê^ÉMÉÉÉâÉäÅ['] = allGalleryUrls.join(','); // ASóÒ: é ê^ÉMÉÉÉâÉäÅ[
                    console.log('[autoSave] Added gallery to formData:', allGalleryUrls.length, 'images (', existingGalleryUrls.length, 'existing +', uploadedGalleryUrls.length, 'new)');
                } catch (error) {
                    console.error('[autoSave] Failed to get existing gallery:', error);
                    // ÉGÉâÅ[éûÇÕêVÇµÇ¢URLÇÃÇ›ï€ë∂
                    formData['é ê^ÉMÉÉÉâÉäÅ['] = uploadedGalleryUrls.join(',');
                }
            }

            try {
                console.log('[ï€ë∂] ëóêMÉfÅ[É^:', formData);
                console.log('[ï€ë∂] merchantId:', window.merchantId);

                // GASÇ…ï€ë∂ÉäÉNÉGÉXÉgÇëóêM
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: JSON.stringify({
                        action: 'updateMerchantData',
                        merchantId: window.merchantId,
                        data: formData
                    })
                });

                const result = await response.json();
                console.log('[ï€ë∂] GASÉåÉXÉ|ÉìÉX:', result);

                if (result.success) {
                    console.log('? ï€ë∂äÆóπ');
                    console.log('ï€ë∂ÇµÇΩçÄñ⁄êî:', Object.keys(formData).length);

                    // ï€ë∂ÉCÉìÉWÉPÅ[É^Å[Çå≥Ç…ñﬂÇ∑
                    if (saveIndicator) {
                        setTimeout(() => {
                            saveIndicator.parentElement.parentElement.style.opacity = '1';
                        }, 500);
                    }
                } else {
                    console.error('? ï€ë∂ÉGÉâÅ[:', result.error);
                    showNotification('ÉGÉâÅ[', 'ï€ë∂Ç…é∏îsÇµÇ‹ÇµÇΩ', 'error');
                }
            } catch (error) {
                console.error('? í êMÉGÉâÅ[:', error);
                // ÉGÉâÅ[éûÇ‡å©ÇΩñ⁄Çå≥Ç…ñﬂÇ∑
                if (saveIndicator) {
                    saveIndicator.parentElement.parentElement.style.opacity = '1';
                }
            }
        }

        // âÔé–èÓïÒÇÃï€ë∂
        async function saveCompanyInfo() {
            console.log('[saveCompanyInfo] ï€ë∂äJén');
            console.log('[saveCompanyInfo] GAS_URL:', GAS_URL);
            console.log('[saveCompanyInfo] window.merchantId:', window.merchantId);

            if (!window.merchantId) {
                alert('ÉGÉâÅ[: merchantIdÇ™ê›íËÇ≥ÇÍÇƒÇ¢Ç‹ÇπÇÒÅBÉçÉOÉCÉìÇµíºÇµÇƒÇ≠ÇæÇ≥Ç¢ÅB');
                console.error('[saveCompanyInfo] merchantIdÇ™ñ¢ê›íË');
                return;
            }

            const saveButton = event.target.closest('button');
            if (!saveButton) {
                console.error('[saveCompanyInfo] ï€ë∂É{É^ÉìÇ™å©Ç¬Ç©ÇËÇ‹ÇπÇÒ');
                return;
            }

            saveButton.disabled = true;
            const originalHTML = saveButton.innerHTML;
            saveButton.innerHTML = '<svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> ï€ë∂íÜ...';

            try {
                const result = await autoSave();
                console.log('[saveCompanyInfo] ï€ë∂åãâ :', result);
                showNotification('ï€ë∂äÆóπ', 'âÔé–èÓïÒÇï€ë∂ÇµÇ‹ÇµÇΩ');
            } catch (error) {
                console.error('[saveCompanyInfo] ÉGÉâÅ[:', error);
                showNotification('ÉGÉâÅ[', 'ï€ë∂Ç…é∏îsÇµÇ‹ÇµÇΩ: ' + error.message, 'error');
            } finally {
                saveButton.disabled = false;
                saveButton.innerHTML = originalHTML;
            }
        }

        // âÔé–èÓïÒÇÃÉäÉZÉbÉg
        function resetCompanyInfo() {
            if (confirm('ì¸óÕì‡óeÇÉäÉZÉbÉgÇµÇƒÅAÉXÉvÉåÉbÉhÉVÅ[ÉgÇ©ÇÁçƒì«Ç›çûÇ›ÇµÇ‹Ç∑Ç©ÅH')) {
                if (window.merchantData) {
                    loadMerchantData(window.merchantId, window.merchantData);
                    showNotification('ÉäÉZÉbÉgäÆóπ', 'ç≈êVÇÃÉfÅ[É^Çì«Ç›çûÇ›Ç‹ÇµÇΩ');
                }
            }
        }

        // ÉJÉXÉ^ÉÄéëäiÇí«â¡
        function addCustomQualification() {
            const input = document.getElementById('customQualificationInput');
            const value = input.value.trim();

            if (value) {
                const list = document.getElementById('customQualificationsList');
                const tag = document.createElement('div');
                tag.className = 'inline-flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm';
                tag.innerHTML = `
                    <span>${value}</span>
                    <button onclick="this.parentElement.remove()" class="ml-2 text-blue-600 hover:text-blue-800">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                `;
                list.appendChild(tag);
                input.value = '';
            }
        }

        // ÉJÉXÉ^ÉÄï€åØÇí«â¡
        function addCustomInsurance() {
            const input = document.getElementById('customInsuranceInput');
            const value = input.value.trim();

            if (value) {
                const list = document.getElementById('customInsuranceList');
                const tag = document.createElement('div');
                tag.className = 'inline-flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm';
                tag.innerHTML = `
                    <span>${value}</span>
                    <button onclick="this.parentElement.remove()" class="ml-2 text-green-600 hover:text-green-800">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                `;
                list.appendChild(tag);
                input.value = '';
            }
        }

        // âÔé–èÓïÒÇÃÉvÉåÉrÉÖÅ[
        function previewCompanyInfo() {
            // ì¸óÕílÇéÊìæ
            const companySection = document.getElementById('companySection');
            const companyName = companySection.querySelector('input[placeholder*="äîéÆâÔé–"]').value || 'äîéÆâÔé–Ç≠ÇÁÇ◊ÇÈìhëï';
            const tradeName = document.getElementById('tradeName').value;
            const displayOption = document.querySelector('input[name="tradeNameDisplay"]:checked')?.value || 'company';
            const representative = companySection.querySelector('input[placeholder="ë„ï\é“ñºÇì¸óÕ"]')?.value || '-';
            const zipCode = companySection.querySelector('input[placeholder="123-4567"]')?.value || '';
            const address = companySection.querySelector('input[placeholder="ìåãûìsç`ãÊê¬éR1-1-1"]')?.value ||
                           companySection.querySelector('label:has-text("èZèä") + input')?.value ||
                           companySection.querySelector('label:has-text("èäç›ín") + input')?.value || '-';
            const established = companySection.querySelector('input[placeholder="2010îN4åé"]')?.value || '2010îN4åé';
            const prText = companySection.querySelector('textarea[placeholder*="PRï∂"]')?.value ||
                          companySection.querySelector('textarea[rows="4"]')?.value ||
                          'ínàÊñßíÖÇ≈15îNà»è„ÅAämÇ©Ç»ãZèpÇ∆íöîJÇ»édéñÇ≈äFólÇÃëÂêÿÇ»èZÇ‹Ç¢ÇéÁÇËÇ‹Ç∑ÅBå©êœÇ‡ÇËÇ©ÇÁé{çHÇ‹Ç≈é©é–àÍä—ëÃêßÇ≈ÅAíÜä‘É}Å[ÉWÉìÇ»ÇµÇÃìKê≥âøäiÇÇ≤íÒãüÅBÉAÉtÉ^Å[ÉtÉHÉçÅ[Ç‡ñúëSÇ≈Ç∑ÅB';

            // âÔé–ñºÇÃï\é¶ÇåàíË
            let displayName = companyName;
            let displayHtml = companyName; // HTMLópÅiÉTÉCÉYí≤êÆä‹ÇﬁÅj

            if (tradeName && tradeName.trim() !== '') {
                const reverseOrder = document.getElementById('reverseOrder')?.checked || false;
                const smallerSecond = document.getElementById('smallerSecond')?.checked || false;

                switch(displayOption) {
                    case 'trade':
                        displayName = tradeName;
                        displayHtml = tradeName;
                        break;
                    case 'both':
                        if (reverseOrder) {
                            displayName = `${tradeName}Åb${companyName}`;
                            if (smallerSecond) {
                                displayHtml = `${tradeName}Åb<span style="font-size:85%">${companyName}</span>`;
                            } else {
                                displayHtml = displayName;
                            }
                        } else {
                            displayName = `${companyName}Åb${tradeName}`;
                            if (smallerSecond) {
                                displayHtml = `${companyName}Åb<span style="font-size:85%">${tradeName}</span>`;
                            } else {
                                displayHtml = displayName;
                            }
                        }
                        break;
                    case 'company':
                    default:
                        displayName = companyName;
                        displayHtml = companyName;
                        break;
                }
            }

            // ÉvÉåÉrÉÖÅ[Ç…îΩâf
            const setElementText = (id, text) => {
                const element = document.getElementById(id);
                if (element) element.textContent = text;
            };

            const setElementHtml = (id, html) => {
                const element = document.getElementById(id);
                if (element) element.innerHTML = html;
            };

            // âÔé–ñºÇÕHTMLÇ∆ÇµÇƒê›íËÅiÉtÉHÉìÉgÉTÉCÉYïœçXÇîΩâfÇ∑ÇÈÇΩÇﬂÅj
            setElementHtml('previewCompanyName', displayHtml);
            setElementHtml('previewCompanyNameHero', displayHtml);
            setElementHtml('previewCompanyNameOverlay', displayHtml);
            setElementHtml('previewCompanyNameFull', displayHtml);
            setElementText('previewRepresentative', representative);

            // èäç›ínÇï\é¶ÅióXï÷î‘çÜÇ‡ä‹ÇﬂÇÈÅj
            const fullAddress = zipCode ? `Åß${zipCode} ${address}` : address;
            setElementText('previewAddress', fullAddress);

            setElementText('previewEstablishedDate', established);

            // PRï∂Çï\é¶
            setElementText('previewPrText', prText);

            // ÉLÉÉÉbÉ`ÉtÉåÅ[ÉYÇPRï∂ÇÃç≈èâÇÃàÍï∂Ç©ÇÁíäèoÅiãÂì_Ç‹Ç≈Ç≈êÿÇÈÅj
            const firstSentence = prText.split('ÅB')[0];
            const tagline = firstSentence || 'êMóäÇ∆é¿ê—ÇÃäOï«ìhëïêÍñÂìX';
            setElementText('previewTagline', tagline || 'êMóäÇ∆é¿ê—ÇÃäOï«ìhëïêÍñÂìX');
            setElementText('previewTaglineHero', tagline || 'êMóäÇ∆é¿ê—ÇÃäOï«ìhëïêÍñÂìX');
            setElementText('previewTaglineOverlay', tagline || 'êMóäÇ∆é¿ê—ÇÃäOï«ìhëïêÍñÂìX');

            setElementText('previewEstablishedHero', established);
            setElementText('previewEstablishedOverlay', established);

            // ÉÅÉCÉìÉrÉWÉÖÉAÉãÇ™ÉAÉbÉvÉçÅ[ÉhÇ≥ÇÍÇƒÇ¢ÇÈèÍçáÇÕï\é¶
            if (mainVisualData || mainVisualUrl) {
                document.getElementById('previewMainVisual').src = mainVisualData || mainVisualUrl;
                document.getElementById('mainVisualSection').style.display = 'block';
                document.getElementById('heroSection').style.display = 'none';
            } else {
                document.getElementById('mainVisualSection').style.display = 'none';
                document.getElementById('heroSection').style.display = 'block';
            }

            // éëäiÇï\é¶
            const qualificationsList = document.getElementById('qualificationsList');
            if (qualificationsList) {
                qualificationsList.innerHTML = '';
                // É`ÉFÉbÉNÇ≥ÇÍÇΩéëäiÇéÊìæ
                const checkedQualifications = companySection.querySelectorAll('input[name="qualifications"]:checked');
                checkedQualifications.forEach(qual => {
                    const div = document.createElement('div');
                    div.className = 'bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center';
                    div.innerHTML = `
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">${qual.value}</span>
                    `;
                    qualificationsList.appendChild(div);
                });
                // ÉJÉXÉ^ÉÄéëäiÇí«â¡
                const customQuals = document.querySelectorAll('#customQualificationsList > div');
                customQuals.forEach(qual => {
                    const qualText = qual.querySelector('span').textContent;
                    const div = document.createElement('div');
                    div.className = 'bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center';
                    div.innerHTML = `
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">${qualText}</span>
                    `;
                    qualificationsList.appendChild(div);
                });
                // éëäiÇ™Ç†ÇÈèÍçáÇÃÇ›ÉZÉNÉVÉáÉìÇï\é¶
                const qualSection = document.getElementById('preview-qualifications');
                if (qualSection) {
                    qualSection.style.display = qualificationsList.children.length > 0 ? 'block' : 'none';
                }
            }

            // ï€åØÇï\é¶
            const insuranceList = document.getElementById('insuranceList');
            if (insuranceList) {
                insuranceList.innerHTML = '';
                // É`ÉFÉbÉNÇ≥ÇÍÇΩï€åØÇéÊìæ
                const checkedInsurance = companySection.querySelectorAll('input[name="insurance"]:checked');
                checkedInsurance.forEach(ins => {
                    const div = document.createElement('div');
                    div.className = 'bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center';
                    div.innerHTML = `
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">${ins.value}</span>
                    `;
                    insuranceList.appendChild(div);
                });
                // ÉJÉXÉ^ÉÄï€åØÇí«â¡
                const customInsurance = document.querySelectorAll('#customInsuranceList > div');
                customInsurance.forEach(ins => {
                    const insText = ins.querySelector('span').textContent;
                    const div = document.createElement('div');
                    div.className = 'bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center';
                    div.innerHTML = `
                        <span class="text-2xl mr-2">???</span>
                        <span class="text-sm font-medium">${insText}</span>
                    `;
                    insuranceList.appendChild(div);
                });
                // ï€åØÇ™Ç†ÇÈèÍçáÇÃÇ›ÉZÉNÉVÉáÉìÇï\é¶
                const insSection = document.getElementById('preview-insurance');
                if (insSection) {
                    insSection.style.display = insuranceList.children.length > 0 ? 'block' : 'none';
                }
            }

            // ëŒâûâ¬î\Ç»çHéñÇï\é¶
            const previewServicesList = document.getElementById('previewServicesList');
            const serviceIconMap = {
                'äOï«ìhëï': '??',
                'äOï«ÉJÉoÅ[çHñ@': '???',
                'äOï«í£ë÷Ç¶': '??',
                'âÆç™ìhëïÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'âÆè„ñhêÖÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô': '???',
                'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢': '??',
                'âÆç™ÉJÉoÅ[çHñ@': '??',
                'äOï«ï‚èCÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'âÆç™ï‚èCÅiäOï«çHéñä‹ÇﬁÅj': '???',
                'ÉxÉâÉìÉ_ñhêÖÅiäOï«çHéñä‹ÇﬁÅj': '??'
            };

            if (previewServicesList) {
                previewServicesList.innerHTML = '';
                const checkedServices = document.querySelectorAll('input[name="constructionTypes"]:checked');

                if (checkedServices.length > 0) {
                    checkedServices.forEach(service => {
                        const serviceName = service.value;

                        // íPïiçÄñ⁄ÅiíAÇµ1é–è–âÓéûÇÕíËâøÅjÇÉvÉåÉrÉÖÅ[Ç©ÇÁèúäO
                        if (serviceName.includes('ÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj')) {
                            return;
                        }

                        // ï\é¶ñºÇ©ÇÁÅiäOï«çHéñä‹ÇﬁÅjÇçÌèú
                        const displayName = serviceName.replace('ÅiäOï«çHéñä‹ÇﬁÅj', '');
                        const icon = serviceIconMap[serviceName] || '?';
                        const div = document.createElement('div');
                        div.className = 'bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition';
                        div.innerHTML = `
                            <span class="text-2xl mr-2">${icon}</span>
                            <span class="text-sm font-medium text-gray-800">${displayName}</span>
                        `;
                        previewServicesList.appendChild(div);
                    });
                    document.getElementById('preview-services').style.display = 'block';
                } else {
                    document.getElementById('preview-services').style.display = 'none';
                }
            }

            // ëŒâûÉGÉäÉAÇï\é¶
            const previewCitiesContainer = document.getElementById('previewCitiesContainer');

            if (previewCitiesContainer && areaSelectionData && areaSelectionData.prefectures) {
                previewCitiesContainer.innerHTML = '';

                areaSelectionData.prefectures.forEach((pref, index) => {
                    const cities = areaSelectionData.cities[pref];
                    if (cities && cities.length > 0) {
                        const prefDiv = document.createElement('div');
                        prefDiv.className = index < areaSelectionData.prefectures.length - 1 ? 'mb-6 pb-6 border-b border-gray-200' : 'mb-0';
                        prefDiv.innerHTML = `
                            <div class="flex items-center mb-3">
                                <span class="text-base font-bold text-blue-600">${pref}</span>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                ${cities.map(city => `<span class="px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg text-sm transition">${city}</span>`).join('')}
                            </div>
                        `;
                        previewCitiesContainer.appendChild(prefDiv);
                    }
                });

                // ëŒâûÉGÉäÉAÇ™Ç†ÇÈèÍçáÇÃÇ›ÉZÉNÉVÉáÉìÇï\é¶
                const areasSection = document.getElementById('preview-areas');
                if (areasSection) {
                    areasSection.style.display = areaSelectionData.prefectures.length > 0 ? 'block' : 'none';
                }
            }

            // ì¡éÍëŒâûçÄñ⁄Çï\é¶
            const previewFeaturesList = document.getElementById('previewFeaturesList');
            if (previewFeaturesList) {
                previewFeaturesList.innerHTML = '';
                const checkedSpecialServices = document.querySelectorAll('input[name="specialServices"]:checked');
                const excludeItems = ['óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]', 'âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬'];

                const colors = [
                    'from-blue-50 to-blue-100',
                    'from-purple-50 to-purple-100',
                    'from-green-50 to-green-100',
                    'from-pink-50 to-pink-100',
                    'from-yellow-50 to-yellow-100',
                    'from-indigo-50 to-indigo-100'
                ];

                let colorIndex = 0;
                checkedSpecialServices.forEach(service => {
                    const serviceText = service.value;
                    // èúäOçÄñ⁄ÇÉXÉLÉbÉv
                    if (excludeItems.some(item => serviceText.includes(item))) {
                        return;
                    }

                    // äGï∂éöÇ∆ÉeÉLÉXÉgÇï™ó£
                    const parts = serviceText.split(' ');
                    const emoji = parts[0];
                    const text = parts.slice(1).join(' ');

                    const div = document.createElement('div');
                    div.className = `bg-gradient-to-br ${colors[colorIndex % colors.length]} rounded-xl p-4`;
                    div.innerHTML = `
                        <div class="text-3xl mb-2">${emoji}</div>
                        <h4 class="font-semibold text-gray-900 mb-1">${text}</h4>
                    `;
                    previewFeaturesList.appendChild(div);
                    colorIndex++;
                });

                // ã≠Ç›Ç™Ç†ÇÈèÍçáÇÃÇ›ÉZÉNÉVÉáÉìÇï\é¶
                const featuresSection = document.getElementById('preview-features');
                if (featuresSection) {
                    featuresSection.style.display = previewFeaturesList.children.length > 0 ? 'block' : 'none';
                }
            }

            // ÉÇÅ[É_ÉãÇï\é¶
            document.getElementById('companyPreviewModal').classList.remove('hidden');

            // ÉhÉâÉbÉOã@î\Çèâä˙âª
            setTimeout(initImageDrag, 100);

            // GoogleÉ}ÉbÉvÇì«Ç›çûÇ›
            setTimeout(loadGoogleMap, 200);

            // é ê^ÉMÉÉÉâÉäÅ[Ç∆é{çHéñó·ÇÃï\é¶ÇçXêV
            updateGalleryDisplay();
            updateConstructionExamplesDisplay();
            updateReviewsList();
        }

        // ÉvÉåÉrÉÖÅ[ÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
        function closePreviewModal() {
            document.getElementById('companyPreviewModal').classList.add('hidden');
        }

        // ÉvÉåÉrÉÖÅ[ê›íËÉpÉlÉãÇÃï\é¶êÿÇËë÷Ç¶
        function togglePreviewSettings() {
            const settings = document.getElementById('previewSettings');
            settings.classList.toggle('hidden');
        }

        // ÉvÉåÉrÉÖÅ[ÉZÉNÉVÉáÉìÇÃï\é¶êÿÇËë÷Ç¶
        function togglePreviewSection(sectionName) {
            const section = document.getElementById('preview-' + sectionName);
            if (section) {
                section.classList.toggle('hidden');
            }

            // âÔé–äTóvÉZÉNÉVÉáÉìÇÃèÍçáÅAè⁄ç◊ê›íËÇÃï\é¶Ç‡êÿÇËë÷Ç¶
            if (sectionName === 'basicInfo') {
                const detailSettings = document.getElementById('basicInfoDetailSettings');
                if (detailSettings) {
                    if (section && section.classList.contains('hidden')) {
                        detailSettings.style.display = 'none';
                    } else {
                        detailSettings.style.display = 'block';
                    }
                }
            }
        }

        // âÔé–äTóvÇÃå¬ï ÉtÉBÅ[ÉãÉhÇÃï\é¶êÿÇËë÷Ç¶
        function toggleBasicInfoField(fieldName) {
            const field = document.getElementById('basicInfo-' + fieldName);
            if (field) {
                field.classList.toggle('hidden');
            }
        }

        // ízîNêîîÕàÕÇÃçXêVÅiâÔé–èÓïÒópÅj
        function updateAgeRange() {
            const minSlider = document.querySelector('#companySection input[type="range"][min="0"][max="50"]');
            const maxSlider = document.querySelector('#companySection input[type="range"][min="0"][max="100"]');
            if (minSlider && maxSlider) {
                const minElement = document.getElementById('ageRangeMin');
                const maxElement = document.getElementById('ageRangeMax');
                if (minElement) minElement.textContent = minSlider.value;
                if (maxElement) maxElement.textContent = maxSlider.value;
            }
        }

        // ízîNêîîÕàÕÇÃçXêVÅié©ìÆîzêMê›íËópÅj
        function updateAgeRangeAuto() {
            const minSlider = document.querySelector('#autodeliverySection input[type="range"][min="0"][max="50"]');
            const maxSlider = document.querySelector('#autodeliverySection input[type="range"][min="0"][max="100"]');
            if (minSlider && maxSlider) {
                const minValue = parseInt(minSlider.value);
                const maxValue = parseInt(maxSlider.value);

                // â∫å¿Ç™è„å¿Çí¥Ç¶ÇΩèÍçáÅAè„å¿Çâ∫å¿Ç…çáÇÌÇπÇÈ
                if (minValue > maxValue) {
                    maxSlider.value = minValue;
                }

                // è„å¿Ç™â∫å¿Çâ∫âÒÇ¡ÇΩèÍçáÅAâ∫å¿Çè„å¿Ç…çáÇÌÇπÇÈ
                if (maxValue < minValue) {
                    minSlider.value = maxValue;
                }

                const minElement = document.getElementById('ageRangeMinAuto');
                const maxElement = document.getElementById('ageRangeMaxAuto');
                if (minElement) minElement.textContent = minSlider.value;
                if (maxElement) maxElement.textContent = maxSlider.value;
            }
        }

        // ÉTÅ[ÉrÉXÉJÅ[ÉhÇÃêÿÇËë÷Ç¶
        function toggleServiceCard(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            const card = element.querySelector('div');

            if (checkbox.checked) {
                checkbox.checked = false;
                card.classList.remove('border-blue-500', 'bg-blue-50');
            } else {
                checkbox.checked = true;
                card.classList.add('border-blue-500', 'bg-blue-50');
            }
        }

        // ñﬂÇÈÉ{É^Éì
        function goBack() {
            showSection('dashboard');
        }

        // ï\é¶ÅEîÒï\é¶ÇÃêÿÇËë÷Ç¶
        function toggleVisibility(button) {
            const icon = button.querySelector('svg');
            const parent = button.closest('.border');

            if (parent.classList.contains('opacity-50')) {
                parent.classList.remove('opacity-50');
                icon.innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                `;
            } else {
                parent.classList.add('opacity-50');
                icon.innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
                `;
            }
        }

        // ÉÅÉCÉìÉrÉWÉÖÉAÉãÉAÉbÉvÉçÅ[ÉhèàóùÅiÉvÉåÉrÉÖÅ[ÇÃÇ›ÅAï€ë∂ÇÕå„Ç≈Åj
        let mainVisualData = null;
        let mainVisualFileName = null;
        let mainVisualUrl = null;
        function handleMainVisualUpload(event) {
            const file = event.target.files[0];
            if (file) {
                mainVisualFileName = file.name;
                const reader = new FileReader();
                reader.onload = function(e) {
                    mainVisualData = e.target.result;
                    // ÉvÉåÉrÉÖÅ[ï\é¶ÇÃÇ›
                    document.getElementById('mainVisualImage').src = mainVisualData;
                    document.getElementById('mainVisualPreview').classList.remove('hidden');
                    document.getElementById('mainVisualPlaceholder').classList.add('hidden');
                    console.log('[handleMainVisualUpload] Image ready for upload on save');
                };
                reader.readAsDataURL(file);
            }
        }

        // ÉÅÉCÉìÉrÉWÉÖÉAÉãçÌèú
        function removeMainVisual() {
            mainVisualData = null;
            document.getElementById('mainVisualPreview').classList.add('hidden');
            document.getElementById('mainVisualPlaceholder').classList.remove('hidden');
            document.getElementById('mainVisualInput').value = '';
        }

        // âÊëúà íuí≤êÆ
        let imagePositionX = 50;
        let imagePositionY = 50;
        let currentZoom = 100;
        let currentTextColor = 'white';

        function adjustImagePosition(position) {
            const image = document.getElementById('previewMainVisual');
            if (image) {
                const step = 5; // 5%Ç∏Ç¬à⁄ìÆ
                switch(position) {
                    case 'up':
                        imagePositionY = Math.max(0, imagePositionY - step);
                        break;
                    case 'down':
                        imagePositionY = Math.min(100, imagePositionY + step);
                        break;
                    case 'left':
                        imagePositionX = Math.max(0, imagePositionX - step);
                        break;
                    case 'right':
                        imagePositionX = Math.min(100, imagePositionX + step);
                        break;
                    case 'center':
                        imagePositionX = 50;
                        imagePositionY = 50;
                        break;
                }
                updateImagePosition();
            }
        }

        function updateImagePosition() {
            const image = document.getElementById('previewMainVisual');
            if (image) {
                image.style.objectPosition = `${imagePositionX}% ${imagePositionY}%`;
            }
        }

        // ÉhÉâÉbÉOÇ≈âÊëúà íuÇí≤êÆ
        let isDragging = false;
        let startX, startY;
        let startPosX, startPosY;

        function initImageDrag() {
            const container = document.getElementById('mainVisualContainer');
            const image = document.getElementById('previewMainVisual');

            if (!container || !image) return;

            // ä˘ë∂ÇÃÉCÉxÉìÉgÉäÉXÉiÅ[ÇçÌèú
            const newContainer = container.cloneNode(true);
            container.parentNode.replaceChild(newContainer, container);

            newContainer.addEventListener('mousedown', (e) => {
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                startPosX = imagePositionX;
                startPosY = imagePositionY;
                newContainer.style.cursor = 'grabbing';
                e.preventDefault();
            });

            // mousemoveÇ∆mouseupÉCÉxÉìÉgÇÕàÍìxÇæÇØí«â¡
            if (!window.imageDragListenersAdded) {
                window.imageDragListenersAdded = true;

                document.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;

                    const containerRect = document.getElementById('mainVisualContainer')?.getBoundingClientRect();
                    if (!containerRect) return;

                    // É}ÉEÉXÇÃà⁄ìÆó ÇåvéZ
                    const deltaX = (e.clientX - startX) / containerRect.width * 100;
                    const deltaY = (e.clientY - startY) / containerRect.height * 100;

                    // â°ï˚å¸ÇÃà⁄ìÆÅiä¥ìxÇí≤êÆÇµÇƒà⁄ìÆÇµÇ‚Ç∑Ç≠Ç∑ÇÈÅj
                    const sensitivityX = 1.0;
                    imagePositionX = Math.max(0, Math.min(100, startPosX - deltaX * sensitivityX));

                    // ècï˚å¸ÇÃà⁄ìÆ
                    const sensitivityY = 1.0;
                    imagePositionY = Math.max(0, Math.min(100, startPosY - deltaY * sensitivityY));

                    updateImagePosition();
                });

                document.addEventListener('mouseup', () => {
                    if (isDragging) {
                        isDragging = false;
                        const newContainer = document.getElementById('mainVisualContainer');
                        if (newContainer) newContainer.style.cursor = 'move';
                    }
                });
            }
        }

        // âÊëúÉYÅ[ÉÄí≤êÆ
        function adjustImageZoom(value) {
            const image = document.getElementById('previewMainVisual');
            if (image) {
                currentZoom = parseInt(value);
                const scale = currentZoom / 100;
                image.style.transform = `scale(${scale})`;
                // ÉYÅ[ÉÄïœçXå„Ç‡à íuÇÕà€éù
            }
        }

        // âÊëúñæìxí≤êÆ
        function adjustImageOpacity(value) {
            const overlay = document.querySelector('#mainVisualSection .absolute.inset-0');
            if (overlay) {
                const opacity = (100 - value) / 100;
                overlay.style.background = `linear-gradient(to bottom, transparent, transparent, rgba(0,0,0,${opacity * 0.5}))`;
            }
        }

        // âÊëúí≤êÆÉpÉlÉãÇÃï\é¶êÿÇËë÷Ç¶
        function toggleImageControls() {
            const controls = document.getElementById('visualControls');
            if (controls) {
                controls.classList.toggle('hidden');
            }
        }

        // ï∂éöêFêÿÇËë÷Ç¶
        function adjustTextColor(color) {
            currentTextColor = color;
            const overlayTexts = document.querySelectorAll('#mainVisualSection .absolute.bottom-0 *');

            overlayTexts.forEach(el => {
                if (color === 'black') {
                    el.style.color = '#1f2937';
                    el.classList.remove('text-white');
                    el.classList.add('text-gray-800');
                } else {
                    el.style.color = 'white';
                    el.classList.remove('text-gray-800');
                    el.classList.add('text-white');
                }
            });

            // É{É^ÉìÇÃå©ÇΩñ⁄ÇçXêV
            const whiteBtn = document.getElementById('textColorWhite');
            const blackBtn = document.getElementById('textColorBlack');

            if (color === 'white') {
                whiteBtn.classList.add('border-blue-500');
                whiteBtn.classList.remove('border-gray-800');
                blackBtn.classList.remove('border-blue-500');
                blackBtn.classList.add('border-gray-300');
            } else {
                blackBtn.classList.add('border-blue-500');
                blackBtn.classList.remove('border-gray-300');
                whiteBtn.classList.remove('border-blue-500');
                whiteBtn.classList.add('border-gray-800');
            }
        }

        // ÉMÉÉÉâÉäÅ[âÊëúîzóÒ
        let galleryImages = [];
        let galleryFilesToUpload = []; // ï€ë∂É{É^Éìâüâ∫éûÇ…ÉAÉbÉvÉçÅ[ÉhÇ∑ÇÈÉtÉ@ÉCÉã

        // ÉhÉâÉbÉO&ÉhÉçÉbÉvê›íË
        function setupGalleryDragDrop() {
            const galleryList = document.getElementById('photoGalleryList');
            if (!galleryList) return;

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                galleryList.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                galleryList.addEventListener(eventName, () => {
                    galleryList.classList.add('border-blue-500', 'bg-blue-50');
                }, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                galleryList.addEventListener(eventName, () => {
                    galleryList.classList.remove('border-blue-500', 'bg-blue-50');
                }, false);
            });

            galleryList.addEventListener('drop', (e) => {
                const dt = e.dataTransfer;
                const files = dt.files;
                handleGalleryFiles(files);
            }, false);
        }

        // ÉtÉ@ÉCÉãèàóùÇã§í âª
        function handleGalleryFiles(files) {
            const galleryList = document.getElementById('photoGalleryList');
            const currentImages = galleryList.querySelectorAll('.gallery-item').length;

            if (currentImages >= 20) {
                showNotification('é ê^ÉMÉÉÉâÉäÅ[è„å¿', 'é ê^ÉMÉÉÉâÉäÅ[ÇÕç≈ëÂ20ñáÇ‹Ç≈Ç≈Ç∑ÅBÇ±ÇÍà»è„í«â¡Ç≈Ç´Ç‹ÇπÇÒÅB', 'error');
                return;
            }

            const remainingSlots = 20 - currentImages;
            const filesToAdd = Array.from(files).slice(0, remainingSlots);

            if (files.length > remainingSlots) {
                showNotification('é ê^ÉMÉÉÉâÉäÅ[êßå¿', `écÇË${remainingSlots}ñáÇ‹Ç≈í«â¡â¬î\Ç≈Ç∑ÅBç≈èâÇÃ${remainingSlots}ñáÇÃÇ›í«â¡ÇµÇ‹Ç∑ÅB`, 'warning');
            }

            filesToAdd.forEach(file => {
                if (file && file.type.startsWith('image/')) {
                    const imageId = 'gallery_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const localUrl = URL.createObjectURL(file);
                    const addButton = galleryList.querySelector('.border-dashed');

                    const imageDiv = document.createElement('div');
                    imageDiv.className = 'relative group gallery-item';
                    imageDiv.id = imageId;
                    imageDiv.innerHTML = `
                        <img src="${localUrl}" class="w-full h-24 object-cover rounded-lg" alt="${file.name}">
                        <button type="button" onclick="removeGalleryImage('${imageId}')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    `;

                    galleryList.insertBefore(imageDiv, addButton);

                    const reader = new FileReader();
                    reader.onload = function(e) {
                        galleryFilesToUpload.push({
                            id: imageId,
                            base64Data: e.target.result,
                            fileName: file.name
                        });
                        console.log('[handleGalleryFiles] File ready for upload on save:', file.name);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // ÉMÉÉÉâÉäÅ[âÊëúí«â¡ÅiÉvÉåÉrÉÖÅ[ÇÃÇ›ÅAï€ë∂ÇÕå„Ç≈Åj
        function handleGalleryUpload(event) {
            handleGalleryFiles(event.target.files);
            event.target.value = '';
        }


        // ÉMÉÉÉâÉäÅ[ÉfÅ[É^Çï€ë∂
        async function saveGalleryData() {
            try {
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: JSON.stringify({
                        action: 'saveGalleryData',
                        merchantId: window.merchantId,
                        galleryData: galleryImages
                    })
                });

                const result = await response.json();
                if (!result.success) {
                    console.error('ÉMÉÉÉâÉäÅ[ï€ë∂ÉGÉâÅ[:', result.error);
                }
            } catch (error) {
                console.error('ÉMÉÉÉâÉäÅ[ï€ë∂í êMÉGÉâÅ[:', error);
            }
        }

        // ÉMÉÉÉâÉäÅ[âÊëúÇçÌèú
        function removeGalleryImage(imageId) {
            const element = document.getElementById(imageId);
            if (element) {
                element.remove();
                galleryImages = galleryImages.filter(img => img.id !== imageId);
                showNotification('çÌèúäÆóπ', 'ÉMÉÉÉâÉäÅ[âÊëúÇçÌèúÇµÇ‹ÇµÇΩ');
                updateGalleryPreview();
            }
        }

        // ÉJÉãÅ[ÉZÉãä«óùïœêî
        let currentGalleryIndex = 0;
        let currentExampleIndex = 0;

        // ÉvÉåÉrÉÖÅ[ÇÃÉMÉÉÉâÉäÅ[ÇçXêVÅiÉJÉãÅ[ÉZÉãéÆÅj
        function updateGalleryPreview() {
            const previewGalleryList = document.getElementById('previewGalleryList');
            const indicators = document.getElementById('galleryIndicators');

            if (previewGalleryList && galleryImages.length > 0) {
                // ñ≥å¿ÉãÅ[ÉvópÇ…ï°êªÇçÏê¨
                const extendedImages = [...galleryImages, ...galleryImages, ...galleryImages];

                previewGalleryList.innerHTML = extendedImages.map((img, index) => `
                    <div class="flex-shrink-0 w-72 aspect-square overflow-hidden rounded-lg cursor-pointer" onclick="openImageModal('${img.src}', '${img.name || 'ÉMÉÉÉâÉäÅ[âÊëú'}')">
                        <img src="${img.src}" alt="${img.name}" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                    </div>
                `).join('');

                // ÉCÉìÉWÉPÅ[É^Å[ê∂ê¨
                if (indicators) {
                    indicators.innerHTML = galleryImages.map((_, index) => `
                        <button onclick="goToGalleryImage(${index})" class="w-2 h-2 rounded-full transition ${index === currentGalleryIndex % galleryImages.length ? 'bg-blue-600' : 'bg-gray-300'}"></button>
                    `).join('');
                }

                document.getElementById('preview-gallery').style.display = 'block';
                currentGalleryIndex = galleryImages.length; // ñ≥å¿ÉãÅ[ÉvÇÃíÜâõÇ©ÇÁäJén
                updateGalleryCarouselPosition();
            } else {
                document.getElementById('preview-gallery').style.display = 'none';
            }
        }

        // ÉMÉÉÉâÉäÅ[ÉJÉãÅ[ÉZÉãÉXÉNÉçÅ[Éã
        function scrollGallery(direction) {
            if (galleryImages.length === 0) return;

            if (direction === 'left') {
                currentGalleryIndex--;
            } else {
                currentGalleryIndex++;
            }

            updateGalleryCarouselPosition();
        }

        // ì¡íËÇÃÉMÉÉÉâÉäÅ[âÊëúÇ÷à⁄ìÆ
        function goToGalleryImage(index) {
            currentGalleryIndex = index + galleryImages.length;
            updateGalleryCarouselPosition();
        }

        // ÉMÉÉÉâÉäÅ[ÉJÉãÅ[ÉZÉãà íuçXêV
        function updateGalleryCarouselPosition() {
            const carousel = document.getElementById('previewGalleryList');
            const indicators = document.getElementById('galleryIndicators');

            if (carousel && galleryImages.length > 0) {
                const cardWidth = 288 + 16; // w-72 (18rem) + gap-4 (1rem)
                const offset = galleryImages.length * cardWidth;

                // ñ≥å¿ÉãÅ[ÉvÇÃÇΩÇﬂÇÃà íuí≤êÆ
                const position = -currentGalleryIndex * cardWidth - offset;
                carousel.style.transform = `translateX(${position}px)`;

                // ÉXÉÄÅ[ÉYÇ»ñ≥å¿ÉãÅ[Év
                if (currentGalleryIndex < 0) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentGalleryIndex = galleryImages.length - 1;
                        const newPosition = -currentGalleryIndex * cardWidth - offset;
                        carousel.style.transform = `translateX(${newPosition}px)`;
                        setTimeout(() => {
                            carousel.style.transition = 'transform 300ms';
                        }, 50);
                    }, 300);
                } else if (currentGalleryIndex >= galleryImages.length * 2) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentGalleryIndex = galleryImages.length;
                        const newPosition = -currentGalleryIndex * cardWidth - offset;
                        carousel.style.transform = `translateX(${newPosition}px)`;
                        setTimeout(() => {
                            carousel.style.transition = 'transform 300ms';
                        }, 50);
                    }, 300);
                }

                // ÉCÉìÉWÉPÅ[É^Å[çXêV
                if (indicators) {
                    const actualIndex = ((currentGalleryIndex % galleryImages.length) + galleryImages.length) % galleryImages.length;
                    indicators.querySelectorAll('button').forEach((btn, index) => {
                        btn.className = `w-2 h-2 rounded-full transition ${index === actualIndex ? 'bg-blue-600' : 'bg-gray-300'}`;
                    });
                }
            }
        }

        // é{çHéñó·îzóÒ
        let constructionExamples = [];
        let exampleIdCounter = 0;

        // é{çHéñó·Çí«â¡
        function addConstructionExample() {
            const exampleId = 'example_' + (++exampleIdCounter);
            const examplesList = document.getElementById('constructionExamplesList');

            const newExample = {
                id: exampleId,
                title: '',
                buildingAge: '',
                content: '',
                price: '',
                beforeImage: null,
                afterImage: null
            };
            constructionExamples.push(newExample);

            const exampleDiv = document.createElement('div');
            exampleDiv.className = 'border rounded-lg p-4';
            exampleDiv.id = exampleId;
            exampleDiv.innerHTML = `
                <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="é{çHÉ^ÉCÉgÉãÅió·ÅFåÀåöÇƒäOï«ìhëïÅj" onchange="updateConstructionExample('${exampleId}', 'title', this.value)">
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <div>
                        <label class="text-xs text-gray-600 mb-1 block">ízîNêî</label>
                        <div class="flex items-center">
                            <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" onchange="updateConstructionExample('${exampleId}', 'buildingAge', this.value)">
                            <span class="ml-2 text-sm text-gray-600">îN</span>
                        </div>
                    </div>
                    <div>
                        <label class="text-xs text-gray-600 mb-1 block">é{çHã‡äzÅiñúâ~Åj</label>
                        <div class="flex items-center">
                            <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" onchange="updateConstructionExample('${exampleId}', 'price', this.value)">
                            <span class="ml-2 text-sm text-gray-600">ñúâ~</span>
                        </div>
                    </div>
                </div>
                <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="é{çHì‡óeÅió·ÅFÉVÉäÉRÉììhóøÇ…ÇÊÇÈ3âÒìhÇËÅAêFÂÚÇπÇ∆âòÇÍÇâè¡Åj" onchange="updateConstructionExample('${exampleId}', 'content', this.value)"></textarea>

                <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[âÊëú -->
                <div class="grid grid-cols-2 gap-4 mb-2">
                    <div>
                        <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHëOÅiBeforeÅj</label>
                        <input type="file" id="beforeImage_${exampleId}" accept="image/*" style="display: none;" onchange="handleExampleImage('${exampleId}', 'before', event)">
                        <div id="beforePreview_${exampleId}" class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500" onclick="document.getElementById('beforeImage_${exampleId}').click()">
                            <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <span class="text-xs text-gray-500">ÉNÉäÉbÉNÇµÇƒâÊëúÇëIë</span>
                        </div>
                    </div>
                    <div>
                        <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHå„ÅiAfterÅj</label>
                        <input type="file" id="afterImage_${exampleId}" accept="image/*" style="display: none;" onchange="handleExampleImage('${exampleId}', 'after', event)">
                        <div id="afterPreview_${exampleId}" class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500" onclick="document.getElementById('afterImage_${exampleId}').click()">
                            <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <span class="text-xs text-gray-500">ÉNÉäÉbÉNÇµÇƒâÊëúÇëIë</span>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end">
                    <button onclick="removeConstructionExample('${exampleId}')" class="text-red-600 hover:text-red-800 text-sm">
                        <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        Ç±ÇÃéñó·ÇçÌèú
                    </button>
                </div>
            `;

            examplesList.appendChild(exampleDiv);
        }

        // é{çHéñó·ÇçXêV
        function updateConstructionExample(exampleId, field, value) {
            const example = constructionExamples.find(e => e.id === exampleId);
            if (example) {
                example[field] = value;
                updateExamplesPreview();
            }
        }

        // é{çHéñó·ÇÃâÊëúÇèàóù
        function handleExampleImage(exampleId, type, event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const example = constructionExamples.find(ex => ex.id === exampleId);
                    if (example) {
                        if (type === 'before') {
                            example.beforeImage = e.target.result;
                            // ÉvÉåÉrÉÖÅ[ÇâÊëúÇ…íuÇ´ä∑Ç¶
                            const preview = document.getElementById(`beforePreview_${exampleId}`);
                            if (preview) {
                                preview.innerHTML = `<img src="${e.target.result}" class="w-full h-32 object-cover rounded" alt="é{çHëO">`;
                            }
                        } else {
                            example.afterImage = e.target.result;
                            // ÉvÉåÉrÉÖÅ[ÇâÊëúÇ…íuÇ´ä∑Ç¶
                            const preview = document.getElementById(`afterPreview_${exampleId}`);
                            if (preview) {
                                preview.innerHTML = `<img src="${e.target.result}" class="w-full h-32 object-cover rounded" alt="é{çHå„">`;
                            }
                        }
                        updateExamplesPreview();
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        // é{çHéñó·ÇçÌèú
        function removeConstructionExample(exampleId) {
            const element = document.getElementById(exampleId);
            if (element) {
                element.remove();
                constructionExamples = constructionExamples.filter(e => e.id !== exampleId);
                showNotification('çÌèúäÆóπ', 'é{çHéñó·ÇçÌèúÇµÇ‹ÇµÇΩ');
                updateExamplesPreview();
            }
        }

        // ÉvÉåÉrÉÖÅ[ÇÃé{çHéñó·ÇçXêVÅiÉJÉãÅ[ÉZÉãéÆÅj
        function updateExamplesPreview() {
            const previewExamplesList = document.getElementById('previewExamplesList');
            const indicators = document.getElementById('examplesIndicators');

            if (previewExamplesList) {
                const validExamples = constructionExamples.filter(e => (e.title || e.content) && (e.beforeImage || e.afterImage));

                if (validExamples.length > 0) {
                    // ñ≥å¿ÉãÅ[ÉvópÇ…ï°êªÇçÏê¨
                    const extendedExamples = [...validExamples, ...validExamples, ...validExamples];

                    previewExamplesList.innerHTML = extendedExamples.map(example => `
                        <div class="flex-shrink-0 w-full md:w-96 bg-white rounded-lg shadow-lg border overflow-hidden">
                            <div class="relative">
                                ${(example.beforeImage && example.afterImage) ? `
                                    <!-- ÉrÉtÉHÅ[ÉAÉtÉ^Å[î‰är -->
                                    <div class="grid grid-cols-2 relative">
                                        <div class="relative cursor-pointer" onclick="openImageModal('${example.beforeImage}', 'é{çHëO')">
                                            <img src="${example.beforeImage}" alt="é{çHëO" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">
                                                BEFORE
                                            </div>
                                        </div>
                                        <div class="relative cursor-pointer" onclick="openImageModal('${example.afterImage}', 'é{çHå„')">
                                            <img src="${example.afterImage}" alt="é{çHå„" class="w-full h-48 object-cover hover:opacity-90 transition">
                                            <div class="absolute top-2 left-2 bg-blue-600 bg-opacity-90 text-white px-2 py-1 text-xs rounded">
                                                AFTER
                                            </div>
                                        </div>
                                    </div>
                                ` : (example.beforeImage || example.afterImage) ? `
                                    <!-- ï–ï˚ÇÃÇ›ÇÃâÊëú -->
                                    <div class="relative cursor-pointer" onclick="openImageModal('${example.beforeImage || example.afterImage}', '${example.beforeImage ? 'é{çHëO' : 'é{çHå„'}')">
                                        <img src="${example.beforeImage || example.afterImage}" alt="${example.beforeImage ? 'é{çHëO' : 'é{çHå„'}" class="w-full h-48 object-cover hover:opacity-90 transition">
                                    </div>
                                ` : ''}
                            </div>
                            <div class="p-4">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-900">${example.title ? `${example.buildingAge ? `íz${example.buildingAge}îN ` : ''}${example.title}` : 'é{çHéñó·'}</h4>
                                    ${example.price ? `
                                        <div class="text-right">
                                            <div class="text-xs font-medium text-gray-500">çHéñã‡äz</div>
                                            <span class="inline-block text-red-600 font-bold text-lg">
                                                ${Number(example.price).toLocaleString()}ñúâ~
                                            </span>
                                        </div>
                                    ` : ''}
                                </div>
                                <p class="text-sm text-gray-600">${example.content || 'è⁄ç◊èÓïÒ'}</p>
                            </div>
                        </div>
                    `).join('');

                    // ÉCÉìÉWÉPÅ[É^Å[ê∂ê¨
                    if (indicators) {
                        indicators.innerHTML = validExamples.map((_, index) => `
                            <button onclick="goToExample(${index})" class="w-2 h-2 rounded-full transition ${index === currentExampleIndex % validExamples.length ? 'bg-blue-600' : 'bg-gray-300'}"></button>
                        `).join('');
                    }

                    document.getElementById('preview-examples').style.display = 'block';
                    currentExampleIndex = validExamples.length;
                    updateExamplesCarouselPosition();
                } else {
                    document.getElementById('preview-examples').style.display = 'none';
                }
            }
        }

        // é{çHéñó·ÉJÉãÅ[ÉZÉãÉXÉNÉçÅ[Éã
        function scrollExamples(direction) {
            const validExamples = constructionExamples.filter(e => (e.title || e.content) && (e.beforeImage || e.afterImage));
            if (validExamples.length === 0) return;

            if (direction === 'left') {
                currentExampleIndex--;
            } else {
                currentExampleIndex++;
            }

            updateExamplesCarouselPosition();
        }

        // ì¡íËÇÃé{çHéñó·Ç÷à⁄ìÆ
        function goToExample(index) {
            const validExamples = constructionExamples.filter(e => (e.title || e.content) && (e.beforeImage || e.afterImage));
            currentExampleIndex = index + validExamples.length;
            updateExamplesCarouselPosition();
        }

        // é{çHéñó·ÉJÉãÅ[ÉZÉãà íuçXêV
        function updateExamplesCarouselPosition() {
            const carousel = document.getElementById('previewExamplesList');
            const indicators = document.getElementById('examplesIndicators');
            const validExamples = constructionExamples.filter(e => (e.title || e.content) && (e.beforeImage || e.afterImage));

            if (carousel && validExamples.length > 0) {
                const cardWidth = carousel.firstElementChild ? carousel.firstElementChild.offsetWidth + 16 : 400;
                const offset = validExamples.length * cardWidth;

                // ñ≥å¿ÉãÅ[ÉvÇÃÇΩÇﬂÇÃà íuí≤êÆ
                const position = -currentExampleIndex * cardWidth - offset;
                carousel.style.transform = `translateX(${position}px)`;

                // ÉXÉÄÅ[ÉYÇ»ñ≥å¿ÉãÅ[Év
                if (currentExampleIndex < 0) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentExampleIndex = validExamples.length - 1;
                        const newPosition = -currentExampleIndex * cardWidth - offset;
                        carousel.style.transform = `translateX(${newPosition}px)`;
                        setTimeout(() => {
                            carousel.style.transition = 'transform 300ms';
                        }, 50);
                    }, 300);
                } else if (currentExampleIndex >= validExamples.length * 2) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentExampleIndex = validExamples.length;
                        const newPosition = -currentExampleIndex * cardWidth - offset;
                        carousel.style.transform = `translateX(${newPosition}px)`;
                        setTimeout(() => {
                            carousel.style.transition = 'transform 300ms';
                        }, 50);
                    }, 300);
                }

                // ÉCÉìÉWÉPÅ[É^Å[çXêV
                if (indicators) {
                    const actualIndex = ((currentExampleIndex % validExamples.length) + validExamples.length) % validExamples.length;
                    indicators.querySelectorAll('button').forEach((btn, index) => {
                        btn.className = `w-2 h-2 rounded-full transition ${index === actualIndex ? 'bg-blue-600' : 'bg-gray-300'}`;
                    });
                }
            }
        }

        // ÉGÉäÉAëIëä÷òAä÷êî
        const areaSelectionData = {
            prefectures: [],
            cities: {},
            priorities: [],
            totalCount: 0
        };
        const maxPrefectures = 5;
        const maxPriorityAreas = 3;

        // ìsìπï{åßÉäÉXÉg
        const allPrefectures = [
            'ñkäCìπ', 'ê¬êXåß', 'ä‚éËåß', 'ã{èÈåß', 'èHìcåß', 'éRå`åß', 'ïüìáåß',
            'àÔèÈåß', 'ì»ñÿåß', 'åQînåß', 'çÈã åß', 'êÁótåß', 'ìåãûìs', 'ê_ìﬁêÏåß',
            'êVäÉåß', 'ïxéRåß', 'êŒêÏåß', 'ïüà‰åß', 'éRóúåß', 'í∑ñÏåß', 'äÚïååß',
            'ê√â™åß', 'à§ímåß', 'éOèdåß', 'é†âÍåß', 'ãûìsï{', 'ëÂç„ï{', 'ï∫å…åß',
            'ìﬁó«åß', 'òaâÃéRåß', 'íπéÊåß', 'ìáç™åß', 'â™éRåß', 'çLìáåß', 'éRå˚åß',
            'ìøìáåß', 'çÅêÏåß', 'à§ïQåß', 'çÇímåß', 'ïüâ™åß', 'ç≤âÍåß', 'í∑çËåß',
            'åFñ{åß', 'ëÂï™åß', 'ã{çËåß', 'é≠éôìáåß', 'â´ìÍåß'
        ];

        // ésãÊí¨ë∫ÉfÅ[É^ÉxÅ[ÉX
        // ésãÊí¨ë∫ÉfÅ[É^ÉxÅ[ÉXÅiéÂóv11ìsï{åßÇÃäÆëSÉfÅ[É^Åj
        const cityDatabase = {
            'ìåãûìs': [
                'êÁë„ìcãÊ', 'íÜâõãÊ', 'ç`ãÊ', 'êVèhãÊ', 'ï∂ãûãÊ', 'ë‰ìåãÊ',
                'ñnìcãÊ', 'ç]ìåãÊ', 'ïiêÏãÊ', 'ñ⁄çïãÊ', 'ëÂìcãÊ', 'ê¢ìcíJãÊ',
                'èaíJãÊ', 'íÜñÏãÊ', 'êôï¿ãÊ', 'ñLìáãÊ', 'ñkãÊ', 'çrêÏãÊ',
                'î¬ã¥ãÊ', 'ó˚înãÊ', 'ë´óßãÊ', 'äãè¸ãÊ', 'ç]åÀêÏãÊ',
                'î™â§éqés', 'óßêÏés', 'ïêë†ñÏés', 'éOëÈés', 'ê¬î~és', 'ï{íÜés',
                'è∫ìáés', 'í≤ïzés', 'í¨ìcés', 'è¨ã‡à‰és', 'è¨ïΩés', 'ì˙ñÏés',
                'ìåë∫éRés', 'çëï™éõés', 'çëóßés', 'ïüê∂és', 'çùç]és', 'ìåëÂòaés',
                'ê¥ê£és', 'ìåãvóØïƒés', 'ïêë†ë∫éRés', 'ëΩñÄés', 'àÓèÈés', 'âHë∫és',
                'Ç†Ç´ÇÈñÏés', 'êºìåãûés', 'êêï‰í¨', 'ì˙ÇÃèoí¨', 'ûwå¥ë∫', 'âúëΩñÄí¨'
            ],
            'ê_ìﬁêÏåß': [
                'â°ïlésíﬂå©ãÊ', 'â°ïlésê_ìﬁêÏãÊ', 'â°ïlésêºãÊ', 'â°ïlésíÜãÊ',
                'â°ïlésìÏãÊ', 'â°ïlésï€ìyÉPíJãÊ', 'â°ïlésàÈéqãÊ', 'â°ïlésã‡ëÚãÊ',
                'â°ïlésç`ñkãÊ', 'â°ïlésåÀíÀãÊ', 'â°ïlésç`ìÏãÊ', 'â°ïlésàÆãÊ',
                'â°ïlésóŒãÊ', 'â°ïlésê£íJãÊ', 'â°ïlésâhãÊ', 'â°ïlésêÚãÊ',
                'â°ïlésê¬ótãÊ', 'â°ïlésìsí}ãÊ', 'êÏçËésêÏçËãÊ', 'êÏçËésçKãÊ',
                'êÏçËésíÜå¥ãÊ', 'êÏçËésçÇí√ãÊ', 'êÏçËésëΩñÄãÊ', 'êÏçËésã{ëOãÊ',
                'êÏçËésñÉê∂ãÊ', 'ëäñÕå¥ésóŒãÊ', 'ëäñÕå¥ésíÜâõãÊ', 'ëäñÕå¥ésìÏãÊ',
                'â°ê{âÍés', 'ïΩíÀés', 'äôëqés', 'ì°ëÚés', 'è¨ìcå¥és', 'äùÉñçËés',
                'êÄéqés', 'éOâYés', 'ê`ñÏés', 'å˙ñÿés', 'ëÂòaés', 'à…ê®å¥és',
                'äCòVñºés', 'ç¿ä‘és', 'ìÏë´ïøés', 'àªê£és'
            ],
            'çÈã åß': [
                'Ç≥Ç¢ÇΩÇ‹ésêºãÊ', 'Ç≥Ç¢ÇΩÇ‹ésñkãÊ', 'Ç≥Ç¢ÇΩÇ‹ésëÂã{ãÊ', 'Ç≥Ç¢ÇΩÇ‹éså©è¿ãÊ',
                'Ç≥Ç¢ÇΩÇ‹ésíÜâõãÊ', 'Ç≥Ç¢ÇΩÇ‹ésç˜ãÊ', 'Ç≥Ç¢ÇΩÇ‹ésâYòaãÊ', 'Ç≥Ç¢ÇΩÇ‹ésìÏãÊ',
                'Ç≥Ç¢ÇΩÇ‹ésóŒãÊ', 'Ç≥Ç¢ÇΩÇ‹ésä‚íŒãÊ', 'êÏâzés', 'åFíJés', 'êÏå˚és',
                'çsìcés', 'íÅïÉés', 'èäëÚés', 'î—î\és', 'â¡ê{és', 'ñ{èØés',
                'ìåèºéRés', 'ètì˙ïîés', 'ã∑éRés', 'âHê∂és', 'çÉëÉés', 'ê[íJés',
                'è„îˆés', 'ëêâ¡és', 'âzíJés', 'ònés', 'åÀìcés', 'ì¸ä‘és',
                'í©â‡és', 'éuñÿés', 'òaåıés', 'êVç¿és', 'â±êÏés', 'ãväÏés',
                'ñkñ{és', 'î™í™és', 'ïxémå©és', 'éOãΩés', 'ò@ìcés', 'ç‚åÀés',
                'çKéËés', 'íﬂÉñìáés', 'ì˙çÇés', 'ãgêÏés', 'Ç”Ç∂Ç›ñÏés', 'îíâ™és'
            ],
            'êÁótåß': [
                'êÁótésíÜâõãÊ', 'êÁótésâ‘å©êÏãÊ', 'êÁótésàÓñ—ãÊ', 'êÁótésé·ótãÊ',
                'êÁótésóŒãÊ', 'êÁótésî¸ïlãÊ', 'í∂éqés', 'ésêÏés', 'ëDã¥és',
                'äŸéRés', 'ñÿçXí√és', 'èºåÀés', 'ñÏìcés', 'ñŒå¥és', 'ê¨ìcés',
                'ç≤ëqés', 'ìåã‡és', 'àÆés', 'èKéuñÏés', 'îêés', 'èüâYés',
                'éså¥és', 'ó¨éRés', 'î™êÁë„és', 'â‰ë∑éqés', 'äõêÏés', 'äôÉPíJés',
                'åNí√és', 'ïxí√és', 'âYà¿és', 'éläXìπés', 'ë≥ÉPâYés', 'î™äXés',
                'àÛêºés', 'îíà‰és', 'ïxó¢és', 'ìÏñ[ëçés', 'ëxç∫és', 'çÅéÊés',
                'éRïêés', 'Ç¢Ç∑Ç›és', 'ëÂñ‘îíó¢és'
            ],
            'äÚïååß': [
                'äÚïåés', 'ëÂä_és', 'çÇéRés', 'ëΩé°å©és', 'ä÷és', 'íÜí√êÏés',
                'î¸îZés', 'êêòQés', 'âHìáés', 'åbìﬂés', 'î¸îZâ¡ñŒés', 'ìyäÚés',
                'äeñ±å¥és', 'â¬éôés', 'éRåßés', 'êêï‰és', 'îÚëÀés', 'ñ{ëÉés',
                'åSè„és', 'â∫òCés', 'äCí√és'
            ],
            'à§ímåß': [
                'ñºå√âÆésêÁéÌãÊ', 'ñºå√âÆésìåãÊ', 'ñºå√âÆésñkãÊ', 'ñºå√âÆésêºãÊ',
                'ñºå√âÆésíÜë∫ãÊ', 'ñºå√âÆésíÜãÊ', 'ñºå√âÆésè∫òaãÊ', 'ñºå√âÆésêêï‰ãÊ',
                'ñºå√âÆésîMìcãÊ', 'ñºå√âÆésíÜêÏãÊ', 'ñºå√âÆésç`ãÊ', 'ñºå√âÆésìÏãÊ',
                'ñºå√âÆéséÁéRãÊ', 'ñºå√âÆésóŒãÊ', 'ñºå√âÆésñºìåãÊ', 'ñºå√âÆésìVîíãÊ',
                'ñLã¥és', 'â™çËés', 'àÍã{és', 'ê£åÀés', 'îºìcés', 'ètì˙à‰és',
                'ñLêÏés', 'í√ìáés', 'ï…ìÏés', 'ä†íJés', 'ñLìcés', 'à¿èÈés',
                'êºîˆés', 'äóåSés', 'å¢éRés', 'èÌääés', 'ç]ìÏés', 'è¨ñqés',
                'àÓëÚés', 'êVèÈés', 'ìåäCés', 'ëÂï{és', 'ímëΩés', 'ímóßés',
                'îˆí£àÆés', 'çÇïlés', 'ä‚ëqés', 'ñLñæés', 'ì˙êiés', 'ìcå¥és',
                'à§êºés', 'ê¥ê{és', 'ñkñºå√âÆés', 'ñÌïxés', 'Ç›ÇÊÇµés', 'Ç†Ç‹és',
                'í∑ãvéËés'
            ],
            'ëÂç„ï{': [
                'ëÂç„ésìsìáãÊ', 'ëÂç„ésïüìáãÊ', 'ëÂç„ésçüâ‘ãÊ', 'ëÂç„ésêºãÊ',
                'ëÂç„ésç`ãÊ', 'ëÂç„ésëÂê≥ãÊ', 'ëÂç„ésìVâ§éõãÊ', 'ëÂç„ésòQë¨ãÊ',
                'ëÂç„ésêºóÑêÏãÊ', 'ëÂç„ésìåóÑêÏãÊ', 'ëÂç„ésìåê¨ãÊ', 'ëÂç„ésê∂ñÏãÊ',
                'ëÂç„ésàÆãÊ', 'ëÂç„ésèÈìåãÊ', 'ëÂç„ésà¢î{ñÏãÊ', 'ëÂç„ésèZãgãÊ',
                'ëÂç„ésìåèZãgãÊ', 'ëÂç„ésêºê¨ãÊ', 'ëÂç„ésóÑêÏãÊ', 'ëÂç„ésíﬂå©ãÊ',
                'ëÂç„ésèZîVç]ãÊ', 'ëÂç„ésïΩñÏãÊ', 'ëÂç„ésñkãÊ', 'ëÂç„ésíÜâõãÊ',
                'ç‰ésç‰ãÊ', 'ç‰ésíÜãÊ', 'ç‰ésìåãÊ', 'ç‰ésêºãÊ', 'ç‰ésìÏãÊ',
                'ç‰ésñkãÊ', 'ç‰ésî¸å¥ãÊ', 'ä›òaìcés', 'ñLíÜés', 'írìcés',
                'êÅìcés', 'êÚëÂí√és', 'çÇíŒés', 'äLíÀés', 'éÁå˚és', 'ñáï˚és',
                'àÔñÿés', 'î™îˆés', 'êÚç≤ñÏés', 'ïxìcó—és', 'êQâÆêÏés', 'âÕì‡í∑ñÏés',
                'èºå¥és', 'ëÂìåés', 'òaêÚés', 'ñ•ñ és', 'îêå¥és', 'âHâgñÏés',
                'ñÂê^és', 'ê€í√és', 'çÇêŒés', 'ì°à‰éõés', 'ìåëÂç„és', 'êÚìÏés',
                'élûäìÎés', 'åñÏés', 'ëÂç„ã∑éRés', 'ç„ìÏés'
            ],
            'ãûìsï{': [
                'ãûìsésñkãÊ', 'ãûìsésè„ãûãÊ', 'ãûìsésç∂ãûãÊ', 'ãûìsésíÜãûãÊ',
                'ãûìsésìåéRãÊ', 'ãûìsésâ∫ãûãÊ', 'ãûìsésìÏãÊ', 'ãûìsésâEãûãÊ',
                'ãûìsésïöå©ãÊ', 'ãûìséséRâ»ãÊ', 'ãûìsésêºãûãÊ', 'ïüíméRés',
                'ïëíﬂés', 'àªïîés', 'âFé°és', 'ã{í√és', 'ãTâ™és', 'èÈózés',
                'å¸ì˙és', 'í∑â™ãûés', 'î™î¶és', 'ãûìcï”és', 'ãûíOå„és', 'ìÏíOés',
                'ñÿí√êÏés'
            ],
            'ï∫å…åß': [
                'ê_åÀésìåìÂãÊ', 'ê_åÀésìÂãÊ', 'ê_åÀésï∫å…ãÊ', 'ê_åÀésí∑ìcãÊ',
                'ê_åÀésê{ñÅãÊ', 'ê_åÀésêÇêÖãÊ', 'ê_åÀésñkãÊ', 'ê_åÀésíÜâõãÊ',
                'ê_åÀésêºãÊ', 'ïPòHés', 'ìÚçËés', 'ñæêŒés', 'êºã{és', 'èFñ{és',
                'à∞âÆés', 'à…íOés', 'ëäê∂és', 'ñLâ™és', 'â¡å√êÏés', 'ê‘ï‰és',
                'êºòeés', 'ïÛíÀés', 'éOñÿés', 'çÇçªés', 'êÏêºés', 'è¨ñÏés',
                'éOìcés', 'â¡êºés', 'íOîgé¬éRés', 'ó{ïÉés', 'íOîgés', 'ìÏÇ†ÇÌÇ∂és',
                'í©óàés', 'íWòHés', 'é≥àæés', 'â¡ìåés', 'ÇΩÇ¬ÇÃés'
            ],
            'ìﬁó«åß': [
                'ìﬁó«és', 'ëÂòaçÇìcés', 'ëÂòaåSéRés', 'ìVóùés', 'äÄå¥és', 'ç˜à‰és',
                'å‹ûäés', 'å‰èäés', 'ê∂ãÓés', 'çÅé≈és', 'äãèÈés', 'âFë…és'
            ],
            'à§ïQåß': [
                'èºéRés', 'ç°é°és', 'âFòaìáés', 'î™î¶ïlés', 'êVãèïlés', 'êºèés',
                'ëÂèFés', 'à…ó\és', 'élçëíÜâõés', 'êºó\és', 'ìåâ∑és'
            ]
        };

        // ÉfÉtÉHÉãÉgÇÃésãÊí¨ë∫ÉäÉXÉgÅiéÂóv10ésÅj- â¡ñøìXìoò^ÉVÉXÉeÉÄÇ∆ìØä˙
        const defaultCities = {
            'ñkäCìπ': ['éDñyés', 'îüäŸés', 'è¨íMés', 'àÆêÏés', 'é∫óñés', 'ã˙òHés', 'ë—çLés', 'ñkå©és', 'ó[í£és', 'ä‚å©ëÚés'],
            'ê¬êXåß': ['ê¬êXés', 'çOëOés', 'î™åÀés', 'çïêŒés', 'å‹èäêÏå¥és', 'è\òaìcés', 'éOëÚés', 'ÇﬁÇ¬és', 'Ç¬Ç™ÇÈés', 'ïΩêÏés'],
            'ä‚éËåß': ['ê∑â™és', 'ã{å√és', 'ëÂëDìnés', 'â‘ä™és', 'ñkè„és', 'ãvéúés', 'âìñÏés', 'àÍä÷és', 'ó§ëOçÇìcés', 'äòêŒés'],
            'ã{èÈåß': ['êÂë‰ésê¬ótãÊ', 'êÂë‰ésã{èÈñÏãÊ', 'êÂë‰ésé·ó—ãÊ', 'êÂë‰ésëæîíãÊ', 'êÂë‰ésêÚãÊ', 'êŒä™és', 'âñ‚}és', 'ãCêÂè¿és', 'îíêŒés', 'ñºéÊés'],
            'èHìcåß': ['èHìcés', 'î\ë„és', 'â°éËés', 'ëÂäŸés', 'íjé≠és', 'ìíëÚés', 'é≠äpés', 'óRóòñ{ëëés', 'äÉè„és', 'ëÂêÂés'],
            'éRå`åß': ['éRå`és', 'ïƒëÚés', 'íﬂâ™és', 'éìcés', 'êVèØés', 'ä¶âÕç]és', 'è„éRés', 'ë∫éRés', 'í∑à‰és', 'ìVì∂és'],
            'ïüìáåß': ['ïüìáés', 'âÔí√é·èºés', 'åSéRés', 'Ç¢ÇÌÇ´és', 'îíâÕés', 'ê{âÍêÏés', 'äÏëΩï˚és', 'ëäînés', 'ìÒñ{èºés', 'ìcë∫és']
        };

        // ésãÊí¨ë∫ÇÃéÊìæÅiâ¡ñøìXìoò^ÉVÉXÉeÉÄÇ∆ìØÇ∂ÉçÉWÉbÉNÅj
        function getCitiesForPrefecture(prefecture) {
            // Ç‹Ç∏äÆëSÉfÅ[É^ÇämîF
            if (cityDatabase[prefecture]) {
                return cityDatabase[prefecture];
            }
            // ÉfÉtÉHÉãÉgÇÃéÂóv10ésÇï‘Ç∑
            if (defaultCities[prefecture]) {
                return defaultCities[prefecture];
            }
            // äYìñÇ»ÇµÇÃèÍçáÇÕÅuëSàÊÅv
            return ['ëSàÊ'];
        }

        // ÉyÅ[ÉWì«Ç›çûÇ›éûÇ…ìsìπï{åßÉ{É^ÉìÇê∂ê¨
        document.addEventListener('DOMContentLoaded', function() {
            initializeAreaSelection();
        });

        // ÉGÉäÉAëIëÇèâä˙âª
        function initializeAreaSelection() {
            const grid = document.getElementById('allPrefecturesGrid');
            if (!grid) return;

            grid.innerHTML = allPrefectures.map(pref => `
                <button class="area-item p-2 bg-white border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors text-sm"
                        data-prefecture="${pref}"
                        onclick="togglePrefecture('${pref}')">
                    ${pref}
                </button>
            `).join('');
        }

        // ìsìπï{åßëIëÉgÉOÉã
        function togglePrefecture(prefecture) {
            const button = document.querySelector(`[data-prefecture="${prefecture}"]`);
            const isSelected = button.classList.contains('selected');

            if (isSelected) {
                // ëIëâèú
                button.classList.remove('selected', 'bg-blue-500', 'text-white');
                button.classList.add('bg-white');
                areaSelectionData.prefectures = areaSelectionData.prefectures.filter(p => p !== prefecture);
                delete areaSelectionData.cities[prefecture];
                areaSelectionData.priorities = areaSelectionData.priorities.filter(p => !p.startsWith(prefecture));
            } else {
                // ëIëè„å¿É`ÉFÉbÉN
                if (areaSelectionData.prefectures.length >= maxPrefectures) {
                    showNotification('è„å¿Çí¥Ç¶Ç‹ÇµÇΩ', `ìsìπï{åßÇÕç≈ëÂ${maxPrefectures}Ç¬Ç‹Ç≈ëIëâ¬î\Ç≈Ç∑`);
                    return;
                }
                // ëIëí«â¡
                button.classList.add('selected', 'bg-blue-500', 'text-white');
                button.classList.remove('bg-white');
                areaSelectionData.prefectures.push(prefecture);
                // ÉfÉtÉHÉãÉgÇ≈ëSésãÊí¨ë∫ÇëIë
                areaSelectionData.cities[prefecture] = getCitiesForPrefecture(prefecture);
            }

            updateAreaSelectionUI();
        }

        // ÉGÉäÉAëIëUIçXêV
        function updateAreaSelectionUI() {
            // ÉJÉEÉìÉgçXêV
            const prefCountEl = document.getElementById('selectedPrefCount');
            const cityCountEl = document.getElementById('selectedCityCount');

            if (prefCountEl) {
                prefCountEl.textContent = areaSelectionData.prefectures.length;
            }

            const totalCities = Object.values(areaSelectionData.cities).reduce((sum, cities) => sum + cities.length, 0);
            if (cityCountEl) {
                cityCountEl.textContent = totalCities;
            }
            areaSelectionData.totalCount = totalCities;

            // ésãÊí¨ë∫ëIëÉGÉäÉAÇÃï\é¶/îÒï\é¶
            const cityArea = document.getElementById('citySelectionArea');
            if (cityArea) {
                if (areaSelectionData.prefectures.length > 0) {
                    cityArea.classList.remove('hidden');
                    updateCitySelectionArea();
                } else {
                    cityArea.classList.add('hidden');
                }
            }

            // óDêÊÉGÉäÉAê›íËÇÃï\é¶/îÒï\é¶
            const priorityArea = document.getElementById('priorityArea');
            if (priorityArea) {
                if (totalCities > 0) {
                    priorityArea.classList.remove('hidden');
                    updatePriorityArea();
                } else {
                    priorityArea.classList.add('hidden');
                }
            }

            // ämîFÉ{É^ÉìÇÃóLå¯/ñ≥å¯
            const confirmBtn = document.getElementById('areaConfirmBtn');
            if (confirmBtn) {
                confirmBtn.disabled = areaSelectionData.prefectures.length === 0;
            }
        }

        // ésãÊí¨ë∫ëIëÉGÉäÉAçXêV
        function updateCitySelectionArea() {
            const cityContainer = document.getElementById('cityListContainer');
            if (!cityContainer) return;

            cityContainer.innerHTML = areaSelectionData.prefectures.map(prefecture => {
                const allCities = getCitiesForPrefecture(prefecture);
                const selectedCities = areaSelectionData.cities[prefecture] || [];

                return `
                    <div class="border rounded-lg p-4">
                        <div class="mb-3">
                            <div class="flex justify-between items-center mb-2">
                                <h5 class="font-medium text-lg">${prefecture}</h5>
                                <span class="text-sm text-gray-600">
                                    ${selectedCities.length} / ${allCities.length} ëIëíÜ
                                </span>
                            </div>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded">
                                <input type="checkbox"
                                       ${selectedCities.length === allCities.length ? 'checked' : ''}
                                       onchange="toggleAllCities('${prefecture}', this.checked)">
                                <span class="ml-2 text-sm font-medium">Ç∑Ç◊ÇƒëIë</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                            ${allCities.map(city => `
                                <label class="flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer">
                                    <input type="checkbox"
                                           value="${city}"
                                           ${selectedCities.includes(city) ? 'checked' : ''}
                                           onchange="toggleCity('${prefecture}', '${city}', this.checked)">
                                    <span class="ml-2 text-sm">${city}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ésãÊí¨ë∫ëIëÉgÉOÉã
        function toggleCity(prefecture, city, checked) {
            if (!areaSelectionData.cities[prefecture]) {
                areaSelectionData.cities[prefecture] = [];
            }

            if (checked) {
                if (!areaSelectionData.cities[prefecture].includes(city)) {
                    areaSelectionData.cities[prefecture].push(city);
                }
            } else {
                areaSelectionData.cities[prefecture] = areaSelectionData.cities[prefecture].filter(c => c !== city);
                // óDêÊÉGÉäÉAÇ©ÇÁÇ‡çÌèú
                const priorityKey = `${prefecture}_${city}`;
                areaSelectionData.priorities = areaSelectionData.priorities.filter(p => p !== priorityKey);
            }

            updateAreaSelectionUI();
        }

        // ëSésãÊí¨ë∫ëIëêÿÇËë÷Ç¶
        function toggleAllCities(prefecture, checked) {
            const allCities = getCitiesForPrefecture(prefecture);

            if (checked) {
                areaSelectionData.cities[prefecture] = [...allCities];
            } else {
                areaSelectionData.cities[prefecture] = [];
                // óDêÊÉGÉäÉAÇ©ÇÁÇ‡çÌèú
                areaSelectionData.priorities = areaSelectionData.priorities.filter(
                    p => !p.startsWith(prefecture + '_')
                );
            }

            updateCitySelectionArea();
            updateAreaSelectionUI();
        }

        // óDêÊÉGÉäÉAçXêV
        function updatePriorityArea() {
            const listContainer = document.getElementById('prioritySelectionList');
            if (!listContainer) return;

            // ÉJÉEÉìÉ^Å[çXêVÇÕtogglePriorityAreaì‡Ç≈çsÇ§ÇÃÇ≈Ç±Ç±Ç≈ÇÕïsóv

            // ìsìπï{åßÇ≤Ç∆Ç…ÉOÉãÅ[Évâª
            const groupedByPref = {};
            Object.keys(areaSelectionData.cities).forEach(pref => {
                if (!groupedByPref[pref]) {
                    groupedByPref[pref] = [];
                }
                areaSelectionData.cities[pref].forEach(city => {
                    groupedByPref[pref].push({
                        key: `${pref}_${city}`,
                        city: city
                    });
                });
            });

            if (Object.keys(groupedByPref).length === 0) {
                listContainer.innerHTML = '<p class="text-gray-500 text-sm">ésãÊí¨ë∫ÇëIëÇ∑ÇÈÇ∆ÅAóDêÊÉGÉäÉAÇÃê›íËÇ™â¬î\Ç…Ç»ÇËÇ‹Ç∑</p>';
                return;
            }

            // åßÇ≤Ç∆Ç…ÉJÅ[Éhå`éÆÇ≈ï\é¶ÅiÉÇÉoÉCÉãëŒâûÅj
            listContainer.innerHTML = `
                <div class="border border-gray-200 rounded-lg bg-white p-3 sm:p-4">
                    <h5 class="font-semibold text-sm sm:text-base mb-3 flex items-center">
                        <span class="text-red-500 mr-2">??</span>
                        <span class="flex-1">ëIëâ¬î\Ç»ÉGÉäÉA</span>
                        <span class="text-xs sm:text-sm text-gray-600">ëS${Object.values(groupedByPref).reduce((sum, cities) => sum + cities.length, 0)}ÉGÉäÉA</span>
                    </h5>
                    <div class="space-y-3 sm:space-y-4 max-h-96 overflow-y-auto">
                        ${Object.entries(groupedByPref).map(([pref, cities]) => `
                            <div class="bg-gray-50 rounded-lg p-2 sm:p-3">
                                <h6 class="font-medium text-xs sm:text-sm mb-2 flex items-center text-gray-700">
                                    <span class="text-red-500 mr-1 sm:mr-2">??</span>
                                    ${pref}
                                </h6>
                                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1.5 sm:gap-2 ml-0 sm:ml-6">
                                    ${cities.map(city => `
                                        <label class="flex items-center p-1.5 sm:p-2 bg-white hover:bg-yellow-50 rounded cursor-pointer text-xs sm:text-sm transition-colors">
                                            <input type="checkbox"
                                                   class="w-4 h-4 sm:w-auto sm:h-auto"
                                                   value="${city.key}"
                                                   ${areaSelectionData.priorities.includes(city.key) ? 'checked' : ''}
                                                   onchange="togglePriorityArea('${city.key}', this.checked)">
                                            <span class="ml-1.5 sm:ml-2 leading-tight">${city.city}</span>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // óDêÊÉGÉäÉAÉgÉOÉã
        function togglePriorityArea(areaKey, checked) {
            console.log('togglePriorityArea called:', areaKey, checked, 'current priorities:', areaSelectionData.priorities.length);

            if (checked) {
                // 3Ç¬à»è„ëIëÇ≥ÇÍÇƒÇ¢ÇÈèÍçáÇÕëIëÇñhÇÆ
                if (areaSelectionData.priorities.length >= 3) {
                    showNotification('è„å¿Çí¥Ç¶Ç‹ÇµÇΩ', 'óDêÊÉGÉäÉAÇÕç≈ëÂ3Ç¬Ç‹Ç≈ëIëâ¬î\Ç≈Ç∑');
                    // É`ÉFÉbÉNÉ{ÉbÉNÉXÇå≥Ç…ñﬂÇ∑
                    setTimeout(() => {
                        const checkbox = document.querySelector(`input[value="${areaKey}"]`);
                        if (checkbox) {
                            checkbox.checked = false;
                        }
                    }, 0);
                    return;
                }
                if (!areaSelectionData.priorities.includes(areaKey)) {
                    areaSelectionData.priorities.push(areaKey);
                }
            } else {
                areaSelectionData.priorities = areaSelectionData.priorities.filter(p => p !== areaKey);
            }

            console.log('After update, priorities:', areaSelectionData.priorities.length, areaSelectionData.priorities);

            // óDêÊÉGÉäÉAÉJÉEÉìÉ^Å[ÇçXêV
            const selectedCount = document.getElementById('selectedPriorityCount');
            if (selectedCount) {
                selectedCount.textContent = areaSelectionData.priorities.length;

                // ÉJÉEÉìÉ^Å[ÇÃå©ÇΩñ⁄Ç‡çXêVÅiëIëêîÇ…âûÇ∂ÇƒêFÇïœçXÅj
                const countContainer = selectedCount.parentElement;
                if (countContainer) {
                    if (areaSelectionData.priorities.length >= 3) {
                        countContainer.classList.add('text-red-600');
                        countContainer.classList.remove('text-orange-500');
                    } else if (areaSelectionData.priorities.length > 0) {
                        countContainer.classList.add('text-orange-500');
                        countContainer.classList.remove('text-red-600');
                    } else {
                        countContainer.classList.remove('text-red-600', 'text-orange-500');
                    }
                }
            } else {
                console.error('selectedPriorityCount element not found!');
            }

            // ÉäÉXÉgÇçƒï`âÊÅiÉ`ÉFÉbÉNÉ{ÉbÉNÉXÇÃèÛë‘ÇîΩâfÅj
            updatePriorityArea();
        }

        // ÉGÉäÉAëIëÇÉäÉZÉbÉg
        function resetAreaSelection() {
            areaSelectionData.prefectures = [];
            areaSelectionData.cities = {};
            areaSelectionData.priorities = [];
            areaSelectionData.totalCount = 0;

            // É{É^ÉìÇÃèÛë‘ÇÉäÉZÉbÉg
            document.querySelectorAll('[data-prefecture]').forEach(button => {
                button.classList.remove('selected', 'bg-blue-500', 'text-white');
                button.classList.add('bg-white');
            });

            // óDêÊÉGÉäÉAÉJÉEÉìÉ^Å[Ç‡ÉäÉZÉbÉg
            const selectedCount = document.getElementById('selectedPriorityCount');
            if (selectedCount) {
                selectedCount.textContent = '0';
                const countContainer = selectedCount.parentElement;
                if (countContainer) {
                    countContainer.classList.remove('text-red-600', 'text-orange-500');
                }
            }

            updateAreaSelectionUI();
        }

        // ÉGÉäÉAëIëÇämíË
        function confirmAreaSelection() {
            showNotification('ê¨å˜', `${areaSelectionData.prefectures.length}ìsìπï{åßÅA${areaSelectionData.totalCount}ésãÊí¨ë∫ÇëIëÇµÇ‹ÇµÇΩ`);
        }

        // ésãÊí¨ë∫ÉäÉXÉgÇçXêV
        function updateCityList() {
            const cityListElement = document.getElementById('cityList');
            let html = '';

            selectedPrefectures.forEach(pref => {
                if (cityData[pref]) {
                    cityData[pref].forEach(city => {
                        html += `
                            <label class="flex items-center p-2 bg-white border rounded hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" data-city="${city}" name="manual-city" value="${city}" class="mr-2" onchange="updateCompanyAreaDisplay();">
                                <span class="text-sm">${city}</span>
                            </label>
                        `;
                    });
                }
            });

            cityListElement.innerHTML = html || '<p class="text-gray-500 text-center py-4">ìsìπï{åßÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢</p>';
        }

        // óDêÊÉGÉäÉAÇÃêÿÇËë÷Ç¶
        // å√Ç¢togglePriorityAreaä÷êîÇÕçÌèúÅiêVÇµÇ¢ÉoÅ[ÉWÉáÉìÇè„Ç≈íËã`çœÇ›Åj

        // updatePriorityAreasDisplayä÷êîÇÕçÌèú

        // ëSìsìπï{åßÇï\é¶
        function showAllPrefectures() {
            const container = event.target.parentElement.querySelector('.grid');
            container.innerHTML = allPrefectures.map(pref => `
                <label class="flex items-center p-2 bg-white border rounded cursor-pointer hover:bg-blue-50">
                    <input type="checkbox" name="prefecture" value="${pref}" class="mr-2" onchange="updateSelectedAreas()"
                           ${selectedPrefectures.includes(pref) ? 'checked' : ''}>
                    <span class="text-sm">${pref}</span>
                </label>
            `).join('');
            event.target.textContent = 'ï¬Ç∂ÇÈ';
            event.target.onclick = () => location.reload();
        }

        // ésãÊí¨ë∫åüçı
        function searchCities(query) {
            const cityListElement = document.getElementById('cityList');
            const allButtons = cityListElement.querySelectorAll('button');

            allButtons.forEach(button => {
                const cityName = button.textContent.replace('? ', '');
                if (cityName.toLowerCase().includes(query.toLowerCase())) {
                    button.style.display = '';
                } else {
                    button.style.display = 'none';
                }
            });
        }

        // âÔé–èÓïÒÇÃÉGÉäÉAï\é¶ÇçXêV
        function updateCompanyAreaDisplay() {
            const displayElement = document.getElementById('companyAreaDisplay');
            if (!displayElement) return;

            let html = '';

            // ìsìπï{åß
            if (selectedPrefectures.length > 0) {
                html += `
                    <div>
                        <p class="text-sm font-medium text-gray-700 mb-2">ëŒâûìsìπï{åß</p>
                        <div class="flex flex-wrap gap-2">
                            ${selectedPrefectures.map(pref =>
                                `<span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">${pref}</span>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }

            // ëIëÇ≥ÇÍÇΩésãÊí¨ë∫Çï\é¶ÅiéËìÆê›íËÇÃèÍçáÅj
            const manualCities = document.querySelectorAll('input[name="manual-city"]:checked');
            if (manualCities.length > 0) {
                html += `
                    <div>
                        <p class="text-sm font-medium text-gray-700 mb-2">ëŒâûésãÊí¨ë∫</p>
                        <div class="flex flex-wrap gap-2">
                            ${Array.from(manualCities).map(checkbox =>
                                `<span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">${checkbox.value}</span>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }

            displayElement.innerHTML = html || '<p class="text-gray-500">ÉGÉäÉAÇ™ëIëÇ≥ÇÍÇƒÇ¢Ç‹ÇπÇÒ</p>';
        }

        // é©ìÆîzêMê›íËÇï€ë∂
        // ÉGÉäÉAê›íËÇÃìØä˙êÿÇËë÷Ç¶
        function toggleAreaSync() {
            const isSync = document.getElementById('syncAreaSettings').checked;
            const autoDiv = document.getElementById('companyAreaAuto');
            const manualDiv = document.getElementById('companyAreaManual');

            if (isSync) {
                autoDiv.classList.remove('hidden');
                manualDiv.classList.add('hidden');
            } else {
                autoDiv.classList.add('hidden');
                manualDiv.classList.remove('hidden');
            }
        }

        // çHéñì‡óeê›íËÇÃìØä˙êÿÇËë÷Ç¶
        function toggleConstructionSync() {
            const isSync = document.getElementById('syncConstructionSettings').checked;
            const autoDiv = document.getElementById('companyConstructionAuto');
            const manualDiv = document.getElementById('companyConstructionManual');

            if (isSync) {
                autoDiv.classList.remove('hidden');
                manualDiv.classList.add('hidden');
            } else {
                autoDiv.classList.add('hidden');
                manualDiv.classList.remove('hidden');
            }
        }

        // âÔé–èÓïÒópÇÃëSìsìπï{åßï\é¶
        function showAllCompanyPrefectures() {
            const container = event.target.parentElement.querySelector('.grid');
            container.innerHTML = allPrefectures.map(pref => `
                <label class="flex items-center p-2 bg-white border rounded cursor-pointer hover:bg-blue-50">
                    <input type="checkbox" name="company-prefecture" value="${pref}" class="mr-2">
                    <span class="text-sm">${pref}</span>
                </label>
            `).join('');
            event.target.textContent = 'ï¬Ç∂ÇÈ';
            event.target.onclick = () => location.reload();
        }


        // ÉNÉ`ÉRÉ~ä«óùä÷êî
        let collectedReviews = [
            {
                id: 1,
                rating: 5,
                source: 'é©é–',
                content: 'íöîJÇ»ëŒâûÇ≈à¿êSÇµÇƒÇ®îCÇπÇ≈Ç´Ç‹ÇµÇΩÅBå©êœÇ‡ÇËÇ‡ñæämÇ≈ÅAí«â¡óøã‡Ç»Ç≠ó\íËí ÇËÇ…äÆê¨ÇµÇ‹ÇµÇΩÅB',
                customer: 'ìåãûìs Yól',
                date: '2024îN1åé',
                collectedDate: '2024/01/15',
                visible: true,
                image: null
            },
            {
                id: 2,
                rating: 4,
                source: 'é©é–',
                content: 'êEêlÇ≥ÇÒÇÃãZèpÇ™çÇÇ≠ÅAédè„Ç™ÇËÇ…ñûë´ÇµÇƒÇ¢Ç‹Ç∑ÅBãﬂó◊Ç÷ÇÃîzó∂Ç‡ÇµÇ¡Ç©ÇËÇµÇƒÇ¢Ç‹ÇµÇΩÅB',
                customer: 'ê_ìﬁêÏåß Tól',
                date: '2024îN2åé',
                collectedDate: '2024/02/01',
                visible: true,
                image: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="150" height="100"%3E%3Crect width="100%25" height="100%25" fill="%23ddd"/%3E%3Ctext x="50%25" y="50%25" font-family="Arial" font-size="14" fill="%23999" text-anchor="middle" dy=".3em"%3E150x100%3C/text%3E%3C/svg%3E'
            },
            {
                id: 3,
                rating: 5,
                source: 'é©é–',
                content: '15îNëOÇ…åöÇƒÇΩâ∆ÇÃäOï«Ç™êFÂÚÇπÇƒÇ´ÇΩÇÃÇ≈àÀóäÇµÇ‹ÇµÇΩÅBï°êîé–Ç©ÇÁå©êœÇ‡ÇËÇéÊÇËÇ‹ÇµÇΩÇ™ÅAê‡ñæÇ™àÍî‘íöîJÇ≈à¿êSä¥Ç™Ç†ÇËÇ‹ÇµÇΩÅB',
                customer: 'êÁótåß Mól',
                date: '2024îN2åé',
                collectedDate: '2024/02/10',
                visible: true,
                image: null
            },
            {
                id: 4,
                rating: 5,
                source: 'é©é–',
                content: 'êEêlÇ≥ÇÒÇÃà•éAÇ©ÇÁénÇ‹ÇËÅAñàì˙ÇÃçÏã∆ïÒçêÅAãﬂó◊Ç÷ÇÃîzó∂Ç»Ç«ÅAÇ∑Ç◊ÇƒÇ…Ç®Ç¢Çƒñûë´Ç≈ÇµÇΩÅB',
                customer: 'çÈã åß Kól',
                date: '2024îN3åé',
                collectedDate: '2024/03/05',
                visible: true,
                image: null
            },
            {
                id: 5,
                rating: 4,
                source: 'é©é–',
                content: 'å©êœÇ‡ÇËÇ™ñæämÇ≈ÅAí«â¡óøã‡Ç‡Ç»Ç≠ó\íËí ÇËÇ…èIÇÌÇËÇ‹ÇµÇΩÅBédè„Ç™ÇËÇ‡ä˙ë“à»è„Ç≈Ç∑ÅB',
                customer: 'ìåãûìs Sól',
                date: '2024îN3åé',
                collectedDate: '2024/03/10',
                visible: true,
                image: null
            },
            {
                id: 6,
                rating: 5,
                source: 'é©é–',
                content: 'âÆç™Ç∆äOï«ÇÃìØéûé{çHÇÇ®äËÇ¢ÇµÇ‹ÇµÇΩÅBçHä˙Ç‡íZèkÇ≈Ç´ÅAédè„Ç™ÇËÇ‡ëÂïœñûë´ÇµÇƒÇ¢Ç‹Ç∑ÅB',
                customer: 'ê_ìﬁêÏåß Aól',
                date: '2024îN3åé',
                collectedDate: '2024/03/15',
                visible: false,
                image: null
            }
        ];

        // ÉJÉãÅ[ÉZÉãä«óù
        let currentReviewIndex = 0;

        // ÉNÉ`ÉRÉ~ÉäÉXÉgÇçXêV
        function updateReviewsList() {
            const reviewsList = document.getElementById('reviewsList');
            if (reviewsList) {
                reviewsList.innerHTML = collectedReviews.map(review => `
                    <div class="border rounded-lg p-4 bg-white" data-review-id="${review.id}">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center">
                                <div class="flex text-yellow-400 mr-2">
                                    ${Array(5).fill(0).map((_, i) => `
                                        <svg class="w-4 h-4 ${i < review.rating ? 'fill-current' : 'text-gray-300'}" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                                        </svg>
                                    `).join('')}
                                </div>
                                <span class="text-sm text-gray-600">${review.rating}.0</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs bg-gray-100 px-2 py-1 rounded">${review.source === 'é©é–' ? 'é©é–' : review.source + 'éQè∆'}</span>
                                <label class="flex items-center">
                                    <input type="checkbox" ${review.visible ? 'checked' : ''} onchange="toggleReviewVisibility(${review.id})" class="mr-1">
                                    <span class="text-xs text-gray-600">ï\é¶</span>
                                </label>
                            </div>
                        </div>
                        <p class="text-sm text-gray-800 mb-2">${review.content}</p>
                        ${review.image ? `
                            <div class="mb-2">
                                <img src="${review.image}" class="h-20 rounded object-cover" alt="é{çHé ê^">
                            </div>
                        ` : ''}
                        <div class="flex justify-between items-center text-xs text-gray-500">
                            <span>${review.customer} / ${review.date}</span>
                            <span>é˚èWì˙: ${review.collectedDate}</span>
                        </div>
                    </div>
                `).join('');

                // ï\é¶åèêîÇçXêV
                const visibleCount = collectedReviews.filter(r => r.visible).length;
                const countElement = document.getElementById('visibleReviewCount');
                if (countElement) countElement.textContent = visibleCount;
            }
            updatePreviewReviews();
        }

        // ÉNÉ`ÉRÉ~ÇÃï\é¶/îÒï\é¶êÿÇËë÷Ç¶
        function toggleReviewVisibility(reviewId) {
            const review = collectedReviews.find(r => r.id === reviewId);
            if (review) {
                review.visible = !review.visible;
                updateReviewsList();
            }
        }

        // ÉvÉåÉrÉÖÅ[ÇÃÉNÉ`ÉRÉ~ÇçXêVÅi1ñáÇ∏Ç¬íÜâõï\é¶Åj
        function updatePreviewReviews() {
            const previewReviewsList = document.getElementById('previewReviewsList');
            const indicators = document.getElementById('reviewIndicators');

            if (previewReviewsList) {
                const visibleReviews = collectedReviews.filter(r => r.visible);

                if (visibleReviews.length > 0) {
                    // ÉJÉãÅ[ÉZÉãÉJÅ[ÉhÇê∂ê¨Åi1ñáÇ∏Ç¬ëSïùÇ≈ï\é¶Åj
                    previewReviewsList.innerHTML = visibleReviews.map((review, index) => `
                        <div class="flex-shrink-0 w-full bg-white rounded-xl shadow-xl border-2 border-purple-100 p-8">
                            <div class="flex items-center justify-center mb-4">
                                <div class="flex text-yellow-400 mr-2">
                                    ${Array(5).fill(0).map((_, i) => `
                                        <svg class="w-6 h-6 ${i < review.rating ? 'fill-current' : 'text-gray-300'}" viewBox="0 0 20 20">
                                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                                        </svg>
                                    `).join('')}
                                </div>
                                <span class="text-lg text-gray-700 font-bold ml-2">${review.rating}.0</span>
                            </div>

                            <p class="text-gray-800 text-base leading-relaxed mb-6 text-center">${review.content}</p>

                            ${review.image ? `
                                <div class="mb-6 flex justify-center">
                                    <img src="${review.image}" class="h-32 rounded-lg object-cover shadow-md" alt="é{çHé ê^">
                                </div>
                            ` : ''}

                            <div class="border-t-2 border-purple-100 pt-4">
                                <div class="flex justify-between items-center">
                                    <div class="text-sm text-gray-600">
                                        <div class="font-semibold text-base text-gray-800">${review.customer}</div>
                                        <div class="text-xs text-gray-500 mt-1">${review.date}</div>
                                    </div>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-medium">
                                        ${review.source === 'é©é–' ? 'íºê⁄Ç¢ÇΩÇæÇ¢ÇΩê∫' : review.source + 'ÇÊÇË'}
                                    </span>
                                </div>
                            </div>
                        </div>
                    `).join('');

                    // ÉCÉìÉWÉPÅ[É^Å[Çê∂ê¨
                    if (indicators) {
                        indicators.innerHTML = visibleReviews.map((_, index) => `
                            <button onclick="goToReview(${index})" class="w-3 h-3 rounded-full transition ${index === 0 ? 'bg-blue-600 scale-125' : 'bg-gray-300'}"></button>
                        `).join('');
                    }

                    document.getElementById('preview-reviews').style.display = 'block';
                    currentReviewIndex = 0; // ç≈èâÇÃÉåÉrÉÖÅ[Ç©ÇÁäJén
                    updateCarouselPosition();
                } else {
                    document.getElementById('preview-reviews').style.display = 'none';
                }
            }
        }

        // ÉJÉãÅ[ÉZÉãÉXÉNÉçÅ[ÉãÅiñ≥å¿ÉãÅ[ÉvÅj
        function scrollReviews(direction) {
            const visibleReviews = collectedReviews.filter(r => r.visible);
            if (visibleReviews.length === 0) return;

            if (direction === 'left') {
                currentReviewIndex--;
            } else {
                currentReviewIndex++;
            }

            updateCarouselPosition();
        }

        // ì¡íËÇÃÉNÉ`ÉRÉ~Ç÷à⁄ìÆ
        function goToReview(index) {
            const visibleReviews = collectedReviews.filter(r => r.visible);
            currentReviewIndex = index + visibleReviews.length;
            updateCarouselPosition();
        }

        // ÉJÉãÅ[ÉZÉãà íuÇçXêVÅi1ñáÇ∏Ç¬íÜâõï\é¶Åj
        function updateCarouselPosition() {
            const carousel = document.getElementById('previewReviewsList');
            const indicators = document.getElementById('reviewIndicators');
            const visibleReviews = collectedReviews.filter(r => r.visible);

            if (carousel && visibleReviews.length > 0) {
                // é¿ç€ÇÃÉCÉìÉfÉbÉNÉXÇåvéZ
                const actualIndex = ((currentReviewIndex % visibleReviews.length) + visibleReviews.length) % visibleReviews.length;

                // ÉJÉãÅ[ÉZÉãëSëÃÇÃïùÇéÊìæ
                const carouselWidth = carousel.parentElement.offsetWidth;
                const cardWidth = carousel.firstElementChild ? carousel.firstElementChild.offsetWidth : carouselWidth;

                // íÜâõÇ…îzíuÇ∑ÇÈÇΩÇﬂÇÃà íuÇåvéZ
                const position = -(actualIndex * cardWidth);
                carousel.style.transform = `translateX(${position}px)`;

                // ÉCÉìÉWÉPÅ[É^Å[çXêV
                if (indicators) {
                    indicators.querySelectorAll('button').forEach((btn, index) => {
                        btn.className = `w-3 h-3 rounded-full transition ${index === actualIndex ? 'bg-blue-600 scale-125' : 'bg-gray-300'}`;
                    });
                }
            }
        }

        // èâä˙âªéûÇ…ÉNÉ`ÉRÉ~ÉäÉXÉgÇï\é¶
        setTimeout(() => {
            updateReviewsList();
        }, 100);

        // âÔé–èÓïÒÉZÉNÉVÉáÉìÇÃèâä˙âªÅiï€ë∂É{É^Éìï˚éÆÇ…ïœçXÅj
        document.addEventListener('DOMContentLoaded', () => {
            const companySection = document.getElementById('companySection');
            if (companySection) {
                console.log('[âÔé–èÓïÒ] ÉZÉNÉVÉáÉìèâä˙âªäÆóπ - ï€ë∂É{É^Éìï˚éÆÇégóp');

                // ÉJÉXÉ^ÉÄéëäiì¸óÕÇÃEnterÉLÅ[ëŒâû
                const customQualInput = document.getElementById('customQualificationInput');
                if (customQualInput) {
                    customQualInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            addCustomQualification();
                        }
                    });
                }

                // ÉJÉXÉ^ÉÄï€åØì¸óÕÇÃEnterÉLÅ[ëŒâû
                const customInsInput = document.getElementById('customInsuranceInput');
                if (customInsInput) {
                    customInsInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            addCustomInsurance();
                        }
                    });
                }

                // PRï∂ÇÃï∂éöêîÉJÉEÉìÉ^Å[
                const prTextArea = document.getElementById('prText');
                const prTextCharCount = document.getElementById('prTextCharCount');
                if (prTextArea && prTextCharCount) {
                    // èâä˙ï\é¶
                    prTextCharCount.textContent = prTextArea.value.length;

                    // ì¸óÕéûÇÃÉJÉEÉìÉgçXêVÇ∆ÉeÉLÉXÉgÉGÉäÉAÇÃçÇÇ≥é©ìÆí≤êÆ
                    prTextArea.addEventListener('input', (e) => {
                        const length = e.target.value.length;
                        prTextCharCount.textContent = length;

                        // ÉeÉLÉXÉgÉGÉäÉAÇÃçÇÇ≥Çì‡óeÇ…çáÇÌÇπÇƒé©ìÆí≤êÆ
                        e.target.style.height = 'auto';
                        e.target.style.height = Math.max(200, e.target.scrollHeight) + 'px';
                    });
                }
            }
        });

        // ÉTÅ[ÉrÉXÉJÅ[ÉhÇÃÉgÉOÉãã@î\
        function toggleServiceCard(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            const card = element.querySelector('div');

            checkbox.checked = !checkbox.checked;

            if (checkbox.checked) {
                card.classList.add('bg-blue-50', 'border-blue-500');
                card.classList.remove('bg-white');
            } else {
                card.classList.remove('bg-blue-50', 'border-blue-500');
                card.classList.add('bg-white');
            }
        }

        // GoogleÉ}ÉbÉvÇñÑÇﬂçûÇ›
        function loadGoogleMap() {
            const mapContainer = document.getElementById('googleMapContainer');
            const address = document.getElementById('previewAddress')?.textContent || '';

            if (!mapContainer) return;

            if (address && address !== '-') {
                const encodedAddress = encodeURIComponent(address);
                // Google Maps Embed APIÇégópÅií èÌÇÕAPIÉLÅ[Ç™ïKóvÇ≈Ç∑Ç™ÅAÉVÉìÉvÉãÇ»iframeñÑÇﬂçûÇ›ÇégópÅj
                const mapHtml = `
                    <iframe
                        width="100%"
                        height="100%"
                        frameborder="0"
                        style="border:0"
                        src="https://www.google.com/maps?q=${encodedAddress}&output=embed"
                        allowfullscreen>
                    </iframe>
                `;
                mapContainer.innerHTML = mapHtml;
            } else {
                mapContainer.innerHTML = `
                    <div class="w-full h-full flex items-center justify-center text-gray-500 bg-gray-100">
                        <div class="text-center">
                            <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <p class="text-sm">èäç›ínèÓïÒÇ™ê›íËÇ≥ÇÍÇƒÇ¢Ç‹ÇπÇÒ</p>
                        </div>
                    </div>
                `;
            }
        }

        // í ímï\é¶
        function showNotification(title, body, type = 'info') {
            // ÉuÉâÉEÉUí ím
            if (Notification.permission === 'granted') {
                new Notification(title, {
                    body: body,
                    icon: '/favicon.ico',
                    badge: '/favicon.ico'
                });
            }

            // ÉCÉìÉAÉvÉäí ímÇ‡ï\é¶
            showInAppNotification(title, body, type);
        }

        // ÉCÉìÉAÉvÉäí ím
        function showInAppNotification(title, body, type = 'info') {
            const colors = {
                'info': 'bg-blue-500',
                'success': 'bg-green-500',
                'warning': 'bg-yellow-500',
                'error': 'bg-red-500'
            };

            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 ${colors[type]} text-white px-6 py-4 rounded-lg shadow-lg z-[60] animate-slide-in`;
            notification.innerHTML = `
                <div class="flex items-start gap-3">
                    <div class="flex-1">
                        <div class="font-semibold">${title}</div>
                        <div class="text-sm opacity-90">${body}</div>
                    </div>
                    <button onclick="this.closest('div').remove()" class="hover:opacity-70">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `;
            document.body.appendChild(notification);

            // 5ïbå„Ç…é©ìÆÇ≈è¡ãé
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.classList.add('animate-slide-out');
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }

        // ÉAÉâÅ[ÉgÉpÉlÉãÇÃï\é¶/îÒï\é¶
        function toggleAlertPanel() {
            const panel = document.getElementById('alertPanel');
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                loadAlerts();
                updateTotalBadgeCount();
            } else {
                panel.classList.add('hidden');
            }
        }

        // ñ{ïîÇ©ÇÁÇÃí ímÉpÉlÉãêÿÇËë÷Ç¶
        function toggleNotificationPanel() {
            const panel = document.getElementById('notificationPanel');
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                loadNotifications();
            } else {
                panel.classList.add('hidden');
            }
        }

        // ñ{ïîÇ©ÇÁÇÃí ímÇì«Ç›çûÇﬁÅiç°å„é¿ëïÅj
        function loadNotifications() {
            // TODO: GASÇ©ÇÁñ{ïîí ímÇéÊìæ
            console.log('Loading notifications from headquarters...');
        }

        // â¡ñøìXÉXÉeÅ[É^ÉXçXêV
        // updateMerchantStatusä÷êîÇÕçÌèúÅiÉXÉeÅ[É^ÉXÇÕì«Ç›éÊÇËêÍópÅAÉXÉvÉåÉbÉhÉVÅ[ÉgÇ©ÇÁìÆìIéÊìæÅj

        // ÉoÉbÉWÉJÉEÉìÉgÇìùçáçXêV
        function updateTotalBadgeCount() {
            // ñ¢äÑìñàƒåèêîÇéÊìæ
            const unassignedBadge = document.getElementById('unassignedBadge');
            const unassignedCount = unassignedBadge && !unassignedBadge.classList.contains('hidden')
                ? parseInt(unassignedBadge.textContent) || 0
                : 0;

            // ÉAÉâÅ[ÉgêîÇéÊìæ
            const alertItems = document.querySelectorAll('#todayAlerts .alert-item').length || 0;

            // çáåvÇÉxÉãÉ}Å[ÉNÇ…ï\é¶
            const totalCount = unassignedCount + alertItems;
            const alertCountBadge = document.getElementById('alertCount');

            if (totalCount > 0) {
                alertCountBadge.textContent = totalCount;
                alertCountBadge.classList.remove('hidden');
            } else {
                alertCountBadge.classList.add('hidden');
            }
        }

        // ÉAÉâÅ[Égì«Ç›çûÇ›
        function loadAlerts() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);

            // ç°ì˙ÇÃÉ^ÉXÉN
            const todayTasks = [
                { time: '10:00', text: 'ìcíÜólÇ÷âÀìd', type: 'call', caseId: 1 },
                { time: '14:00', text: 'ç≤ì°ól åªíní≤ç∏', type: 'appointment', caseId: 2 },
                { time: '16:00', text: 'óÈñÿól å©êœèëíÒèoä˙å¿', type: 'estimate', caseId: 3 }
            ];

            const todayTasksHtml = todayTasks.map(task => `
                <div class="flex items-center justify-between p-2 bg-red-50 rounded-lg hover:bg-red-100 cursor-pointer"
                     onclick="handleAlertClick(${task.caseId}, '${task.type}')">
                    <div class="flex items-center gap-2">
                        <span class="text-xs font-medium text-red-600">${task.time}</span>
                        <span class="text-sm">${task.text}</span>
                    </div>
                    <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
            `).join('');
            document.getElementById('todayTasks').innerHTML = todayTasksHtml || '<div class="text-sm text-gray-500">É^ÉXÉNÇ»Çµ</div>';

            // ñæì˙ÇÃó\íË
            const tomorrowTasks = [
                { time: '11:00', text: 'éRìcól ÉAÉ|ÉCÉìÉg', type: 'appointment', caseId: 4 },
                { time: '15:00', text: 'çÇã¥ól ÉtÉHÉçÅ[ÉAÉbÉv', type: 'followup', caseId: 5 }
            ];

            const tomorrowTasksHtml = tomorrowTasks.map(task => `
                <div class="flex items-center justify-between p-2 bg-yellow-50 rounded-lg hover:bg-yellow-100 cursor-pointer"
                     onclick="handleAlertClick(${task.caseId}, '${task.type}')">
                    <div class="flex items-center gap-2">
                        <span class="text-xs font-medium text-yellow-600">${task.time}</span>
                        <span class="text-sm">${task.text}</span>
                    </div>
                    <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
            `).join('');
            document.getElementById('tomorrowTasks').innerHTML = tomorrowTasksHtml || '<div class="text-sm text-gray-500">ó\íËÇ»Çµ</div>';

            // é©ìÆÉAÉâÅ[Ég
            const autoAlerts = [
                { text: 'ñ¢ëŒâûàƒåè3åèÇ†ÇËÇ‹Ç∑', type: 'warning' },
                { text: 'å©êœíÒèoå„7ì˙åoâﬂ: 2åè', type: 'info' },
                { text: 'ì¸ã‡ó\íËì˙: ìcíÜól', type: 'payment' }
            ];

            const autoAlertsHtml = autoAlerts.map(alert => `
                <div class="flex items-center justify-between p-2 bg-blue-50 rounded-lg">
                    <span class="text-sm">${alert.text}</span>
                    <button onclick="dismissAlert(this)" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `).join('');
            document.getElementById('autoAlerts').innerHTML = autoAlertsHtml || '<div class="text-sm text-gray-500">ÉAÉâÅ[ÉgÇ»Çµ</div>';
        }

        // ÉAÉâÅ[ÉgÉNÉäÉbÉNèàóù
        function handleAlertClick(caseId, type) {
            toggleAlertPanel();

            if (type === 'call') {
                // ìdòbî≠êM
                const caseData = casesData.find(c => c.id === caseId);
                if (caseData && caseData.phone) {
                    callCustomer(caseData.phone);
                }
            } else if (type === 'appointment' || type === 'estimate') {
                // àƒåèè⁄ç◊Çï\é¶
                showSection('cases');
                setTimeout(() => {
                    const caseCard = document.querySelector(`[data-case-id="${caseId}"]`);
                    if (caseCard) {
                        caseCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        caseCard.classList.add('ring-2', 'ring-yellow-400');
                        setTimeout(() => {
                            caseCard.classList.remove('ring-2', 'ring-yellow-400');
                        }, 3000);
                    }
                }, 100);
            }
        }

        // ÉAÉâÅ[Égè¡ãé
        function dismissAlert(button) {
            button.closest('div').remove();
        }


        // ÉAÉâÅ[Égê›íËçXêVÅiê›íËÉÅÉjÉÖÅ[Ç∆ÉAÉâÅ[ÉgÉpÉlÉãÇÃìØä˙Åj
        function updateAlertSetting(settingName, enabled) {
            // localStorage Ç…ï€ë∂
            let alertSettings = JSON.parse(localStorage.getItem('alertSettings') || '{}');
            alertSettings[settingName] = enabled;
            localStorage.setItem('alertSettings', JSON.stringify(alertSettings));

            // ëŒâûÇ∑ÇÈê›íËÉÅÉjÉÖÅ[ÇÃÉ`ÉFÉbÉNÉ{ÉbÉNÉXÇìØä˙
            const idMap = {
                'appointment_reminder': 'appointmentReminder',
                'call_reminder': 'callReminder',
                'estimate_followup': 'estimateFollowup',
                'payment_alert': 'paymentAlert'
            };

            const checkboxId = idMap[settingName];
            if (checkboxId) {
                const checkbox = document.getElementById(checkboxId);
                if (checkbox && checkbox.checked !== enabled) {
                    checkbox.checked = enabled;
                }
            }
        }

        // ÉJÉåÉìÉ_Å[ÇÃé©ìÆìØä˙ÅiàƒåèÉfÅ[É^Ç©ÇÁé©ìÆìIÇ…ÉJÉåÉìÉ_Å[ÉCÉxÉìÉgÇê∂ê¨Åj
        function autoSyncToCalendar() {
            // ä˘ë∂ÇÃàƒåèóRóàÉCÉxÉìÉgÇÉNÉäÉA
            calendarEvents = calendarEvents.filter(event => !event.fromCase);

            // ëSàƒåèÇ©ÇÁÉlÉNÉXÉgÉXÉeÉbÉvÇéÊìæÇµÇƒÉJÉåÉìÉ_Å[Ç…í«â¡
            const allCases = getCasesData();

            allCases.forEach(caseItem => {
                // ÉlÉNÉXÉgÉXÉeÉbÉvÇ™Ç†ÇÈèÍçá
                if (caseItem.nextAction) {
                    const today = new Date();
                    const eventDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + Math.floor(Math.random() * 7));
                    const eventTitle = `${caseItem.nextAction}: ${caseItem.customer}ól`;

                    // ÉCÉxÉìÉgÉ^ÉCÉvÇîªíË
                    let eventType = 'todo';
                    let eventColor = '#6b7280';

                    if (caseItem.nextAction.includes('åªí≤') || caseItem.nextAction.includes('ÉAÉ|')) {
                        eventType = 'meeting';
                        eventColor = '#3b82f6';
                    } else if (caseItem.nextAction.includes('âÀìd') || caseItem.nextAction.includes('ìdòb')) {
                        eventType = 'call';
                        eventColor = '#10b981';
                    } else if (caseItem.nextAction.includes('å©êœ')) {
                        eventType = 'estimate';
                        eventColor = '#f59e0b';
                    }

                    calendarEvents.push({
                        id: `case-${caseItem.id}`,
                        title: eventTitle,
                        date: eventDate.toISOString().split('T')[0],
                        time: '10:00',
                        type: eventType,
                        color: eventColor,
                        fromCase: true,  // àƒåèóRóàÇÃÉCÉxÉìÉgÉ}Å[ÉN
                        caseId: caseItem.id
                    });
                }
            });

            // ÉJÉåÉìÉ_Å[Ççƒï`âÊ
            if (typeof renderCalendar !== 'undefined') {
                renderCalendar();
            }
            if (typeof renderMiniCalendar !== 'undefined') {
                renderMiniCalendar();
            }
        }

        // àƒåèÉfÅ[É^çXêVéûÇ…é©ìÆìIÇ…ÉJÉåÉìÉ_Å[ÇìØä˙
        function onCaseUpdate() {
            autoSyncToCalendar();
        }

        // GoogleÉJÉåÉìÉ_Å[ìØä˙Åiè´óàìIÇ…é¿ëïÅj
        function syncWithGoogleCalendar() {
            // Google Calendar APIÇégópÇµÇΩìØä˙
            showNotification('ã@î\äJî≠íÜ', 'GoogleÉJÉåÉìÉ_Å[ìØä˙ÇÕéüâÒÉAÉbÉvÉfÅ[ÉgÇ≈íÒãüó\íË', 'info');
        }

        // ÉXÉeÅ[É^ÉXïœçXéûÇÃé©ìÆÉAÉâÅ[Égê›íË
        function scheduleStatusAlert(caseId, newStatus) {
            const alertTiming = {
                'ÉAÉ|çœ': { delay: 86400000, message: 'ñæì˙ÇÃåªíní≤ç∏ó\íË' }, // 1ì˙ëO
                'åªí≤çœ': { delay: 3600000, message: 'å©êœèëçÏê¨ÇäJén' }, // 1éûä‘å„
                'å©êœíÒèoçœ': { delay: 604800000, message: 'ÉtÉHÉçÅ[ÉAÉbÉvÇ™ïKóv' }, // 7ì˙å„
                'ì¸ã‡ó\íË': { delay: 86400000, message: 'ì¸ã‡ämîFÇÇ®äËÇ¢ÇµÇ‹Ç∑' } // 1ì˙å„
            };

            if (alertTiming[newStatus]) {
                const alert = alertTiming[newStatus];
                setTimeout(() => {
                    showNotification('ÉäÉ}ÉCÉìÉ_Å[', alert.message, 'warning');
                    // ÉAÉâÅ[ÉgÉJÉEÉìÉgÇëùÇ‚Ç∑
                    const countBadge = document.getElementById('alertCount');
                    const currentCount = parseInt(countBadge.textContent) || 0;
                    countBadge.textContent = currentCount + 1;
                    countBadge.classList.remove('hidden');
                }, alert.delay);
            }
        }

        // ÉÅÉjÉÖÅ[ÉgÉOÉã
        window.toggleMenu = function() {
            const sideMenu = document.getElementById('sideMenu');
            const isOpen = !sideMenu.classList.contains('-translate-x-full');

            if (isOpen) {
                // ÉÅÉjÉÖÅ[Çï¬Ç∂ÇÈ
                sideMenu.classList.add('-translate-x-full');
                document.removeEventListener('click', handleOutsideClick);
            } else {
                // ÉÅÉjÉÖÅ[ÇäJÇ≠
                sideMenu.classList.remove('-translate-x-full');
                // éüÇÃÉtÉåÅ[ÉÄÇ≈ÉCÉxÉìÉgÉäÉXÉiÅ[Çí«â¡ÅitoggleMenuÇÃÉNÉäÉbÉNÇñ≥éãÇ∑ÇÈÇΩÇﬂÅj
                setTimeout(() => {
                    document.addEventListener('click', handleOutsideClick);
                }, 0);
            }
        }

        // ÉÅÉjÉÖÅ[äOÉNÉäÉbÉNÇ≈ÉÅÉjÉÖÅ[Çï¬Ç∂ÇÈ
        function handleOutsideClick(event) {
            const sideMenu = document.getElementById('sideMenu');
            const menuButton = event.target.closest('button[onclick*="toggleMenu"]');

            // ÉÅÉjÉÖÅ[É{É^ÉìÇÉNÉäÉbÉNÇµÇΩèÍçáÇÕñ≥éã
            if (menuButton) return;

            // ÉÅÉjÉÖÅ[ì‡ÇÉNÉäÉbÉNÇµÇΩèÍçáÇÕñ≥éã
            if (sideMenu.contains(event.target)) return;

            // ÉÅÉjÉÖÅ[äOÇÉNÉäÉbÉNÇµÇΩèÍçáÇÕï¬Ç∂ÇÈ
            sideMenu.classList.add('-translate-x-full');
            document.removeEventListener('click', handleOutsideClick);
        }
        
        // ÉAÉNÉeÉBÉuÉÅÉjÉÖÅ[ÇÃçXêV
        window.updateActiveMenu = function(sectionName) {
            // Ç∑Ç◊ÇƒÇÃÉÅÉjÉÖÅ[ÉAÉCÉeÉÄÇ©ÇÁÉAÉNÉeÉBÉuÉXÉ^ÉCÉãÇçÌèú
            document.querySelectorAll('#sideMenu a').forEach(link => {
                link.classList.remove('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-gray-100');
                link.classList.add('text-gray-400', 'hover:bg-gray-800', 'hover:text-gray-100');
            });
            
            // ëŒâûÇ∑ÇÈÉÅÉjÉÖÅ[ÉAÉCÉeÉÄÇ…ÉAÉNÉeÉBÉuÉXÉ^ÉCÉãÇí«â¡
            const activeLink = document.querySelector(`#sideMenu a[onclick*="showSection('${sectionName}')"]`);
            if (activeLink) {
                activeLink.classList.remove('text-gray-400', 'hover:bg-gray-800', 'hover:text-gray-100');
                activeLink.classList.add('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-gray-100');
            }
        }
        
        // ÉZÉNÉVÉáÉìêÿÇËë÷Ç¶
        // é©ìÆîzêMê›íËÇÃïœçXåüímópÉtÉâÉO
        let autodeliverySettingsChanged = false;

        // é©ìÆîzêMê›íËÇÃïœçXÇåüím
        function markAutodeliveryChanged() {
            autodeliverySettingsChanged = true;
            console.log('[Autodelivery] Settings changed, not saved yet');
        }

        // é©ìÆîzêMê›íËÇÃïœçXÇÉäÉZÉbÉg
        function resetAutodeliveryChanged() {
            autodeliverySettingsChanged = false;
            console.log('[Autodelivery] Settings saved, change flag reset');
        }

        window.showSection = function(sectionName) {
            // é©ìÆîzêMê›íËÉZÉNÉVÉáÉìÇ©ÇÁëºÇÃÉZÉNÉVÉáÉìÇ…à⁄ìÆÇ∑ÇÈèÍçáÅAñ¢ï€ë∂É`ÉFÉbÉN
            const currentSection = document.querySelector('.section[style*="display: block"]');
            if (currentSection && currentSection.id === 'autodeliverySection' && sectionName !== 'autodelivery') {
                if (autodeliverySettingsChanged) {
                    if (!confirm('é©ìÆîzêMê›íËÇ…ï€ë∂Ç≥ÇÍÇƒÇ¢Ç»Ç¢ïœçXÇ™Ç†ÇËÇ‹Ç∑ÅBÄnÄnï€ë∂ÇπÇ∏Ç…à⁄ìÆÇµÇ‹Ç∑Ç©ÅH')) {
                        return; // à⁄ìÆÇÉLÉÉÉìÉZÉã
                    }
                    // à⁄ìÆÇãñâ¬ÇµÇΩèÍçáÅAÉtÉâÉOÇÉäÉZÉbÉg
                    autodeliverySettingsChanged = false;
                }
            }

            // Ç∑Ç◊ÇƒÇÃÉZÉNÉVÉáÉìÇîÒï\é¶
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });

            // ëIëÇ≥ÇÍÇΩÉZÉNÉVÉáÉìÇï\é¶
            const targetSection = document.getElementById(sectionName + 'Section');
            if (targetSection) {
                targetSection.style.display = 'block';

                // ÉÅÉjÉÖÅ[ÇÃÉAÉNÉeÉBÉuèÛë‘ÇçXêV
                updateActiveMenu(sectionName);

                // ÉJÉåÉìÉ_Å[ÉZÉNÉVÉáÉìÇÃèÍçáÇÕèâä˙âª
                if (sectionName === 'calendar') {
                    setTimeout(() => {
                        renderCalendar();
                        renderMiniCalendar();
                    }, 10);
                }

                // âÔé–èÓïÒÉZÉNÉVÉáÉìÇÃèÍçáÅAâ¡ñøìXÉfÅ[É^Çì«Ç›çûÇ›
                if (sectionName === 'company') {
                    console.log('==== COMPANY SECTION OPENED ====');
                    if (window.merchantId) {
                        console.log('Loading merchant data for:', window.merchantId);
                        setTimeout(() => loadMerchantData(window.merchantId), 100);
                    } else {
                        console.log('No merchantId available for data loading');
                    }
                }

                // é©ìÆîzêMê›íËÉZÉNÉVÉáÉìÇÃèÍçáÅAâ¡ñøìXÉfÅ[É^Çì«Ç›çûÇ›
                if (sectionName === 'autodelivery') {
                    console.log('==== AUTODELIVERY SECTION OPENED ====');

                    // merchantIdÇÃéÊìæÇééÇ›ÇÈÅiï°êîÇÃÉ\Å[ÉXÇ©ÇÁÅj
                    const merchantId = window.merchantId || sessionStorage.getItem('currentUser');

                    if (merchantId) {
                        console.log('Loading merchant data for autodelivery:', merchantId);

                        // merchantDataÇ™ä˘Ç…Ç†ÇÍÇŒÇªÇÍÇégópÅAÇ»ÇØÇÍÇŒçƒéÊìæ
                        if (window.merchantData) {
                            console.log('Using existing merchantData');
                            loadAutodeliverySettings(window.merchantData);
                        } else {
                            console.log('Fetching fresh merchantData');
                            // íºê⁄ÉfÅ[É^ÇçƒéÊìæ
                            fetchMerchantDataForAutodelivery(merchantId);
                        }
                    } else {
                        console.log('No merchantId available for autodelivery');
                        console.log('Trying to get from sessionStorage...');
                        const savedUser = sessionStorage.getItem('currentUser');
                        if (savedUser) {
                            window.merchantId = savedUser;
                            fetchMerchantDataForAutodelivery(savedUser);
                        }
                    }
                }

                // âÔé–èÓïÒÉZÉNÉVÉáÉìÇÃèÍçáÇÕéxìXÉ}ÉbÉvÇçXêV
                if (sectionName === 'company') {
                    setTimeout(() => {
                        updateBranchMaps();
                        loadGoogleMap();
                    }, 100);
                }
            }

            // ÉÅÉjÉÖÅ[Çï¬Ç∂ÇÈ
            document.getElementById('sideMenu').classList.add('-translate-x-full');
        }

        // å†å¿ÉÇÅ[É_Éã
        function openPermissionModal(name = null, isNew = true) {
            const modal = document.getElementById('permissionModal');
            const modalTitle = document.getElementById('modalTitle');
            const newSalesFields = document.getElementById('newSalesFields');

            if (isNew) {
                // êVãKí«â¡ÉÇÅ[Éh
                modalTitle.textContent = 'êVãKâcã∆íSìñé“í«â¡';
                newSalesFields.classList.remove('hidden');
                // ÉtÉHÅ[ÉÄÇÉNÉäÉA
                document.getElementById('newSalesName').value = '';
                document.getElementById('newSalesEmail').value = '';
                document.getElementById('newSalesPhone').value = '';
                document.getElementById('newSalesRole').value = 'àÍî âcã∆';
                // ëSå†å¿É`ÉFÉbÉNÉ{ÉbÉNÉXÇÉNÉäÉA
                document.querySelectorAll('.permission-checkbox').forEach(cb => cb.checked = false);
            } else {
                // ï“èWÉÇÅ[Éh
                modalTitle.textContent = `${name}ÇÃå†å¿ê›íË`;
                newSalesFields.classList.add('hidden');
                // ä˘ë∂ÇÃå†å¿Çì«Ç›çûÇﬁÅiÉfÉÇópÇ…ÉâÉìÉ_ÉÄÇ…ê›íËÅj
                loadExistingPermissions(name);
            }

            modal.classList.remove('hidden');
        }

        function closePermissionModal() {
            document.getElementById('permissionModal').classList.add('hidden');
        }

        function editPermissions(name) {
            openPermissionModal(name, false);
        }

        // ä˘ë∂ÇÃå†å¿Çì«Ç›çûÇﬁ
        function loadExistingPermissions(name) {
            // ÉfÉÇópÅFÉâÉìÉ_ÉÄÇ…å†å¿Çê›íË
            document.querySelectorAll('.permission-checkbox').forEach(cb => {
                cb.checked = Math.random() > 0.5;
            });
        }

        // âcã∆íSìñé“çÌèúämîF
        function confirmDeleteSales(name) {
            // çÌèúämîFÉÇÅ[É_ÉãÇçÏê¨
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.id = 'deleteConfirmModal';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-md">
                    <div class="flex items-center mb-4">
                        <svg class="w-6 h-6 text-red-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        <h3 class="text-lg font-bold text-gray-900">âcã∆íSìñé“ÇÃçÌèúämîF</h3>
                    </div>
                    <p class="text-gray-600 mb-4">
                        <span class="font-semibold">${name}</span>Ç≥ÇÒÇçÌèúÇµÇƒÇ‡ÇÊÇÎÇµÇ¢Ç≈Ç∑Ç©ÅH
                    </p>
                    <div class="bg-yellow-50 border border-yellow-300 rounded-lg p-3 mb-4">
                        <p class="text-sm text-yellow-800">
                            <strong>íçà”ÅF</strong>Ç±ÇÃëÄçÏÇÕéÊÇËè¡ÇπÇ‹ÇπÇÒÅB<br>
                            çÌèúÇ∑ÇÈÇ∆à»â∫ÇÃèÓïÒÇ™é∏ÇÌÇÍÇ‹Ç∑ÅF
                        </p>
                        <ul class="mt-2 text-sm text-yellow-700 list-disc list-inside">
                            <li>âcã∆íSìñé“ÇÃäÓñ{èÓïÒ</li>
                            <li>å†å¿ê›íË</li>
                            <li>âﬂãéÇÃäàìÆóöó</li>
                            <li>íSìñàƒåèÇÃäÑÇËìñÇƒÅiçƒäÑÇËìñÇƒÇ™ïKóvÅj</li>
                        </ul>
                    </div>
                    <div class="flex items-center mb-4">
                        <input type="checkbox" id="reassignCases" class="rounded mr-2">
                        <label for="reassignCases" class="text-sm text-gray-700">
                            íSìñàƒåèÇëºÇÃâcã∆Ç…à¯Ç´åpÇÆ
                        </label>
                    </div>
                    <div id="reassignSection" class="hidden mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">à¯Ç´åpÇ¨êÊ</label>
                        <select id="reassignTo" class="w-full px-3 py-2 border rounded-lg">
                            <option value="">ëIëÇµÇƒÇ≠ÇæÇ≥Ç¢</option>
                            <option value="ìcíÜëæòY">ìcíÜëæòYÅiÉäÅ[É_Å[Åj</option>
                            <option value="ç≤ì°â‘éq">ç≤ì°â‘éqÅiàÍî âcã∆Åj</option>
                            <option value="óÈñÿéüòY">óÈñÿéüòYÅiêVêlâcã∆Åj</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button onclick="closeDeleteModal()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ÉLÉÉÉìÉZÉã
                        </button>
                        <button onclick="deleteSales('${name}')" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            çÌèúÇ∑ÇÈ
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // à¯Ç´åpÇ¨É`ÉFÉbÉNÉ{ÉbÉNÉXÇÃÉCÉxÉìÉg
            document.getElementById('reassignCases').addEventListener('change', function(e) {
                const reassignSection = document.getElementById('reassignSection');
                if (e.target.checked) {
                    reassignSection.classList.remove('hidden');
                } else {
                    reassignSection.classList.add('hidden');
                }
            });

            // çÌèúëŒè€ÇëIëéàÇ©ÇÁèúäO
            const reassignSelect = document.getElementById('reassignTo');
            Array.from(reassignSelect.options).forEach(option => {
                if (option.value === name) {
                    option.remove();
                }
            });
        }

        // çÌèúÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
        function closeDeleteModal() {
            const modal = document.getElementById('deleteConfirmModal');
            if (modal) {
                modal.remove();
            }
        }

        // âcã∆íSìñé“ÇçÌèú
        function deleteSales(name) {
            const reassignCases = document.getElementById('reassignCases').checked;
            const reassignTo = document.getElementById('reassignTo').value;

            if (reassignCases && !reassignTo) {
                alert('à¯Ç´åpÇ¨êÊÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢');
                return;
            }

            // çÌèúèàóùÅié¿ç€Ç…ÇÕAPIÇåƒÇ‘Åj
            if (reassignCases) {
                showNotification('çÌèúäÆóπ', `${name}Ç≥ÇÒÇçÌèúÇµÅAàƒåèÇ${reassignTo}Ç≥ÇÒÇ…à¯Ç´åpÇ¨Ç‹ÇµÇΩ`);
            } else {
                showNotification('çÌèúäÆóπ', `${name}Ç≥ÇÒÇçÌèúÇµÇ‹ÇµÇΩ`);
            }

            // ÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
            closeDeleteModal();

            // ÉeÅ[ÉuÉãÇ©ÇÁçsÇçÌèúÅiÉfÉÇópÅj
            const rows = document.querySelectorAll('#salesSection tbody tr');
            rows.forEach(row => {
                if (row.textContent.includes(name)) {
                    row.style.transition = 'opacity 0.3s';
                    row.style.opacity = '0';
                    setTimeout(() => {
                        row.remove();
                    }, 300);
                }
            });
        }

        // å†å¿ÉvÉäÉZÉbÉgê›íË
        function setPreset(preset) {
            const presets = {
                office: ['case.cancel', 'case.contract', 'automail.view', 'report.self', 'company.view'],
                standard: ['case.cancel', 'case.contract', 'automail.view', 'report.self', 'company.view'],
                leader: ['case.view.all', 'case.edit', 'case.hide', 'case.delete', 'case.cancel', 'case.contract', 'finance.view', 'automail.view', 'automail.edit', 'report.self', 'report.all', 'report.export', 'company.view'],
                admin: ['case.view.all', 'case.edit', 'case.hide', 'case.delete', 'case.cancel', 'case.contract', 'automail.view', 'automail.edit', 'finance.view', 'finance.export', 'report.self', 'report.all', 'report.export', 'sales.manage', 'company.view', 'company.edit']
            };
            
            // Ç∑Ç◊ÇƒÇÃÉ`ÉFÉbÉNÉ{ÉbÉNÉXÇÉNÉäÉA
            document.querySelectorAll('.permission-checkbox').forEach(cb => {
                cb.checked = false;
            });
            
            // ÉvÉäÉZÉbÉgÇ…äÓÇ√Ç¢ÇƒÉ`ÉFÉbÉN
            if (presets[preset]) {
                presets[preset].forEach(permission => {
                    const checkbox = document.querySelector(`[data-permission="${permission}"]`);
                    if (checkbox) checkbox.checked = true;
                });
            }
            
            // É{É^ÉìÇÃÉAÉNÉeÉBÉuèÛë‘ÇçXêV
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
            });
            event.target.classList.add('bg-blue-600', 'text-white');
        }

        function savePermissions() {
            const modalTitle = document.getElementById('modalTitle').textContent;
            const isNewSales = modalTitle.includes('êVãK');

            if (isNewSales) {
                // êVãKí«â¡ÇÃèÍçá
                const name = document.getElementById('newSalesName').value;
                const email = document.getElementById('newSalesEmail').value;
                const phone = document.getElementById('newSalesPhone').value;
                const role = document.getElementById('newSalesRole').value;

                // ÉoÉäÉfÅ[ÉVÉáÉì
                if (!name || !email) {
                    alert('éÅñºÇ∆ÉÅÅ[ÉãÉAÉhÉåÉXÇÕïKê{çÄñ⁄Ç≈Ç∑');
                    return;
                }

                // ÉeÅ[ÉuÉãÇ…êVÇµÇ¢çsÇí«â¡
                addSalesPersonToTable(name, role, email, phone);

                showNotification('í«â¡äÆóπ', `${name}Ç≥ÇÒÇâcã∆íSìñé“Ç∆ÇµÇƒí«â¡ÇµÇ‹ÇµÇΩ`);
            } else {
                // ï“èWÇÃèÍçá
                showNotification('çXêVäÆóπ', 'å†å¿ê›íËÇçXêVÇµÇ‹ÇµÇΩ');
            }

            closePermissionModal();
        }

        // ÉeÅ[ÉuÉãÇ…âcã∆íSìñé“Çí«â¡
        function addSalesPersonToTable(name, role, email, phone) {
            const tbody = document.querySelector('#salesSection tbody');
            const newRow = document.createElement('tr');

            // ÉçÅ[ÉãÇ…âûÇ∂ÇΩêFÇê›íË
            let roleColor = 'green';
            let statsDisplay = ['0', '0%'];

            if (role === 'ÉäÅ[É_Å[') {
                roleColor = 'purple';
            } else if (role === 'àÍî âcã∆') {
                roleColor = 'blue';
            } else if (role === 'àÍî éññ±') {
                roleColor = 'green';
                statsDisplay = ['-', '-'];  // éññ±ÇÕê¨ñÒêîÅEê¨ñÒó¶Ç»Çµ
            } else if (role === 'åªèÍäƒì¬') {
                roleColor = 'yellow';
                statsDisplay = ['-', '-'];  // åªèÍäƒì¬Ç‡ê¨ñÒêîÅEê¨ñÒó¶Ç»Çµ
            }

            newRow.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${name}</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-${roleColor}-100 text-${roleColor}-800">${role}</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${statsDisplay[0]}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${statsDisplay[1]}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm">
                    <button onclick="editPermissions('${name}')" class="text-blue-600 hover:text-blue-900 mr-3">å†å¿ï“èW</button>
                    <button onclick="confirmDeleteSales('${name}')" class="text-red-600 hover:text-red-900">çÌèú</button>
                </td>
            `;

            tbody.appendChild(newRow);
        }

        // ÉçÉOÉAÉEÉg
        window.logout = function() {
            // óºï˚ÇÃÉXÉgÉåÅ[ÉWÇÉNÉäÉA
            localStorage.removeItem('franchiseUser');
            localStorage.removeItem('franchiseRole');
            localStorage.removeItem('loginTime');
            localStorage.removeItem('rememberLogin');
            sessionStorage.clear();
            location.reload();
        }

        // ÉpÉXÉèÅ[ÉhñYÇÍèàóù
        function showForgotPassword() {
            const email = prompt('ìoò^Ç≥ÇÍÇƒÇ¢ÇÈÉÅÅ[ÉãÉAÉhÉåÉXÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢:');
            if (email) {
                alert(`ÉpÉXÉèÅ[ÉhÉäÉZÉbÉgÉäÉìÉNÇ ${email} Ç…ëóêMÇµÇ‹ÇµÇΩÅBÄnÅiÉfÉÇî≈ÇÃÇΩÇﬂé¿ç€Ç…ÇÕëóêMÇ≥ÇÍÇ‹ÇπÇÒÅj`);
            }
        }
        
        // ÉyÅ[ÉWì«Ç›çûÇ›éûÇÃèàóù
        window.addEventListener('DOMContentLoaded', function() {
            // ÉçÅ[ÉJÉãÉXÉgÉåÅ[ÉWÇ‹ÇΩÇÕÉZÉbÉVÉáÉìÉXÉgÉåÅ[ÉWÇ©ÇÁïúå≥
            let savedUser = localStorage.getItem('franchiseUser') || sessionStorage.getItem('franchiseUser');
            let savedRole = localStorage.getItem('franchiseRole') || sessionStorage.getItem('franchiseRole');

            if (savedUser && savedRole) {
                // ÉçÉOÉCÉìéûä‘ÇÉ`ÉFÉbÉNÅi24éûä‘Ç≈é©ìÆÉçÉOÉAÉEÉgÅj
                const loginTime = localStorage.getItem('loginTime') || sessionStorage.getItem('loginTime');
                if (loginTime) {
                    const hoursSinceLogin = (new Date() - new Date(loginTime)) / (1000 * 60 * 60);
                    if (hoursSinceLogin > 24) {
                        // ÉZÉbÉVÉáÉìä˙å¿êÿÇÍ - ÉçÉOÉCÉìÉyÅ[ÉWÇ÷
                        localStorage.removeItem('franchiseUser');
                        localStorage.removeItem('franchiseRole');
                        localStorage.removeItem('loginTime');
                        sessionStorage.removeItem('franchiseUser');
                        sessionStorage.removeItem('franchiseRole');
                        sessionStorage.removeItem('loginTime');
                        window.location.href = 'merchant-portal/login.html';
                        return;
                    }
                }

                // ÉçÉOÉCÉìèÛë‘óLå¯ - É_ÉbÉVÉÖÉ{Å[Éhï\é¶
                currentUser = savedUser;
                userRole = savedRole;
                document.getElementById('mainApp').classList.remove('hidden');

                // â¡ñøìXÉfÅ[É^Ç∆ÉXÉeÅ[É^ÉXÇéÊìæÇµÇƒÇ©ÇÁï\é¶ÇçXêV
                Promise.all([
                    fetchMerchantData(savedUser),
                    loadMerchantStatus(savedUser)
                ]).then(() => {
                    updateRoleDisplay();
                    showSection('dashboard');

                    // èââÒÉçÉOÉCÉìéûÇÃèâä˙ê›íËÅiÉfÅ[É^éÊìæå„Ç…é¿çsÅj
                    console.log('[DOMContentLoaded] merchantData loaded, calling initializeFirstLoginSettings');
                    console.log('[DOMContentLoaded] window.merchantData:', window.merchantData ? 'exists' : 'null');
                    initializeFirstLoginSettings();
                }).catch(error => {
                    console.error('Failed to fetch merchant data or status:', error);
                    updateRoleDisplay();
                    showSection('dashboard');

                    // ÉGÉâÅ[éûÇ≈Ç‡èâä˙ê›íËÇé¿çs
                    console.log('[DOMContentLoaded] Error occurred, calling initializeFirstLoginSettings anyway');
                    initializeFirstLoginSettings();
                });

                // àƒåèÉJÅ[ÉhÇèâä˙âª
                setTimeout(() => {
                    renderCaseCards();
                    updateCaseCounts();
                }, 50);

                // ÉJÉåÉìÉ_Å[Çèâä˙âª
                setTimeout(() => {
                    initCalendar();
                }, 100);

                // é©ìÆîzêMê›íËÇÃï€ë∂É{É^ÉìÇ…ÉCÉxÉìÉgÉäÉXÉiÅ[Çí«â¡ÅiÉXÉ}ÉzëŒâûÅj
                setTimeout(() => {
                    const saveBtn = document.getElementById('saveAutodeliveryBtn');
                    if (saveBtn) {
                        const handleSave = async function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            console.log('Save button event triggered');
                            try {
                                await saveAutoDeliverySettings();
                            } catch (error) {
                                console.error('Error in saveAutoDeliverySettings:', error);
                                alert('ÉGÉâÅ[: ' + error.message);
                            }
                        };
                        saveBtn.addEventListener('click', handleSave);
                        saveBtn.addEventListener('touchend', handleSave);
                        console.log('Save button event listeners attached');
                    } else {
                        console.error('Save button not found!');
                    }
                }, 200);
            } else {
                // ñ¢ÉçÉOÉCÉì - ÉçÉOÉCÉìÉyÅ[ÉWÇ÷ÉäÉ_ÉCÉåÉNÉg
                window.location.href = 'merchant-portal/login.html';
            }
        });

        // ìùçáê›íËï€ë∂
        function saveAllSettings() {
            // ÉvÉçÉtÉBÅ[Éãï€ë∂
            saveProfile();

            // í ímê›íËï€ë∂
            saveNotificationSettings();

            showNotification('ê›íËï€ë∂', 'Ç∑Ç◊ÇƒÇÃê›íËÇï€ë∂ÇµÇ‹ÇµÇΩ', 'success');
        }
        
        // í ímÉeÉXÉg
        function testNotification(type) {
            const messages = {
                'email': 'ÉeÉXÉgÉÅÅ[ÉãÇëóêMÇµÇ‹ÇµÇΩ',
                'sms': 'ÉeÉXÉgSMSÇëóêMÇµÇ‹ÇµÇΩ',
                'line': 'ÉeÉXÉgLINEÉÅÉbÉZÅ[ÉWÇëóêMÇµÇ‹ÇµÇΩ',
                'browser': 'ÉuÉâÉEÉUí ímÇÃÉeÉXÉg'
            };
            
            if (type === 'browser') {
                showNotification('í ímÉeÉXÉg', messages[type]);
            } else {
                alert(messages[type] + 'ÄnÅiÉfÉÇî≈ÇÃÇΩÇﬂé¿ç€Ç…ÇÕëóêMÇ≥ÇÍÇ‹ÇπÇÒÅj');
            }
        }
        
        // í íméûä‘ê›íËÇÃï\é¶/îÒï\é¶
        function toggleQuietHours() {
            const enabled = document.getElementById('enableQuietHours').checked;
            const settings = document.getElementById('quietHoursSettings');
            settings.classList.toggle('hidden', !enabled);
        }

        // ãxì˙ê›íËÇÃï\é¶/îÒï\é¶êÿÇËë÷Ç¶
        function toggleHolidaySettings() {
            const enabled = document.getElementById('enableHolidays').checked;
            const settings = document.getElementById('holidaySettings');
            settings.classList.toggle('hidden', !enabled);
        }
        
        // ÉvÉçÉtÉBÅ[Éãï€ë∂
        function saveProfile() {
            const profile = {
                name: document.getElementById('profileName').value,
                phone: document.getElementById('profilePhone').value,
                email: document.getElementById('profileEmail').value,
                lineId: document.getElementById('profileLineId').value
            };
            localStorage.setItem('userProfile', JSON.stringify(profile));
            alert('ÉvÉçÉtÉBÅ[ÉãÇï€ë∂ÇµÇ‹ÇµÇΩ');
        }
        
        // í ímê›íËï€ë∂
        function saveNotificationSettings() {
            const settings = {
                email: document.getElementById('notifyEmail').checked,
                sms: document.getElementById('notifySms').checked,
                line: document.getElementById('notifyLine').checked,
                browser: document.getElementById('notifyBrowser').checked,
                alerts: {
                    appointment_reminder: {
                        enabled: document.getElementById('appointmentReminder').checked,
                        time: document.getElementById('appointmentAlertTime').value
                    },
                    call_reminder: {
                        enabled: document.getElementById('callReminder').checked,
                        time: document.getElementById('callAlertTime').value
                    },
                    estimate_followup: {
                        enabled: document.getElementById('estimateFollowup').checked,
                        days: document.getElementById('followupDays').value
                    },
                    payment_alert: {
                        enabled: document.getElementById('paymentAlert').checked
                    }
                },
                holidays: {
                    enabled: document.getElementById('enableHolidays').checked,
                    mon: document.getElementById('holidayMon').checked,
                    tue: document.getElementById('holidayTue').checked,
                    wed: document.getElementById('holidayWed').checked,
                    thu: document.getElementById('holidayThu').checked,
                    fri: document.getElementById('holidayFri').checked,
                    sat: document.getElementById('holidaySat').checked,
                    sun: document.getElementById('holidaySun').checked
                },
                quietHours: {
                    enabled: document.getElementById('enableQuietHours').checked,
                    start: document.getElementById('quietStart').value,
                    end: document.getElementById('quietEnd').value
                }
            };
            localStorage.setItem('notificationSettings', JSON.stringify(settings));
        }
        
        // ï\é¶ê›íËï€ë∂
        function saveDisplaySettings() {
            alert('ï\é¶ê›íËÇï€ë∂ÇµÇ‹ÇµÇΩ');
        }
        
        // ÉJÉåÉìÉ_Å[ã@î\
        let currentDate = new Date();
        let currentView = 'month';
        
        // ì˙ñ{ÇÃèjì˙ÉfÅ[É^Åi2024îNÅE2025îNÅj
        const japaneseHolidays = {
            '2024-01-01': 'å≥ì˙',
            '2024-01-08': 'ê¨êlÇÃì˙',
            '2024-02-11': 'åöçëãLîOÇÃì˙',
            '2024-02-12': 'êUë÷ãxì˙',
            '2024-02-23': 'ìVçcíaê∂ì˙',
            '2024-03-20': 'ètï™ÇÃì˙',
            '2024-04-29': 'è∫òaÇÃì˙',
            '2024-05-03': 'åõñ@ãLîOì˙',
            '2024-05-04': 'Ç›Ç«ÇËÇÃì˙',
            '2024-05-05': 'Ç±Ç«Ç‡ÇÃì˙',
            '2024-05-06': 'êUë÷ãxì˙',
            '2024-07-15': 'äCÇÃì˙',
            '2024-08-11': 'éRÇÃì˙',
            '2024-08-12': 'êUë÷ãxì˙',
            '2024-09-16': 'åhòVÇÃì˙',
            '2024-09-22': 'èHï™ÇÃì˙',
            '2024-09-23': 'êUë÷ãxì˙',
            '2024-10-14': 'ÉXÉ|Å[ÉcÇÃì˙',
            '2024-11-03': 'ï∂âªÇÃì˙',
            '2024-11-04': 'êUë÷ãxì˙',
            '2024-11-23': 'ãŒòJä¥é”ÇÃì˙',
            '2025-01-01': 'å≥ì˙',
            '2025-01-13': 'ê¨êlÇÃì˙',
            '2025-02-11': 'åöçëãLîOÇÃì˙',
            '2025-02-23': 'ìVçcíaê∂ì˙',
            '2025-02-24': 'êUë÷ãxì˙',
            '2025-03-20': 'ètï™ÇÃì˙',
            '2025-04-29': 'è∫òaÇÃì˙',
            '2025-05-03': 'åõñ@ãLîOì˙',
            '2025-05-04': 'Ç›Ç«ÇËÇÃì˙',
            '2025-05-05': 'Ç±Ç«Ç‡ÇÃì˙',
            '2025-05-06': 'êUë÷ãxì˙',
            '2025-07-21': 'äCÇÃì˙',
            '2025-08-11': 'éRÇÃì˙',
            '2025-09-15': 'åhòVÇÃì˙',
            '2025-09-23': 'èHï™ÇÃì˙',
            '2025-10-13': 'ÉXÉ|Å[ÉcÇÃì˙',
            '2025-11-03': 'ï∂âªÇÃì˙',
            '2025-11-23': 'ãŒòJä¥é”ÇÃì˙',
            '2025-11-24': 'êUë÷ãxì˙'
        };
        
        let calendarEvents = [
            {
                id: 1,
                title: 'ìcíÜól åªíní≤ç∏',
                date: '2024-01-15',
                time: '14:00',
                type: 'hearing',
                color: 'blue'
            },
            {
                id: 2,
                title: 'ç≤ì°ól çHéñäJén',
                date: '2024-01-20',
                time: '09:00',
                type: 'construction',
                color: 'green'
            },
            {
                id: 3,
                title: 'óÈñÿól å©êœÇ‡ÇËíÒèo',
                date: '2024-01-25',
                time: '16:00',
                type: 'estimate',
                color: 'yellow'
            }
        ];
        
        // ÉJÉåÉìÉ_Å[èâä˙âª
        function initCalendar() {
            renderCalendar();
            renderMiniCalendar();
        }
        
        // ÉJÉåÉìÉ_Å[ï`âÊ
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // åéï\é¶ÇçXêV
            const monthNames = ['1åé', '2åé', '3åé', '4åé', '5åé', '6åé', '7åé', '8åé', '9åé', '10åé', '11åé', '12åé'];
            const monthElement = document.getElementById('currentMonth');
            if (monthElement) {
                monthElement.textContent = `${year}îN${monthNames[month]}`;
            }
            
            // ÉJÉåÉìÉ_Å[ÉOÉäÉbÉhÇê∂ê¨
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();
            const prevLastDate = new Date(year, month, 0).getDate();
            
            let html = '';
            let date = 1;
            
            // 6èTä‘ï™ÇÃÉOÉäÉbÉhÇê∂ê¨
            for (let week = 0; week < 6; week++) {
                let weekHasDate = false;
                for (let day = 0; day < 7; day++) {
                    let cellDate = '';
                    let cellStyle = 'border: 1px solid #e5e7eb; padding: 8px; min-height: 100px; position: relative; background: white;';
                    let cellContent = '';
                    
                    if (week === 0 && day < firstDay) {
                        // ëOåéÇÃì˙ït
                        cellDate = prevLastDate - firstDay + day + 1;
                        cellStyle += ' color: #9ca3af; background: #f9fafb;';
                        html += `
                            <div style="${cellStyle}" data-date="${cellDate}">
                                <div style="font-weight: 500; font-size: 14px;">${cellDate}</div>
                            </div>
                        `;
                    } else if (date > lastDate) {
                        // éüåéÇÃì˙ït
                        cellDate = date - lastDate;
                        cellStyle += ' color: #9ca3af; background: #f9fafb;';
                        html += `
                            <div style="${cellStyle}" data-date="${cellDate}">
                                <div style="font-weight: 500; font-size: 14px;">${cellDate}</div>
                            </div>
                        `;
                        date++;
                    } else {
                        weekHasDate = true;
                        // ìñåéÇÃì˙ït
                        cellDate = date;
                        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
                        
                        // èTññÇ∆èjì˙ÇÃîwåiêFê›íË
                        const isHoliday = japaneseHolidays[dateStr];
                        if (day === 0 || isHoliday) {
                            // ì˙ójì˙Ç‹ÇΩÇÕèjì˙ÇÕîñÇ¢ê‘
                            cellStyle += ' background: #fee2e2;';
                        } else if (day === 6) {
                            // ìyójì˙ÇÕîñÇ¢êÖêF
                            cellStyle += ' background: #e0f2fe;';
                        }
                        
                        // ç°ì˙ÇÃì˙ïtÇã≠í≤
                        const today = new Date();
                        const isToday = year === today.getFullYear() && month === today.getMonth() && date === today.getDate();
                        if (isToday) {
                            cellStyle = cellStyle.replace(/background:[^;]+;/, 'background: #eff6ff;');
                            cellStyle += ' border: 2px solid #3b82f6;';
                        }
                        
                        // ÉCÉxÉìÉgÇï\é¶
                        const dayEvents = calendarEvents.filter(e => e.date === dateStr);
                        if (dayEvents.length > 0) {
                            cellContent = '<div class="mt-1 space-y-1">';
                            dayEvents.forEach(event => {
                                const bgColor = {
                                    'blue': 'bg-blue-500',
                                    'green': 'bg-green-500',
                                    'yellow': 'bg-yellow-500',
                                    'purple': 'bg-purple-500',
                                    'red': 'bg-red-500'
                                }[event.color] || 'bg-gray-500';
                                
                                cellContent += `
                                    <div class="text-xs p-1 ${bgColor} text-white rounded truncate cursor-pointer hover:opacity-80 event-item" 
                                         draggable="true"
                                         data-event-id="${event.id}"
                                         onclick="showEventDetail(${event.id})" 
                                         oncontextmenu="showEventMenu(event, ${event.id})"
                                         ondragstart="handleDragStart(event, ${event.id})"
                                         title="${event.title}">
                                        ${event.time ? event.time + ' ' : ''}${event.title}
                                    </div>
                                `;
                            });
                            cellContent += '</div>';
                        }
                        
                        // èjì˙ñºÇí«â¡
                        let holidayLabel = '';
                        if (isHoliday) {
                            holidayLabel = `<div style="font-size: 10px; color: #dc2626; font-weight: 500;">${isHoliday}</div>`;
                        }
                        
                        // htmlÇ…í«â¡
                        const originalBg = isToday ? '#eff6ff' : (day === 0 || isHoliday ? '#fee2e2' : day === 6 ? '#e0f2fe' : 'white');
                        const hoverBg = isToday ? '#dbeafe' : (day === 0 || isHoliday ? '#fecaca' : day === 6 ? '#bae6fd' : '#f9fafb');
                        
                        html += `
                            <div style="${cellStyle}" 
                                 data-date="${cellDate}"
                                 data-full-date="${dateStr}"
                                 ondrop="handleDrop(event)"
                                 ondragover="handleDragOver(event)"
                                 ondragleave="handleDragLeave(event)"
                                 onclick="handleCellClick(event)"
                                 onmouseover="this.style.background='${hoverBg}'"
                                 onmouseout="this.style.background='${originalBg}'">
                                <div style="font-weight: 500; font-size: 14px; ${day === 0 || isHoliday ? 'color: #dc2626;' : day === 6 ? 'color: #0284c7;' : ''}">${cellDate}</div>
                                ${holidayLabel}
                                ${cellContent}
                            </div>
                        `;
                        
                        date++;
                    }
                }
                
                // èTÇ…ì˙ïtÇ™Ç»Ç¢èÍçáÇÕèIóπ
                if (!weekHasDate && date > lastDate) break;
            }
            
            const calendarGrid = document.getElementById('calendarGrid');
            if (calendarGrid) {
                calendarGrid.innerHTML = html;
            }
        }
        
        // É~ÉjÉJÉåÉìÉ_Å[ï`âÊ
        function renderMiniCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const today = new Date();
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();
            
            let html = '<div class="grid grid-cols-7 gap-1 text-xs">';
            
            // ójì˙ÉwÉbÉ_Å[
            const weekDays = ['ì˙', 'åé', 'âŒ', 'êÖ', 'ñÿ', 'ã‡', 'ìy'];
            weekDays.forEach(day => {
                html += `<div class="text-center font-medium text-gray-500 py-1">${day}</div>`;
            });
            
            // ãÛîíÉZÉã
            for (let i = 0; i < firstDay; i++) {
                html += '<div></div>';
            }
            
            // ì˙ïtÉZÉã
            for (let date = 1; date <= lastDate; date++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
                const hasEvent = calendarEvents.some(e => e.date === dateStr);
                const isToday = year === today.getFullYear() && month === today.getMonth() && date === today.getDate();
                
                let cellClass = 'text-center py-1 cursor-pointer hover:bg-gray-100 rounded';
                if (isToday) cellClass += ' bg-blue-500 text-white hover:bg-blue-600';
                else if (hasEvent) cellClass += ' font-bold text-blue-600';
                
                html += `<div class="${cellClass}" onclick="goToDate('${dateStr}')">${date}</div>`;
            }
            
            html += '</div>';
            
            const miniCalendar = document.getElementById('miniCalendar');
            if (miniCalendar) {
                miniCalendar.innerHTML = html;
            }
        }
        
        // ÉJÉåÉìÉ_Å[ÉrÉÖÅ[êÿÇËë÷Ç¶
        function changeCalendarView(view) {
            currentView = view;
            
            // É{É^ÉìÇÃÉXÉ^ÉCÉãÇçXêV
            document.querySelectorAll('.calendar-view-btn').forEach(btn => {
                btn.classList.remove('text-blue-600', 'bg-blue-50');
                btn.classList.add('text-gray-600');
            });
            
            // ÉNÉäÉbÉNÇ≥ÇÍÇΩÉ{É^ÉìÇÃÉXÉ^ÉCÉãÇçXêV
            if (event && event.target) {
                event.target.classList.remove('text-gray-600');
                event.target.classList.add('text-blue-600', 'bg-blue-50');
            }
            
            // ÉrÉÖÅ[ÇêÿÇËë÷Ç¶
            document.getElementById('calendarMonthView').classList.toggle('hidden', view !== 'month');
            document.getElementById('calendarWeekView').classList.toggle('hidden', view !== 'week');
            document.getElementById('calendarDayView').classList.toggle('hidden', view !== 'day');
            
            // ëŒâûÇ∑ÇÈÉrÉÖÅ[Çï`âÊ
            if (view === 'month') {
                renderCalendar();
            } else if (view === 'week') {
                renderWeekView();
            } else if (view === 'day') {
                renderDayView();
            }
        }

        // èTï\é¶Çï`âÊ
        function renderWeekView() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const date = currentDate.getDate();
            
            // ç°èTÇÃì˙ójì˙ÇåvéZ
            const today = new Date(year, month, date);
            const dayOfWeek = today.getDay();
            const weekStart = new Date(today);
            weekStart.setDate(date - dayOfWeek);
            
            // èTï\é¶ÇÃÉwÉbÉ_Å[
            let html = '';
            
            // éûä‘é≤ÉwÉbÉ_Å[
            html += '<div class="border-b border-r p-2 bg-gray-50 font-medium text-center">éûä‘</div>';
            
            // ójì˙ÉwÉbÉ_Å[
            const weekDays = ['ì˙', 'åé', 'âŒ', 'êÖ', 'ñÿ', 'ã‡', 'ìy'];
            for (let i = 0; i < 7; i++) {
                const dayDate = new Date(weekStart);
                dayDate.setDate(weekStart.getDate() + i);
                const dayStr = `${dayDate.getMonth() + 1}/${dayDate.getDate()}`;
                const isToday = dayDate.toDateString() === new Date().toDateString();
                
                html += `<div class="border-b border-r p-2 bg-gray-50 text-center ${isToday ? 'bg-blue-50 text-blue-600 font-bold' : ''}">
                    <div class="text-xs text-gray-500">${weekDays[i]}</div>
                    <div class="font-medium">${dayStr}</div>
                </div>`;
            }
            
            // éûä‘ÉXÉçÉbÉgÅi8:00-20:00Åj
            for (let hour = 8; hour <= 20; hour++) {
                // éûä‘ÉâÉxÉã
                html += `<div class="border-b border-r p-2 bg-gray-50 text-xs text-center">${String(hour).padStart(2, '0')}:00</div>`;
                
                // äeójì˙ÇÃÉZÉã
                for (let i = 0; i < 7; i++) {
                    const dayDate = new Date(weekStart);
                    dayDate.setDate(weekStart.getDate() + i);
                    const dateStr = dayDate.toISOString().split('T')[0];
                    
                    // ÇªÇÃéûä‘ë—ÇÃÉCÉxÉìÉgÇéÊìæ
                    const hourEvents = calendarEvents.filter(e => {
                        if (e.date !== dateStr || !e.time) return false;
                        const eventHour = parseInt(e.time.split(':')[0]);
                        return eventHour === hour;
                    });
                    
                    let cellContent = '';
                    if (hourEvents.length > 0) {
                        hourEvents.forEach(event => {
                            const bgColor = {
                                'blue': 'bg-blue-500',
                                'green': 'bg-green-500',
                                'yellow': 'bg-yellow-500',
                                'purple': 'bg-purple-500',
                                'red': 'bg-red-500'
                            }[event.color] || 'bg-gray-500';
                            
                            cellContent += `<div class="text-xs p-1 ${bgColor} text-white rounded mb-1 cursor-pointer hover:opacity-80" 
                                onclick="showEventDetail(${event.id})" title="${event.title}">
                                ${event.time} ${event.title}
                            </div>`;
                        });
                    }
                    
                    html += `<div class="border-b border-r p-1 h-12 hover:bg-gray-50 cursor-pointer" 
                        data-date="${dateStr}" data-hour="${hour}" onclick="createEventAtTime('${dateStr}', ${hour})">
                        ${cellContent}
                    </div>`;
                }
            }
            
            document.getElementById('weekGrid').innerHTML = html;
        }

        // ì˙ï\é¶Çï`âÊ
        function renderDayView() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const date = currentDate.getDate();
            
            const dayDate = new Date(year, month, date);
            const dateStr = dayDate.toISOString().split('T')[0];
            const weekDays = ['ì˙', 'åé', 'âŒ', 'êÖ', 'ñÿ', 'ã‡', 'ìy'];
            const dayOfWeek = dayDate.getDay();
            
            // ì˙ïtï\é¶ÇçXêV
            document.getElementById('dayViewDate').textContent = 
                `${year}îN${month + 1}åé${date}ì˙Åi${weekDays[dayOfWeek]}Åj`;
            
            // éûä‘ÉXÉçÉbÉgÇê∂ê¨
            let html = '';
            for (let hour = 6; hour <= 22; hour++) {
                const hourEvents = calendarEvents.filter(e => {
                    if (e.date !== dateStr || !e.time) return false;
                    const eventHour = parseInt(e.time.split(':')[0]);
                    return eventHour === hour;
                });
                
                let eventContent = '';
                if (hourEvents.length > 0) {
                    hourEvents.forEach(event => {
                        const bgColor = {
                            'blue': 'bg-blue-500',
                            'green': 'bg-green-500',
                            'yellow': 'bg-yellow-500',
                            'purple': 'bg-purple-500',
                            'red': 'bg-red-500'
                        }[event.color] || 'bg-gray-500';
                        
                        eventContent += `<div class="p-2 ${bgColor} text-white rounded mb-2 cursor-pointer hover:opacity-80" 
                            onclick="showEventDetail(${event.id})">
                            <div class="font-medium">${event.time} ${event.title}</div>
                            <div class="text-sm opacity-90">${event.type}</div>
                        </div>`;
                    });
                }
                
                html += `
                    <div class="flex border-b hover:bg-gray-50">
                        <div class="w-20 p-3 bg-gray-50 text-sm font-medium text-center border-r">
                            ${String(hour).padStart(2, '0')}:00
                        </div>
                        <div class="flex-1 p-3 min-h-16 cursor-pointer" 
                             data-date="${dateStr}" data-hour="${hour}" 
                             onclick="createEventAtTime('${dateStr}', ${hour})">
                            ${eventContent}
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('dayTimeSlots').innerHTML = html;
        }

        // ì¡íËÇÃéûä‘Ç…êVãKÉCÉxÉìÉgÇçÏê¨
        function createEventAtTime(date, hour) {
            const time = `${String(hour).padStart(2, '0')}:00`;
            showEventModal(null, date, time);
        }
        
        // ëOåéÇ÷
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }
        
        // éüåéÇ÷
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }
        
        // ì¡íËÇÃì˙ïtÇ÷ÉWÉÉÉìÉv
        function goToDate(dateStr) {
            const [year, month, day] = dateStr.split('-').map(Number);
            currentDate = new Date(year, month - 1, day);
            showSection('calendar');
            renderCalendar();
        }
        
        // ÉCÉxÉìÉgè⁄ç◊ï\é¶
        function showEventDetail(eventId) {
            const event = calendarEvents.find(e => e.id === eventId);
            if (event) {
                alert(`${event.title}Änì˙éû: ${event.date} ${event.time || ''}ÄnéÌï : ${event.type}`);
            }
        }
        
        // ÉhÉâÉbÉO & ÉhÉçÉbÉvã@î\
        let draggedEventId = null;

        function handleDragStart(e, eventId) {
            draggedEventId = eventId;
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', e.target.outerHTML);
            e.target.classList.add('opacity-50');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            const cell = e.currentTarget;
            if (cell.dataset.fullDate) {
                cell.classList.add('bg-blue-100', 'border-2', 'border-blue-400');
            }
        }

        function handleDragLeave(e) {
            const cell = e.currentTarget;
            cell.classList.remove('bg-blue-100', 'border-2', 'border-blue-400');
        }

        function handleDrop(e) {
            e.preventDefault();
            const cell = e.currentTarget;
            cell.classList.remove('bg-blue-100', 'border-2', 'border-blue-400');
            
            const newDate = cell.dataset.fullDate;
            if (newDate && draggedEventId) {
                // ÉCÉxÉìÉgÇÃì˙ïtÇçXêV
                const eventIndex = calendarEvents.findIndex(event => event.id === draggedEventId);
                if (eventIndex !== -1) {
                    calendarEvents[eventIndex].date = newDate;
                    renderCalendar();
                    renderMiniCalendar();
                    showNotification('ó\íËà⁄ìÆ', `ó\íËÇ${newDate}Ç…à⁄ìÆÇµÇ‹ÇµÇΩ`);
                }
            }
            draggedEventId = null;
        }

        // ÉZÉãÉNÉäÉbÉNÅiêVãKÉCÉxÉìÉgçÏê¨Åj
        function handleCellClick(e) {
            if (e.target.classList.contains('event-item')) return; // ÉCÉxÉìÉgÇÉNÉäÉbÉNÇµÇΩèÍçáÇÕñ≥éã
            
            const cell = e.currentTarget;
            const date = cell.dataset.fullDate;
            if (date) {
                showEventModal(null, date);
            }
        }

        // ÉCÉxÉìÉgâEÉNÉäÉbÉNÉÅÉjÉÖÅ[
        function showEventMenu(e, eventId) {
            e.preventDefault();
            if (confirm('Ç±ÇÃó\íËÇï“èWÇµÇ‹Ç∑Ç©ÅH')) {
                const event = calendarEvents.find(ev => ev.id === eventId);
                if (event) {
                    showEventModal(event);
                }
            }
        }


        // ÉCÉxÉìÉgÉÇÅ[É_Éãï\é¶
        function showEventModal(event = null, date = null, time = '') {
            const isEdit = !!event;
            const modalTitle = isEdit ? 'ó\íËÇï“èW' : 'êVãKó\íËÇí«â¡';
            
            const title = isEdit ? event.title : '';
            const eventDate = isEdit ? event.date : (date || new Date().toISOString().split('T')[0]);
            const eventTime = isEdit ? (event.time || '') : time;
            const type = isEdit ? event.type : 'custom';
            const color = isEdit ? event.color : 'blue';
            
            const modal = `
                <div id="eventModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-white rounded-lg p-6 w-96 max-w-full mx-4">
                        <h3 class="text-lg font-semibold mb-4">${modalTitle}</h3>
                        <form id="eventForm" onsubmit="saveEvent(event, ${isEdit ? event.id : 'null'})">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">É^ÉCÉgÉã</label>
                                    <input type="text" id="eventTitle" value="${title}" class="w-full px-3 py-2 border rounded-md" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ì˙ït</label>
                                    <input type="date" id="eventDate" value="${eventDate}" class="w-full px-3 py-2 border rounded-md" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">éûä‘</label>
                                    <input type="time" id="eventTime" value="${eventTime}" class="w-full px-3 py-2 border rounded-md">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">éÌï </label>
                                    <select id="eventType" class="w-full px-3 py-2 border rounded-md">
                                        <option value="hearing" ${type === 'hearing' ? 'selected' : ''}>åªíní≤ç∏</option>
                                        <option value="construction" ${type === 'construction' ? 'selected' : ''}>çHéñ</option>
                                        <option value="estimate" ${type === 'estimate' ? 'selected' : ''}>å©êœÇ‡ÇË</option>
                                        <option value="meeting" ${type === 'meeting' ? 'selected' : ''}>ë≈ÇøçáÇÌÇπ</option>
                                        <option value="custom" ${type === 'custom' ? 'selected' : ''}>ÇªÇÃëº</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">êF</label>
                                    <div class="flex space-x-2">
                                        <button type="button" onclick="selectColor('blue')" class="w-8 h-8 rounded-full bg-blue-500 ${color === 'blue' ? 'ring-2 ring-offset-2 ring-blue-400' : ''}"></button>
                                        <button type="button" onclick="selectColor('green')" class="w-8 h-8 rounded-full bg-green-500 ${color === 'green' ? 'ring-2 ring-offset-2 ring-green-400' : ''}"></button>
                                        <button type="button" onclick="selectColor('yellow')" class="w-8 h-8 rounded-full bg-yellow-500 ${color === 'yellow' ? 'ring-2 ring-offset-2 ring-yellow-400' : ''}"></button>
                                        <button type="button" onclick="selectColor('purple')" class="w-8 h-8 rounded-full bg-purple-500 ${color === 'purple' ? 'ring-2 ring-offset-2 ring-purple-400' : ''}"></button>
                                        <button type="button" onclick="selectColor('red')" class="w-8 h-8 rounded-full bg-red-500 ${color === 'red' ? 'ring-2 ring-offset-2 ring-red-400' : ''}"></button>
                                    </div>
                                    <input type="hidden" id="eventColor" value="${color}">
                                </div>
                            </div>
                            <div class="flex justify-end space-x-3 mt-6">
                                ${isEdit ? '<button type="button" onclick="deleteEvent(' + event.id + ')" class="px-4 py-2 text-red-600 hover:bg-red-50 rounded-md">çÌèú</button>' : ''}
                                <button type="button" onclick="closeEventModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">ÉLÉÉÉìÉZÉã</button>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">ï€ë∂</button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modal);
        }

        // êFëIë
        let selectedColor = 'blue';
        function selectColor(color) {
            selectedColor = color;
            document.getElementById('eventColor').value = color;
            
            // É{É^ÉìÇÃÉXÉ^ÉCÉãÇçXêV
            document.querySelectorAll('#eventModal button[onclick^="selectColor"]').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-offset-2');
            });
            event.target.classList.add('ring-2', 'ring-offset-2');
        }

        // ÉCÉxÉìÉgï€ë∂
        function saveEvent(e, eventId) {
            e.preventDefault();
            
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const type = document.getElementById('eventType').value;
            const color = document.getElementById('eventColor').value;
            
            if (eventId) {
                // ï“èW
                const eventIndex = calendarEvents.findIndex(event => event.id === eventId);
                if (eventIndex !== -1) {
                    calendarEvents[eventIndex] = {
                        ...calendarEvents[eventIndex],
                        title, date, time, type, color
                    };
                }
            } else {
                // êVãKçÏê¨
                const newEvent = {
                    id: Math.max(...calendarEvents.map(e => e.id), 0) + 1,
                    title, date, time, type, color
                };
                calendarEvents.push(newEvent);
            }
            
            renderCalendar();
            renderMiniCalendar();
            closeEventModal();
            showNotification('ó\íËï€ë∂', eventId ? 'ó\íËÇçXêVÇµÇ‹ÇµÇΩ' : 'êVÇµÇ¢ó\íËÇí«â¡ÇµÇ‹ÇµÇΩ');
        }

        // ÉCÉxÉìÉgçÌèú
        function deleteEvent(eventId) {
            if (confirm('Ç±ÇÃó\íËÇçÌèúÇµÇ‹Ç∑Ç©ÅH')) {
                const eventIndex = calendarEvents.findIndex(event => event.id === eventId);
                if (eventIndex !== -1) {
                    calendarEvents.splice(eventIndex, 1);
                    renderCalendar();
                    renderMiniCalendar();
                    closeEventModal();
                    showNotification('ó\íËçÌèú', 'ó\íËÇçÌèúÇµÇ‹ÇµÇΩ');
                }
            }
        }

        // ÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
        function closeEventModal() {
            const modal = document.getElementById('eventModal');
            if (modal) {
                modal.remove();
            }
        }

        // êVãKÉCÉxÉìÉgí«â¡ÅiÉ{É^ÉìÇ©ÇÁÅj
        function addNewEvent() {
            const today = new Date().toISOString().split('T')[0];
            showEventModal(null, today);
        }
        
        // ========== êøãÅä«óùã@î\ ==========
        
        // êøãÅä«óùÉ^ÉuêÿÇËë÷Ç¶
        function showBillingTab(tabName) {
            // ëSÉ^ÉuÉRÉìÉeÉìÉcÇîÒï\é¶
            document.querySelectorAll('.billing-tab-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // ëSÉ^ÉuÉ{É^ÉìÇÃÉAÉNÉeÉBÉuèÛë‘Çâèú
            document.querySelectorAll('.billing-tab').forEach(tab => {
                tab.classList.remove('billing-tab-active', 'text-blue-600', 'border-blue-600');
                tab.classList.add('text-gray-500', 'border-transparent');
            });
            
            // É^ÉuñºÇÃÉ}ÉbÉsÉìÉOÅiêVÇµÇ¢É^ÉuñºÇ…ëŒâûÅj
            const tabMapping = {
                'purchase': 'purchaseTab',
                'commission': 'commissionTab',
                'payment': 'paymentTab',
                'analysis': 'analysisTab',
                // å›ä∑ê´ÇÃÇΩÇﬂå√Ç¢É^ÉuñºÇ‡écÇ∑
                'referral': 'purchaseTab',
                'success': 'commissionTab',
                'invoices': 'paymentTab',
                'schedule': 'analysisTab'
            };

            // ëIëÇ≥ÇÍÇΩÉ^ÉuÇï\é¶
            const tabId = tabMapping[tabName] || (tabName + 'Tab');
            const selectedContent = document.getElementById(tabId);
            if (selectedContent) {
                selectedContent.style.display = 'block';
            }
            
            // ëIëÇ≥ÇÍÇΩÉ^ÉuÉ{É^ÉìÇÉAÉNÉeÉBÉuÇ…
            const selectedTab = document.querySelector(`[data-tab="${tabName}"]`);
            if (selectedTab) {
                selectedTab.classList.remove('text-gray-500', 'border-transparent');
                selectedTab.classList.add('billing-tab-active', 'text-blue-600', 'border-blue-600');
            }
        }

        // ç‡ñ±ÉfÅ[É^çXêVä÷êî
        function updateFinancialData(month) {
            const date = new Date(month + '-01');
            const monthNum = date.getMonth() + 1;
            const year = date.getFullYear();

            // ÉTÉ}ÉäÅ[ÉJÅ[ÉhÇçXêV
            const referralFeeMonth = document.getElementById('referralFeeMonth');
            if (referralFeeMonth) {
                referralFeeMonth.textContent = `${monthNum}åéè–âÓóø`;
            }
            const commissionMonth = document.getElementById('commissionMonth');
            if (commissionMonth) {
                commissionMonth.textContent = `${monthNum}åéê¨ñÒéËêîóø`;
            }
            const roiLabel = document.getElementById('roiLabel');
            if (roiLabel) {
                roiLabel.textContent = `${monthNum}åéROI`;
            }

            // ÉeÅ[ÉuÉãÉfÅ[É^ÇÉtÉBÉãÉ^ÉäÉìÉOÅié¿ç€Ç…ÇÕÉTÅ[ÉoÅ[Ç©ÇÁéÊìæÅj
            const tbody = document.getElementById('referralFeeTableBody');
            if (tbody) {
                const rows = tbody.getElementsByTagName('tr');
                for (let row of rows) {
                    const dateCell = row.cells[0];
                    if (dateCell) {
                        const rowDate = new Date(dateCell.textContent);
                        const rowMonth = rowDate.getMonth() + 1;
                        const rowYear = rowDate.getFullYear();
                        if (rowMonth === monthNum && rowYear === year) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    }
                }
            }

            // äeÉ^ÉuÇÃÉfÅ[É^Ç‡çXêV
            updateAllFinancialTabs(month);
        }

        // ÉfÉ|ÉWÉbÉgä«óùä÷êî
        function showDepositModal() {
            const quantity = prompt('çwì¸Ç∑ÇÈÉfÉ|ÉWÉbÉgêîÅiåèêîÅjÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢:', '10');
            if (quantity && !isNaN(quantity) && quantity > 0) {
                const total = parseInt(quantity) * 22000;
                const today = new Date();
                const dueDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 7);
                const message = `
ÉfÉ|ÉWÉbÉg${quantity}åèï™Åi\${total.toLocaleString()}ÅjÇÃêøãÅèëÇî≠çsÇµÇ‹Ç∑ÅB

ÅyêøãÅì‡óeÅz
ÅEÉfÉ|ÉWÉbÉgÅF${quantity}åè Å~ \22,000 = \${total.toLocaleString()}
ÅEéxï•ä˙å¿ÅF${dueDate.getFullYear()}îN${dueDate.getMonth() + 1}åé${dueDate.getDate()}ì˙
ÅEóLå¯ä˙å¿ÅFì¸ã‡ämîFÇÃóÇÅXåéññÇ‹Ç≈

ÅyÇ≤íçà”éñçÄÅz
ÅEì¸ã‡ämîFå„Ç…ÉfÉ|ÉWÉbÉgÇ™îΩâfÇ≥ÇÍÇ‹Ç∑
ÅEîΩâfå„ÅAÉâÉìÉLÉìÉOÇ™1ÉâÉìÉNUPÇµÇ‹Ç∑
ÅEï‘ã‡éûÇÃêUçûéËêîóøÇÕÇ®ãqólïâíSÇ∆Ç»ÇËÇ‹Ç∑

êøãÅèëÇî≠çsÇµÇƒÇÊÇÎÇµÇ¢Ç≈ÇµÇÂÇ§Ç©ÅH`;

                if (confirm(message)) {
                    // êøãÅèëî≠çsÇÃèàóù
                    const invoiceNo = 'INV-' + Date.now().toString().slice(-8);
                    alert(`êøãÅèëÇî≠çsÇµÇ‹ÇµÇΩÅBÄnÄnêøãÅèëî‘çÜÅF${invoiceNo}ÄnÉfÉ|ÉWÉbÉgêîÅF${quantity}åèÄnêøãÅã‡äzÅF\${total.toLocaleString()}ÄnÄnì¸ã‡ämîFå„ÅA1âcã∆ì˙à»ì‡Ç…ÉfÉ|ÉWÉbÉgÇ™îΩâfÇ≥ÇÍÇ‹Ç∑ÅB`);
                    // çwì¸ê\êøóöóÇ…í«â¡Åié¿ç€ÇÕÉTÅ[ÉoÅ[ë§Ç≈èàóùÅj
                    location.reload();
                }
            }
        }

        function updateDepositSetting() {
            const selectedValue = document.querySelector('input[name="depositHandling"]:checked').value;
            const message = selectedValue === 'rollover'
                ? 'åJâzê›íËÇ…ïœçXÇµÇ‹ÇµÇΩÅBä˙å¿êÿÇÍå„Ç‡åpë±ÇµÇƒóòópÇ≈Ç´Ç‹Ç∑ÅB'
                : 'ï‘ã‡ê›íËÇ…ïœçXÇµÇ‹ÇµÇΩÅBä˙å¿êÿÇÍéûÇ…ñ¢égópï™Ç™ï‘ã‡Ç≥ÇÍÇ‹Ç∑ÅB';
            alert(message);
        }

        // êøãÅèëÉ_ÉEÉìÉçÅ[Éhã@î\
        function downloadInvoice(invoiceNo) {
            alert(`êøãÅèëÅi${invoiceNo}ÅjÇÃÉ_ÉEÉìÉçÅ[ÉhÇäJénÇµÇ‹Ç∑ÅBÄnÄnÅ¶é¿ç€ÇÃé¿ëïÇ≈ÇÕÅAÉTÅ[ÉoÅ[Ç©ÇÁêøãÅèëPDFÇéÊìæÇµÇƒÉ_ÉEÉìÉçÅ[ÉhÇµÇ‹Ç∑ÅB`);
            // é¿ç€ÇÃé¿ëïÇ≈ÇÕà»â∫ÇÃÇÊÇ§Ç»èàóùÇçsÇ§
            // window.location.href = `/api/invoices/${invoiceNo}/download`;
        }

        // ÉfÉ|ÉWÉbÉgóöóÉtÉBÉãÉ^Å[ã@î\
        function filterDepositHistory() {
            const typeFilter = document.getElementById('depositTypeFilter').value;
            const monthFilter = document.getElementById('depositMonthFilter').value;
            const rows = document.querySelectorAll('.deposit-row');

            rows.forEach(row => {
                const rowType = row.getAttribute('data-type');
                const rowDate = row.getAttribute('data-date');

                let showRow = true;

                // éÌï ÉtÉBÉãÉ^Å[
                if (typeFilter !== 'all' && rowType !== typeFilter) {
                    showRow = false;
                }

                // åéÉtÉBÉãÉ^Å[
                if (monthFilter && rowDate !== monthFilter) {
                    showRow = false;
                }

                // ï\é¶/îÒï\é¶
                row.style.display = showRow ? '' : 'none';
            });
        }

        // ÉfÉ|ÉWÉbÉgã‡äzåvéZ
        document.addEventListener('DOMContentLoaded', function() {
            const depositInput = document.getElementById('depositAmount');
            const depositTotal = document.getElementById('depositTotal');
            if (depositInput && depositTotal) {
                depositInput.addEventListener('input', function() {
                    const amount = parseInt(this.value) || 0;
                    const total = amount * 22000;
                    depositTotal.textContent = '\' + total.toLocaleString();
                });
            }
        })

        // ëSç‡ñ±É^ÉuÇÃÉfÅ[É^çXêV
        function updateAllFinancialTabs(month) {
            // ê¨ñÒéËêîóøÅAéxï•óöóÅAé˚éxï™êÕÉ^ÉuÇ‡çXêV
            console.log('ëSç‡ñ±É^ÉuÇ' + month + 'Ç…çXêV');
        }

        // è–âÓóøåvéZ
        function calculateReferralFee(projectType, buildingType, floors, competitors) {
            let baseFee = 0;
            const TAX_RATE = 0.10;
            
            // ÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉì3äKà»è„ÇÃì¡ï óøã‡
            if (buildingType === 'apartment' && floors >= 3) {
                if (projectType.includes('äOï«')) {
                    baseFee = 30000;
                }
            }
            // íPïiçÄñ⁄Åiëäå©êœÇ‡ÇËÅj
            else if (competitors > 1) {
                if (projectType === 'âÆç™ìhëï' || projectType === 'âÆè„ñhêÖ') {
                    baseFee = 10000;
                } else if (projectType === 'äOï«ï‚èC' || projectType === 'âÆç™ï‚èC' || projectType === 'ÉxÉâÉìÉ_ñhêÖ') {
                    baseFee = 5000;
                }
            }
            // äÓñ{çÄñ⁄
            else {
                baseFee = 20000;
            }
            
            const tax = Math.floor(baseFee * TAX_RATE);
            return {
                base: baseFee,
                tax: tax,
                total: baseFee + tax
            };
        }
        
        // ê¨ñÒéËêîóøåvéZ
        function calculateSuccessFee(contractAmount, rate = 0.10) {
            const TAX_RATE = 0.10;
            const baseFee = Math.floor(contractAmount * rate);
            const tax = Math.floor(baseFee * TAX_RATE);
            
            return {
                base: baseFee,
                tax: tax,
                total: baseFee + tax,
                rate: rate
            };
        }
        
        // éxï•ó\íËì˙åvéZÅiìyì˙èjì˙ÇÃå„ÇÎì|ÇµÅj
        function calculatePaymentDate(paymentMethod) {
            const today = new Date();
            const nextMonth = new Date(today.getFullYear(), today.getMonth() + 1, 1);
            let paymentDate;
            
            if (paymentMethod === 'BANK_TRANSFER') {
                // óÇåé15ì˙
                paymentDate = new Date(nextMonth.getFullYear(), nextMonth.getMonth(), 15);
            } else {
                // óÇåé27ì˙Åiå˚ç¿êUë÷Åj
                paymentDate = new Date(nextMonth.getFullYear(), nextMonth.getMonth(), 27);
            }
            
            // ìyì˙èjì˙É`ÉFÉbÉNÅiä»à’î≈Åj
            while (paymentDate.getDay() === 0 || paymentDate.getDay() === 6) {
                paymentDate.setDate(paymentDate.getDate() + 1);
            }
            
            // èjì˙É`ÉFÉbÉN
            const holidayStr = paymentDate.toISOString().split('T')[0];
            if (japaneseHolidays[holidayStr]) {
                paymentDate.setDate(paymentDate.getDate() + 1);
                // çƒìxìyì˙É`ÉFÉbÉN
                while (paymentDate.getDay() === 0 || paymentDate.getDay() === 6) {
                    paymentDate.setDate(paymentDate.getDate() + 1);
                }
            }
            
            return paymentDate;
        }
        
        // êøãÅèëî≠çs
        function issueInvoice(invoiceId) {
            if (confirm('êøãÅèëÇî≠çsÇµÇ‹Ç∑Ç©ÅH')) {
                // ÉXÉeÅ[É^ÉXÇçXêVÅiÉfÉÇÅj
                const statusCell = document.querySelector(`[value="${invoiceId}"]`).closest('tr').querySelector('.bg-yellow-100');
                if (statusCell) {
                    statusCell.classList.remove('bg-yellow-100', 'text-yellow-800');
                    statusCell.classList.add('bg-green-100', 'text-green-800');
                    statusCell.textContent = 'î≠çsçœ';
                }
                
                showNotification('êøãÅèëî≠çs', `êøãÅèë ${invoiceId} Çî≠çsÇµÇ‹ÇµÇΩ`);
            }
        }
        
        // ê¨ñÒéËêîóøêøãÅèëî≠çs
        function issueSuccessFee(feeId) {
            if (confirm('ê¨ñÒéËêîóøÇÃêøãÅèëÇî≠çsÇµÇ‹Ç∑Ç©ÅH')) {
                showNotification('ê¨ñÒéËêîóøêøãÅ', `êøãÅèëÇî≠çsÇµÇ‹ÇµÇΩÅi${feeId}Åj`);
                
                // çsÇîÒï\é¶Ç…ÅiÉfÉÇÅj
                const row = document.querySelector(`button[onclick="issueSuccessFee('${feeId}')"]`).closest('tr');
                if (row) {
                    row.style.opacity = '0.5';
                    setTimeout(() => {
                        row.style.display = 'none';
                    }, 500);
                }
            }
        }
        
        // éËìÆî≠çs
        function manualIssueSuccessFee(feeId) {
            const reason = prompt('éËìÆî≠çsÇÃóùóRÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢ÅF');
            if (reason) {
                issueSuccessFee(feeId);
                console.log('éËìÆî≠çsóùóR:', reason);
            }
        }
        
        // åééüêøãÅèëàÍäáî≠çs
        function generateMonthlyInvoices() {
            const checkedBoxes = document.querySelectorAll('.invoice-checkbox:checked');
            if (checkedBoxes.length === 0) {
                alert('î≠çsÇ∑ÇÈêøãÅèëÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢');
                return;
            }
            
            if (confirm(`${checkedBoxes.length}åèÇÃêøãÅèëÇàÍäáî≠çsÇµÇ‹Ç∑Ç©ÅH`)) {
                checkedBoxes.forEach(checkbox => {
                    issueInvoice(checkbox.value);
                });
                showNotification('àÍäáî≠çsäÆóπ', `${checkedBoxes.length}åèÇÃêøãÅèëÇî≠çsÇµÇ‹ÇµÇΩ`);
            }
        }
        
        // ëSëIë
        function selectAllInvoices(checkbox) {
            document.querySelectorAll('.invoice-checkbox').forEach(cb => {
                cb.checked = checkbox.checked;
            });
        }
        
        // êøãÅèëè⁄ç◊ï\é¶
        function showInvoiceDetail(invoiceId) {
            alert(`êøãÅèëè⁄ç◊: ${invoiceId}ÄnÄné¿ëïó\íËÅFÄn- ñæç◊ï\é¶Än- ï“èWã@î\Än- ÉÅÅ[ÉãëóêM`);
        }
        
        // PDFèoóÕ
        function downloadPDF(invoiceId) {
            showNotification('PDFèoóÕ', `${invoiceId}.pdf ÇÉ_ÉEÉìÉçÅ[ÉhÇµÇ‹ÇµÇΩ`);
        }
        
        // ç‡ñ±ÉåÉ|Å[Ég CSVèoóÕ
        function exportFinancialReport() {
            const data = [
                ['çwì¸ì˙', 'àƒåèID', 'å⁄ãqñº', 'ÉGÉäÉA', 'çwì¸ã‡äz', 'ê¨ñÒã‡äz', 'éËêîóø', 'ROI'],
                ['2025-01-15', 'C2025-001', 'ìcíÜól', 'ìåãûìsèaíJãÊ', '85000', '', '', ''],
                ['2025-01-10', 'C2025-002', 'ç≤ì°ól', 'ê_ìﬁêÏåßêÏçËés', '22000', '1200000', '132000', '475%'],
                ['2025-01-08', 'C2025-003', 'óÈñÿól', 'çÈã åßâzíJés', '80000', '800000', '80000', '100%']
            ];
            
            const csv = data.map(row => row.join(',')).join('Än');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `invoices_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            showNotification('CSVèoóÕ', 'êøãÅèëàÍóóÇCSVÇ≈èoóÕÇµÇ‹ÇµÇΩ');
        }

        // ÉåÉ|Å[ÉgópÇÃÉOÉâÉtèâä˙âª
        let salesChart = null;
        let conversionChart = null;
        let leadTimeChart = null;

        // ÉåÉ|Å[ÉgçXêVä÷êî
        function updateReports() {
            const period = document.getElementById('reportPeriod').value;
            // ä˙ä‘Ç…âûÇ∂ÇΩÉfÅ[É^éÊìæÇ∆çXêVèàóù
            renderCharts();
        }

        // ÉOÉâÉtï`âÊä÷êî
        function renderCharts() {
            // îÑè„êÑà⁄ÉOÉâÉt
            const salesCtx = document.getElementById('salesChart');
            if (salesCtx) {
                if (salesChart) {
                    salesChart.destroy();
                }
                salesChart = new Chart(salesCtx, {
                    type: 'line',
                    data: {
                        labels: ['1åé', '2åé', '3åé', '4åé', '5åé', '6åé'],
                        datasets: [{
                            label: 'îÑè„ÅiêÁâ~Åj',
                            data: [6200, 7500, 6800, 8450, 7900, 8450],
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '\' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // ê¨ñÒó¶êÑà⁄ÉOÉâÉt
            const conversionCtx = document.getElementById('conversionChart');
            if (conversionCtx) {
                if (conversionChart) {
                    conversionChart.destroy();
                }
                conversionChart = new Chart(conversionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['1åé', '2åé', '3åé', '4åé', '5åé', '6åé'],
                        datasets: [{
                            label: 'ê¨ñÒó¶Åi%Åj',
                            data: [65, 62, 68, 70, 67, 68.5],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(34, 197, 94, 0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // ÉäÅ[ÉhÉ^ÉCÉÄÉ`ÉÉÅ[Ég
            const leadTimeCtx = document.getElementById('leadTimeChart');
            if (leadTimeCtx) {
                if (leadTimeChart) {
                    leadTimeChart.destroy();
                }
                leadTimeChart = new Chart(leadTimeCtx, {
                    type: 'line',
                    data: {
                        labels: ['1åé', '2åé', '3åé', '4åé', '5åé', '6åé'],
                        datasets: [
                            {
                                label: 'ñ‚çáÇπÅ®í≤ç∏',
                                data: [3.5, 3.8, 3.2, 3.0, 3.1, 3.2],
                                borderColor: 'rgb(59, 130, 246)',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.3
                            },
                            {
                                label: 'í≤ç∏Å®å©êœ',
                                data: [3.0, 2.9, 3.1, 2.7, 2.8, 2.8],
                                borderColor: 'rgb(34, 197, 94)',
                                backgroundColor: 'rgba(34, 197, 94, 0.1)',
                                tension: 0.3
                            },
                            {
                                label: 'å©êœÅ®ê¨ñÒ',
                                data: [6.0, 5.8, 5.5, 5.2, 5.3, 5.5],
                                borderColor: 'rgb(168, 85, 247)',
                                backgroundColor: 'rgba(168, 85, 247, 0.1)',
                                tension: 0.3
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: {
                                        size: 10
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': ' + context.parsed.y + 'ì˙';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value + 'ì˙';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // ÉäÅ[ÉhÉ^ÉCÉÄï\é¶êÿë÷ÅiïΩãœ/íÜâõílÅj
        function updateLeadTimeDisplay() {
            const showMedian = document.getElementById('showMedian').checked;

            if (showMedian) {
                document.getElementById('leadTime1').textContent = '3.0ì˙';
                document.getElementById('leadTime2').textContent = '2.5ì˙';
                document.getElementById('leadTime3').textContent = '5.0ì˙';
            } else {
                document.getElementById('leadTime1').textContent = '3.2ì˙';
                document.getElementById('leadTime2').textContent = '2.8ì˙';
                document.getElementById('leadTime3').textContent = '5.5ì˙';
            }
        }

        // ÉåÉ|Å[ÉgÉGÉNÉXÉ|Å[Égä÷êî
        function exportReport() {
            const period = document.getElementById('reportPeriod').value;
            const periodText = document.getElementById('reportPeriod').options[document.getElementById('reportPeriod').selectedIndex].text;

            // CSVå`éÆÇ≈ÉfÅ[É^Çê∂ê¨
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "â¡ñøìXä«óùÉVÉXÉeÉÄ ÉåÉ|Å[Ég - " + periodText + "ÄnÄn";

            // KPIÉTÉ}ÉäÅ[
            csvContent += "KPIÉTÉ}ÉäÅ[Än";
            csvContent += "çÄñ⁄,êîíl,ëOåéî‰Än";
            csvContent += "ëçîÑè„,\8450000,+12%Än";
            csvContent += "ê¨ñÒó¶,68.5%,+5.2%Än";
            csvContent += "ïΩãœíPâø,\952000,-3%Än";
            csvContent += "êVãKàƒåè,42åè,+8åèÄnÄn";

            // âcã∆ï ê¨ê—
            csvContent += "âcã∆ï ê¨ê—Än";
            csvContent += "âcã∆ñº,ê¨ñÒêî,ê¨ñÒó¶,îÑè„Än";
            csvContent += "ìcíÜëæòY,12,75%,\3200000Än";
            csvContent += "ç≤ì°â‘éq,8,62%,\2100000Än";
            csvContent += "óÈñÿéüòY,5,45%,\1450000ÄnÄn";

            // ÉGÉäÉAï ê¨ê—
            csvContent += "ÉGÉäÉAï ê¨ê—Än";
            csvContent += "ÉGÉäÉA,àƒåèêî,ê¨ñÒó¶,îÑè„Än";
            csvContent += "ìåãûìs,18,72%,\4200000Än";
            csvContent += "ê_ìﬁêÏåß,12,65%,\2800000Än";
            csvContent += "çÈã åß,8,58%,\1450000Än";

            // É_ÉEÉìÉçÅ[Éhé¿çs
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "report_" + new Date().toISOString().split('T')[0] + ".csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            showNotification('ÉåÉ|Å[ÉgèoóÕ', 'CSVÉtÉ@ÉCÉãÇÉ_ÉEÉìÉçÅ[ÉhÇµÇ‹ÇµÇΩ');
        }

        // ÉZÉNÉVÉáÉìï\é¶éûÇ…ÉOÉâÉtÇèâä˙âª
        const originalShowSection = showSection;
        showSection = function(section) {
            originalShowSection(section);
            if (section === 'reports') {
                setTimeout(() => {
                    renderCharts();
                }, 100);
            }
        }

        // àƒåèä«óùã@î\
        let currentCaseView = 'card'; // 'card' or 'list'

        // àƒåèÉfÅ[É^ÅiÉTÉìÉvÉãÅj
        const casesData = [
            { id: 1, name: 'éRìcëæòY', location: 'ìåãûìsê¢ìcíJãÊ', propertyType: 'åÀåöÇƒÅEíz15îN', phone: '03-1234-5678', status: 'ñ¢ëŒâû', assignee: 'ìcíÜëæòY', area: 'ìåãûìsê¢ìcíJãÊ', temperature: 4, lastContact: '2024/01/15 èââÒñ‚Ç¢çáÇÌÇπ', nextAction: '2024/01/18 14:00 ìdòbÉtÉHÉçÅ[', age: 15 },
            { id: 2, name: 'óÈñÿâ‘éq', location: 'ê_ìﬁêÏåßâ°ïlés', propertyType: 'åÀåöÇƒÅEíz10îN', phone: '045-9876-5432', status: 'ÉAÉ|çœ', assignee: 'ç≤ì°â‘éq', area: 'ê_ìﬁêÏåßâ°ïlés', temperature: 3, lastContact: '2024/01/16 ìdòbÇ≈ÉAÉ|éÊìæ', nextAction: '2024/01/20 14:00 åªíní≤ç∏', age: 10 },
            { id: 3, name: 'ç≤ì°àÍòY', location: 'çÈã åßÇ≥Ç¢ÇΩÇ‹és', propertyType: 'ÉAÉpÅ[ÉgÅEíz20îN', phone: '048-1111-2222', status: 'å©êœíÒèoçœ', assignee: 'ìcíÜëæòY', area: 'çÈã åßÇ≥Ç¢ÇΩÇ‹és', temperature: 5, lastContact: '2024/01/14 å©êœèëÉÅÅ[Éãëóït', nextAction: '2024/01/22 10:00 å©êœê‡ñæñKñ‚', age: 20 },
            { id: 4, name: 'ìcíÜî¸çÁ', location: 'êÁótåßêÁótés', propertyType: 'åÀåöÇƒÅEíz25îN', phone: '043-3333-4444', status: 'åªí≤çœ', assignee: 'ç≤ì°â‘éq', area: 'êÁótåßêÁótés', temperature: 2, lastContact: '2024/01/10 åªíní≤ç∏é¿é{', nextAction: 'å©êœçÏê¨íÜ', age: 25 },
            { id: 5, name: 'çÇã¥åíëæ', location: 'ìåãûìsêVèhãÊ', propertyType: 'É}ÉìÉVÉáÉìÅEíz8îN', phone: '03-5555-6666', status: 'ê¨ñÒ', assignee: 'ìcíÜëæòY', area: 'ìåãûìsêVèhãÊ', temperature: 5, lastContact: '2024/01/17 å_ñÒí˜åã', nextAction: '2024/01/25 çHéñäJén', age: 8 },
            // ñ¢êUÇËï™ÇØàƒåè
            { id: 101, name: 'êVãKå⁄ãqA', location: 'ìåãûìsèaíJãÊ', propertyType: 'åÀåöÇƒÅEíz12îN', phone: '03-0000-0000', status: 'ñ¢ëŒâû', assignee: null, area: 'ìåãûìsèaíJãÊ', temperature: 4, source: 'Ç≠ÇÁÇ◊ÇÈ', registeredDate: '2025-01-15 10:30' },
            { id: 102, name: 'êVãKå⁄ãqB', location: 'ê_ìﬁêÏåßêÏçËés', propertyType: 'É}ÉìÉVÉáÉìÅEíz5îN', phone: '044-0000-0000', status: 'ñ¢ëŒâû', assignee: null, area: 'ê_ìﬁêÏåßêÏçËés', temperature: 3, source: 'Ç≠ÇÁÇ◊ÇÈ', registeredDate: '2025-01-15 11:45' },
            { id: 103, name: 'êVãKå⁄ãqC', location: 'çÈã åßâzíJés', propertyType: 'åÀåöÇƒÅEíz20îN', phone: '048-0000-0000', status: 'ñ¢ëŒâû', assignee: null, area: 'çÈã åßâzíJés', temperature: 5, source: 'Ç≠ÇÁÇ◊ÇÈ', registeredDate: '2025-01-15 14:00' }
        ];

        // àƒåèÉfÅ[É^ÇéÊìæÇ∑ÇÈä÷êî
        function getCasesData() {
            return casesData;
        }

        // â¡ñøìXÉfÅ[É^ÇÉtÉHÅ[ÉÄÇ…é©ìÆì¸óÕÇ∑ÇÈä÷êî
        function loadMerchantData(merchantId, merchantData = null) {
            console.log('===== loadMerchantData START =====');
            console.log('merchantId:', merchantId);
            console.log('merchantData from login:', merchantData || window.merchantData);

            const data = merchantData || window.merchantData;
            if (!data) {
                console.log('No merchant data available');
                return;
            }

            console.log('=== APPLYING MERCHANT DATA TO FORMS ===');
            console.log('Data keys:', Object.keys(data));
            console.log('Full data:', data);

            console.log('==== POPULATING FORM FIELDS ====');

            // ê›óßîNåéÇ∆PRÉeÉLÉXÉgÇÃíºê⁄éÊìæÅiÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃóÒñºÇ≈éÊìæÅj
            if (data['ê›óßîNåé']) {
                const establishedEl = document.getElementById('established');
                if (establishedEl) {
                    establishedEl.value = data['ê›óßîNåé'];
                    console.log(`? ê›óßîNåéÇê›íË: ${data['ê›óßîNåé']}`);
                }
            }

            if (data['PRÉeÉLÉXÉg']) {
                const prTextEl = document.getElementById('prText');
                if (prTextEl) {
                    prTextEl.value = data['PRÉeÉLÉXÉg'];
                    console.log(`? PRï∂Çê›íË: [${data['PRÉeÉLÉXÉg'].length}ï∂éö]`);
                    console.log(`  äÆëSÇ»PRï∂: ${data['PRÉeÉLÉXÉg']}`);

                    // ÉeÉLÉXÉgÉGÉäÉAÇÃçÇÇ≥Çé©ìÆí≤êÆ
                    prTextEl.style.height = 'auto';
                    prTextEl.style.height = Math.max(200, prTextEl.scrollHeight) + 'px';

                    // ï∂éöêîÉJÉEÉìÉ^Å[çXêV
                    const charCount = document.getElementById('prTextCharCount');
                    if (charCount) {
                        charCount.textContent = data['PRÉeÉLÉXÉg'].length;
                    }

                    // ÉvÉåÉrÉÖÅ[Ç…Ç‡îΩâf
                    const previewPrTextEl = document.getElementById('previewPrText');
                    if (previewPrTextEl) {
                        previewPrTextEl.textContent = data['PRÉeÉLÉXÉg'];
                        console.log('? PRï∂ÇÉvÉåÉrÉÖÅ[Ç…îΩâf');
                    }

                    // ÉLÉÉÉbÉ`ÉtÉåÅ[ÉYÇPRï∂ÇÃç≈èâÇÃàÍï∂Ç©ÇÁíäèo
                    const firstSentence = data['PRÉeÉLÉXÉg'].split('ÅB')[0];
                    const tagline = firstSentence || 'êMóäÇ∆é¿ê—ÇÃäOï«ìhëïêÍñÂìX';

                    const taglineElements = ['previewTagline', 'previewTaglineHero', 'previewTaglineOverlay'];
                    taglineElements.forEach(id => {
                        const el = document.getElementById(id);
                        if (el) el.textContent = tagline;
                    });
                    console.log('? ÉLÉÉÉbÉ`ÉtÉåÅ[ÉYÇÉvÉåÉrÉÖÅ[Ç…îΩâf:', tagline.substring(0, 30));
                }
            }

            // âÔé–èÓïÒÉtÉHÅ[ÉÄÉtÉBÅ[ÉãÉhÇÃÉ}ÉbÉsÉìÉOÅiÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃóÒñºÇ…äÆëSëŒâûÅj
            const fieldMappings = {
                companyName: ['âÔé–ñº', 'companyName', 'company_name'],
                companyNameKana: ['âÔé–ñºÉJÉi', 'companyNameKana', 'company_name_kana'],
                tradeName: ['âÆçÜ', 'tradeName', 'trade_name'],
                tradeNameKana: ['âÆçÜÉJÉi', 'tradeNameKana', 'trade_name_kana'],
                representative: ['ë„ï\é“ñº', 'representative', 'representative_name'],
                representativeKana: ['ë„ï\é“ñºÉJÉi', 'representativeKana', 'representative_kana'],
                zipCode: ['óXï÷î‘çÜ', 'postalCode', 'zipCode', 'postal_code'],
                address: ['èZèä', 'address'],
                phone: ['ìdòbî‘çÜ', 'phone', 'tel'],
                website: ['ÉEÉFÉuÉTÉCÉgURL', 'website', 'url'],
                established: ['ê›óßîNåé', 'established', 'establishment_date'],
                prText: ['PRÉeÉLÉXÉg', 'prText', 'pr_text'],
                billingEmail: ['êøãÅópÉÅÅ[ÉãÉAÉhÉåÉX', 'billingEmail', 'billing_email'],
                salesEmail: ['âcã∆ópÉÅÅ[ÉãÉAÉhÉåÉX', 'salesEmail', 'sales_email'],
                salesPersonName: ['âcã∆íSìñé“éÅñº', 'salesPersonName', 'sales_person_name'],
                salesPersonKana: ['âcã∆íSìñé“ÉJÉi', 'salesPersonKana', 'sales_person_kana'],
                employees: ['è]ã∆àıêî', 'employees', 'employee_count'],
                salesScale: ['îÑè„ãKñÕ', 'salesScale', 'sales_scale'],
                maxFloors: ['ç≈ëÂëŒâûäKêî', 'maxFloors', 'max_floors'],
                buildingAge: ['ízîNêîëŒâûîÕàÕ', 'buildingAge', 'building_age'],
                specialItems: ['ì¡éÍëŒâûçÄñ⁄', 'specialItems', 'special_items'],
                cities: ['ëŒâûésãÊí¨ë∫', 'cities', 'service_areas'],
                priorityAreas: ['óDêÊÉGÉäÉA', 'priorityAreas', 'priority_areas']
            };

            // ÉtÉBÅ[ÉãÉhÇ…ílÇê›íË
            Object.keys(fieldMappings).forEach(fieldId => {
                const possibleKeys = fieldMappings[fieldId];
                let value = null;

                // ÉfÅ[É^Ç©ÇÁílÇåüçı
                for (const key of possibleKeys) {
                    if (data[key] !== undefined && data[key] !== null && data[key] !== '') {
                        value = data[key];
                        break;
                    }
                }

                const element = document.getElementById(fieldId) ||
                               document.querySelector(`input[placeholder*="${fieldId}"]`) ||
                               document.querySelector(`input[name="${fieldId}"]`);

                if (element && value) {
                    // PRï∂ÇÃì¡ï Ç»èàóùÅiè»ó™Ç≥ÇÍÇΩïîï™Ç‡ä‹ÇﬂÇƒäÆëSÇ…éÊìæÅj
                    if (fieldId === 'prText') {
                        // ÉXÉvÉåÉbÉhÉVÅ[ÉgÇ≈è»ó™Ç≥ÇÍÇƒÇ¢ÇÈèÍçáÅAäÆëSÇ»ÉeÉLÉXÉgÇéÊìæ
                        let fullText = value;

                        // "..."Ç≈èIÇÌÇ¡ÇƒÇ¢ÇÈèÍçáÅAäÆëSÇ»ÉeÉLÉXÉgÇ™Ç†ÇÈÇÕÇ∏Ç»ÇÃÇ≈íTÇ∑
                        if (value && value.endsWith('...')) {
                            // PRÉeÉLÉXÉgóÒÇÃäÆëSÇ»ÉfÅ[É^ÇéÊìæ
                            const fullPrText = data['PRÉeÉLÉXÉg'] || data.prText || data.pr_text;
                            if (fullPrText) {
                                fullText = fullPrText;
                                console.log('? PRï∂ÇÃäÆëSî≈ÇéÊìæÇµÇ‹ÇµÇΩ');
                            }
                        }

                        element.value = fullText;
                        console.log(`? Set ${fieldId} = [${fullText.length}ï∂éö]`);
                        console.log(`  äÆëSÇ»PRï∂: ${fullText}`);

                        // ÉeÉLÉXÉgÉGÉäÉAÇÃçÇÇ≥Çé©ìÆí≤êÆ
                        element.style.height = 'auto';
                        element.style.height = Math.max(200, element.scrollHeight) + 'px';

                        // ï∂éöêîÉJÉEÉìÉ^Å[Ç‡çXêV
                        const charCount = document.getElementById('prTextCharCount');
                        if (charCount) {
                            charCount.textContent = fullText.length;
                        }
                    } else if (fieldId === 'established') {
                        // ê›óßîNåéÇéÊìæ
                        const establishedData = data['ê›óßîNåé'] || data.established || data['establishment_date'];
                        if (establishedData) {
                            // ISOå`éÆÇÃì˙ïtÇYYYYîNMåéå`éÆÇ…ïœä∑
                            let formattedDate = establishedData;
                            if (establishedData.includes('T') || establishedData.includes('Z')) {
                                // ISOå`éÆÇÃèÍçáÅió·: 2000-03-31T15:00:00.000ZÅj
                                const date = new Date(establishedData);
                                const year = date.getFullYear();
                                const month = date.getMonth() + 1; // 0-indexed
                                formattedDate = `${year}îN${month}åé`;
                                console.log(`? Converted ISO date to Japanese format: ${establishedData} Å® ${formattedDate}`);
                            }
                            element.value = formattedDate;
                            console.log(`? Set ${fieldId} = ${formattedDate}`);
                        } else if (value) {
                            // valueÇ‡ISOå`éÆÇÃâ¬î\ê´Ç™Ç†ÇÈÇÃÇ≈É`ÉFÉbÉN
                            let formattedValue = value;
                            if (value.includes('T') || value.includes('Z')) {
                                const date = new Date(value);
                                const year = date.getFullYear();
                                const month = date.getMonth() + 1;
                                formattedValue = `${year}îN${month}åé`;
                                console.log(`? Converted ISO date to Japanese format: ${value} Å® ${formattedValue}`);
                            }
                            element.value = formattedValue;
                            console.log(`? Set ${fieldId} = ${formattedValue}`);
                        }
                    } else if (fieldId === 'employees' || fieldId === 'salesScale') {
                        // selectóvëfÇÃèÍçáÇÕÅAoptionÇëIë
                        if (element.tagName === 'SELECT') {
                            // ílÇê≥ãKâªÅiëOå„ÇÃãÛîíÇçÌèúÅAëSäpâpêîéöÇîºäpÇ…ïœä∑Åj
                            let normalizedValue = String(value).trim();

                            // è]ã∆àıêîÇ™ISOì˙ïtå`éÆÇ≈óàÇΩèÍçáÅió·: 2025-03-04T15:00:00.000Z Å® 3-4Åj
                            if (fieldId === 'employees' && (normalizedValue.includes('T') || normalizedValue.includes('Z'))) {
                                const date = new Date(normalizedValue);
                                const month = date.getMonth() + 1; // 0-indexed
                                const day = date.getDate();
                                normalizedValue = `${month}-${day}`;
                            }

                            // ëSäpâpêîéöÇîºäpÇ…ïœä∑
                            normalizedValue = normalizedValue.replace(/[Ç`-ÇyÇÅ-ÇöÇO-ÇX]/g, function(s) {
                                return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);
                            });

                            // Ç‹Ç∏ê≥ãKâªÇµÇΩílÇ≈íºê⁄ê›íËÇµÇƒÇ›ÇÈ
                            element.value = normalizedValue;

                            // íºê⁄É}ÉbÉ`ÇµÇ»Ç©Ç¡ÇΩèÍçá
                            if (!element.value && normalizedValue) {
                                const options = Array.from(element.options);

                                // ÇÊÇËè_ìÓÇ»É}ÉbÉ`ÉìÉO
                                const matchedOption = options.find(opt => {
                                    // option value Ç∆äÆëSàÍív
                                    if (opt.value === normalizedValue) return true;

                                    // option value ÇÃê≥ãKâªî≈Ç∆àÍív
                                    const normalizedOptValue = opt.value.trim().toLowerCase();
                                    const normalizedSearchValue = normalizedValue.toLowerCase();
                                    if (normalizedOptValue === normalizedSearchValue) return true;

                                    // option text Ç…ä‹Ç‹ÇÍÇÈ
                                    const optText = opt.text.replace(/Äs/g, '').toLowerCase();
                                    const valueText = normalizedValue.replace(/Äs/g, '').toLowerCase();
                                    if (optText.includes(valueText) || valueText.includes(optText)) return true;

                                    return false;
                                });

                                if (matchedOption) {
                                    element.value = matchedOption.value;
                                }
                            }
                        } else {
                            element.value = value;
                        }
                    } else {
                        element.value = value;
                        console.log(`? Set ${fieldId} = ${value}`);
                    }
                } else if (element) {
                    console.log(`? Empty data for ${fieldId}`);
                } else {
                    console.log(`? Element not found for ${fieldId}`);
                }
            });

            console.log('=== AUTO-POPULATING DELIVERY SETTINGS ===');

            // é©ìÆîzêMê›íËÇÃÉ}ÉbÉsÉìÉO
            if (data.deliverySettings || data.delivery_settings) {
                const deliveryData = data.deliverySettings || data.delivery_settings;
                console.log('Auto delivery settings:', deliveryData);

                // îNóÓîÕàÕ
                if (deliveryData.ageMin !== undefined) {
                    const ageMinEl = document.getElementById('ageMin');
                    if (ageMinEl) {
                        ageMinEl.value = deliveryData.ageMin;
                        console.log(`? Set age range min: ${deliveryData.ageMin}`);
                    }
                }
                if (deliveryData.ageMax !== undefined) {
                    const ageMaxEl = document.getElementById('ageMax');
                    if (ageMaxEl) {
                        ageMaxEl.value = deliveryData.ageMax;
                        console.log(`? Set age range max: ${deliveryData.ageMax}`);
                    }
                }

                // ÇªÇÃëºÇÃé©ìÆîzêMê›íË...
            } else {
                // ÉfÉtÉHÉãÉgílê›íË
                const ageMinEl = document.getElementById('ageMin');
                const ageMaxEl = document.getElementById('ageMax');
                if (ageMinEl && !ageMinEl.value) {
                    ageMinEl.value = '10';
                    console.log('? Set age range min: 10');
                }
                if (ageMaxEl && !ageMaxEl.value) {
                    ageMaxEl.value = '100';
                    console.log('? Set age range max: 100');
                }
            }

            console.log('=== UPDATING COMPANY DISPLAYS ===');
            // âÔé–ñºï\é¶ÇÃçXêV
            if (data.companyName || data.company_name) {
                const companyDisplays = document.querySelectorAll('.company-name-display');
                companyDisplays.forEach(el => {
                    el.textContent = data.companyName || data.company_name;
                });
            }

            console.log('=== LOADING BRANCH DATA ===');
            // ÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃOóÒÅiéxìXñºÅjÇ∆PóÒÅiéxìXèZèäÅjÇ©ÇÁéxìXèÓïÒÇéÊìæ
            const branchNameRaw = data['éxìXñº'] || data.branchName || data.branch_name || '';
            const branchAddressRaw = data['éxìXèZèä'] || data.branchAddress || data.branch_address || '';

            console.log('Branch name from spreadsheet:', branchNameRaw);
            console.log('Branch address from spreadsheet:', branchAddressRaw);

            // éxìXñºÇ‹ÇΩÇÕéxìXèZèäÇ™ë∂ç›Ç∑ÇÈèÍçá
            if (branchNameRaw || branchAddressRaw) {
                // ëSäpÉJÉìÉ}ÅwÅAÅxÇ≈ï™äÑÅiï°êîÇÃéxìXÇ…ëŒâûÅj
                const branchNames = branchNameRaw ? branchNameRaw.split('ÅA').map(s => s.trim()).filter(s => s) : [];
                const branchAddresses = branchAddressRaw ? branchAddressRaw.split('ÅA').map(s => s.trim()).filter(s => s) : [];

                console.log('Split branch names:', branchNames);
                console.log('Split branch addresses:', branchAddresses);

                // éxìXÇÃêîÇåàíËÅiñºëOÇ∆èZèäÇÃëΩÇ¢ï˚ÇäÓèÄÇ…Ç∑ÇÈÅj
                const branchCount = Math.max(branchNames.length, branchAddresses.length);

                if (branchCount > 0) {
                    // ä˘ë∂ÇÃéxìXÇÉNÉäÉA
                    window.branches = [];
                    branchIdCounter = 0;
                    const branchList = document.getElementById('branchList');
                    if (branchList) {
                        branchList.innerHTML = '';
                    }

                    // äeéxìXÇí«â¡
                    for (let i = 0; i < branchCount; i++) {
                        const branchId = ++branchIdCounter;
                        const branchInfo = {
                            id: branchId,
                            name: branchNames[i] || '',
                            address: branchAddresses[i] || ''
                        };

                        window.branches.push(branchInfo);

                        const branchDiv = document.createElement('div');
                        branchDiv.id = `branch-${branchId}`;
                        branchDiv.className = 'border rounded-lg p-4 mb-3 bg-gray-50';
                        branchDiv.innerHTML = `
                            <div class="flex justify-between items-start mb-3">
                                <h4 class="font-medium text-gray-700">éxìX ${i + 1}</h4>
                                <button onclick="removeBranch(${branchId})" class="text-red-600 hover:text-red-800">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">éxìXñº</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: â°ïléxìX"
                                           value="${branchInfo.name}"
                                           onchange="updateBranch(${branchId}, 'name', this.value)">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">éxìXèZèä</label>
                                    <input type="text" class="w-full px-3 py-2 border rounded-lg" placeholder="ó·: ê_ìﬁêÏåßâ°ïlés..."
                                           value="${branchInfo.address}"
                                           onchange="updateBranch(${branchId}, 'address', this.value)">
                                </div>
                            </div>
                        `;

                        if (branchList) {
                            branchList.appendChild(branchDiv);
                        }

                        console.log(`? Loaded branch ${i + 1}: ${branchInfo.name} - ${branchInfo.address}`);
                    }

                    // éxìXÉ}ÉbÉvÇçXêV
                    setTimeout(() => updateBranchMaps(), 100);
                } else {
                    console.log('No valid branch data after splitting');
                }
            } else {
                console.log('No branch data found in spreadsheet');
            }

            console.log('=== LOADING AREA DATA ===');
            // ëŒâûìsìπï{åßÅiAGóÒÅjÅAëŒâûésãÊí¨ë∫ÅiAHóÒÅjÅAóDêÊÉGÉäÉAÅiAIóÒÅjÇéÊìæ
            const prefecturesRaw = data['ëŒâûìsìπï{åß'] || data.prefectures || '';
            const citiesRaw = data['ëŒâûésãÊí¨ë∫'] || data.cities || '';
            const prioritiesRaw = data['óDêÊÉGÉäÉA'] || data.priorities || data.priority_areas || '';

            console.log('Prefectures from spreadsheet:', prefecturesRaw);
            console.log('Cities from spreadsheet:', citiesRaw);
            console.log('Priorities from spreadsheet:', prioritiesRaw);

            // ìsìπï{åßÇï\é¶
            const prefecturesDisplay = document.getElementById('companyPrefecturesDisplay');
            if (prefecturesDisplay) {
                if (prefecturesRaw) {
                    const prefectures = prefecturesRaw.split(',').map(s => s.trim()).filter(s => s);
                    prefecturesDisplay.innerHTML = prefectures.map(pref =>
                        `<span class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow">
                            ${pref}
                        </span>`
                    ).join('');
                    console.log(`? Loaded ${prefectures.length} prefectures`);
                } else {
                    prefecturesDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">ñ¢ê›íË</span>';
                }
            }

            // ésãÊí¨ë∫Çï\é¶
            const citiesDisplay = document.getElementById('companyCitiesDisplay');
            if (citiesDisplay) {
                if (citiesRaw) {
                    // JSONå`éÆÇÃèÍçáÇ∆ÉJÉìÉ}ãÊêÿÇËÇÃèÍçáÇ…ëŒâû
                    let cities = [];
                    try {
                        const parsed = JSON.parse(citiesRaw);
                        if (parsed.type === 'compressed' && parsed.full) {
                            cities = parsed.full.split(',').map(s => s.trim()).filter(s => s);
                        } else if (parsed.type === 'compressed' && parsed.preview) {
                            cities = parsed.preview.split(',').map(s => s.trim()).filter(s => s);
                        }
                    } catch (e) {
                        // JSONå`éÆÇ≈Ç»Ç¢èÍçáÅAÉJÉìÉ}ãÊêÿÇËÇ∆ÇµÇƒèàóù
                        cities = citiesRaw.split(',').map(s => s.trim()).filter(s => s);
                    }

                    citiesDisplay.innerHTML = cities.map(city =>
                        `<span class="inline-block px-2.5 py-1 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium hover:bg-green-100 transition-colors">
                            ${city}
                        </span>`
                    ).join('');
                    console.log(`? Loaded ${cities.length} cities`);
                } else {
                    citiesDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">ñ¢ê›íË</span>';
                }
            }

            // óDêÊÉGÉäÉAÇï\é¶
            const prioritiesDisplay = document.getElementById('companyPrioritiesDisplay');
            if (prioritiesDisplay) {
                if (prioritiesRaw) {
                    const priorities = prioritiesRaw.split(',').map(s => s.trim()).filter(s => s);
                    prioritiesDisplay.innerHTML = priorities.map(priority =>
                        `<span class="inline-flex items-center gap-1 px-4 py-2 bg-gradient-to-r from-amber-400 to-yellow-400 text-amber-900 rounded-lg text-sm font-semibold shadow-sm hover:shadow-md transition-shadow">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                            </svg>
                            ${priority}
                        </span>`
                    ).join('');
                    console.log(`? Loaded ${priorities.length} priority areas`);
                } else {
                    prioritiesDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">ñ¢ê›íË</span>';
                }
            }

            console.log('=== LOADING CONSTRUCTION DATA ===');
            // é{çHâ”èäÉfÅ[É^ÇéÊìæÅiAEóÒÅj
            const constructionRaw = data['é{çHâ”èä'] || data.construction_types || '';
            console.log('Construction types from spreadsheet:', constructionRaw);

            // é{çHâ”èäÉAÉCÉRÉìÉ}ÉbÉsÉìÉO
            const constructionIcons = {
                'äOï«ìhëï': '??',
                'äOï«ÉJÉoÅ[çHñ@': '???',
                'äOï«í£ë÷Ç¶': '??',
                'âÆç™ìhëïÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'âÆè„ñhêÖÅiäOï«çHéñä‹ÇﬁÅj': '?',
                'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô': '??',
                'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢': '??',
                'âÆç™ÉJÉoÅ[çHñ@': '???',
                'äOï«ï‚èCÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'âÆç™ï‚èCÅiäOï«çHéñä‹ÇﬁÅj': '???',
                'ÉxÉâÉìÉ_ñhêÖÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅjÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅjÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'äOï«âJòRÇËèCëUÅiäOï«çHéñä‹ÇﬁÅj': '?',
                'âÆç™âJòRÇËèCëUÅiâÆç™çHéñä‹ÇﬁÅj': '???',
                'âÆç™ìhëïíPïi': '??',
                'âÆè„ñhêÖíPïi': '?',
                'äOï«ï‚èCíPïi': '??',
                'âÆç™ï‚èCíPïi': '???',
                'ÉxÉâÉìÉ_ñhêÖíPïi': '??',
                'äOï«âJòRÇËèCëUíPïi': '?',
                'âÆç™âJòRÇËèCëUíPïi': '???'
            };

            const constructionDisplay = document.getElementById('companyConstructionDisplay');
            if (constructionDisplay) {
                if (constructionRaw) {
                    const constructions = constructionRaw.split(',').map(s => s.trim()).filter(s => s);

                    // èdï°ÇçÌèúÇ∑ÇÈÇΩÇﬂÅAê≥ãKâªå„ÇÃÉeÉLÉXÉgÇ≈ÉÜÉjÅ[ÉNâª
                    const uniqueConstructions = [];
                    const seenTexts = new Set();

                    constructions.forEach(construction => {
                        // ä»ó™ï\é¶ópÇ…ï∂éöóÒÇíZèk
                        let displayText = construction
                            .replace('ÅiäOï«çHéñä‹ÇﬁÅj', '')
                            .replace('ÅiâÆç™çHéñä‹ÇﬁÅj', '')
                            .replace('ÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj', '')
                            .replace('íPïi', '')
                            .trim();

                        // Ç‹Çæå©ÇƒÇ¢Ç»Ç¢ÉeÉLÉXÉgÇÃèÍçáÇÃÇ›í«â¡
                        if (!seenTexts.has(displayText)) {
                            seenTexts.add(displayText);
                            uniqueConstructions.push({
                                original: construction,
                                display: displayText
                            });
                        }
                    });

                    constructionDisplay.innerHTML = uniqueConstructions.map(item => {
                        const icon = constructionIcons[item.original] || '??';

                        return `<div class="flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors">
                            <span class="text-lg">${icon}</span>
                            <span class="text-sm font-medium text-gray-700">${item.display}</span>
                        </div>`;
                    }).join('');
                    console.log(`? Loaded ${uniqueConstructions.length} unique construction types (${constructions.length} total)`);
                } else {
                    constructionDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">ñ¢ê›íË</span>';
                }
            }

            console.log('=== LOADING APPEAL POINTS DATA ===');
            // ì¡éÍëŒâûçÄñ⁄ÉfÅ[É^ÇéÊìæÅiAFóÒÅj
            const appealPointsRaw = data['ì¡éÍëŒâûçÄñ⁄'] || data.appeal_points || data.special_services || '';
            console.log('Appeal points from spreadsheet:', appealPointsRaw);

            // ÉAÉsÅ[ÉãÉ|ÉCÉìÉgÉAÉCÉRÉìÉ}ÉbÉsÉìÉO
            const appealPointIcons = {
                'é’îMÅEífîMìhóøíÒàƒâ¬î\': '???',
                'ÉNÉåÉWÉbÉgÉJÅ[Éhï•Ç¢â¬': '??',
                'íÒågêÊÉçÅ[ÉìóLÇË': '??',
                'âŒç–ï€åØê\êøÉTÉ|Å[Ég': '??',
                'èïê¨ã‡ê\êøÉTÉ|Å[Ég': '??',
                'ë¶ì˙å©êœÇ‡ÇËëŒâû': '?',
                'é©é–êEêlé{çH': '??',
                'ï€èÿä˙ä‘10îNà»è„': '???',
                '24éûä‘ãŸã}ëŒâû': '??',
                'ÉhÉçÅ[Éìí≤ç∏ëŒâû': '??',
                'ñ≥óøì_åüÉTÅ[ÉrÉX': '??',
                'ÉJÉâÅ[ÉVÉ~ÉÖÉåÅ[ÉVÉáÉìñ≥óø': '??',
                'ãﬂó◊à•éAë„çs': '??',
                'çHéñé ê^ïÒçêèëíÒãü': '??',
                'äÆçHå„ÉAÉtÉ^Å[ÉtÉHÉçÅ[': '?'
            };

            const appealPointsDisplay = document.getElementById('companyAppealPointsDisplay');
            if (appealPointsDisplay) {
                if (appealPointsRaw) {
                    // èúäOÇ∑ÇÈÉAÉsÅ[ÉãÉ|ÉCÉìÉg
                    const excludedPoints = [
                        'óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]',
                        'âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬'
                    ];

                    const appealPoints = appealPointsRaw
                        .split(',')
                        .map(s => s.trim())
                        .filter(s => s && !excludedPoints.includes(s)); // èúäOÉäÉXÉgÇ…ä‹Ç‹ÇÍÇƒÇ¢Ç»Ç¢Ç‡ÇÃÇÃÇ›

                    if (appealPoints.length > 0) {
                        appealPointsDisplay.innerHTML = appealPoints.map(point => {
                            const icon = appealPointIcons[point] || '?';

                            return `<div class="flex items-center gap-2 p-2 bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 border border-yellow-200 rounded-lg transition-all">
                                <span class="text-lg">${icon}</span>
                                <span class="text-sm font-medium text-gray-700">${point}</span>
                            </div>`;
                        }).join('');
                        console.log(`? Loaded ${appealPoints.length} appeal points`);
                    } else {
                        appealPointsDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">ñ¢ê›íË</span>';
                    }
                } else {
                    appealPointsDisplay.innerHTML = '<span class="text-sm text-gray-400 italic">ñ¢ê›íË</span>';
                }
            }

            console.log('=== LOADING QUALIFICATIONS DATA ===');
            // ï€óLéëäiÉfÅ[É^ÇéÊìæÅiATóÒÅj
            const qualificationsRaw = data['ï€óLéëäi'] || '';
            console.log('Qualifications from spreadsheet:', qualificationsRaw);

            if (qualificationsRaw) {
                const qualificationsList = qualificationsRaw.split(',').map(q => q.trim()).filter(q => q);
                console.log('Parsed qualifications:', qualificationsList);

                // ëSÇƒÇÃï€óLéëäiÉ`ÉFÉbÉNÉ{ÉbÉNÉXÇÉNÉäÉA
                document.querySelectorAll('input[name="qualifications"]').forEach(cb => {
                    cb.checked = false;
                });

                // ÉJÉXÉ^ÉÄéëäiÉäÉXÉgÇÉNÉäÉA
                const customQualList = document.getElementById('customQualificationsList');
                if (customQualList) {
                    customQualList.innerHTML = '';
                }

                // ÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃÉfÅ[É^Ç…äÓÇ√Ç¢ÇƒÉ`ÉFÉbÉN
                qualificationsList.forEach(qual => {
                    const checkbox = document.querySelector(`input[name="qualifications"][value="${qual}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        console.log(`? Checked qualification: ${qual}`);
                    } else {
                        // É`ÉFÉbÉNÉ{ÉbÉNÉXÇ…Ç»Ç¢éëäiÇÕÅuÇªÇÃëºÅvÇ∆ÇµÇƒÉJÉXÉ^ÉÄÉäÉXÉgÇ…í«â¡
                        console.log(`? Qualification not found in checkboxes, adding as custom: ${qual}`);
                        if (customQualList) {
                            const tag = document.createElement('div');
                            tag.className = 'inline-flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm';
                            tag.innerHTML = `
                                <span>${qual}</span>
                                <button onclick="this.parentElement.remove()" class="ml-2 text-blue-600 hover:text-blue-800">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            `;
                            customQualList.appendChild(tag);
                        }
                    }
                });

                // ÉvÉåÉrÉÖÅ[Ç…ï€óLéëäiÇîΩâf
                const previewQualsList = document.getElementById('qualificationsList');
                if (previewQualsList) {
                    previewQualsList.innerHTML = '';
                    qualificationsList.forEach(qual => {
                        const div = document.createElement('div');
                        div.className = 'bg-purple-50 border border-purple-200 rounded-lg p-3 flex items-center';
                        div.innerHTML = `
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium">${qual}</span>
                        `;
                        previewQualsList.appendChild(div);
                    });
                    const qualSection = document.getElementById('preview-gallery');
                    if (qualSection && qualificationsList.length > 0) {
                        qualSection.style.display = 'block';
                    }
                    console.log('? Updated preview qualifications:', qualificationsList.length);
                }
            }

            console.log('=== LOADING INSURANCE DATA ===');
            // â¡ì¸ï€åØÉfÅ[É^ÇéÊìæÅiAUóÒÅj
            const insuranceRaw = data['â¡ì¸ï€åØ'] || '';
            console.log('Insurance from spreadsheet:', insuranceRaw);

            if (insuranceRaw) {
                const insuranceList = insuranceRaw.split(',').map(i => i.trim()).filter(i => i);
                console.log('Parsed insurance:', insuranceList);

                // ëSÇƒÇÃâ¡ì¸ï€åØÉ`ÉFÉbÉNÉ{ÉbÉNÉXÇÉNÉäÉA
                document.querySelectorAll('input[name="insurance"]').forEach(cb => {
                    cb.checked = false;
                });

                // ÉJÉXÉ^ÉÄï€åØÉäÉXÉgÇÉNÉäÉA
                const customInsList = document.getElementById('customInsuranceList');
                if (customInsList) {
                    customInsList.innerHTML = '';
                }

                // ÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃÉfÅ[É^Ç…äÓÇ√Ç¢ÇƒÉ`ÉFÉbÉN
                insuranceList.forEach(ins => {
                    const checkbox = document.querySelector(`input[name="insurance"][value="${ins}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        console.log(`? Checked insurance: ${ins}`);
                    } else {
                        // É`ÉFÉbÉNÉ{ÉbÉNÉXÇ…Ç»Ç¢ï€åØÇÕÅuÇªÇÃëºÅvÇ∆ÇµÇƒÉJÉXÉ^ÉÄÉäÉXÉgÇ…í«â¡
                        console.log(`? Insurance not found in checkboxes, adding as custom: ${ins}`);
                        if (customInsList) {
                            const tag = document.createElement('div');
                            tag.className = 'inline-flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm';
                            tag.innerHTML = `
                                <span>${ins}</span>
                                <button onclick="this.parentElement.remove()" class="ml-2 text-green-600 hover:text-green-800">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            `;
                            customInsList.appendChild(tag);
                        }
                    }
                });

                // ÉvÉåÉrÉÖÅ[Ç…â¡ì¸ï€åØÇîΩâf
                const previewInsList = document.getElementById('insuranceList');
                if (previewInsList) {
                    previewInsList.innerHTML = '';
                    insuranceList.forEach(ins => {
                        const div = document.createElement('div');
                        div.className = 'bg-indigo-50 border border-indigo-200 rounded-lg p-3 flex items-center';
                        div.innerHTML = `
                            <span class="text-2xl mr-2">???</span>
                            <span class="text-sm font-medium">${ins}</span>
                        `;
                        previewInsList.appendChild(div);
                    });
                    const insSection = document.getElementById('preview-insurance');
                    if (insSection && insuranceList.length > 0) {
                        insSection.style.display = 'block';
                    }
                    console.log('? Updated preview insurance:', insuranceList.length);
                }
            }

            // âcã∆íSìñé“éÅñºÅiXóÒÅjÇwindow.merchantDataÇ…ï€ë∂
            const salesPersonName = data['âcã∆íSìñé“éÅñº'] || data.salesPersonName || data.sales_person_name || '';
            if (salesPersonName) {
                if (!window.merchantData) {
                    window.merchantData = {};
                }
                window.merchantData.salesPerson = salesPersonName;
                console.log(`? Sales person name: ${salesPersonName}`);

                // ÉwÉbÉ_Å[ÇÃâcã∆íSìñé“ï\é¶ÇçXêV
                const userRoleElement = document.getElementById('userRole');
                if (userRoleElement) {
                    userRoleElement.textContent = salesPersonName;
                    console.log(`? Updated header with sales person: ${salesPersonName}`);
                }
            }

            // ÉÅÉCÉìÉrÉWÉÖÉAÉãÇÃì«Ç›çûÇ›
            const mainVisualUrlFromSheet = data['ÉÅÉCÉìÉrÉWÉÖÉAÉã'] || data.mainVisual;
            if (mainVisualUrlFromSheet) {
                mainVisualUrl = mainVisualUrlFromSheet;
                document.getElementById('mainVisualImage').src = mainVisualUrlFromSheet;
                document.getElementById('mainVisualPreview').classList.remove('hidden');
                document.getElementById('mainVisualPlaceholder').classList.add('hidden');

                // ÉvÉåÉrÉÖÅ[Ç…Ç‡îΩâf
                document.getElementById('previewMainVisual').src = mainVisualUrlFromSheet;
                document.getElementById('mainVisualSection').style.display = 'block';
                document.getElementById('heroSection').style.display = 'none';

                // ÉÅÉCÉìÉrÉWÉÖÉAÉãè„ÇÃê›óßîNåéì˙Ç‡çXêV
                const establishedDate = data['ê›óßîNåé'] || data.established || '';
                if (establishedDate) {
                    const overlayEstablished = document.getElementById('previewEstablishedOverlay');
                    if (overlayEstablished) {
                        overlayEstablished.textContent = establishedDate;
                    }
                }

                console.log('? Loaded main visual:', mainVisualUrlFromSheet);
            }

            // é ê^ÉMÉÉÉâÉäÅ[ÇÃì«Ç›çûÇ›ÅiíxâÑì«Ç›çûÇ› + åyó ÉTÉÄÉlÉCÉãÅj
            const galleryUrlsFromSheet = data['é ê^ÉMÉÉÉâÉäÅ['] || data.photoGallery;
            if (galleryUrlsFromSheet) {
                // HYPERLINKä÷êîÇÃåãâ Çèàóù
                let urls = [];
                if (typeof galleryUrlsFromSheet === 'string') {
                    // ÉJÉìÉ}ãÊêÿÇËÇÃURLï∂éöóÒÇï™äÑ
                    urls = galleryUrlsFromSheet.split(',').map(url => url.trim()).filter(url => url && url.startsWith('http'));
                }

                const galleryList = document.getElementById('photoGalleryList');
                const addButton = galleryList.querySelector('.border-dashed');

                // ÉvÉåÉrÉÖÅ[ópîzóÒÇÉNÉäÉA
                galleryImages = [];

                urls.forEach((url, index) => {
                    const imageId = 'gallery_loaded_' + index;
                    // ÉTÉÄÉlÉCÉãópÇ…åyó âªÅiw1000 Å® w200Åj
                    const thumbnailUrl = url.replace(/sz=wÄd+/, 'sz=w200');

                    const imageDiv = document.createElement('div');
                    imageDiv.className = 'relative group gallery-item';
                    imageDiv.id = imageId;
                    imageDiv.innerHTML = `
                        <img loading="lazy" src="${thumbnailUrl}" class="w-full h-24 object-cover rounded-lg" alt="ÉMÉÉÉâÉäÅ[âÊëú${index + 1}">
                        <button type="button" onclick="removeGalleryImage('${imageId}')" class="absolute top-1 right-1 bg-red-500 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    `;
                    galleryList.insertBefore(imageDiv, addButton);

                    // ÉvÉåÉrÉÖÅ[ópÇÃîzóÒÇ…Ç‡í«â¡
                    galleryImages.push({
                        src: url,
                        name: `ÉMÉÉÉâÉäÅ[âÊëú${index + 1}`
                    });
                });

                console.log('? Loaded gallery:', urls.length, 'images (lazy loading enabled)');
                // ÉvÉåÉrÉÖÅ[ÇçXêV
                updateGalleryPreview();
            }

            // é{çHéñó·ÇÃì«Ç›çûÇ›
            loadConstructionExamples();

            // ÉvÉåÉrÉÖÅ[ê›íËÇÃì«Ç›çûÇ›
            loadPreviewSettings();

            console.log('===== loadMerchantData COMPLETE =====');

            // ÉhÉâÉbÉO&ÉhÉçÉbÉvèâä˙âª
            setupGalleryDragDrop();
        }

        // é{çHéñó·Çì«Ç›çûÇÒÇ≈ï\é¶
        async function loadConstructionExamples() {
            if (!window.merchantId) {
                console.log('[loadConstructionExamples] merchantId not set');
                return;
            }

            try {
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify({
                        action: 'getConstructionExamples',
                        merchantId: window.merchantId
                    })
                });

                const result = await response.json();
                if (result.success && result.examples && result.examples.length > 0) {
                    const examplesList = document.getElementById('constructionExamplesList');
                    exampleIdCounter = result.examples.length;

                    result.examples.forEach((example, index) => {
                        const exampleId = 'example_loaded_' + index;
                        const newExample = {
                            id: exampleId,
                            title: example.title,
                            buildingAge: example.buildingAge,
                            content: example.content,
                            price: example.price,
                            beforeImage: example.beforeUrl,
                            afterImage: example.afterUrl
                        };
                        constructionExamples.push(newExample);

                        const exampleDiv = document.createElement('div');
                        exampleDiv.className = 'border rounded-lg p-4';
                        exampleDiv.id = exampleId;
                        exampleDiv.innerHTML = `
                            <input type="text" class="w-full px-3 py-2 border rounded mb-2" placeholder="é{çHÉ^ÉCÉgÉãÅió·ÅFåÀåöÇƒäOï«ìhëïÅj" value="${example.title || ''}" onchange="updateConstructionExample('${exampleId}', 'title', this.value)">
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">ízîNêî</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="15" min="0" max="100" value="${example.buildingAge || ''}" onchange="updateConstructionExample('${exampleId}', 'buildingAge', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">îN</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600 mb-1 block">é{çHã‡äzÅiñúâ~Åj</label>
                                    <div class="flex items-center">
                                        <input type="number" class="w-full px-3 py-2 border rounded" placeholder="150" min="0" value="${example.price || ''}" onchange="updateConstructionExample('${exampleId}', 'price', this.value)">
                                        <span class="ml-2 text-sm text-gray-600">ñúâ~</span>
                                    </div>
                                </div>
                            </div>
                            <textarea class="w-full px-3 py-2 border rounded mb-2" rows="2" placeholder="é{çHì‡óeÅió·ÅFÉVÉäÉRÉììhóøÇ…ÇÊÇÈ3âÒìhÇËÅAêFÂÚÇπÇ∆âòÇÍÇâè¡Åj" onchange="updateConstructionExample('${exampleId}', 'content', this.value)">${example.content || ''}</textarea>
                            <div class="grid grid-cols-2 gap-4 mb-2">
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHëOÅiBeforeÅj</label>
                                    ${example.beforeUrl ? `<img src="${example.beforeUrl}" class="w-full h-32 object-cover rounded" alt="é{çHëO">` : '<div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center"><span class="text-xs text-gray-500">âÊëúÇ»Çµ</span></div>'}
                                </div>
                                <div>
                                    <label class="text-xs font-semibold text-gray-600 mb-1 block">é{çHå„ÅiAfterÅj</label>
                                    ${example.afterUrl ? `<img src="${example.afterUrl}" class="w-full h-32 object-cover rounded" alt="é{çHå„">` : '<div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center"><span class="text-xs text-gray-500">âÊëúÇ»Çµ</span></div>'}
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button onclick="removeConstructionExample('${exampleId}')" class="text-red-600 hover:text-red-800 text-sm">
                                    <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    Ç±ÇÃéñó·ÇçÌèú
                                </button>
                            </div>
                        `;
                        examplesList.appendChild(exampleDiv);
                    });

                    console.log('? Loaded construction examples:', result.examples.length);
                    // ÉvÉåÉrÉÖÅ[ÇçXêV
                    updateExamplesPreview();
                } else {
                    console.log('? No construction examples found');
                }
            } catch (error) {
                console.error('[loadConstructionExamples] Error:', error);
            }
        }

        // ÉvÉåÉrÉÖÅ[ê›íËÇì«Ç›çûÇÒÇ≈ìKóp
        async function loadPreviewSettings() {
            if (!window.merchantId) {
                console.log('[loadPreviewSettings] merchantId not set');
                return;
            }

            try {
                const response = await fetch(GAS_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify({
                        action: 'getPreviewSettings',
                        merchantId: window.merchantId
                    })
                });

                const result = await response.json();
                if (result.success && result.settings) {
                    const settings = result.settings;
                    console.log('[loadPreviewSettings] Loaded settings:', settings);

                    // âÊëúà íuÇïúå≥
                    if (settings.imagePositionX !== undefined) {
                        imagePositionX = parseFloat(settings.imagePositionX) || 50;
                    }
                    if (settings.imagePositionY !== undefined) {
                        imagePositionY = parseFloat(settings.imagePositionY) || 50;
                    }
                    updateImagePosition();

                    // ÉYÅ[ÉÄÇïúå≥
                    if (settings.imageZoom !== undefined) {
                        currentZoom = parseInt(settings.imageZoom) || 100;
                        const zoomSlider = document.getElementById('imageZoom');
                        if (zoomSlider) zoomSlider.value = currentZoom;
                        const image = document.getElementById('previewMainVisual');
                        if (image) {
                            const scale = currentZoom / 100;
                            image.style.transform = `scale(${scale})`;
                        }
                    }

                    // ñæÇÈÇ≥Çïúå≥
                    if (settings.imageBrightness !== undefined) {
                        const brightness = parseInt(settings.imageBrightness) || 70;
                        const brightnessSlider = document.getElementById('imageOpacity');
                        if (brightnessSlider) brightnessSlider.value = brightness;
                        adjustImageOpacity(brightness);
                    }

                    // ï∂éöêFÇïúå≥
                    if (settings.textColor) {
                        currentTextColor = settings.textColor;
                        adjustTextColor(settings.textColor);
                    }

                    console.log('[loadPreviewSettings] Settings applied successfully');
                } else {
                    console.log('[loadPreviewSettings] No saved settings found or failed to load');
                }
            } catch (error) {
                console.error('[loadPreviewSettings] Error:', error);
            }
        }

        // àƒåèÉJÅ[ÉhÇìÆìIÇ…ê∂ê¨
        function renderCaseCards() {
            const cardView = document.getElementById('caseCardView');
            if (!cardView) return;

            // ä˘ë∂ÇÃÉJÅ[ÉhÇÉNÉäÉA
            cardView.innerHTML = '';

            // casesDataÇ©ÇÁàƒåèÉJÅ[ÉhÇê∂ê¨
            const filteredCases = casesData.filter(c => c.assignee); // êUÇËï™ÇØçœÇ›ÇÃàƒåèÇÃÇ›

            filteredCases.forEach(caseItem => {
                const card = createCaseCard(caseItem);
                cardView.innerHTML += card;
            });
        }

        // å¬ï ÇÃàƒåèÉJÅ[ÉhHTMLê∂ê¨
        function createCaseCard(caseItem) {
            const statusColor = getStatusColor(caseItem.status);

            return `
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer" onclick="showCaseDetail(${caseItem.id})" data-case-id="${caseItem.id}">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColor}">${caseItem.status}</span>
                        <div class="flex gap-1">
                            <button onclick="event.stopPropagation(); showMemo(${caseItem.id})" class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors" title="ÉÅÉÇ">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); scheduleCase(${caseItem.id})" class="p-1.5 rounded-lg hover:bg-yellow-100 transition-colors" title="ÉXÉPÉWÉÖÅ[Éã">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); passCase(${caseItem.id})" class="p-1.5 rounded-lg hover:bg-blue-100 transition-colors" title="íSìñÉpÉX">
                                <span class="text-lg">??</span>
                            </button>
                            <button onclick="event.stopPropagation(); openCancelRequest(${caseItem.id})" class="p-1.5 rounded-lg hover:bg-red-100 transition-colors" title="ÉLÉÉÉìÉZÉãê\êø">
                                <span class="text-lg">?</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1">${caseItem.name}</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? íSìñ: ${caseItem.assignee}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${caseItem.location || caseItem.area}</p>
                    <p class="text-sm text-gray-600 mb-3">${caseItem.propertyType}</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-3">
                        <span>ç≈èIòAóç: ${caseItem.lastContact || 'ñ¢òAóç'}</span>
                        <span>éüâÒó\íË: ${caseItem.nextAction || 'ñ¢íË'}</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="event.stopPropagation(); callCustomer('${caseItem.phone}')" class="flex-1 px-2 py-2 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); sendSMS('${caseItem.phone}')" class="flex-1 px-2 py-2 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200 transition-colors">
                            ??
                        </button>
                        <button onclick="event.stopPropagation(); quickStatusChange(${caseItem.id})" class="flex-1 px-2 py-2 bg-orange-100 text-orange-700 rounded text-sm hover:bg-orange-200 transition-colors">
                            ÉXÉeÅ[É^ÉX
                        </button>
                        <button onclick="event.stopPropagation(); showCaseDetail(${caseItem.id})" class="flex-1 px-2 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">
                            è⁄ç◊
                        </button>
                    </div>
                </div>
            `;
        }

        // ï\é¶êÿë÷
        function toggleCaseView() {
            currentCaseView = currentCaseView === 'card' ? 'list' : 'card';
            const cardView = document.getElementById('caseCardView');
            const listView = document.getElementById('caseListView');
            const viewIcon = document.getElementById('viewIcon');

            if (currentCaseView === 'card') {
                cardView.style.display = 'grid';
                listView.style.display = 'none';
                viewIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>';
            } else {
                cardView.style.display = 'none';
                listView.style.display = 'block';
                viewIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>';
            }
        }

        // åªç›ÇÃÉtÉBÉãÉ^Å[èÛë‘
        let currentFilter = 'all';
        let currentSearchTerm = '';
        let currentSort = 'date_desc';

        // àƒåèÉJÉEÉìÉgÇçXêV
        function updateCaseCounts() {
            const counts = {
                'all': casesData.filter(c => c.assignee).length,
                'ñ¢ëŒâû': casesData.filter(c => c.assignee && c.status === 'ñ¢ëŒâû').length,
                'ÉAÉ|çœ': casesData.filter(c => c.assignee && c.status === 'ÉAÉ|çœ').length,
                'å©êœíÒèoçœ': casesData.filter(c => c.assignee && c.status === 'å©êœíÒèoçœ').length,
                'ê¨ñÒ': casesData.filter(c => c.assignee && c.status === 'ê¨ñÒ').length
            };

            // IDÇégópÇµÇƒÉJÉEÉìÉgÇçXêV
            Object.keys(counts).forEach(key => {
                const el = document.getElementById(`count-${key}`);
                if (el) {
                    el.textContent = counts[key];
                }
            });
        }

        // ÉtÉBÉãÉ^Å[ã@î\
        function filterCases(status) {
            currentFilter = status;

            // ÉtÉBÉãÉ^Å[É{É^ÉìÇÃÉAÉNÉeÉBÉuèÛë‘ÇçXêV
            document.querySelectorAll('.filter-stat-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-blue-500');
            });
            event.target.closest('.filter-stat-btn').classList.add('ring-2', 'ring-blue-500');

            // ÉJÅ[ÉhÇçƒï`âÊ
            renderFilteredAndSortedCards();
        }

        // åüçıã@î\
        function searchCases() {
            currentSearchTerm = document.getElementById('caseSearchInput').value.toLowerCase();
            renderFilteredAndSortedCards();
        }

        // É\Å[Égã@î\
        function sortCases() {
            currentSort = document.getElementById('caseSortSelect').value;
            renderFilteredAndSortedCards();
        }

        // ÉtÉBÉãÉ^Å[ÅAåüçıÅAÉ\Å[ÉgÇìKópÇµÇƒÉJÅ[ÉhÇçƒï`âÊ
        function renderFilteredAndSortedCards() {
            const cardView = document.getElementById('caseCardView');
            if (!cardView) return;

            // ÉtÉBÉãÉ^ÉäÉìÉO
            let filteredCases = casesData.filter(c => c.assignee);

            // ÉXÉeÅ[É^ÉXÉtÉBÉãÉ^Å[
            if (currentFilter !== 'all') {
                filteredCases = filteredCases.filter(c => c.status === currentFilter);
            }

            // åüçıÉtÉBÉãÉ^Å[
            if (currentSearchTerm) {
                filteredCases = filteredCases.filter(c =>
                    c.name.toLowerCase().includes(currentSearchTerm) ||
                    c.location.toLowerCase().includes(currentSearchTerm)
                );
            }

            // É\Å[Ég
            filteredCases.sort((a, b) => {
                switch(currentSort) {
                    case 'date_desc':
                        return (b.id || 0) - (a.id || 0); // IDÇì˙ïtÇÃë„ÇÌÇËÇ…égóp
                    case 'date_asc':
                        return (a.id || 0) - (b.id || 0);
                    case 'status':
                        const statusOrder = ['ñ¢ëŒâû', 'âÀìdçœ/ñ¢ÉAÉ|', 'ÉAÉ|çœ', 'åªí≤çœ', 'å©êœíÒèoçœ', 'ê¨ñÒ'];
                        return statusOrder.indexOf(a.status) - statusOrder.indexOf(b.status);
                    default:
                        return 0;
                }
            });

            // ÉJÅ[ÉhÇÉNÉäÉAÇµÇƒçƒï`âÊ
            cardView.innerHTML = '';
            filteredCases.forEach(caseItem => {
                const card = createCaseCard(caseItem);
                cardView.innerHTML += card;
            });
        }

        // àƒåèÉXÉeÅ[É^ÉXÇ…âûÇ∂ÇΩêFÇéÊìæ
        function getStatusColor(status) {
            const statusColors = {
                'ñ¢ëŒâû': 'bg-red-100 text-red-800',
                'âÀìdçœ/ñ¢ÉAÉ|': 'bg-orange-100 text-orange-800',
                'ÉAÉ|çœ': 'bg-blue-100 text-blue-800',
                'åªí≤çœ': 'bg-indigo-100 text-indigo-800',
                'åªí≤ëOÉLÉÉÉìÉZÉã': 'bg-gray-100 text-gray-800',
                'åªí≤å„é∏íç': 'bg-gray-100 text-gray-800',
                'å©êœíÒèoçœ': 'bg-yellow-100 text-yellow-800',
                'ê¨ñÒ': 'bg-green-100 text-green-800',
                'ëºé–å_ñÒçœ': 'bg-gray-100 text-gray-800',
                'ï â¡ñøìXå_ñÒçœ': 'bg-purple-100 text-purple-800',
                'ì¸ã‡ó\íË': 'bg-cyan-100 text-cyan-800',
                'ì¸ã‡çœ': 'bg-emerald-100 text-emerald-800',
                'ÉNÉåÅ[ÉÄ or é∏íç': 'bg-red-100 text-red-800'
            };
            return statusColors[status] || 'bg-gray-100 text-gray-800';
        }

        // àƒåèêUÇËï™ÇØÉÇÅ[É_Éã
        function openAssignmentModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.id = 'assignmentModal';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-4 sm:p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto mx-2 sm:mx-4">
                    <div class="flex justify-between items-center mb-4 sm:mb-6">
                        <h3 class="text-lg sm:text-xl font-bold">àƒåèêUÇËï™ÇØ</h3>
                        <button onclick="closeAssignmentModal()" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- êUÇËï™ÇØê›íË -->
                    <div class="bg-gray-50 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6">
                        <h4 class="font-semibold mb-2 sm:mb-3 text-sm sm:text-base">êUÇËï™ÇØï˚ñ@</h4>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3">
                            <div>
                                <label class="flex items-center">
                                    <input type="radio" name="assignMethod" value="area" class="mr-1 sm:mr-2" onchange="updateAssignmentSuggestion()">
                                    <span class="text-xs sm:text-sm">ÉGÉäÉAóDêÊ</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center">
                                    <input type="radio" name="assignMethod" value="workload" class="mr-1 sm:mr-2" onchange="updateAssignmentSuggestion()">
                                    <span class="text-xs sm:text-sm">àƒåèêîóDêÊ</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center">
                                    <input type="radio" name="assignMethod" value="performance" class="mr-1 sm:mr-2" onchange="updateAssignmentSuggestion()">
                                    <span class="text-xs sm:text-sm">ê¨ñÒó¶óDêÊ</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center">
                                    <input type="radio" name="assignMethod" value="auto" class="mr-1 sm:mr-2" checked onchange="updateAssignmentSuggestion()">
                                    <span class="text-xs sm:text-sm">ëççáîªíË</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-2 sm:gap-4 lg:gap-6">
                        <!-- ç∂ë§ÅFâcã∆íSìñé“ÅiÉhÉâÉbÉOå≥Åj -->
                        <div>
                            <h4 class="font-semibold mb-2 sm:mb-3 text-xs sm:text-sm lg:text-base">âcã∆íSìñé“</h4>
                            <div class="space-y-2 sm:space-y-3">
                                <!-- ìcíÜëæòY -->
                                <div class="assignee-card bg-white border rounded-lg p-2 sm:p-3 cursor-move hover:shadow-md transition-shadow" draggable="true" data-assignee-id="tanaka" data-assignee-name="ìcíÜëæòY">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-1 sm:mb-2">
                                        <div>
                                            <span class="font-medium text-xs sm:text-sm">?? ìcíÜëæòY</span>
                                            <span class="hidden sm:inline text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded ml-2">ÉäÅ[É_Å[</span>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <span class="font-bold">3åè</span>
                                        </div>
                                    </div>
                                    <div class="hidden sm:block text-xs text-gray-600">
                                        ê¢ìcíJãÊ | 75%
                                    </div>
                                </div>
                                <!-- ç≤ì°â‘éq -->
                                <div class="assignee-card bg-white border rounded-lg p-2 sm:p-3 cursor-move hover:shadow-md transition-shadow" draggable="true" data-assignee-id="sato" data-assignee-name="ç≤ì°â‘éq">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-1 sm:mb-2">
                                        <div>
                                            <span class="font-medium text-xs sm:text-sm">?? ç≤ì°â‘éq</span>
                                            <span class="hidden sm:inline text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded ml-2">àÍî âcã∆</span>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <span class="font-bold">5åè</span>
                                        </div>
                                    </div>
                                    <div class="hidden sm:block text-xs text-gray-600">
                                        â°ïlés | 62%
                                    </div>
                                </div>
                                <!-- éRìcéüòY -->
                                <div class="assignee-card bg-white border rounded-lg p-2 sm:p-3 cursor-move hover:shadow-md transition-shadow" draggable="true" data-assignee-id="yamada" data-assignee-name="éRìcéüòY">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-1 sm:mb-2">
                                        <div>
                                            <span class="font-medium text-xs sm:text-sm">?? éRìcéüòY</span>
                                            <span class="hidden sm:inline text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded ml-2">êVêl</span>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <span class="font-bold">2åè</span>
                                        </div>
                                    </div>
                                    <div class="hidden sm:block text-xs text-gray-600">
                                        êÁótés | 40%
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- âEë§ÅFñ¢äÑìñàƒåèÅiÉhÉçÉbÉvêÊÅj -->
                        <div>
                            <h4 class="font-semibold mb-2 sm:mb-3 text-xs sm:text-sm lg:text-base">ñ¢äÑìñàƒåè</h4>
                            <div class="bg-gray-50 border rounded-lg p-2 sm:p-3 space-y-2 sm:space-y-3 min-h-[400px] overflow-y-auto" id="unassignedCases">
                                <!-- ñ¢äÑìñàƒåèÉJÅ[Éh -->
                                <div class="case-drop-zone bg-yellow-50 border-2 border-yellow-200 rounded-lg p-2 sm:p-3 hover:bg-yellow-100 transition-colors" data-case-id="101">
                                    <div class="flex justify-between items-start mb-1 sm:mb-2">
                                        <span class="text-xs sm:text-sm font-semibold">çÇã¥ól</span>
                                        <span class="text-xs bg-yellow-100 text-yellow-800 px-1 sm:px-2 py-0.5 sm:py-1 rounded">êVãK</span>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1">?? ê¢ìcíJãÊ</p>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1 hidden sm:block">?? åÀåöÇƒÅEíz12îN</p>
                                    <p class="text-xs text-gray-600 mb-1 sm:mb-2 hidden sm:block">?? 090-1234-5678</p>
                                    <!-- íSìñé“ÉhÉçÉbÉvÉGÉäÉA -->
                                    <div class="assignee-drop-area bg-white border-2 border-dashed border-gray-300 rounded-lg p-1 sm:p-2 min-h-[30px] sm:min-h-[40px]">
                                        <p class="text-xs text-gray-400 text-center">ÉhÉçÉbÉv</p>
                                    </div>
                                    <div class="mt-1 sm:mt-2 pt-1 sm:pt-2 border-t hidden sm:block">
                                        <p class="text-xs text-blue-600 font-medium">
                                            êÑèß: ìcíÜëæòY
                                        </p>
                                    </div>
                                </div>
                                <div class="case-drop-zone bg-yellow-50 border-2 border-yellow-200 rounded-lg p-2 sm:p-3 hover:bg-yellow-100 transition-colors" data-case-id="102">
                                    <div class="flex justify-between items-start mb-1 sm:mb-2">
                                        <span class="text-xs sm:text-sm font-semibold">ç÷ì°ól</span>
                                        <span class="text-xs bg-yellow-100 text-yellow-800 px-1 sm:px-2 py-0.5 sm:py-1 rounded">êVãK</span>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1">?? â°ïlés</p>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1 hidden sm:block">?? ÉAÉpÅ[ÉgÅEíz18îN</p>
                                    <p class="text-xs text-gray-600 mb-1 sm:mb-2 hidden sm:block">?? 045-9876-5432</p>
                                    <!-- íSìñé“ÉhÉçÉbÉvÉGÉäÉA -->
                                    <div class="assignee-drop-area bg-white border-2 border-dashed border-gray-300 rounded-lg p-1 sm:p-2 min-h-[30px] sm:min-h-[40px]">
                                        <p class="text-xs text-gray-400 text-center">ÉhÉçÉbÉv</p>
                                    </div>
                                    <div class="mt-1 sm:mt-2 pt-1 sm:pt-2 border-t hidden sm:block">
                                        <p class="text-xs text-blue-600 font-medium">
                                            êÑèß: ç≤ì°â‘éq
                                        </p>
                                    </div>
                                </div>
                                <div class="case-drop-zone bg-yellow-50 border-2 border-yellow-200 rounded-lg p-2 sm:p-3 hover:bg-yellow-100 transition-colors" data-case-id="103">
                                    <div class="flex justify-between items-start mb-1 sm:mb-2">
                                        <span class="text-xs sm:text-sm font-semibold">ìnï”ól</span>
                                        <span class="text-xs bg-yellow-100 text-yellow-800 px-1 sm:px-2 py-0.5 sm:py-1 rounded">êVãK</span>
                                    </div>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1">?? Ç≥Ç¢ÇΩÇ‹és</p>
                                    <p class="text-xs text-gray-600 mb-0.5 sm:mb-1 hidden sm:block">?? åÀåöÇƒÅEíz20îN</p>
                                    <p class="text-xs text-gray-600 mb-1 sm:mb-2 hidden sm:block">?? 048-5555-6666</p>
                                    <!-- íSìñé“ÉhÉçÉbÉvÉGÉäÉA -->
                                    <div class="assignee-drop-area bg-white border-2 border-dashed border-gray-300 rounded-lg p-1 sm:p-2 min-h-[30px] sm:min-h-[40px]">
                                        <p class="text-xs text-gray-400 text-center">ÉhÉçÉbÉv</p>
                                    </div>
                                    <div class="mt-1 sm:mt-2 pt-1 sm:pt-2 border-t hidden sm:block">
                                        <p class="text-xs text-orange-600 font-medium">
                                            êÑèß: ï°êîíSìñ
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÉAÉNÉVÉáÉìÉ{É^Éì -->
                    <div class="flex flex-col sm:flex-row justify-between items-center mt-4 sm:mt-6 pt-4 sm:pt-6 border-t gap-3">
                        <button onclick="autoAssignAll()" class="w-full sm:w-auto px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm sm:text-base">
                            àÍäáé©ìÆêUÇËï™ÇØ
                        </button>
                        <div class="flex w-full sm:w-auto space-x-2 sm:space-x-3">
                            <button onclick="closeAssignmentModal()" class="flex-1 sm:flex-none px-3 sm:px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 text-sm sm:text-base">
                                ÉLÉÉÉìÉZÉã
                            </button>
                            <button onclick="confirmAssignment()" class="flex-1 sm:flex-none px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm sm:text-base">
                                êUÇËï™ÇØÇämíË
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            initDragAndDrop();
        }

        // ÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
        function closeAssignmentModal() {
            const modal = document.getElementById('assignmentModal');
            if (modal) modal.remove();
        }

        // ÉhÉâÉbÉO&ÉhÉçÉbÉvèâä˙âª
        function initDragAndDrop() {
            let draggedElement = null;

            // íSìñé“ÉJÅ[ÉhÇÃÉhÉâÉbÉOäJén
            document.querySelectorAll('.assignee-card').forEach(card => {
                card.addEventListener('dragstart', (e) => {
                    draggedElement = e.target.closest('.assignee-card');
                    e.target.style.opacity = '0.5';
                    e.dataTransfer.effectAllowed = 'copy';
                });

                card.addEventListener('dragend', (e) => {
                    e.target.style.opacity = '';
                });
            });

            // àƒåèÉJÅ[ÉhëSëÃÇÉhÉçÉbÉvÉGÉäÉAÇ…ê›íË
            document.querySelectorAll('.case-drop-zone').forEach(caseCard => {
                const dropArea = caseCard.querySelector('.assignee-drop-area');
                caseCard.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'copy';
                    caseCard.classList.add('bg-blue-50', 'border-blue-400');
                });

                caseCard.addEventListener('dragleave', (e) => {
                    // éqóvëfÇ÷ÇÃà⁄ìÆÇÕñ≥éã
                    if (!caseCard.contains(e.relatedTarget)) {
                        caseCard.classList.remove('bg-blue-50', 'border-blue-400');
                    }
                });

                caseCard.addEventListener('drop', (e) => {
                    e.preventDefault();
                    caseCard.classList.remove('bg-blue-50', 'border-blue-400');

                    if (draggedElement) {
                        const assigneeId = draggedElement.dataset.assigneeId;
                        const assigneeName = draggedElement.dataset.assigneeName;
                        const caseId = caseCard.dataset.caseId;

                        // í èÌÇÃíSìñé“Çí«â¡Åiï°êîâ¬Åj
                        const newTag = document.createElement('div');
                        newTag.className = 'assignee-tag bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium flex items-center justify-between mb-1';
                        newTag.innerHTML = `
                            <span>?? ${assigneeName}</span>
                            <button onclick="removeAssignee(this)" class="ml-2 text-blue-600 hover:text-blue-800">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        `;

                        // ÉvÉåÅ[ÉXÉzÉãÉ_Å[ÉeÉLÉXÉgÇ™Ç†ÇÍÇŒçÌèú
                        const placeholder = dropArea.querySelector('.text-gray-400');
                        if (placeholder) {
                            placeholder.remove();
                        }

                        // ìØÇ∂íSìñé“Ç™ä˘Ç…äÑÇËìñÇƒÇÁÇÍÇƒÇ¢Ç»Ç¢Ç©É`ÉFÉbÉN
                        const existingAssignees = Array.from(dropArea.querySelectorAll('.assignee-tag')).map(tag =>
                            tag.querySelector('span').textContent.replace('?? ', '')
                        );

                        if (!existingAssignees.includes(assigneeName)) {
                            dropArea.appendChild(newTag);
                            caseCard.classList.add('border-blue-400');
                        } else {
                            showNotification('ä˘Ç…äÑÇËìñÇƒçœÇ›', `${assigneeName}ÇÕä˘Ç…Ç±ÇÃàƒåèÇ…äÑÇËìñÇƒÇÁÇÍÇƒÇ¢Ç‹Ç∑`);
                        }
                    }
                });
            });
        }

        // íSìñé“ÇçÌèú
        function removeAssignee(button) {
            const tag = button.closest('.assignee-tag');
            const dropArea = tag.closest('.assignee-drop-area');
            tag.remove();

            // íSìñé“Ç™Ç¢Ç»Ç≠Ç»Ç¡ÇΩÇÁÉvÉåÅ[ÉXÉzÉãÉ_Å[Çï\é¶
            if (dropArea.querySelectorAll('.assignee-tag').length === 0) {
                dropArea.innerHTML = '<p class="text-xs text-gray-400 text-center">íSìñé“ÇÇ±Ç±Ç…ÉhÉçÉbÉv</p>';
                const caseCard = dropArea.closest('.case-drop-zone');
                caseCard.classList.remove('border-blue-400');
            }
        }

        // êUÇËï™ÇØï˚ñ@ïœçXéûÇÃêÑèßçXêV
        function updateAssignmentSuggestion() {
            const method = document.querySelector('input[name="assignMethod"]:checked').value;
            const caseCards = document.querySelectorAll('.case-card');

            caseCards.forEach(card => {
                const suggestionEl = card.querySelector('.text-blue-600, .text-orange-600');
                if (suggestionEl) {
                    switch(method) {
                        case 'area':
                            suggestionEl.textContent = 'êÑèß: ÉGÉäÉAÉ}ÉbÉ`Ç∑ÇÈíSìñé“';
                            break;
                        case 'workload':
                            suggestionEl.textContent = 'êÑèß: àƒåèêîÇ™è≠Ç»Ç¢íSìñé“';
                            break;
                        case 'performance':
                            suggestionEl.textContent = 'êÑèß: ê¨ñÒó¶Ç™çÇÇ¢íSìñé“';
                            break;
                        case 'auto':
                            // å≥ÇÃêÑèßÇ…ñﬂÇ∑
                            break;
                    }
                }
            });
        }

        // àÍäáé©ìÆêUÇËï™ÇØ
        function autoAssignAll() {
            const method = document.querySelector('input[name="assignMethod"]:checked').value;
            const caseCards = document.querySelectorAll('.case-drop-zone');

            caseCards.forEach(caseCard => {
                const caseId = caseCard.dataset.caseId;
                const dropArea = caseCard.querySelector('.assignee-drop-area');

                // ä˘Ç…íSìñé“Ç™äÑÇËìñÇƒÇÁÇÍÇƒÇ¢ÇÈèÍçáÇÕÉXÉLÉbÉv
                if (dropArea.querySelector('.assignee-tag')) {
                    return;
                }

                // ä»à’ìIÇ»é©ìÆêUÇËï™ÇØÉçÉWÉbÉNÅiÉfÉÇópÅj
                let assigneeName = '';
                let assigneeType = 'normal';

                if (caseId === '101') {
                    assigneeName = 'ìcíÜëæòY';
                } else if (caseId === '102') {
                    assigneeName = 'ç≤ì°â‘éq';
                } else if (caseId === '103') {
                    // 3î‘ñ⁄ÇÃàƒåèÇ‡í èÌÇÃíSìñé“ÇäÑÇËìñÇƒ
                    assigneeName = 'éRìcéüòY';
                }

                // íSìñé“É^ÉOÇí«â¡
                if (assigneeName) {
                    dropArea.innerHTML = `
                        <div class="assignee-tag bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium flex items-center justify-between">
                            <span>?? ${assigneeName}</span>
                            <button onclick="removeAssignee(this)" class="ml-2 text-blue-600 hover:text-blue-800">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    `;
                    caseCard.classList.add('border-blue-400');
                }
            });

            showNotification('é©ìÆêUÇËï™ÇØäÆóπ', 'êÑèßíSìñé“Ç…àƒåèÇêUÇËï™ÇØÇ‹ÇµÇΩ');
        }

        // êUÇËï™ÇØämíË
        function confirmAssignment() {
            const assignments = [];
            const caseCards = document.querySelectorAll('.case-drop-zone');

            caseCards.forEach(caseCard => {
                const caseId = caseCard.dataset.caseId;
                const dropArea = caseCard.querySelector('.assignee-drop-area');
                const assigneeTags = dropArea.querySelectorAll('.assignee-tag');

                if (assigneeTags.length > 0) {
                    const customerName = caseCard.querySelector('.font-semibold').textContent;
                    const assignees = Array.from(assigneeTags).map(tag =>
                        tag.querySelector('span').textContent.replace('?? ', '')
                    );

                    assignments.push({
                        caseId: caseId,
                        customerName: customerName,
                        assignees: assignees
                    });
                }
            });

            if (assignments.length > 0) {
                let message = 'à»â∫ÇÃêUÇËï™ÇØÇämíËÇµÇ‹ÇµÇΩ:Än';
                assignments.forEach(a => {
                    message += `${a.customerName} Å® ${a.assignees.join(', ')}Än`;
                });

                showNotification('êUÇËï™ÇØäÆóπ', message);

                // ñ¢êUÇËï™ÇØàƒåèÇ©ÇÁçÌèú
                assignments.forEach(a => {
                    const index = unassignedCases.findIndex(c => c.id == a.caseId);
                    if (index !== -1) {
                        unassignedCases.splice(index, 1);
                    }
                });
                displayUnassignedCases();
                closeAssignmentModal();
            } else {
                alert('êUÇËï™ÇØÇÈàƒåèÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢');
            }
        }

        // àƒåèè⁄ç◊ï\é¶
        function showCaseDetail(caseId) {
            const caseData = casesData.find(c => c.id === caseId);
            if (!caseData) return;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="flex justify-between items-start mb-4">
                        <h2 class="text-2xl font-bold">${caseData.name}ól</h2>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- ÉXÉeÅ[É^ÉXïœçX -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ÉXÉeÅ[É^ÉX</label>
                        <select id="caseStatus" onchange="updateCaseStatus(${caseId}, this.value)" class="w-full md:w-auto px-4 py-2 border rounded-lg">
                            <option value="ñ¢ëŒâû" ${caseData.status === 'ñ¢ëŒâû' ? 'selected' : ''}>ñ¢ëŒâû</option>
                            <option value="âÀìdçœ/ñ¢ÉAÉ|" ${caseData.status === 'âÀìdçœ/ñ¢ÉAÉ|' ? 'selected' : ''}>âÀìdçœ/ñ¢ÉAÉ|</option>
                            <option value="ÉAÉ|çœ" ${caseData.status === 'ÉAÉ|çœ' ? 'selected' : ''}>ÉAÉ|çœ</option>
                            <option value="åªí≤çœ" ${caseData.status === 'åªí≤çœ' ? 'selected' : ''}>åªí≤çœ</option>
                            <option value="åªí≤ëOÉLÉÉÉìÉZÉã" ${caseData.status === 'åªí≤ëOÉLÉÉÉìÉZÉã' ? 'selected' : ''}>åªí≤ëOÉLÉÉÉìÉZÉã</option>
                            <option value="åªí≤å„é∏íç" ${caseData.status === 'åªí≤å„é∏íç' ? 'selected' : ''}>åªí≤å„é∏íç</option>
                            <option value="å©êœíÒèoçœ" ${caseData.status === 'å©êœíÒèoçœ' ? 'selected' : ''}>å©êœíÒèoçœ</option>
                            <option value="ê¨ñÒ" ${caseData.status === 'ê¨ñÒ' ? 'selected' : ''}>ê¨ñÒ</option>
                            <option value="ëºé–å_ñÒçœ" ${caseData.status === 'ëºé–å_ñÒçœ' ? 'selected' : ''}>ëºé–å_ñÒçœ</option>
                            <option value="ï â¡ñøìXå_ñÒçœ" ${caseData.status === 'ï â¡ñøìXå_ñÒçœ' ? 'selected' : ''}>ï â¡ñøìXå_ñÒçœ</option>
                            <option value="ì¸ã‡ó\íË" ${caseData.status === 'ì¸ã‡ó\íË' ? 'selected' : ''}>ì¸ã‡ó\íË</option>
                            <option value="ì¸ã‡çœ" ${caseData.status === 'ì¸ã‡çœ' ? 'selected' : ''}>ì¸ã‡çœ</option>
                            <option value="ÉNÉåÅ[ÉÄ or é∏íç" ${caseData.status === 'ÉNÉåÅ[ÉÄ or é∏íç' ? 'selected' : ''}>ÉNÉåÅ[ÉÄ or é∏íç</option>
                        </select>
                    </div>

                    <!-- äÓñ{èÓïÒ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <p class="text-sm text-gray-600">èZèä</p>
                            <p class="font-medium">${caseData.location}</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600">ï®åèéÌï </p>
                            <p class="font-medium">${caseData.propertyType}</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600">ìdòbî‘çÜ</p>
                            <p class="font-medium">${caseData.phone}</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600">íSìñé“</p>
                            <p class="font-medium">${caseData.assignee || 'ñ¢äÑìñ'}</p>
                        </div>
                    </div>

                    <!-- ÉAÉNÉVÉáÉìÉ{É^Éì -->
                    <div class="flex flex-wrap gap-2 mb-6">
                        <button onclick="callCustomer('${caseData.phone}')" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                            ?? ìdòb
                        </button>
                        <button onclick="sendSMS('${caseData.phone}', ${caseData.id})" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                            ?? SMS
                        </button>
                        <button onclick="showMemo(${caseId})" class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600">
                            ?? ÉÅÉÇ
                        </button>
                        <button onclick="passCase(${caseId})" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">
                            ?? à¯Ç´åpÇ¨
                        </button>
                    </div>

                    <!-- äàìÆóöó -->
                    <div class="border-t pt-4">
                        <h3 class="font-bold mb-3">äàìÆóöó</h3>
                        <div class="space-y-2 max-h-48 overflow-y-auto">
                            ${getActivityHistory(caseId)}
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ÉXÉeÅ[É^ÉXçXêV
        function updateCaseStatus(caseId, newStatus) {
            const currentUser = getCurrentUser();
            const timestamp = new Date().toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            }).replace(/Ä//g, '/');

            // ÉXÉeÅ[É^ÉXïœçXóöóÇãLò^Åié¿ç€ÇÃÉVÉXÉeÉÄÇ≈ÇÕAPIÇ…ëóêMÅj
            const statusChangeEntry = {
                timestamp: timestamp,
                type: 'status_change',
                user: currentUser.name,
                oldStatus: casesData.find(c => c.id === caseId)?.status,
                newStatus: newStatus,
                caseId: caseId
            };

            // Ç±Ç±Ç≈APIÇ…ëóêM
            console.log('Recording status change:', statusChangeEntry);

            // ÉçÅ[ÉJÉãÉfÅ[É^ÇçXêV
            const caseData = casesData.find(c => c.id === caseId);
            if (caseData) {
                caseData.status = newStatus;
            }

            // UIÇçXêV
            updateCaseCard(caseId);

            // ÉJÉåÉìÉ_Å[ÇÃé©ìÆìØä˙
            autoSyncToCalendar();

            showNotification('ÉXÉeÅ[É^ÉXçXêV', `ÉXÉeÅ[É^ÉXÇÅu${newStatus}ÅvÇ…ïœçXÇµÇ‹ÇµÇΩ`);
        }

        // äàìÆóöóéÊìæ
        function getActivityHistory(caseId) {
            // ÉTÉìÉvÉãÉfÅ[É^Åié¿ç€ÇÕAPIÇ©ÇÁéÊìæÅj
            const histories = {
                1: `
                    <div class="text-sm border-l-2 border-gray-300 pl-3">
                        <div class="text-xs text-gray-500">2024/03/16 14:00</div>
                        <div>ÅyÉXÉeÅ[É^ÉXïœçXÅzñ¢ëŒâû Å® ÉAÉ|çœÅiìcíÜëæòYÅj</div>
                    </div>
                    <div class="text-sm border-l-2 border-gray-300 pl-3">
                        <div class="text-xs text-gray-500">2024/03/16 13:30</div>
                        <div>ÅyâÀìdÅz03-1234-5678ÅiìcíÜëæòYÅj</div>
                    </div>
                    <div class="text-sm border-l-2 border-gray-300 pl-3">
                        <div class="text-xs text-gray-500">2024/03/15 16:00</div>
                        <div>ÅyÉÅÉÇí«â¡Åzó\éZä¥ämîFçœÇ›ÅiìcíÜëæòYÅj</div>
                    </div>
                `
            };

            return histories[caseId] || '<div class="text-gray-400 text-sm">óöóÇ»Çµ</div>';
        }

        // àƒåèÉJÅ[ÉhUIçXêV
        function updateCaseCard(caseId) {
            const caseData = casesData.find(c => c.id === caseId);
            if (!caseData) return;

            const cards = document.querySelectorAll(`[onclick="showCaseDetail(${caseId})"]`);
            cards.forEach(card => {
                // ÉXÉeÅ[É^ÉXÉoÉbÉWÇçXêV
                const statusBadge = card.querySelector('span[class*="rounded-full"]');
                if (statusBadge) {
                    const statusColors = {
                        'ñ¢ëŒâû': 'bg-red-100 text-red-800',
                        'âÀìdçœ/ñ¢ÉAÉ|': 'bg-orange-100 text-orange-800',
                        'ÉAÉ|çœ': 'bg-blue-100 text-blue-800',
                        'åªí≤çœ': 'bg-indigo-100 text-indigo-800',
                        'åªí≤ëOÉLÉÉÉìÉZÉã': 'bg-gray-100 text-gray-800',
                        'åªí≤å„é∏íç': 'bg-gray-100 text-gray-800',
                        'å©êœíÒèoçœ': 'bg-yellow-100 text-yellow-800',
                        'ê¨ñÒ': 'bg-green-100 text-green-800',
                        'ëºé–å_ñÒçœ': 'bg-gray-100 text-gray-800',
                        'ï â¡ñøìXå_ñÒçœ': 'bg-purple-100 text-purple-800',
                        'ì¸ã‡ó\íË': 'bg-cyan-100 text-cyan-800',
                        'ì¸ã‡çœ': 'bg-emerald-100 text-emerald-800',
                        'ÉNÉåÅ[ÉÄ or é∏íç': 'bg-red-100 text-red-800'
                    };

                    statusBadge.className = `px-2 py-1 text-xs font-semibold rounded-full ${statusColors[caseData.status] || 'bg-gray-100 text-gray-800'}`;
                    statusBadge.textContent = caseData.status;
                }
            });
        }

        // ÉXÉPÉWÉÖÅ[Éãê›íË
        function scheduleCase(caseId) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
                    <h3 class="text-lg font-bold mb-4">?? ÉXÉPÉWÉÖÅ[Éãê›íË</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì˙ït</label>
                        <input type="date" id="scheduleDate" class="w-full p-2 border rounded-lg" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">éûä‘</label>
                        <input type="time" id="scheduleTime" class="w-full p-2 border rounded-lg" value="14:00">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ó\íËì‡óe</label>
                        <select id="scheduleType" class="w-full p-2 border rounded-lg">
                            <option value="âÀìd">âÀìd</option>
                            <option value="ñKñ‚">ñKñ‚</option>
                            <option value="åªíní≤ç∏">åªíní≤ç∏</option>
                            <option value="å©êœíÒèo">å©êœíÒèo</option>
                            <option value="å_ñÒ">å_ñÒ</option>
                            <option value="çHéñ">çHéñ</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ÉÅÉÇ</label>
                        <textarea id="scheduleMemo" class="w-full p-2 border rounded-lg" rows="2" placeholder="îıçl..."></textarea>
                    </div>
                    <div class="flex justify-end gap-2">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ÉLÉÉÉìÉZÉã
                        </button>
                        <button onclick="saveSchedule(${caseId})" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            ï€ë∂
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ÉXÉPÉWÉÖÅ[Éãï€ë∂
        function saveSchedule(caseId) {
            const date = document.getElementById('scheduleDate').value;
            const time = document.getElementById('scheduleTime').value;
            const type = document.getElementById('scheduleType').value;
            const memo = document.getElementById('scheduleMemo').value;

            // ÉXÉPÉWÉÖÅ[ÉãÇï€ë∂Åié¿ç€ÇÃÉVÉXÉeÉÄÇ≈ÇÕAPIÇ…ëóêMÅj
            console.log('Saving schedule:', { caseId, date, time, type, memo });

            showNotification('ÉXÉPÉWÉÖÅ[Éãìoò^', `${date} ${time} Ç…${type}Çó\íËÇµÇ‹ÇµÇΩ`);
            document.querySelector('.fixed').remove();
        }

        // ÉNÉCÉbÉNÉXÉeÅ[É^ÉXïœçX
        function quickStatusChange(caseId) {
            const caseData = casesData.find(c => c.id === caseId);
            if (!caseData) return;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
                    <h3 class="text-lg font-bold mb-4">ÉXÉeÅ[É^ÉXïœçX</h3>
                    <div class="mb-4">
                        <p class="text-sm text-gray-600 mb-2">åªç›: <span class="font-medium">${caseData.status}</span></p>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mb-4 max-h-96 overflow-y-auto">
                        <button onclick="updateStatusAndClose(${caseId}, 'ñ¢ëŒâû')" class="px-3 py-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 text-sm">
                            ñ¢ëŒâû
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'âÀìdçœ/ñ¢ÉAÉ|')" class="px-3 py-2 bg-orange-100 text-orange-800 rounded-lg hover:bg-orange-200 text-sm">
                            âÀìdçœ/ñ¢ÉAÉ|
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ÉAÉ|çœ')" class="px-3 py-2 bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 text-sm">
                            ÉAÉ|çœ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'åªí≤çœ')" class="px-3 py-2 bg-indigo-100 text-indigo-800 rounded-lg hover:bg-indigo-200 text-sm">
                            åªí≤çœ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'åªí≤ëOÉLÉÉÉìÉZÉã')" class="px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 text-sm">
                            åªí≤ëOÉLÉÉÉìÉZÉã
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'åªí≤å„é∏íç')" class="px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 text-sm">
                            åªí≤å„é∏íç
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'å©êœíÒèoçœ')" class="px-3 py-2 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 text-sm">
                            å©êœíÒèoçœ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ê¨ñÒ')" class="px-3 py-2 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 text-sm">
                            ê¨ñÒ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ëºé–å_ñÒçœ')" class="px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 text-sm">
                            ëºé–å_ñÒçœ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ï â¡ñøìXå_ñÒçœ')" class="px-3 py-2 bg-purple-100 text-purple-800 rounded-lg hover:bg-purple-200 text-sm">
                            ï â¡ñøìXå_ñÒçœ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ì¸ã‡ó\íË')" class="px-3 py-2 bg-cyan-100 text-cyan-800 rounded-lg hover:bg-cyan-200 text-sm">
                            ì¸ã‡ó\íË
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ì¸ã‡çœ')" class="px-3 py-2 bg-emerald-100 text-emerald-800 rounded-lg hover:bg-emerald-200 text-sm">
                            ì¸ã‡çœ
                        </button>
                        <button onclick="updateStatusAndClose(${caseId}, 'ÉNÉåÅ[ÉÄ or é∏íç')" class="col-span-2 px-3 py-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 text-sm">
                            ÉNÉåÅ[ÉÄ or é∏íç
                        </button>
                    </div>
                    <div class="flex justify-end">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ÉLÉÉÉìÉZÉã
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ÉXÉeÅ[É^ÉXçXêVÇµÇƒï¬Ç∂ÇÈ
        function updateStatusAndClose(caseId, newStatus) {
            updateCaseStatus(caseId, newStatus);
            document.querySelector('.fixed').remove();
        }

        // ìdòbî≠êM
        function callCustomer(phone) {
            if (confirm(`${phone} Ç…ìdòbÇÇ©ÇØÇ‹Ç∑Ç©ÅH`)) {
                window.location.href = `tel:${phone}`;
                // âÀìdóöóÇãLò^
                showNotification('âÀìd', `${phone} Ç÷ÇÃâÀìdÇãLò^ÇµÇ‹ÇµÇΩ`);
            }
        }

        // SMSëóêMÉÇÅ[É_ÉãÇäJÇ≠
        function sendSMS(phone, caseId) {
            // àƒåèèÓïÒÇéÊìæ
            const caseData = caseId ? casesData.find(c => c.id === caseId) : null;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold">SMSÉÅÉbÉZÅ[ÉWçÏê¨</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- Ç±ÇÃÉyÅ[ÉWÇÃì‡óe -->
                    <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600 mb-2">Ç±ÇÃÉyÅ[ÉWÇÃì‡óe</div>
                        <div class="text-sm font-medium">SMSÉÅÉbÉZÅ[ÉWÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢:</div>
                    </div>

                    ${caseData ? `
                    <!-- ÉXÉeÅ[É^ÉXèÓïÒ -->
                    <div class="mb-4 p-4 bg-blue-50 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-blue-900">åªç›ÇÃÉXÉeÅ[É^ÉX: ${caseData.status || 'ñ¢ëŒâû'}</span>
                            <span class="text-sm text-gray-600">Ç®ãqól: ${caseData.name}</span>
                        </div>
                    </div>

                    <!-- ëIëéàÉZÉNÉVÉáÉì -->
                    <div class="mb-4">
                        <div class="text-sm font-medium mb-2">éüÇÃÉXÉeÉbÉvÇëIë:</div>
                        <div id="nextStepOptions" class="space-y-2">
                            <!-- ÉXÉeÅ[É^ÉXÇ…âûÇ∂ÇΩëIëéàÇìÆìIÇ…ê∂ê¨ -->
                        </div>
                    </div>
                    ` : ''}

                    <!-- AIê∂ê¨ÉÅÉbÉZÅ[ÉWï\é¶ -->
                    <div class="mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-sm font-medium">${caseData ? 'AIê∂ê¨ÉÅÉbÉZÅ[ÉW' : 'ÉÅÉbÉZÅ[ÉW'}:</label>
                            ${caseData ? `
                            <button onclick="regenerateSmsMessage(${caseId})" class="text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                                çƒê∂ê¨
                            </button>
                            ` : ''}
                        </div>
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3">
                            <div class="text-xs text-yellow-800 mb-1">?? SMSÇÕ70ï∂éöà»ì‡Ç™êÑèßÇ≥ÇÍÇ‹Ç∑</div>
                            <div class="text-xs text-gray-600">åªç›: <span id="charCount">0</span>ï∂éö</div>
                        </div>
                        <textarea id="smsMessage" class="w-full p-3 border rounded-lg" rows="6"
                                  placeholder="${caseData ? 'AIÇ™ÉÅÉbÉZÅ[ÉWÇê∂ê¨íÜ...' : 'ÉÅÉbÉZÅ[ÉWÇì¸óÕ...'}"
                                  onkeyup="updateCharCount()"></textarea>

                        <!-- ÉeÉìÉvÉåÅ[ÉgÉ{É^Éì -->
                        <div class="flex flex-wrap gap-2 mt-2">
                            <button onclick="loadSmsTemplate('greeting')" class="text-xs px-3 py-1 bg-gray-100 rounded-lg hover:bg-gray-200">
                                ?? à•éA
                            </button>
                            <button onclick="loadSmsTemplate('appointment')" class="text-xs px-3 py-1 bg-green-100 rounded-lg hover:bg-green-200">
                                ?? ÉAÉ|ämîF
                            </button>
                            <button onclick="loadSmsTemplate('estimate')" class="text-xs px-3 py-1 bg-blue-100 rounded-lg hover:bg-blue-200">
                                ?? å©êœíÒèo
                            </button>
                            <button onclick="loadSmsTemplate('followup')" class="text-xs px-3 py-1 bg-yellow-100 rounded-lg hover:bg-yellow-200">
                                ?? ÉtÉHÉçÅ[
                            </button>
                        </div>
                    </div>

                    <!-- íºê⁄ì¸óÕÇÃÉ`ÉFÉbÉNÉ{ÉbÉNÉX -->
                    <div class="flex items-center mb-4">
                        <input type="checkbox" id="manualInput" class="mr-2" onchange="toggleManualInput(${caseId || 'null'})">
                        <label for="manualInput" class="text-sm text-gray-700">Ç‹ÇΩÇÕíºê⁄ì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢</label>
                    </div>

                    <div class="flex justify-end gap-2">
                        <button onclick="this.closest('.fixed').remove()" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ÉLÉÉÉìÉZÉã
                        </button>
                        <button onclick="sendSmsMessage('${phone}')" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            OK
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            if (caseData) {
                // ÉXÉeÅ[É^ÉXÇ…âûÇ∂ÇΩëIëéàÇï\é¶
                generateNextStepOptions(caseData.status, caseId);
                // èââÒÇÃAIÉÅÉbÉZÅ[ÉWê∂ê¨
                generateAiSmsMessage(caseId, null);
            }
        }

        // ï∂éöêîÉJÉEÉìÉgçXêV
        function updateCharCount() {
            const textarea = document.getElementById('smsMessage');
            const countSpan = document.getElementById('charCount');
            if (textarea && countSpan) {
                const count = textarea.value.length;
                countSpan.textContent = count;
                countSpan.className = count > 70 ? 'text-red-600 font-bold' : '';
            }
        }

        // ÉXÉeÅ[É^ÉXÇ…âûÇ∂ÇΩéüÉXÉeÉbÉvÇÃëIëéàÇê∂ê¨
        function generateNextStepOptions(currentStatus, caseId) {
            const optionsContainer = document.getElementById('nextStepOptions');
            if (!optionsContainer) return;

            let options = [];

            // ÉXÉeÅ[É^ÉXÇ…âûÇ∂ÇΩëIëéàÇíËã`
            const statusOptions = {
                'ñ¢ëŒâû': [
                    { label: 'èââÒÉAÉ|ÉCÉìÉgÇÃÇ®äËÇ¢', value: 'initial_appointment' },
                    { label: 'Ç®ñ‚Ç¢çáÇÌÇπÇ÷ÇÃÇ®óÁ', value: 'thank_inquiry' },
                    { label: 'éëóøëóïtÇÃÇ®ímÇÁÇπ', value: 'send_materials' }
                ],
                'âÀìdçœ/ñ¢ÉAÉ|': [
                    { label: 'çƒìxÉAÉ|ÉCÉìÉgÇÃÇ®äËÇ¢', value: 'retry_appointment' },
                    { label: 'éëóøëóïtÇÃÇ≤àƒì‡', value: 'material_guide' },
                    { label: 'ÉtÉHÉçÅ[ÉAÉbÉvÇÃÇ≤òAóç', value: 'followup_call' }
                ],
                'ÉAÉ|çœ': [
                    { label: 'åªíní≤ç∏ì˙éûÇÃämîF', value: 'confirm_survey' },
                    { label: 'åªí≤ëOì˙ÇÃÉäÉ}ÉCÉìÉ_Å[', value: 'survey_reminder' },
                    { label: 'éùÇøï®ÅEèÄîıéñçÄÇÃÇ≤òAóç', value: 'preparation_info' }
                ],
                'åªí≤çœ': [
                    { label: 'åªí≤ÇÃÇ®óÁ', value: 'thank_survey' },
                    { label: 'å©êœèëçÏê¨íÜÇÃÇ≤òAóç', value: 'estimate_progress' },
                    { label: 'å©êœèëäÆê¨ÇÃÇ®ímÇÁÇπ', value: 'estimate_ready' }
                ],
                'å©êœíÒèoçœ': [
                    { label: 'å©êœèëÇÃÇ≤ämîFÇ®äËÇ¢', value: 'estimate_check' },
                    { label: 'Ç≤éøñ‚Ç÷ÇÃâÒìö', value: 'answer_questions' },
                    { label: 'ÉtÉHÉçÅ[ÉAÉbÉv', value: 'estimate_followup' },
                    { label: 'ì¡ï ÉLÉÉÉìÉyÅ[ÉìÇÃÇ≤àƒì‡', value: 'special_campaign' }
                ],
                'ê¨ñÒ': [
                    { label: 'Ç≤å_ñÒÇÃÇ®óÁ', value: 'contract_thanks' },
                    { label: 'çHéñì˙íˆÇÃÇ≤òAóç', value: 'construction_schedule' },
                    { label: 'ïKóvèëóﬁÇÃÇ≤àƒì‡', value: 'required_documents' }
                ],
                'ì¸ã‡ó\íË': [
                    { label: 'ì¸ã‡ämîFÇÃÇ®äËÇ¢', value: 'payment_confirmation' },
                    { label: 'êUçûêÊÇÃÇ≤àƒì‡', value: 'bank_info' },
                    { label: 'çHéñäJénÇÃÇ≤àƒì‡', value: 'construction_start' }
                ],
                'ì¸ã‡çœ': [
                    { label: 'ì¸ã‡ämîFÇÃÇ®óÁ', value: 'payment_thanks' },
                    { label: 'çHéñäJénÇÃÇ≤àƒì‡', value: 'construction_info' },
                    { label: 'äÆçHå„ÇÃÉtÉHÉçÅ[', value: 'completion_follow' }
                ]
            };

            // ÉfÉtÉHÉãÉgÇÃëIëéà
            options = statusOptions[currentStatus] || [
                { label: 'Ç®ñ‚Ç¢çáÇÌÇπÇ÷ÇÃÇ®óÁ', value: 'general_thanks' },
                { label: 'Ç≤òAóç', value: 'general_contact' },
                { label: 'ÉtÉHÉçÅ[ÉAÉbÉv', value: 'general_followup' }
            ];

            // ëIëéàÇHTMLÇ…ïœä∑
            optionsContainer.innerHTML = options.map((opt, index) => `
                <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                    <input type="radio" name="nextStep" value="${opt.value}"
                           ${index === 0 ? 'checked' : ''}
                           onchange="generateAiSmsMessage(${caseId}, '${opt.value}')"
                           class="mr-3">
                    <span class="text-sm">${opt.label}</span>
                </label>
            `).join('');
        }

        // AIÇ≈SMSÉÅÉbÉZÅ[ÉWÇê∂ê¨ÅiÉÇÉbÉNî≈ - 65ï∂éöà»ì‡Åj
        function generateAiSmsMessage(caseId, messageType) {
            const caseData = casesData.find(c => c.id === caseId);
            if (!caseData) return;

            const messageTextarea = document.getElementById('smsMessage');
            if (!messageTextarea) return;

            // ÉçÅ[ÉfÉBÉìÉOï\é¶
            messageTextarea.value = 'AIÇ™ÉÅÉbÉZÅ[ÉWÇê∂ê¨íÜ...';
            messageTextarea.disabled = true;

            // ÉÅÉbÉZÅ[ÉWÉ^ÉCÉvÇéÊìæÅiñ¢ëIëÇÃèÍçáÇÕç≈èâÇÃëIëéàÅj
            if (!messageType) {
                const selectedOption = document.querySelector('input[name="nextStep"]:checked');
                messageType = selectedOption ? selectedOption.value : 'general_contact';
            }

            // êîïbå„Ç…AIê∂ê¨ÉÅÉbÉZÅ[ÉWÇï\é¶ÅiÉÇÉbÉN - 65ï∂éöà»ì‡Åj
            setTimeout(() => {
                const customerName = caseData.name ? caseData.name.split(' ')[0] : 'Ç®ãq'; // ïcéöÇÃÇ›
                const salesName = 'ìcíÜ'; // åªç›ÇÃÉçÉOÉCÉìÉÜÅ[ÉUÅ[ñº

                // 65ï∂éöà»ì‡ÇÃÉeÉìÉvÉåÅ[Ég
                const templates = {
                    'initial_appointment': `${customerName}ólÄnäOï«ìhëïÇÃåèÇ≈Ç≤òAóçÇµÇ‹ÇµÇΩÅBåªíní≤ç∏ÇÃÇ≤ìsçáÇÕÇ¢Ç©Ç™Ç≈ÇµÇÂÇ§Ç©ÅHÄn${salesName}`,
                    'thank_inquiry': `${customerName}ólÄnÇ®ñ‚çáÇπÇ†ÇËÇ™Ç∆Ç§Ç≤Ç¥Ç¢Ç‹Ç∑ÅBäOï«ìhëïÇÃè⁄ç◊ÇÇ≤àƒì‡ÇµÇ‹Ç∑ÅBÄn${salesName}`,
                    'send_materials': `${customerName}ólÄnéëóøÇÇ®ëóÇËÇµÇ‹ÇµÇΩÅBÇ≤ämîFÇ≠ÇæÇ≥Ç¢ÅBÇ≤éøñ‚ÇÕÇ®ãCåyÇ…ÅBÄn${salesName}`,
                    'retry_appointment': `${customerName}ólÄnêÊì˙ÇÕé∏óÁÇµÇ‹ÇµÇΩÅBåªí≤ì˙Ççƒí≤êÆÇ≥ÇπÇƒÇ¢ÇΩÇæÇØÇ‹Ç∑Ç©ÅHÄn${salesName}`,
                    'material_guide': `${customerName}ólÄnè⁄ÇµÇ¢éëóøÇÇ®ëóÇËÇµÇ‹Ç∑ÅBÇ≤ïsñæì_Ç™Ç†ÇÍÇŒÇ≤òAóçÇ≠ÇæÇ≥Ç¢ÅBÄn${salesName}`,
                    'followup_call': `${customerName}ólÄnêÊì˙ÇÃåèÇ¢Ç©Ç™Ç≈ÇµÇΩÇ©ÅHÇ≤ìsçáÇ¬Ç≠éûÇ…Ç≤òAóçÇ≠ÇæÇ≥Ç¢ÅBÄn${salesName}`,
                    'confirm_survey': `${customerName}ólÄnñæì˙ÅõéûÇÃåªí≤ÇÊÇÎÇµÇ≠Ç®äËÇ¢ÇµÇ‹Ç∑ÅBïœçXÇ†ÇÍÇŒÇ≤òAóçÇÅBÄn${salesName}`,
                    'survey_reminder': `${customerName}ólÄnñæì˙ÇÃåªí≤ÇÊÇÎÇµÇ≠Ç®äËÇ¢ÇµÇ‹Ç∑ÅBÉXÉ^ÉbÉtÇ™éfÇ¢Ç‹Ç∑ÅBÄn${salesName}`,
                    'preparation_info': `${customerName}ólÄnåªí≤ìñì˙ÇÕì¡Ç…Ç≤èÄîıïsóvÇ≈Ç∑ÅBÇ®ãCÇÇ¬ÇØÇƒÇ®ë“Çøâ∫Ç≥Ç¢ÅBÄn${salesName}`,
                    'thank_survey': `${customerName}ólÄnñ{ì˙ÇÕÇ†ÇËÇ™Ç∆Ç§Ç≤Ç¥Ç¢Ç‹ÇµÇΩÅBå©êœèëÇçÏê¨ÇµÇ≤òAóçÇµÇ‹Ç∑ÅBÄn${salesName}`,
                    'estimate_progress': `${customerName}ólÄnå©êœèëçÏê¨íÜÇ≈Ç∑ÅBÇ‡Ç§è≠ÇµÇ®ë“ÇøÇ≠ÇæÇ≥Ç¢ÅBÄn${salesName}`,
                    'estimate_ready': `${customerName}ólÄnå©êœèëÇ™äÆê¨ÇµÇ‹ÇµÇΩÅBÇ≤ìsçáÇÊÇ¢éûÇ…Ç≤ê‡ñæÇµÇ‹Ç∑ÅBÄn${salesName}`,
                    'estimate_check': `${customerName}ólÄnå©êœèëÇÕÇ≤ämîFÇ¢ÇΩÇæÇØÇ‹ÇµÇΩÇ©ÅHÇ≤ïsñæì_Ç®ãCåyÇ…ÅBÄn${salesName}`,
                    'answer_questions': `${customerName}ólÄnÇ≤éøñ‚Ç†ÇËÇ™Ç∆Ç§Ç≤Ç¥Ç¢Ç‹Ç∑ÅBè⁄ç◊âÒìöÇÇ®ëóÇËÇµÇ‹Ç∑ÅBÄn${salesName}`,
                    'estimate_followup': `${customerName}ólÄnå©êœèëÇÃåèÇ¢Ç©Ç™Ç≈ÇµÇÂÇ§Ç©ÅHÇ≤ïsñæì_Ç†ÇÍÇŒÇ≤òAóçÇÅBÄn${salesName}`,
                    'special_campaign': `${customerName}ólÄnç°åéå¿íËì¡ï âøäiÇ≤ópà”ÇµÇ‹ÇµÇΩÅBÇ±ÇÃã@âÔÇ…Ç¢Ç©Ç™Ç≈Ç∑Ç©ÅHÄn${salesName}`,
                    'contract_thanks': `${customerName}ólÄnÇ≤å_ñÒÇ†ÇËÇ™Ç∆Ç§Ç≤Ç¥Ç¢Ç‹Ç∑ÅBíöîJÇ»çHéñÇêSÇ™ÇØÇ‹Ç∑ÅBÄn${salesName}`,
                    'construction_schedule': `${customerName}ólÄnçHéñì˙íˆÇ™ÅõåéÅõì˙Ç…åàÇ‹ÇËÇ‹ÇµÇΩÅBÇÊÇÎÇµÇ≠Ç®äËÇ¢ÇµÇ‹Ç∑ÅBÄn${salesName}`,
                    'required_documents': `${customerName}ólÄnïKóvèëóﬁÇÇ®ëóÇËÇµÇ‹ÇµÇΩÅBÇ≤ämîFÅEÇ≤ãLì¸Ç®äËÇ¢ÇµÇ‹Ç∑ÅBÄn${salesName}`,
                    'payment_confirmation': `${customerName}ólÄnì¸ã‡ämîFÇ®äËÇ¢ÇµÇ‹Ç∑ÅBêUçûó\íËì˙ÇÇ®ã≥Ç¶Ç≠ÇæÇ≥Ç¢ÅBÄn${salesName}`,
                    'bank_info': `${customerName}ólÄnêUçûêÊÇÇ®ëóÇËÇµÇ‹Ç∑ÅBÇ≤ämîFÇÃè„Ç®éËë±Ç´Ç≠ÇæÇ≥Ç¢ÅBÄn${salesName}`,
                    'construction_start': `${customerName}ólÄnóàèTÇ©ÇÁçHéñäJénÇ≈Ç∑ÅBÇ≤ïsï÷Ç®Ç©ÇØÇµÇ‹Ç∑Ç™ÇÊÇÎÇµÇ≠ÅBÄn${salesName}`,
                    'payment_thanks': `${customerName}ólÄnì¸ã‡ämîFÇµÇ‹ÇµÇΩÅBÇ†ÇËÇ™Ç∆Ç§Ç≤Ç¥Ç¢Ç‹Ç∑ÅBçHéñêiÇﬂÇ‹Ç∑ÅBÄn${salesName}`,
                    'construction_info': `${customerName}ólÄnçHéñÉXÉPÉWÉÖÅ[ÉãÇ®ëóÇËÇµÇ‹Ç∑ÅBÇ≤ämîFÇ≠ÇæÇ≥Ç¢ÅBÄn${salesName}`,
                    'completion_follow': `${customerName}ólÄnçHéñäÆóπå„Ç‡ÉTÉ|Å[ÉgÇµÇ‹Ç∑ÅBâΩÇ©Ç†ÇÍÇŒÇ≤òAóçÇÅBÄn${salesName}`,
                    'general_contact': `${customerName}ólÄnäOï«ìhëïÇÃåèÇ≈Ç≤òAóçÇµÇ‹ÇµÇΩÅBÇ≤ìsçáÇÊÇ¢éûÇ…Ç®òbÇµÇ‹ÇπÇÒÇ©ÅHÄn${salesName}`,
                    'general_thanks': `${customerName}ólÄnÇ®ñ‚çáÇπÇ†ÇËÇ™Ç∆Ç§Ç≤Ç¥Ç¢Ç‹Ç∑ÅBè⁄ç◊Ç≤àƒì‡ÇµÇ‹Ç∑ÅBÄn${salesName}`,
                    'general_followup': `${customerName}ólÄnêÊì˙ÇÃåèÇ«Ç§Ç≈ÇµÇΩÇ©ÅHÇ®ãCåyÇ…Ç≤òAóçÇ≠ÇæÇ≥Ç¢ÅBÄn${salesName}`
                };

                const message = templates[messageType] || templates['general_contact'];
                messageTextarea.value = message;
                messageTextarea.disabled = false;
                updateCharCount();
            }, 1000); // 1ïbå„Ç…ê∂ê¨
        }

        // SMSÉÅÉbÉZÅ[ÉWÇÃçƒê∂ê¨
        function regenerateSmsMessage(caseId) {
            const selectedOption = document.querySelector('input[name="nextStep"]:checked');
            const messageType = selectedOption ? selectedOption.value : null;
            generateAiSmsMessage(caseId, messageType);
        }

        // ÉeÉìÉvÉåÅ[ÉgÇÉçÅ[Éh
        function loadSmsTemplate(templateType) {
            const messageTextarea = document.getElementById('smsMessage');
            if (!messageTextarea) return;

            const templates = {
                'greeting': 'Ç®ê¢òbÇ…Ç»Ç¡ÇƒÇ®ÇËÇ‹Ç∑ÅBäOï«ìhëïÇÃåèÇ≈Ç≤òAóçÇµÇ‹ÇµÇΩÅBìcíÜ',
                'appointment': 'ñæì˙ÇÃåªí≤ÇÊÇÎÇµÇ≠Ç®äËÇ¢ÇµÇ‹Ç∑ÅBìcíÜ',
                'estimate': 'å©êœèëäÆê¨ÇµÇ‹ÇµÇΩÅBÇ≤ämîFÇ≠ÇæÇ≥Ç¢ÅBìcíÜ',
                'followup': 'êÊì˙ÇÃåèÇ¢Ç©Ç™Ç≈ÇµÇΩÇ©ÅHÇ®ãCåyÇ…Ç≤òAóçÇ≠ÇæÇ≥Ç¢ÅBìcíÜ'
            };

            messageTextarea.value = templates[templateType] || '';
            updateCharCount();
        }

        // éËìÆì¸óÕÇÃêÿÇËë÷Ç¶
        function toggleManualInput(caseId) {
            const checkbox = document.getElementById('manualInput');
            const messageTextarea = document.getElementById('smsMessage');
            if (checkbox.checked) {
                messageTextarea.value = '';
                messageTextarea.placeholder = 'ÉÅÉbÉZÅ[ÉWÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢...';
                messageTextarea.disabled = false;
                updateCharCount();
            } else if (caseId) {
                generateAiSmsMessage(caseId, null);
            }
        }

        // SMSÉÅÉbÉZÅ[ÉWÇëóêM
        function sendSmsMessage(phone) {
            const message = document.getElementById('smsMessage').value;
            if (message) {
                window.location.href = `sms:${phone}?body=${encodeURIComponent(message)}`;
                showNotification('SMSëóêM', `${phone} Ç÷SMSÇëóêMÇµÇ‹ÇµÇΩ`);
                // ÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
                document.querySelector('.fixed').remove();
            } else {
                showNotification('ÉGÉâÅ[', 'ÉÅÉbÉZÅ[ÉWÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢', 'error');
            }
        }

        // ÉÅÉÇï\é¶ÅEï“èW
        function showMemo(caseId) {
            // ä˘ë∂ÇÃÉÅÉÇÇéÊìæÅié¿ç€ÇÃÉVÉXÉeÉÄÇ≈ÇÕAPIÇ©ÇÁéÊìæÅj
            const existingMemo = getCaseMemo(caseId);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-lg mx-4 max-h-[80vh] overflow-y-auto">
                    <h3 class="text-lg font-bold mb-4">?? àƒåèÉÅÉÇ</h3>

                    <!-- óöóï\é¶ -->
                    <div class="mb-4 max-h-48 overflow-y-auto bg-gray-50 rounded-lg p-3">
                        <div class="text-sm font-medium text-gray-600 mb-2">óöó:</div>
                        <div id="memoHistory" class="space-y-2 text-sm">
                            ${existingMemo.history || '<div class="text-gray-400">óöóÇ»Çµ</div>'}
                        </div>
                    </div>

                    <!-- êVãKÉÅÉÇì¸óÕ -->
                    <div class="mb-2">
                        <label class="text-sm font-medium text-gray-700">êVÇµÇ¢ÉÅÉÇÇí«â¡:</label>
                    </div>
                    <textarea id="caseMemo" class="w-full p-3 border rounded-lg" rows="4" placeholder="ê\ÇµëóÇËéñçÄÇ‚íçà”ì_ÇãLì¸..."></textarea>

                    <div class="flex justify-end gap-2 mt-4">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ÉLÉÉÉìÉZÉã
                        </button>
                        <button onclick="saveMemo(${caseId})" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            ï€ë∂
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ÉÅÉÇéÊìæÅié¿ç€ÇÃÉVÉXÉeÉÄÇ≈ÇÕAPIÇ©ÇÁéÊìæÅj
        function getCaseMemo(caseId) {
            // ÉTÉìÉvÉãÉfÅ[É^
            const memoData = {
                1: {
                    history: `
                        <div class="border-l-2 border-blue-400 pl-3 mb-2">
                            <div class="text-xs text-gray-500">2024/03/15 14:30 - ìcíÜëæòY</div>
                            <div class="text-gray-700">ó\éZä¥ÅF200ñúâ~ëOå„</div>
                        </div>
                        <div class="border-l-2 border-green-400 pl-3 mb-2">
                            <div class="text-xs text-gray-500">2024/03/15 16:45 - ç≤ì°â‘éq</div>
                            <div class="text-gray-700">ã£çáëºé–Ç‡åüì¢íÜÅAâúólÇ™åàíËå†é“</div>
                        </div>
                        <div class="border-l-2 border-yellow-400 pl-3 mb-2">
                            <div class="text-xs text-gray-500">2024/03/16 10:00 - ÉVÉXÉeÉÄ</div>
                            <div class="text-gray-700">Åyà¯Ç´åpÇ¨ÅzìcíÜëæòY Å® ç≤ì°â‘éq</div>
                        </div>
                    `
                },
                4: {
                    history: `
                        <div class="border-l-2 border-blue-400 pl-3 mb-2">
                            <div class="text-xs text-gray-500">2024/03/14 09:00 - éRìcéüòY</div>
                            <div class="text-gray-700">èââÒñKñ‚çœÇ›ÅAå©êœÇ‡ÇËë“Çø</div>
                        </div>
                    `
                }
            };

            return memoData[caseId] || { history: '' };
        }

        // ÉÅÉÇï€ë∂
        function saveMemo(caseId) {
            const memoText = document.getElementById('caseMemo').value;

            if (!memoText.trim()) {
                showNotification('ÉGÉâÅ[', 'ÉÅÉÇÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢', 'error');
                return;
            }

            // åªç›ÇÃÉÜÅ[ÉUÅ[èÓïÒÅié¿ç€ÇÃÉVÉXÉeÉÄÇ≈ÇÕÉZÉbÉVÉáÉìÇ©ÇÁéÊìæÅj
            const currentUser = getCurrentUser();
            const timestamp = new Date().toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            }).replace(/Ä//g, '/');

            // ÉÅÉÇÇï€ë∂Åié¿ç€ÇÃÉVÉXÉeÉÄÇ≈ÇÕAPIÇ…ëóêMÅj
            const newMemoEntry = {
                timestamp: timestamp,
                user: currentUser.name,
                text: memoText,
                caseId: caseId
            };

            // Ç±Ç±Ç≈APIÇ…ëóêM
            console.log('Saving memo:', newMemoEntry);

            showNotification('ÉÅÉÇï€ë∂', 'ÉÅÉÇÇï€ë∂ÇµÇ‹ÇµÇΩ');
            document.querySelector('.fixed').remove();

            // UIÇçXêVÇµÇƒÉÅÉÇÉAÉCÉRÉìÇâ©êFÇ…Ç∑ÇÈ
            updateMemoIcon(caseId, true);
        }

        // ÉÅÉÇÉAÉCÉRÉìÇÃçXêV
        function updateMemoIcon(caseId, hasMemo) {
            const caseElements = document.querySelectorAll(`[data-case-id="${caseId}"]`);
            caseElements.forEach(element => {
                const memoButton = element.querySelector('button[onclick*="showMemo"]');
                if (memoButton) {
                    const memoIcon = memoButton.querySelector('span');
                    if (memoIcon) {
                        if (hasMemo) {
                            memoIcon.classList.remove('text-gray-400');
                            memoIcon.classList.add('text-yellow-500');
                        } else {
                            memoIcon.classList.remove('text-yellow-500');
                            memoIcon.classList.add('text-gray-400');
                        }
                    }
                }
            });
        }

        // íSìñÉpÉXÅià¯Ç´åpÇ¨Åj
        function passCase(caseId) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
                    <h3 class="text-lg font-bold mb-4">?? íSìñé“ÇïœçX</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">à¯Ç´åpÇ¨êÊ</label>
                        <select id="passToSelect" class="w-full p-2 border rounded-lg">
                            <option value="">ëIëÇµÇƒÇ≠ÇæÇ≥Ç¢</option>
                            <option value="ìcíÜëæòY">ìcíÜëæòY</option>
                            <option value="ç≤ì°â‘éq">ç≤ì°â‘éq</option>
                            <option value="éRìcéüòY">éRìcéüòY</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">à¯Ç´åpÇ¨ÉÅÉÇÅiîCà”Åj</label>
                        <textarea id="passMemo" class="w-full p-2 border rounded-lg" rows="3" placeholder="ê\ÇµëóÇËéñçÄÇ™Ç†ÇÍÇŒãLì¸..."></textarea>
                    </div>
                    <div class="flex justify-end gap-2">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            ÉLÉÉÉìÉZÉã
                        </button>
                        <button onclick="confirmPass(${caseId})" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            à¯Ç´åpÇ¨ÉäÉNÉGÉXÉg
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // à¯Ç´åpÇ¨ämíË
        function confirmPass(caseId) {
            const passTo = document.getElementById('passToSelect').value;
            const passMemo = document.getElementById('passMemo').value;

            if (!passTo) {
                alert('à¯Ç´åpÇ¨êÊÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢');
                return;
            }

            // à¯Ç´åpÇ¨ÉäÉNÉGÉXÉgÇëóêM
            showNotification('à¯Ç´åpÇ¨ÉäÉNÉGÉXÉgëóêM', `${passTo}Ç÷è≥îFàÀóäÇëóêMÇµÇ‹ÇµÇΩ`);

            // ÉJÅ[ÉhÇ…è≥îFë“ÇøÉoÉbÉWÇí«â¡
            const card = document.querySelector(`[onclick="showCaseDetail(${caseId})"]`);
            if (card) {
                const titleElement = card.querySelector('h3');
                if (titleElement && !titleElement.querySelector('.pending-badge')) {
                    const badge = document.createElement('span');
                    badge.className = 'pending-badge text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded ml-2';
                    badge.textContent = '? è≥îFë“Çø';
                    titleElement.appendChild(badge);
                }
            }

            document.querySelector('.fixed').remove();

            // í ímÇï\é¶Åié¿ç€ÇÃé¿ëïÇ≈ÇÕëäéËÇÃâÊñ Ç…í ímÅj
            setTimeout(() => {
                showPassNotification(passTo, caseId, passMemo);
            }, 1000);
        }

        // à¯Ç´åpÇ¨í ímÇï\é¶
        function showPassNotification(assignee, caseId, memo) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-sm z-50 border-l-4 border-blue-500';

            const memoHtml = memo ? `
                <div class="mt-2 p-2 bg-gray-50 rounded text-xs text-gray-600">
                    <p class="font-medium">à¯Ç´åpÇ¨ÉÅÉÇ:</p>
                    <p>${memo}</p>
                </div>
            ` : '';

            notification.innerHTML = `
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <span class="text-2xl">??</span>
                    </div>
                    <div class="ml-3 flex-1">
                        <p class="text-sm font-medium text-gray-900">
                            àƒåèà¯Ç´åpÇ¨ÉäÉNÉGÉXÉg
                        </p>
                        <p class="mt-1 text-sm text-gray-500">
                            ìcíÜëæòYÇ©ÇÁàƒåèÇ™à¯Ç´åpÇ™ÇÍÇ‹ÇµÇΩ
                        </p>
                        ${memoHtml}
                        <div class="mt-3 flex gap-2">
                            <button onclick="acceptPass(${caseId}, this)" class="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">
                                è≥îF
                            </button>
                            <button onclick="rejectPass(${caseId}, this)" class="px-3 py-1 bg-gray-200 text-gray-800 text-sm rounded hover:bg-gray-300">
                                ãëî€
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(notification);

            // 5ïbå„Ç…é©ìÆÇ≈è¡Ç¶ÇÈ
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 10000);
        }

        // à¯Ç´åpÇ¨è≥îF
        function acceptPass(caseId, button) {
            // ÉÇÅ[É_ÉãÇ©ÇÁÉÅÉÇÇéÊìæ
            const modal = button.closest('.fixed');
            const passMemo = modal.querySelector('p:last-of-type')?.textContent.replace('ÉÅÉÇ: ', '') || '';

            // åªç›ÇÃÉÜÅ[ÉUÅ[èÓïÒÅié¿ç€ÇÃÉVÉXÉeÉÄÇ≈ÇÕÉZÉbÉVÉáÉìÇ©ÇÁéÊìæÅj
            const currentUser = getCurrentUser();
            const timestamp = new Date().toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            }).replace(/Ä//g, '/');

            // à¯Ç´åpÇ¨óöóÇÉÅÉÇÇ…é©ìÆí«â¡Åié¿ç€ÇÃÉVÉXÉeÉÄÇ≈ÇÕAPIÇ…ëóêMÅj
            const handoverEntry = {
                timestamp: timestamp,
                type: 'handover',
                from: 'ìcíÜëæòY', // é¿ç€ÇÕëOÇÃíSìñé“ÇéÊìæ
                to: currentUser.name,
                memo: passMemo,
                caseId: caseId
            };

            // Ç±Ç±Ç≈APIÇ…ëóêMÇµÇƒóöóÇï€ë∂
            console.log('Recording handover:', handoverEntry);

            showNotification('è≥îFäÆóπ', 'àƒåèÇà¯Ç´åpÇ¨Ç‹ÇµÇΩ');

            // è≥îFë“ÇøÉoÉbÉWÇçÌèú
            const pendingBadge = document.querySelector('.pending-badge');
            if (pendingBadge) {
                pendingBadge.remove();
            }

            // íSìñé“ñºÇçXêV
            const card = document.querySelector(`[onclick="showCaseDetail(${caseId})"]`);
            if (card) {
                const assigneeSpan = card.querySelector('.text-blue-700');
                if (assigneeSpan) {
                    assigneeSpan.textContent = `?? íSìñ: ${currentUser.name}`;
                }
            }

            // ÉÅÉÇÉAÉCÉRÉìÇâ©êFÇ…Ç∑ÇÈÅià¯Ç´åpÇ¨óöóÇ™Ç†ÇÈÇΩÇﬂÅj
            updateMemoIcon(caseId, true);

            modal.remove();
        }

        // à¯Ç´åpÇ¨ãëî€
        function rejectPass(caseId, button) {
            showNotification('à¯Ç´åpÇ¨ãëî€', 'à¯Ç´åpÇ¨Çãëî€ÇµÇ‹ÇµÇΩ');

            // è≥îFë“ÇøÉoÉbÉWÇçÌèú
            const pendingBadge = document.querySelector('.pending-badge');
            if (pendingBadge) {
                pendingBadge.remove();
            }

            button.closest('.fixed').remove();
        }

        // àƒåèè⁄ç◊ï\é¶
        function openCaseDetail(caseId) {
            const caseData = casesData.find(c => c.id == caseId);
            if (!caseData) return;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">àƒåèè⁄ç◊ #${caseData.id}</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <!-- å⁄ãqèÓïÒ -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold mb-2">å⁄ãqèÓïÒ</h4>
                            <div class="grid grid-cols-2 gap-2 text-sm">
                                <div><span class="text-gray-500">éÅñº:</span> ${caseData.name} ól</div>
                                <div><span class="text-gray-500">ìdòb:</span> ${caseData.phone}</div>
                                <div><span class="text-gray-500">èZèä:</span> ${caseData.area}</div>
                                <div><span class="text-gray-500">ï®åè:</span> ${caseData.propertyType}ÅEíz${caseData.age}îN</div>
                            </div>
                        </div>

                        <!-- ÉXÉeÅ[É^ÉXèÓïÒ -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ÉXÉeÅ[É^ÉX</h4>
                            <select class="w-full p-2 border rounded">
                                <option ${caseData.status === 'ñ¢ëŒâû' ? 'selected' : ''}>ñ¢ëŒâû</option>
                                <option ${caseData.status === 'âÀìdçœ/ñ¢ÉAÉ|' ? 'selected' : ''}>âÀìdçœ/ñ¢ÉAÉ|</option>
                                <option ${caseData.status === 'ÉAÉ|çœ' ? 'selected' : ''}>ÉAÉ|çœ</option>
                                <option ${caseData.status === 'åªí≤çœ' ? 'selected' : ''}>åªí≤çœ</option>
                                <option ${caseData.status === 'å©êœíÒèoçœ' ? 'selected' : ''}>å©êœíÒèoçœ</option>
                                <option ${caseData.status === 'ê¨ñÒ' ? 'selected' : ''}>ê¨ñÒ</option>
                                <option ${caseData.status === 'ëºé–å_ñÒçœ' ? 'selected' : ''}>ëºé–å_ñÒçœ</option>
                                <option ${caseData.status === 'é∏íç' ? 'selected' : ''}>é∏íç</option>
                            </select>
                        </div>

                        <!-- äàìÆóöó -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold mb-2">äàìÆóöó</h4>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-center text-gray-600">
                                    <span class="text-xs text-gray-400 w-20">2024/01/15</span>
                                    <span>èââÒâÀìd - ïsç›</span>
                                </div>
                                <div class="flex items-center text-gray-600">
                                    <span class="text-xs text-gray-400 w-20">2024/01/16</span>
                                    <span>2âÒñ⁄âÀìd - ÉAÉ|éÊìæê¨å˜</span>
                                </div>
                                <div class="flex items-center text-gray-600">
                                    <span class="text-xs text-gray-400 w-20">2024/01/18</span>
                                    <span>åªíní≤ç∏é¿é{</span>
                                </div>
                            </div>
                        </div>

                        <!-- ÉÅÉÇ -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold mb-2">ÉÅÉÇ</h4>
                            <textarea class="w-full p-2 border rounded h-24" placeholder="ÉÅÉÇÇì¸óÕ..."></textarea>
                        </div>
                    </div>

                    <div class="flex justify-end gap-2 mt-6">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">
                            ï¬Ç∂ÇÈ
                        </button>
                        <button onclick="saveCaseDetail(${caseData.id})" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                            ï€ë∂
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // êVãKàƒåèÉÇÅ[É_Éã
        function openNewCaseModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-full max-w-lg mx-4">
                    <h3 class="text-xl font-bold mb-4">êVãKàƒåèìoò^</h3>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å⁄ãqñº</label>
                            <input type="text" class="w-full p-2 border rounded" placeholder="ó·: éRìcëæòY">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ìdòbî‘çÜ</label>
                            <input type="tel" class="w-full p-2 border rounded" placeholder="ó·: 03-1234-5678">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">èZèä</label>
                            <input type="text" class="w-full p-2 border rounded" placeholder="ó·: ìåãûìsê¢ìcíJãÊ">
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ï®åèéÌï </label>
                                <select class="w-full p-2 border rounded">
                                    <option>åÀåöÇƒ</option>
                                    <option>ÉAÉpÅ[Ég</option>
                                    <option>É}ÉìÉVÉáÉì</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ízîNêî</label>
                                <input type="number" class="w-full p-2 border rounded" placeholder="ó·: 15">
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-end gap-2 mt-6">
                        <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">
                            ÉLÉÉÉìÉZÉã
                        </button>
                        <button onclick="saveNewCase()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                            ìoò^
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ï€ë∂èàóù
        function saveCaseDetail(caseId) {
            showNotification('ï€ë∂', `àƒåè #${caseId} Çï€ë∂ÇµÇ‹ÇµÇΩ`);
            document.querySelector('.fixed').remove();
        }

        function saveNewCase() {
            showNotification('ìoò^', 'êVãKàƒåèÇìoò^ÇµÇ‹ÇµÇΩ');
            document.querySelector('.fixed').remove();
        }

        // ñ¢êUÇËï™ÇØàƒåèÇÃÉ_É~Å[ÉfÅ[É^
        const unassignedCases = [
            {
                id: 101,
                name: 'êVãKå⁄ãqA',
                address: 'ìåãûìsèaíJãÊ',
                type: 'åÀåöÇƒÅEíz12îN',
                temperature: 4,
                source: 'Ç≠ÇÁÇ◊ÇÈ',
                registeredDate: '2025-01-15 10:30'
            },
            {
                id: 102,
                name: 'êVãKå⁄ãqB',
                address: 'ê_ìﬁêÏåßêÏçËés',
                type: 'É}ÉìÉVÉáÉìÅEíz5îN',
                temperature: 3,
                source: 'Ç≠ÇÁÇ◊ÇÈ',
                registeredDate: '2025-01-15 11:45'
            },
            {
                id: 103,
                name: 'êVãKå⁄ãqC',
                address: 'çÈã åßâzíJés',
                type: 'åÀåöÇƒÅEíz20îN',
                temperature: 5,
                source: 'Ç≠ÇÁÇ◊ÇÈ',
                registeredDate: '2025-01-15 14:00'
            }
        ];

        // ñ¢êUÇËï™ÇØàƒåèÇï\é¶
        function displayUnassignedCases() {
            const unassignedSection = document.getElementById('unassignedCasesSection');
            const unassignedList = document.getElementById('unassignedCasesList');
            const badge = document.getElementById('unassignedBadge');

            if (unassignedCases.length > 0) {
                // ÉoÉbÉWÇï\é¶
                badge.textContent = unassignedCases.length;
                badge.classList.remove('hidden');

                // ÉgÅ[É^ÉãÉoÉbÉWÉJÉEÉìÉgÇçXêV
                updateTotalBadgeCount();

                // ñ¢êUÇËï™ÇØÉZÉNÉVÉáÉìÇï\é¶
                unassignedSection.classList.remove('hidden');

                // àƒåèÉJÅ[ÉhÇê∂ê¨
                unassignedList.innerHTML = unassignedCases.map(caseItem => {
                    return `
                        <div class="bg-white rounded-lg border border-yellow-300 p-3 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">ñ¢ëŒâû</span>
                            </div>
                            <h4 class="font-bold text-sm mb-1">${caseItem.name}</h4>
                            <p class="text-xs text-gray-600">${caseItem.address}</p>
                            <p class="text-xs text-gray-600 mb-2">${caseItem.type}</p>
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>ìoò^: ${caseItem.registeredDate}</span>
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                // ÉoÉbÉWÇîÒï\é¶
                badge.classList.add('hidden');

                // ñ¢êUÇËï™ÇØÉZÉNÉVÉáÉìÇîÒï\é¶
                unassignedSection.classList.add('hidden');
            }
        }


        // ÉyÅ[ÉWì«Ç›çûÇ›éûÇ…ñ¢êUÇËï™ÇØàƒåèÇï\é¶
        document.addEventListener('DOMContentLoaded', function() {
            displayUnassignedCases();

            // èâä˙ÉoÉbÉWÉJÉEÉìÉgÇçXêV
            setTimeout(updateTotalBadgeCount, 500);

            // ÉJÉåÉìÉ_Å[ÇÃé©ìÆìØä˙Çé¿çs
            setTimeout(autoSyncToCalendar, 1000);

            // showSectionä÷êîÇÉIÅ[ÉoÅ[ÉâÉCÉhÅiä˘ë∂ÇÃoriginalShowSectionÇégópÅj
            const prevShowSection = window.showSection;
            window.showSection = function(sectionName) {
                prevShowSection(sectionName);

                // àƒåèä«óùÉZÉNÉVÉáÉìÇï\é¶ÇµÇΩèÍçáÅAñ¢êUÇËï™ÇØàƒåèÇçXêV
                if (sectionName === 'cases') {
                    displayUnassignedCases();
                    renderCaseCards(); // ìÆìIÇ…àƒåèÉJÅ[ÉhÇê∂ê¨
                    updateCaseCounts(); // åèêîÇçXêV
                }
            };
        });
    </script>
    <!-- âÊëúägëÂï\é¶ÉÇÅ[É_Éã -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-90 z-[200] hidden flex items-center justify-center" onclick="closeImageModal()">
        <div class="relative max-w-7xl max-h-full p-4">
            <button onclick="closeImageModal()" class="absolute top-4 right-4 text-white hover:text-gray-300 z-10">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <img id="modalImage" src="" alt="" class="max-w-full max-h-[90vh] object-contain">
            <p id="modalImageTitle" class="text-white text-center mt-4"></p>
        </div>
    </div>

    <script>
        // âÊëúÉÇÅ[É_Éãã@î\
        function openImageModal(src, title) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalImageTitle');

            modalImage.src = src;
            modalTitle.textContent = title || '';
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // ESCÉLÅ[Ç≈ÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeImageModal();
            }
        });

        // ÉLÉÉÉìÉZÉãê\êøã@î\
        let selectedCancelCase = null;
        let cancelQuestions = [
            {
                question: 'ÉLÉÉÉìÉZÉãÇÃéÂÇ»óùóRÇÇ®ëIÇ—Ç≠ÇæÇ≥Ç¢',
                options: ['âøäiÇ™çáÇÌÇ»Ç¢', 'ëºé–Ç≈å_ñÒÇµÇΩ', 'Ç∑Ç≈Ç…ëºé–Ç≈åüì¢íÜ', 'çHéñÇÃïKóvÇ™Ç»Ç≠Ç»Ç¡ÇΩ', 'òAóçÇ™åqÇ™ÇÁÇ»Ç¢', 'ÇªÇÃëº']
            }
        ];
        let cancelAnswers = [];

        // ÉLÉÉÉìÉZÉãê\êøâÊñ ÇäJÇ≠
        function openCancelRequest(caseId) {
            selectedCancelCase = casesData.find(c => c.id === caseId);
            if (selectedCancelCase) {
                showSection('cancel');
                setTimeout(() => {
                    displayCancelCases();
                    // ëIëÇ≥ÇÍÇΩàƒåèÇÉnÉCÉâÉCÉg
                    const caseCard = document.querySelector(`[data-cancel-case-id="${caseId}"]`);
                    if (caseCard) {
                        caseCard.classList.add('ring-2', 'ring-blue-500');
                        caseCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }, 100);
            }
        }

        // ÉLÉÉÉìÉZÉãê\êøópÇÃàƒåèÉJÅ[ÉhçÏê¨
        function createCancelCaseCard(caseItem) {
            const statusColor = getStatusColor(caseItem.status);
            return `
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer"
                     onclick="selectCancelCase(${caseItem.id})"
                     data-cancel-case-id="${caseItem.id}">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColor}">${caseItem.status}</span>
                        <button onclick="event.stopPropagation(); selectCancelCase(${caseItem.id})"
                                class="p-1.5 rounded-lg bg-red-100 hover:bg-red-200 transition-colors" title="ëIë">
                            <span class="text-lg">?</span>
                        </button>
                    </div>
                    <h3 class="font-bold text-lg mb-1">${caseItem.name}</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? íSìñ: ${caseItem.assignee || 'ñ¢äÑìñ'}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${caseItem.location || caseItem.area || ''}</p>
                    <p class="text-sm text-gray-600 mb-3">${caseItem.propertyType || ''}</p>
                    <p class="text-sm text-gray-600 mb-3">?? ${caseItem.phone || ''}</p>
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span>ç≈èIòAóç: ${caseItem.lastContact || 'ñ¢òAóç'}</span>
                        <span>éüâÒó\íË: ${caseItem.nextAction || 'ñ¢íË'}</span>
                    </div>
                </div>
            `;
        }

        // ê¨ñÒïÒçêópÇÃàƒåèÉJÅ[ÉhçÏê¨
        function createContractCaseCard(caseItem) {
            const statusColor = getStatusColor(caseItem.status);
            return `
                <div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer"
                     onclick="selectContractCase(${caseItem.id})"
                     data-contract-case-id="${caseItem.id}">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColor}">${caseItem.status}</span>
                        <button onclick="event.stopPropagation(); selectContractCase(${caseItem.id})"
                                class="p-1.5 rounded-lg bg-green-100 hover:bg-green-200 transition-colors" title="ëIë">
                            <span class="text-lg">?</span>
                        </button>
                    </div>
                    <h3 class="font-bold text-lg mb-1">${caseItem.name}</h3>
                    <div class="mb-2">
                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">?? íSìñ: ${caseItem.assignee || 'ñ¢äÑìñ'}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">${caseItem.location || caseItem.area || ''}</p>
                    <p class="text-sm text-gray-600 mb-3">${caseItem.propertyType || ''}</p>
                    <p class="text-sm text-gray-600 mb-3">?? ${caseItem.phone || ''}</p>
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span>ç≈èIòAóç: ${caseItem.lastContact || 'ñ¢òAóç'}</span>
                        <span>éüâÒó\íË: ${caseItem.nextAction || 'ñ¢íË'}</span>
                    </div>
                </div>
            `;
        }

        // ì˙ïtîÕàÕê›íËÅiÉLÉÉÉìÉZÉãê\êøópÅj
        function setCancelDateRange(range) {
            const today = new Date();
            const startInput = document.getElementById('cancelStartDate');
            const endInput = document.getElementById('cancelEndDate');

            switch(range) {
                case 'today':
                    startInput.valueAsDate = today;
                    endInput.valueAsDate = today;
                    break;
                case 'week':
                    const weekStart = new Date(today);
                    weekStart.setDate(today.getDate() - today.getDay());
                    startInput.valueAsDate = weekStart;
                    endInput.valueAsDate = today;
                    break;
                case 'month':
                    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);
                    startInput.valueAsDate = monthStart;
                    endInput.valueAsDate = today;
                    break;
            }
            searchCancelCases();
        }

        // ì˙ïtîÕàÕê›íËÅiê¨ñÒïÒçêópÅj
        function setContractDateRange(range) {
            const today = new Date();
            const startInput = document.getElementById('contractStartDate');
            const endInput = document.getElementById('contractEndDate');

            switch(range) {
                case 'today':
                    startInput.valueAsDate = today;
                    endInput.valueAsDate = today;
                    break;
                case 'week':
                    const weekStart = new Date(today);
                    weekStart.setDate(today.getDate() - today.getDay());
                    startInput.valueAsDate = weekStart;
                    endInput.valueAsDate = today;
                    break;
                case 'month':
                    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);
                    startInput.valueAsDate = monthStart;
                    endInput.valueAsDate = today;
                    break;
            }
            searchContractCases();
        }

        // ÉLÉÉÉìÉZÉãê\êøÇÃàƒåèåüçı
        function searchCancelCases() {
            const searchTerm = document.getElementById('cancelSearchInput').value.toLowerCase().trim();
            const assigneeFilter = document.getElementById('cancelAssigneeFilter').value;
            const startDate = document.getElementById('cancelStartDate').value;
            const endDate = document.getElementById('cancelEndDate').value;
            const cancelList = document.getElementById('cancelCasesList');

            let filteredCases = casesData;

            // ÉeÉLÉXÉgåüçı
            if (searchTerm) {
                filteredCases = filteredCases.filter(c => {
                    return (c.name && c.name.toLowerCase().includes(searchTerm)) ||
                           (c.phone && c.phone.toLowerCase().includes(searchTerm)) ||
                           (c.location && c.location.toLowerCase().includes(searchTerm)) ||
                           (c.area && c.area.toLowerCase().includes(searchTerm)) ||
                           (c.address && c.address.toLowerCase().includes(searchTerm));
                });
            }


            // íSìñé“ÉtÉBÉãÉ^Å[
            if (assigneeFilter) {
                if (assigneeFilter === 'self') {
                    // é©ï™ÇÃàƒåèÅiÉçÉOÉCÉìÉÜÅ[ÉUÅ[ÇìcíÜëæòYÇ∆âºíËÅj
                    filteredCases = filteredCases.filter(c => c.assignee === 'ìcíÜëæòY');
                } else if (assigneeFilter === 'ñ¢äÑìñ') {
                    filteredCases = filteredCases.filter(c => !c.assignee);
                } else {
                    filteredCases = filteredCases.filter(c => c.assignee === assigneeFilter);
                }
            }

            // ä˙ä‘ÉtÉBÉãÉ^Å[ÅiÉ_É~Å[ÉfÅ[É^Ç∆ÇµÇƒIDÇégópÅj
            if (startDate || endDate) {
                const start = startDate ? new Date(startDate) : new Date('2000-01-01');
                const end = endDate ? new Date(endDate + 'T23:59:59') : new Date();

                // É_É~Å[é¿ëïÅFIDÇì˙ïtÇÃë„ÇÌÇËÇ…égóp
                filteredCases = filteredCases.filter(c => {
                    // é¿ç€ÇÃé¿ëïÇ≈ÇÕc.registeredDateÇDateÉIÉuÉWÉFÉNÉgÇ…ïœä∑ÇµÇƒî‰är
                    return true; // ç°ÇÕëSÇƒï\é¶
                });
            }

            // êVÇµÇ¢èáÇ…É\Å[ÉgÅiIDÇ™ëÂÇ´Ç¢èáÅj
            filteredCases.sort((a, b) => b.id - a.id);

            // ÉJÅ[Éhï\é¶
            if (filteredCases.length > 0) {
                cancelList.innerHTML = filteredCases.map(c => createCancelCaseCard(c)).join('');
            } else {
                cancelList.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">äYìñÇ∑ÇÈàƒåèÇ™å©Ç¬Ç©ÇËÇ‹ÇπÇÒ</div>';
            }
        }

        // ê¨ñÒïÒçêÇÃàƒåèåüçı
        function searchContractCases() {
            const searchTerm = document.getElementById('contractSearchInput').value.toLowerCase().trim();
            const assigneeFilter = document.getElementById('contractAssigneeFilter').value;
            const startDate = document.getElementById('contractStartDate').value;
            const endDate = document.getElementById('contractEndDate').value;
            const contractList = document.getElementById('contractCasesList');

            let filteredCases = casesData;

            // ÉeÉLÉXÉgåüçı
            if (searchTerm) {
                filteredCases = filteredCases.filter(c => {
                    return (c.name && c.name.toLowerCase().includes(searchTerm)) ||
                           (c.phone && c.phone.toLowerCase().includes(searchTerm)) ||
                           (c.location && c.location.toLowerCase().includes(searchTerm)) ||
                           (c.area && c.area.toLowerCase().includes(searchTerm)) ||
                           (c.address && c.address.toLowerCase().includes(searchTerm));
                });
            }


            // íSìñé“ÉtÉBÉãÉ^Å[
            if (assigneeFilter) {
                if (assigneeFilter === 'self') {
                    // é©ï™ÇÃàƒåèÅiÉçÉOÉCÉìÉÜÅ[ÉUÅ[ÇìcíÜëæòYÇ∆âºíËÅj
                    filteredCases = filteredCases.filter(c => c.assignee === 'ìcíÜëæòY');
                } else if (assigneeFilter === 'ñ¢äÑìñ') {
                    filteredCases = filteredCases.filter(c => !c.assignee);
                } else {
                    filteredCases = filteredCases.filter(c => c.assignee === assigneeFilter);
                }
            }

            // ä˙ä‘ÉtÉBÉãÉ^Å[ÅiÉ_É~Å[ÉfÅ[É^Ç∆ÇµÇƒIDÇégópÅj
            if (startDate || endDate) {
                const start = startDate ? new Date(startDate) : new Date('2000-01-01');
                const end = endDate ? new Date(endDate + 'T23:59:59') : new Date();

                // É_É~Å[é¿ëïÅFIDÇì˙ïtÇÃë„ÇÌÇËÇ…égóp
                filteredCases = filteredCases.filter(c => {
                    // é¿ç€ÇÃé¿ëïÇ≈ÇÕc.registeredDateÇDateÉIÉuÉWÉFÉNÉgÇ…ïœä∑ÇµÇƒî‰är
                    return true; // ç°ÇÕëSÇƒï\é¶
                });
            }

            // êVÇµÇ¢èáÇ…É\Å[ÉgÅiIDÇ™ëÂÇ´Ç¢èáÅj
            filteredCases.sort((a, b) => b.id - a.id);

            // ÉJÅ[Éhï\é¶
            if (filteredCases.length > 0) {
                contractList.innerHTML = filteredCases.map(c => createContractCaseCard(c)).join('');
            } else {
                contractList.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">äYìñÇ∑ÇÈàƒåèÇ™å©Ç¬Ç©ÇËÇ‹ÇπÇÒ</div>';
            }
        }

        // èâä˙ï\é¶óp
        function displayCancelCases() {
            searchCancelCases();
        }

        function displayContractCases() {
            searchContractCases();
        }

        // ÉLÉÉÉìÉZÉãàƒåèëIë
        function selectCancelCase(caseId) {
            selectedCancelCase = casesData.find(c => c.id === caseId);
            if (selectedCancelCase) {
                cancelAnswers = [];
                showCancelQuestions();
                document.getElementById('cancelModal').classList.remove('hidden');
            }
        }

        // ê¨ñÒïÒçêÇÃéøñ‚íËã`
        let contractQuestions = [
            {
                question: 'ïÒçêéÌï ÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢',
                options: ['ê¨ñÒïÒçê', 'í«â¡çHéñïÒçê']
            },
            {
                question: 'åªç›ÇÃèÛãµÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢',
                options: ['å_ñÒëOÅEå˚ì™ämñÒçœ', 'å_ñÒå„ÅEçHéñëO', 'çHéñíÜ', 'çHéñäÆóπå„']
            }
        ];
        let contractAnswers = [];
        let selectedContractCase = null;

        // ê¨ñÒàƒåèëIë
        function selectContractCase(caseId) {
            selectedContractCase = casesData.find(c => c.id === caseId);
            if (selectedContractCase) {
                // å⁄ãqèÓïÒÇï\é¶
                document.getElementById('contractCustomerInfo').classList.remove('hidden');
                document.getElementById('contractCustomerName').textContent = selectedContractCase.name || '';
                document.getElementById('contractCustomerAddress').textContent =
                    selectedContractCase.address || selectedContractCase.location || selectedContractCase.area || '';

                contractAnswers = [];
                showContractQuestions();
                document.getElementById('contractModal').classList.remove('hidden');
            }
        }

        // ê¨ñÒïÒçêéøñ‚ï\é¶
        function showContractQuestions() {
            const container = document.getElementById('contractQuestionContainer');
            const currentQuestion = contractQuestions[contractAnswers.length];

            if (currentQuestion) {
                container.innerHTML = `
                    <div class="mb-4">
                        <h4 class="text-lg font-medium mb-3">${currentQuestion.question}</h4>
                        <div class="grid grid-cols-2 gap-3">
                            ${currentQuestion.options.map(option => `
                                <button onclick="answerContractQuestion('${option}')"
                                        class="p-3 text-left border rounded-lg hover:bg-green-50 hover:border-green-500 transition-colors">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
        }

        // ê¨ñÒéøñ‚âÒìö
        function answerContractQuestion(answer) {
            contractAnswers.push(answer);

            if (contractAnswers.length < contractQuestions.length) {
                showContractQuestions();
            } else {
                // ÉtÉHÅ[ÉÄÉtÉFÅ[ÉYÇ…à⁄çs
                document.getElementById('contractQuestionContainer').classList.add('hidden');
                document.getElementById('contractFormPhase').classList.remove('hidden');

                // å_ñÒèÛãµÇ…âûÇ∂Çƒì˙ïtÉâÉxÉãÇïœçX
                updateDateLabels(contractAnswers[1]);
            }
        }

        // å_ñÒèÛãµÇ…âûÇ∂Çƒì˙ïtÉâÉxÉãÇçXêV
        function updateDateLabels(status) {
            const completionLabel = document.getElementById('completionDateLabel');
            const paymentLabel = document.getElementById('paymentDateLabel');

            switch(status) {
                case 'å_ñÒëOÅEå˚ì™ämñÒçœ':
                case 'å_ñÒå„ÅEçHéñëO':
                    completionLabel.textContent = 'äÆçHó\íËì˙';
                    paymentLabel.textContent = 'íÖã‡ó\íËì˙';
                    break;
                case 'çHéñíÜ':
                    completionLabel.textContent = 'äÆçHó\íËì˙';
                    paymentLabel.textContent = 'íÖã‡ì˙';
                    break;
                case 'çHéñäÆóπå„':
                    completionLabel.textContent = 'äÆçHì˙';
                    paymentLabel.textContent = 'íÖã‡ì˙';
                    break;
                default:
                    completionLabel.textContent = 'äÆçHó\íËì˙';
                    paymentLabel.textContent = 'íÖã‡ó\íËì˙';
            }
        }

        // ÇªÇÃëºÉ`ÉFÉbÉNéûÇÃè⁄ç◊ì¸óÕóìï\é¶
        function toggleOtherWorkDetails() {
            const otherCheckbox = document.querySelector('input[name="workType"][value="ÇªÇÃëº"]');
            const detailsTextarea = document.getElementById('workDetails');

            if (otherCheckbox && otherCheckbox.checked) {
                detailsTextarea.classList.remove('hidden');
            } else {
                detailsTextarea.classList.add('hidden');
                detailsTextarea.value = '';
            }
        }

        // ÇªÇÃëºï®åèÉ^ÉCÉvÇÃè⁄ç◊ì¸óÕóìï\é¶
        function toggleOtherPropertyDetails() {
            const otherCheckbox = document.querySelector('input[name="propertyType"][value="ÇªÇÃëº"]');
            const detailsInput = document.getElementById('otherPropertyDetails');

            if (otherCheckbox && otherCheckbox.checked) {
                detailsInput.classList.remove('hidden');
            } else {
                detailsInput.classList.add('hidden');
                detailsInput.value = '';
            }
        }

        // ê¨ñÒÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
        function closeContractModal() {
            document.getElementById('contractModal').classList.add('hidden');
            document.getElementById('contractQuestionContainer').classList.remove('hidden');
            document.getElementById('contractFormPhase').classList.add('hidden');
            document.getElementById('contractCustomerInfo').classList.add('hidden');
            selectedContractCase = null;
            contractAnswers = [];
            resetContractForm();
        }

        // ÉLÉÉÉìÉZÉãéøñ‚ï\é¶
        function showCancelQuestions() {
            const container = document.getElementById('cancelQuestionContainer');
            const currentQuestion = cancelQuestions[cancelAnswers.length];

            if (currentQuestion) {
                container.innerHTML = `
                    <div class="mb-4">
                        <h4 class="text-lg font-medium mb-3">${currentQuestion.question}</h4>
                        <div class="grid grid-cols-2 gap-3">
                            ${currentQuestion.options.map(option => `
                                <button onclick="answerCancelQuestion('${option}')"
                                        class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500 transition-colors">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
        }

        // ÇªÇÃëºÇÃóùóRÇëóêM
        function submitOtherReason() {
            const reasonInput = document.getElementById('otherReasonInput');
            if (reasonInput && reasonInput.value.trim()) {
                cancelAnswers.otherReason = reasonInput.value.trim();
                showAdditionalInfoInput();
            } else {
                alert('óùóRÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢');
            }
        }

        // í«â¡èÓïÒì¸óÕâÊñ Çï\é¶
        function showAdditionalInfoInput() {
            const container = document.getElementById('cancelQuestionContainer');
            container.innerHTML = `
                <div class="mb-4">
                    <h4 class="text-lg font-medium mb-3">í«â¡èÓïÒÇ™Ç†ÇÍÇŒÇ≤ãLì¸Ç≠ÇæÇ≥Ç¢ÅiîCà”Åj</h4>
                    <textarea id="additionalInfoInput" class="w-full px-3 py-2 border rounded-lg" rows="4"
                              placeholder="ó·ÅFÇ®ãqólÇÃè⁄ÇµÇ¢èÛãµÅAç°å„ÇÃëŒâûó\íËÅAÇªÇÃëºï‚ë´éñçÄÇ»Ç«"></textarea>
                    <div class="flex gap-3 mt-3">
                        <button onclick="skipAdditionalInfo()" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400">
                            ÉXÉLÉbÉv
                        </button>
                        <button onclick="submitAdditionalInfo()" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                            äÆóπ
                        </button>
                    </div>
                </div>
            `;
        }

        // í«â¡èÓïÒÇÉXÉLÉbÉv
        function skipAdditionalInfo() {
            cancelAnswers.additionalInfo = '';
            generateCancelText();
        }

        // í«â¡èÓïÒÇëóêM
        function submitAdditionalInfo() {
            const infoInput = document.getElementById('additionalInfoInput');
            cancelAnswers.additionalInfo = infoInput ? infoInput.value.trim() : '';
            generateCancelText();
        }

        // ÉLÉÉÉìÉZÉãéøñ‚âÒìö
        function answerCancelQuestion(answer) {
            const container = document.getElementById('cancelQuestionContainer');

            // ç≈èâÇÃâÒìöÇï€ë∂
            if (cancelAnswers.length === 0) {
                cancelAnswers.push(answer);

                // ëIëÇ…âûÇ∂ÇΩí«â¡éøñ‚Çï\é¶
                if (answer === 'òAóçÇ™åqÇ™ÇÁÇ»Ç¢') {
                    container.innerHTML = `
                        <div class="mb-4">
                            <h4 class="text-lg font-medium mb-3">òAóçÇÃèÛãµÇëIëÇµÇƒÇ≠ÇæÇ≥Ç¢</h4>
                            <div class="grid grid-cols-1 gap-2">
                                <button onclick="submitContactStatus('àÍìxÇ‡åqÇ™ÇÁÇ»Ç¢')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">àÍìxÇ‡åqÇ™ÇÁÇ»Ç¢</button>
                                <button onclick="submitContactStatus('åqÇ™Ç¡ÇΩÇ™ÉAÉ|Ç™éÊÇÍÇ»Ç¢')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">åqÇ™Ç¡ÇΩÇ™ÉAÉ|Ç™éÊÇÍÇ»Ç¢</button>
                                <button onclick="submitContactStatus('åªí≤ëOÉLÉÉÉìÉZÉã')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">åªí≤ëOÉLÉÉÉìÉZÉã</button>
                                <button onclick="submitContactStatus('åªí≤å„å©êœÇ‡ÇËÇ®ìnÇµëOÉLÉÉÉìÉZÉã')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">åªí≤å„å©êœÇ‡ÇËÇ®ìnÇµëOÉLÉÉÉìÉZÉã</button>
                                <button onclick="submitContactStatus('å©êœÇ‡ÇËÇ®ìnÇµå„ÉLÉÉÉìÉZÉã')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">å©êœÇ‡ÇËÇ®ìnÇµå„ÉLÉÉÉìÉZÉã</button>
                            </div>
                        </div>
                    `;
                } else if (answer === 'ëºé–Ç≈å_ñÒÇµÇΩ' || answer === 'Ç∑Ç≈Ç…ëºé–Ç≈åüì¢íÜ') {
                    container.innerHTML = `
                        <div class="mb-4">
                            <h4 class="text-lg font-medium mb-3">${answer === 'ëºé–Ç≈å_ñÒÇµÇΩ' ? 'Ç«ÇøÇÁÇ≈å_ñÒÇ≥ÇÍÇ‹ÇµÇΩÇ©ÅH' : 'Ç«ÇøÇÁÇ≈åüì¢Ç≥ÇÍÇƒÇ¢Ç‹Ç∑Ç©ÅH'}</h4>
                            <div class="grid grid-cols-1 gap-2">
                                <button onclick="submitCompetitor('Ç≠ÇÁÇ◊ÇÈâ¡ñøìX')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">Ç≠ÇÁÇ◊ÇÈâ¡ñøìX</button>
                                <button onclick="submitCompetitor('ïsñæ')" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">ïsñæ</button>
                                <button onclick="showCompetitorInput()" class="p-3 text-left border rounded-lg hover:bg-blue-50 hover:border-blue-500">ÇªÇÃëºÅiâÔé–ñºÇì¸óÕÅj</button>
                            </div>
                        </div>
                    `;
                } else if (answer === 'ÇªÇÃëº') {
                    container.innerHTML = `
                        <div class="mb-4">
                            <h4 class="text-lg font-medium mb-3">ÇªÇÃëºÇÃóùóRÇãÔëÃìIÇ…ì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢</h4>
                            <textarea id="otherReasonInput" class="w-full px-3 py-2 border rounded-lg" rows="3" placeholder="ÉLÉÉÉìÉZÉãóùóRÇì¸óÕ"></textarea>
                            <button onclick="submitOtherReason()" class="mt-3 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                éüÇ÷
                            </button>
                        </div>
                    `;
                } else {
                    // ÇªÇÃëºÇÃóùóRÇÃèÍçáÇÕí«â¡èÓïÒì¸óÕâÊñ Ç÷
                    showAdditionalInfoInput();
                }
            }
        }

        // òAóçèÛãµÇëóêM
        function submitContactStatus(status) {
            cancelAnswers.contactStatus = status;
            showAdditionalInfoInput();
        }

        // ã£çáëºé–ÇëóêM
        function submitCompetitor(competitor) {
            cancelAnswers.competitor = competitor;
            showAdditionalInfoInput();
        }

        // ã£çáëºé–ñºì¸óÕóìÇï\é¶
        function showCompetitorInput() {
            const container = document.getElementById('cancelQuestionContainer');
            container.innerHTML = `
                <div class="mb-4">
                    <h4 class="text-lg font-medium mb-3">å_ñÒêÊÇÃâÔé–ñºÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢</h4>
                    <input type="text" id="competitorNameInput" class="w-full px-3 py-2 border rounded-lg" placeholder="âÔé–ñºÇì¸óÕ">
                    <button onclick="submitCompetitorName()" class="mt-3 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                        éüÇ÷
                    </button>
                </div>
            `;
        }

        // ã£çáëºé–ñºÇëóêM
        function submitCompetitorName() {
            const nameInput = document.getElementById('competitorNameInput');
            if (nameInput && nameInput.value.trim()) {
                cancelAnswers.competitor = nameInput.value.trim();
                showAdditionalInfoInput();
            } else {
                alert('âÔé–ñºÇì¸óÕÇµÇƒÇ≠ÇæÇ≥Ç¢');
            }
        }

        // ÉLÉÉÉìÉZÉãê\êøï∂ê∂ê¨
        function generateCancelText() {
            const aiResponse = document.getElementById('cancelAIResponse');
            const aiText = document.getElementById('cancelAIText');

            // ÉÅÉCÉìóùóRÇÃéÊìæ
            let mainReason = cancelAnswers[0];
            let detailText = '';

            if (cancelAnswers[0] === 'ÇªÇÃëº' && cancelAnswers.otherReason) {
                mainReason = cancelAnswers.otherReason;
            } else if (cancelAnswers[0] === 'òAóçÇ™åqÇ™ÇÁÇ»Ç¢' && cancelAnswers.contactStatus) {
                detailText = `ÄnòAóçèÛãµ: ${cancelAnswers.contactStatus}`;
            } else if ((cancelAnswers[0] === 'ëºé–Ç≈å_ñÒÇµÇΩ' || cancelAnswers[0] === 'Ç∑Ç≈Ç…ëºé–Ç≈åüì¢íÜ') && cancelAnswers.competitor) {
                const label = cancelAnswers[0] === 'ëºé–Ç≈å_ñÒÇµÇΩ' ? 'å_ñÒêÊ' : 'åüì¢êÊ';
                detailText = `Än${label}: ${cancelAnswers.competitor}`;
            }

            // í«â¡èÓïÒÇ™Ç†ÇÍÇŒä‹ÇﬂÇÈ
            let additionalSection = '';
            if (cancelAnswers.additionalInfo) {
                additionalSection = `ÄnÄnÅyí«â¡èÓïÒÅzÄn${cancelAnswers.additionalInfo}`;
            }

            // óùóRÇ…âûÇ∂ÇΩè⁄ç◊ï∂Çê∂ê¨
            let detailDescription = '';

            if (cancelAnswers[0] === 'òAóçÇ™åqÇ™ÇÁÇ»Ç¢') {
                if (cancelAnswers.contactStatus === 'àÍìxÇ‡åqÇ™ÇÁÇ»Ç¢') {
                    detailDescription = `Ç®ãqólÇ…Ç≤òAóçÇééÇ›Ç‹ÇµÇΩÇ™ÅAécîOÇ»Ç™ÇÁàÍìxÇ‡Ç®ìdòbÇ™åqÇ™ÇÁÇ»Ç¢èÛãµÇ≈Ç∑ÅB`;
                } else if (cancelAnswers.contactStatus === 'åqÇ™Ç¡ÇΩÇ™ÉAÉ|Ç™éÊÇÍÇ»Ç¢') {
                    detailDescription = `Ç®ãqólÇ∆Ç®ìdòbÇÕåqÇ™ÇËÇ‹ÇµÇΩÇ™ÅAåªíní≤ç∏ÇÃÉAÉ|ÉCÉìÉgÉÅÉìÉgÇ™éÊÇÍÇ»Ç¢èÛãµÇ≈Ç∑ÅB`;
                } else if (cancelAnswers.contactStatus === 'åªí≤ëOÉLÉÉÉìÉZÉã') {
                    detailDescription = `åªíní≤ç∏ëOÇÃíiäKÇ≈ÅAÇ®ãqólÇ©ÇÁÉLÉÉÉìÉZÉãÇÃÇ®ê\ÇµèoÇ™Ç†ÇËÇ‹ÇµÇΩÅB`;
                } else if (cancelAnswers.contactStatus === 'åªí≤å„å©êœÇ‡ÇËÇ®ìnÇµëOÉLÉÉÉìÉZÉã') {
                    detailDescription = `åªíní≤ç∏ÇÕäÆóπÇµÇ‹ÇµÇΩÇ™ÅAÇ®å©êœÇ‡ÇËÇÇ®ìnÇµÇ∑ÇÈëOÇ…ÉLÉÉÉìÉZÉãÇ∆Ç»ÇËÇ‹ÇµÇΩÅB`;
                } else if (cancelAnswers.contactStatus === 'å©êœÇ‡ÇËÇ®ìnÇµå„ÉLÉÉÉìÉZÉã') {
                    detailDescription = `Ç®å©êœÇ‡ÇËÇÇ®ìnÇµÇµÇΩå„ÅAÇ®ãqólÇÃÇ≤ìsçáÇ…ÇÊÇËÉLÉÉÉìÉZÉãÇ∆Ç»ÇËÇ‹ÇµÇΩÅB`;
                }
            } else if (cancelAnswers[0] === 'âøäiÇ™çáÇÌÇ»Ç¢') {
                detailDescription = `Ç®å©êœÇ‡ÇËÇÇ≤åüì¢Ç¢ÇΩÇæÇ´Ç‹ÇµÇΩÇ™ÅAÇ≤ó\éZÇ∆ÇÃåìÇÀçáÇ¢Ç≈ç°âÒÇÕå©ëóÇËÇ∆Ç»ÇËÇ‹ÇµÇΩÅB`;
            } else if (cancelAnswers[0] === 'ëºé–Ç≈å_ñÒÇµÇΩ') {
                detailDescription = `Ç®ãqólÇÕëºé–Ç≈ÇÃå_ñÒÇëIëÇ≥ÇÍÇ‹ÇµÇΩÅB`;
            } else if (cancelAnswers[0] === 'Ç∑Ç≈Ç…ëºé–Ç≈åüì¢íÜ') {
                detailDescription = `Ç®ãqólÇÕä˘Ç…ëºé–Ç≈åüì¢ÇêiÇﬂÇƒÇ®ÇËÅAÇªÇøÇÁÇ≈åàíËÇ≥ÇÍÇÈó\íËÇ≈Ç∑ÅB`;
            } else if (cancelAnswers[0] === 'çHéñÇÃïKóvÇ™Ç»Ç≠Ç»Ç¡ÇΩ') {
                detailDescription = `Ç®ãqólÇÃÇ≤éñèÓÇ…ÇÊÇËÅAçHéñé©ëÃÇ™ïsóvÇ∆Ç»ÇËÇ‹ÇµÇΩÅB`;
            } else if (cancelAnswers[0] === 'ÇªÇÃëº' && cancelAnswers.otherReason) {
                detailDescription = `${cancelAnswers.otherReason}`;
            } else {
                detailDescription = `Ç®ãqólÇÃÇ≤ìsçáÇ…ÇÊÇËÅAàƒåèÇÉLÉÉÉìÉZÉãÇ≥ÇπÇƒÇ¢ÇΩÇæÇ≠Ç±Ç∆Ç…Ç»ÇËÇ‹ÇµÇΩÅB`;
            }

            // ÉeÉLÉXÉgê∂ê¨
            const cancelText = `ÅyÉLÉÉÉìÉZÉãê\êøÅzÄnÄn` +
                `àƒåèñº: ${selectedCancelCase.name}Än` +
                `ï®åè: ${selectedCancelCase.propertyType || 'ñ¢ê›íË'}Än` +
                `ÉGÉäÉA: ${selectedCancelCase.location || selectedCancelCase.area || 'ñ¢ê›íË'}ÄnÄn` +
                `ÅyÉLÉÉÉìÉZÉãóùóRÅzÄn` +
                `${mainReason}${detailText}ÄnÄn` +
                `Åyè⁄ç◊ÅzÄn` +
                `${detailDescription}ÄnÄn` +
                `ç°å„Ç‡ó«çDÇ»ä÷åWÇà€éùÇ≈Ç´ÇÈÇÊÇ§ÅAìKêÿÇ»ÉtÉHÉçÅ[ÉAÉbÉvÇêSÇ™ÇØÇ‹Ç∑ÅB` +
                additionalSection;

            aiText.textContent = cancelText;
            aiResponse.classList.remove('hidden');
            document.getElementById('cancelQuestionContainer').innerHTML = '';
        }

        // ÉLÉÉÉìÉZÉãê\êøï∂çƒê∂ê¨
        function regenerateCancelText() {
            // çƒìxéøñ‚Ç©ÇÁäJén
            cancelAnswers = [];
            document.getElementById('cancelAIResponse').classList.add('hidden');
            showCancelQuestions();
        }

        // ÉLÉÉÉìÉZÉãê\êøëóêM
        function submitCancelRequest() {
            alert('ÉLÉÉÉìÉZÉãê\êøÇ™ëóêMÇ≥ÇÍÇ‹ÇµÇΩ');
            closeCancelModal();
            // é¿ç€ÇÃèàóùÇÇ±Ç±Ç…í«â¡
        }

        // ÉLÉÉÉìÉZÉãÉÇÅ[É_ÉãÇï¬Ç∂ÇÈ
        function closeCancelModal() {
            document.getElementById('cancelModal').classList.add('hidden');
            selectedCancelCase = null;
            cancelAnswers = [];
        }

        // ÉtÉ@ÉCÉãÉAÉbÉvÉçÅ[Éhèàóù
        function handleFileUpload(event, type) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const previewId = type === 'estimate' ? 'estimatePreview' : 'receiptPreview';
                    const preview = document.getElementById(previewId);

                    if (file.type.includes('image')) {
                        preview.innerHTML = `<img src="${e.target.result}" class="w-full h-32 object-cover rounded">`;
                    } else {
                        preview.innerHTML = `
                            <div class="flex items-center justify-center">
                                <svg class="w-12 h-12 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span class="ml-2 text-sm">${file.name}</span>
                            </div>
                        `;
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        // ê¨ñÒïÒçêÉtÉHÅ[ÉÄÉäÉZÉbÉg
        function resetContractForm() {
            const form = document.getElementById('contractReportForm');
            if (form) {
                form.reset();
            }
            document.getElementById('workDetails').classList.add('hidden');
            document.getElementById('otherPropertyDetails').classList.add('hidden');
            document.getElementById('estimatePreview').innerHTML = `
                <svg class="w-12 h-12 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            `;
            document.getElementById('receiptPreview').innerHTML = `
                <svg class="w-12 h-12 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            `;
        }

        // ê¨ñÒïÒçêÉtÉHÅ[ÉÄëóêM
        document.addEventListener('DOMContentLoaded', function() {
            const contractForm = document.getElementById('contractReportForm');
            if (contractForm) {
                contractForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    // ëIëÇ≥ÇÍÇΩé{çHì‡óeÇéÊìæ
                    const selectedWorkTypes = [];
                    document.querySelectorAll('input[name="workType"]:checked').forEach(checkbox => {
                        selectedWorkTypes.push(checkbox.value);
                    });

                    // ëIëÇ≥ÇÍÇΩï®åèÉ^ÉCÉvÇéÊìæ
                    const selectedPropertyTypes = [];
                    document.querySelectorAll('input[name="propertyType"]:checked').forEach(checkbox => {
                        selectedPropertyTypes.push(checkbox.value);
                    });

                    // ÉtÉHÅ[ÉÄÉfÅ[É^Çé˚èW
                    const formData = {
                        reportType: contractAnswers[0],
                        status: contractAnswers[1],
                        caseName: selectedContractCase ? selectedContractCase.name : '',
                        caseAddress: selectedContractCase ? (selectedContractCase.address || selectedContractCase.location || selectedContractCase.area) : '',
                        amount: document.getElementById('contractAmount').value,
                        paymentDate: document.getElementById('paymentDate').value,
                        completionDate: document.getElementById('completionDate').value,
                        buildingFloors: document.getElementById('buildingFloors').value,
                        propertyTypes: selectedPropertyTypes,
                        otherPropertyDetails: document.getElementById('otherPropertyDetails').value,
                        workTypes: selectedWorkTypes,
                        workDetails: document.getElementById('workDetails').value,
                        notes: document.getElementById('contractNotes').value
                    };

                    console.log('ê¨ñÒïÒçêÉfÅ[É^:', formData);
                    alert(`${contractAnswers[0]}Ç™ëóêMÇ≥ÇÍÇ‹ÇµÇΩ`);
                    closeContractModal();
                });
            }

            // àÍéûí‚é~ÇÃì˙ïtïœçXéûÇ…ë¶éûï€ë∂

            // ÉZÉNÉVÉáÉìï\é¶éûÇ…àƒåèÇì«Ç›çûÇﬁ
            const originalShowSection = window.showSection;
            window.showSection = function(sectionName) {
                if (typeof originalShowSection === 'function') {
                    originalShowSection(sectionName);
                }

                if (sectionName === 'cancel') {
                    displayCancelCases();
                } else if (sectionName === 'contract') {
                    displayContractCases();
                }
            };
        });
    </script>
    <style>
        @keyframes slide-in {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slide-out {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        .animate-slide-in { animation: slide-in 0.3s ease-out; }
        .animate-slide-out { animation: slide-out 0.3s ease-out; }
    </style>

    <!-- ëÂå^ï®åèÇÃè–âÓóøÇ…Ç¬Ç¢ÇƒÇÃÉÇÅ[É_Éã -->
    <div id="largePropertyModal" class="fixed inset-0 z-50 hidden">
        <!-- ÉIÅ[ÉoÅ[ÉåÉC -->
        <div class="absolute inset-0 bg-black bg-opacity-50"></div>

        <!-- ÉÇÅ[É_Éãñ{ëÃ -->
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full relative">
                <!-- ï¬Ç∂ÇÈÉ{É^Éì -->
                <button onclick="closeLargePropertyModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <!-- ÉwÉbÉ_Å[ -->
                <div class="bg-white border-b px-8 py-6 rounded-t-xl">
                    <h3 class="text-xl font-bold text-gray-800 flex items-center">
                        ?? ëÂå^ï®åèÇÃè–âÓóøÇ…Ç¬Ç¢Çƒ
                    </h3>
                </div>

                <!-- ÉRÉìÉeÉìÉc -->
                <div class="px-8 py-6 space-y-4">
                    <!-- 3äKà»è„ÇëIëÇµÇΩèÍçá -->
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded">
                        <div class="flex items-start">
                            <span class="text-yellow-500 mr-2">??</span>
                            <div>
                                <h4 class="font-bold text-gray-800 mb-2">3äKà»è„ÇëIëÇµÇΩèÍçá</h4>
                                <p class="text-gray-700">
                                    äÓñ{è–âÓóøÇ™ <span class="line-through text-gray-500">\20,000</span> Ç©ÇÁ <span class="font-bold text-green-600 text-lg">\30,000</span> Ç…Ç»ÇËÇ‹Ç∑
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 3äKà»è„ÇëIëÇµÇƒÇ¢ÇÈÇ∆ -->
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                        <div class="flex items-start">
                            <span class="text-yellow-500 mr-2">??</span>
                            <div>
                                <h4 class="font-bold text-gray-800 mb-2">3äKà»è„ÇëIëÇµÇƒÇ¢ÇÈÇ∆</h4>
                                <p class="text-gray-700">
                                    2äKà»â∫Ç≈Ç‡ëÂå^Ç∆îªífÇ≥ÇÍÇÍÇŒé©ìÆÇ≈è–âÓóøÇ™<span class="font-bold text-red-600">\30,000</span>Ç…Ç»ÇËÇ‹Ç∑
                                </p>
                                <p class="text-sm text-gray-600 mt-2">
                                    Åi3äKà»è„Ç≈Ç‡å©êœÇ‡ÇËäÛñ]â”èäÇ™è¨Ç≥Ç¢èÍçáÅAé©ìÆìIÇ…å∏äzÇ≥ÇÍÇƒé©ìÆîzêMÇ≥ÇÍÇÈéñÇ™Ç†ÇËÇ‹Ç∑Ç™ÅAç≈èIìIÇ»ã‡äzê›íËÇÕäîéÆâÔé–äOï«ìhëïÇ≠ÇÁÇ◊ÇÈâ^âcñ{ïîÇÃîªífÇ…ÇÊÇÈÇ‡ÇÃÇ∆ÇµÅAâ¡ñøìXÇÕÇ±ÇÍÇ…ìØà”Ç∑ÇÈÇ‡ÇÃÇ∆ÇµÇ‹Ç∑Åj
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 2äKà»â∫ÇëIëÇµÇƒÇ¢ÇÍÇŒ -->
                    <div class="bg-green-50 border-l-4 border-green-400 p-4 rounded">
                        <div class="flex items-start">
                            <span class="text-yellow-500 mr-2">??</span>
                            <div>
                                <h4 class="font-bold text-gray-800 mb-2">2äKà»â∫ÇëIëÇµÇƒÇ¢ÇÍÇŒ</h4>
                                <p class="text-gray-700">
                                    í èÌÇÃåÀåöÇ≈óøã‡ìKópÇ∆Ç»ÇËÅA<span class="font-bold text-green-600">\30,000Ç≈é©ìÆîzêMÇ≥ÇÍÇÈÇ±Ç∆ÇÕÇ†ÇËÇ‹ÇπÇÒ</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÉtÉbÉ^Å[ -->
                <div class="px-8 pb-6">
                    <button onclick="closeLargePropertyModal()" class="w-full bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors font-semibold text-base">
                        óùâÇµÇ‹ÇµÇΩ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- íPïiçÄñ⁄ëIëéûÇÃÉÇÅ[É_Éã -->
    <div id="singleItemModal" class="fixed inset-0 z-50 hidden">
        <!-- ÉIÅ[ÉoÅ[ÉåÉC -->
        <div class="absolute inset-0 bg-black bg-opacity-50"></div>

        <!-- ÉÇÅ[É_Éãñ{ëÃ -->
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full relative">
                <!-- ï¬Ç∂ÇÈÉ{É^Éì -->
                <button onclick="closeSingleItemModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <!-- ÉwÉbÉ_Å[ -->
                <div class="bg-white border-b px-8 py-6 rounded-t-xl">
                    <h3 class="text-xl font-bold text-gray-800">
                        ?? 1é–è–âÓéûÇÃóøã‡Ç…Ç¬Ç¢Çƒ
                    </h3>
                </div>

                <!-- ÉRÉìÉeÉìÉc -->
                <div class="px-8 py-6">
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded">
                        <p class="text-gray-700 text-base">
                            íPïiçÄñ⁄ÇÕëäå©êœÇ‡ÇËéûÇÃóøã‡Ç≈Ç∑ÅB
                        </p>
                        <p class="text-gray-700 text-base mt-2">
                            1é–è–âÓéûÇÕÇ∑Ç◊Çƒ<span class="font-bold text-black text-lg">\20,000</span>Ç∆Ç»ÇËÇ‹Ç∑ÅB
                        </p>
                    </div>
                </div>

                <!-- ÉtÉbÉ^Å[ -->
                <div class="px-8 pb-6">
                    <button onclick="closeSingleItemModal()" class="w-full bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors font-semibold text-base">
                        ämîFÇµÇ‹ÇµÇΩ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // èââÒÉçÉOÉCÉìéûÇÃèâä˙ê›íË
        function initializeFirstLoginSettings() {
            console.log('[initializeFirstLoginSettings] äJén');
            console.log('[initializeFirstLoginSettings] window.merchantData:', window.merchantData ? 'exists' : 'null');

            // èââÒÉçÉOÉCÉìÇ©Ç«Ç§Ç©ÇÉ`ÉFÉbÉNÅilocalStorageÇ…ï€ë∂Åj
            const isInitialized = localStorage.getItem('autodeliveryInitialized');

            if (!isInitialized) {
                console.log('[èââÒÉçÉOÉCÉì] é©ìÆîzêMê›íËÇèâä˙âªÇµÇ‹Ç∑');

                // ÉXÉeÅ[É^ÉXÇàÍéûí‚é~íÜÇ…ê›íËÅiä˘Ç…HTMLÇ≈ÉfÉtÉHÉãÉgê›íËçœÇ›Åj
                const statusSelect = document.getElementById('merchantStatus');
                if (statusSelect) {
                    statusSelect.value = 'paused';
                    updateMerchantStatus();
                }

                // èâä˙âªäÆóπÉtÉâÉOÇï€ë∂
                localStorage.setItem('autodeliveryInitialized', 'true');
                console.log('[èââÒÉçÉOÉCÉì] èâä˙âªäÆóπ');
            }

            // ñàâÒé¿çs: àÍéûí‚é~äJénì˙Çç°ì˙Ç…ê›íËÅiÉfÉtÉHÉãÉgï\é¶Åj
            const today = new Date().toISOString().split('T')[0];
            const startDateInput = document.getElementById('pauseStartDate');
            if (startDateInput && !startDateInput.value) {
                startDateInput.value = today;
            }

            // ñàâÒé¿çs: é©ìÆîzêMê›íËÇÉXÉvÉåÉbÉhÉVÅ[ÉgÇ©ÇÁì«Ç›çûÇ›
            if (window.merchantData) {
                console.log('[initializeFirstLoginSettings] window.merchantDataÇ™ë∂ç›ÇµÇ‹Ç∑ÅBloadAutodeliverySettingsÇåƒÇ—èoÇµÇ‹Ç∑ÅB');
                loadAutodeliverySettings(window.merchantData);
            } else {
                console.warn('[initializeFirstLoginSettings] window.merchantDataÇ™ë∂ç›ÇµÇ‹ÇπÇÒÅI');
                // merchantDataÇ™Ç»Ç¢èÍçáÇÕãÛÉfÅ[É^Ç≈èâä˙âª
                loadAutodeliverySettings({});
            }
        }

        // é©ìÆîzêMê›íËópÇ…ÉfÅ[É^ÇéÊìæ
        async function fetchMerchantDataForAutodelivery(merchantId) {
            console.log('[fetchMerchantDataForAutodelivery] Fetching data for:', merchantId);

            try {
                // JSONP Ç≈ÉfÅ[É^éÊìæ
                const result = await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_autodelivery_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    const script = document.createElement('script');

                    window[callbackName] = (data) => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        resolve(data);
                    };

                    script.src = `${GAS_URL}?action=getMerchantData&merchantId=${encodeURIComponent(merchantId)}&callback=${callbackName}`;
                    script.onerror = () => {
                        delete window[callbackName];
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        reject(new Error('JSONP request failed'));
                    };
                    document.body.appendChild(script);
                });

                if (result.success && result.data) {
                    window.merchantData = result.data;
                    window.merchantId = merchantId;
                    console.log('[fetchMerchantDataForAutodelivery] Data loaded successfully');
                    console.log('[fetchMerchantDataForAutodelivery] Data:', result.data);

                    // é©ìÆîzêMê›íËÇì«Ç›çûÇﬁ
                    loadAutodeliverySettings(result.data);
                } else {
                    console.error('[fetchMerchantDataForAutodelivery] Failed to load data:', result.error);
                    // ÉGÉâÅ[éûÇ‡ÉfÉtÉHÉãÉgê›íËÇ≈èâä˙âª
                    loadAutodeliverySettings({});
                }
            } catch (error) {
                console.error('[fetchMerchantDataForAutodelivery] Error:', error);
                // ÉGÉâÅ[éûÇ‡ÉfÉtÉHÉãÉgê›íËÇ≈èâä˙âª
                loadAutodeliverySettings({});
            }
        }

        // ÉXÉvÉåÉbÉhÉVÅ[ÉgÇ©ÇÁé©ìÆîzêMê›íËÇì«Ç›çûÇﬁ
        function loadAutodeliverySettings(data) {
            console.log('[loadAutodeliverySettings] Loading settings:', data);
            console.log('[loadAutodeliverySettings] ç≈ëÂëŒâûäKêî key check:', data['ç≈ëÂëŒâûäKêî']);
            console.log('[loadAutodeliverySettings] All keys:', Object.keys(data));

            // ëŒâûï®åèéÌï Åiï°êîÇÃóÒñºÇ…ëŒâûÅj
            // Ç‹Ç∏ëSÇƒÇÃï®åèéÌï É`ÉFÉbÉNÉ{ÉbÉNÉXÇÉäÉZÉbÉg
            const autodeliverySection = document.getElementById('autodeliverySection');
            if (autodeliverySection) {
                autodeliverySection.querySelectorAll('input[name="propertyType"]').forEach(cb => {
                    cb.checked = false;
                });
            }

            // ABóÒÇÃÉfÅ[É^ÇéÊìæÅiï°êîÇÃóÒñºÉpÉ^Å[ÉìÇ…ëŒâûÅj
            const propertyTypesData = data['ëŒâûâ¬î\ï®åèéÌï '] || data['ëŒâûï®åèéÌï '] || '';
            console.log('[loadAutodeliverySettings] ëŒâûâ¬î\ï®åèéÌï  data:', propertyTypesData);
            console.log('[loadAutodeliverySettings] data["ëŒâûâ¬î\ï®åèéÌï "]:', data['ëŒâûâ¬î\ï®åèéÌï ']);
            console.log('[loadAutodeliverySettings] data["ëŒâûï®åèéÌï "]:', data['ëŒâûï®åèéÌï ']);

            if (propertyTypesData) {
                const propertyTypes = propertyTypesData.split(',').map(s => s.trim());
                console.log('[loadAutodeliverySettings] Property types array:', propertyTypes);
                console.log('[loadAutodeliverySettings] Property types length:', propertyTypes.length);
                console.log('[loadAutodeliverySettings] Property types JSON:', JSON.stringify(propertyTypes));

                const propertyMap = {
                    'åÀåöÇƒèZëÓ': 'house',
                    'ÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉì': 'apartment',
                    'ìXï‹ÅEéññ±èä': 'commercial',
                    'ìXï‹': 'commercial',  // ÉXÉvÉåÉbÉhÉVÅ[ÉgÇ…ï€ë∂Ç≥ÇÍÇƒÇ¢ÇÈíZèkå`
                    'çHèÍÅEëqå…': 'factory',
                    'çHèÍ': 'factory'  // íZèkå`Ç‡ÉTÉ|Å[Ég
                };
                propertyTypes.forEach(type => {
                    const value = propertyMap[type];
                    if (value) {
                        const checkbox = autodeliverySection ?
                            autodeliverySection.querySelector(`input[name="propertyType"][value="${value}"]`) :
                            document.querySelector(`input[name="propertyType"][value="${value}"]`);
                        if (checkbox) {
                            checkbox.checked = true;
                            console.log('[loadAutodeliverySettings] Checked property type:', type, 'Å®', value);
                        } else {
                            console.warn('[loadAutodeliverySettings] Checkbox not found for:', type, 'Å®', value);
                        }
                    } else {
                        console.warn('[loadAutodeliverySettings] No mapping for:', type);
                    }
                });
            }

            // ç≈ëÂëŒâûäKêîÅió·: "åÀåöÇƒèZëÓ(3äKÇ‹Ç≈),ÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉì(3äKÇ‹Ç≈)"Åj
            if (data['ç≈ëÂëŒâûäKêî']) {
                let maxFloorsData = data['ç≈ëÂëŒâûäKêî'];
                console.log('[loadAutodeliverySettings] Raw max floors data:', maxFloorsData);

                // compressedå`éÆÇÃèÍçáÇÕfullÇÃílÇíäèo
                if (maxFloorsData.includes('{"type":"compressed","full":"')) {
                    const match = maxFloorsData.match(/"full":"([^"]+)"/);
                    if (match) {
                        maxFloorsData = match[1];
                        console.log('[loadAutodeliverySettings] Extracted max floors:', maxFloorsData);
                    }
                }

                console.log('[loadAutodeliverySettings] Final max floors data:', maxFloorsData);

                const propertyTypeMap = {
                    'åÀåöÇƒèZëÓ': 'house',
                    'ÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉì': 'apartment',
                    'ìXï‹ÅEéññ±èä': 'commercial',
                    'çHèÍÅEëqå…': 'factory'
                };

                // "åÀåöÇƒèZëÓ(3äKÇ‹Ç≈),ÉAÉpÅ[ÉgÅEÉ}ÉìÉVÉáÉì(10äKà»è„Ç‹Ç≈)" ÇÉpÅ[ÉX
                maxFloorsData.split(',').forEach(entry => {
                    const match = entry.trim().match(/^(.+?)Ä((.+?)Ç‹Ç≈Ä)$/);
                    if (match) {
                        const propertyType = match[1];
                        const floorText = match[2]; // "3äK" or "10äKà»è„" or "4äKà»è„"
                        const checkboxValue = propertyTypeMap[propertyType];

                        if (checkboxValue) {
                            // É`ÉFÉbÉNÉ{ÉbÉNÉXÇå©Ç¬ÇØÇƒÅAÇªÇÃó◊ÇÃselectÇéÊìæ
                            const checkbox = document.querySelector(`input[name="propertyType"][value="${checkboxValue}"]`);
                            if (checkbox) {
                                const label = checkbox.closest('label');
                                const select = label.querySelector('select');
                                if (select) {
                                    // optionÇÃÉeÉLÉXÉgÇ≈àÍívÇ∑ÇÈÇ‡ÇÃÇíTÇ∑
                                    let matched = false;
                                    for (let i = 0; i < select.options.length; i++) {
                                        if (select.options[i].text === floorText) {
                                            select.selectedIndex = i;
                                            matched = true;
                                            console.log('[loadAutodeliverySettings] Set max floors:', propertyType, '=', floorText, '(option text match)');
                                            break;
                                        }
                                    }
                                    if (!matched) {
                                        console.warn('[loadAutodeliverySettings] No matching option for:', propertyType, floorText);
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // ízîNêîëŒâûîÕàÕÅió·: "{min=0, max=50}"Åj
            if (data['ízîNêîëŒâûîÕàÕ']) {
                try {
                    const ageRange = data['ízîNêîëŒâûîÕàÕ'];
                    // JSONïóÇÃï∂éöóÒÇÉpÅ[ÉX
                    const minMatch = ageRange.match(/min=(Äd+)/);
                    const maxMatch = ageRange.match(/max=(Äd+)/);
                    if (minMatch && maxMatch) {
                        const min = parseInt(minMatch[1]);
                        const max = parseInt(maxMatch[1]);
                        document.getElementById('ageRangeMinAuto').textContent = min;
                        document.getElementById('ageRangeMaxAuto').textContent = max;

                        // ÉXÉâÉCÉ_Å[ÇÃílÇ‡ê›íËÅimin/maxëÆê´Ç≈ämé¿Ç…éØï Åj
                        const minSlider = document.querySelector('#autodeliverySection input[type="range"][min="0"][max="50"]');
                        const maxSlider = document.querySelector('#autodeliverySection input[type="range"][min="0"][max="100"]');

                        console.log('[loadAutodeliverySettings] Found minSlider:', !!minSlider, 'maxSlider:', !!maxSlider);

                        if (minSlider && maxSlider) {
                            minSlider.value = min;
                            maxSlider.value = max;

                            console.log('[loadAutodeliverySettings] Set slider values - min:', min, 'max:', max);

                            // DOMÇ™äÆëSÇ…çXêVÇ≥ÇÍÇƒÇ©ÇÁÉCÉxÉìÉgÇî≠âŒ
                            setTimeout(() => {
                                minSlider.dispatchEvent(new Event('input', { bubbles: true }));
                                maxSlider.dispatchEvent(new Event('input', { bubbles: true }));
                                minSlider.dispatchEvent(new Event('change', { bubbles: true }));
                                maxSlider.dispatchEvent(new Event('change', { bubbles: true }));

                                // ã≠êßìIÇ…updateAgeRangeAuto()ÇåƒÇ—èoÇµ
                                if (typeof updateAgeRangeAuto === 'function') {
                                    updateAgeRangeAuto();
                                }

                                console.log('[loadAutodeliverySettings] Triggered events and updateAgeRangeAuto');
                            }, 100);
                        } else {
                            console.error('[loadAutodeliverySettings] Sliders not found!');
                        }
                    }
                } catch (e) {
                    console.error('ízîNêîÉpÅ[ÉXÉGÉâÅ[:', e);
                }
            }

            // é{çHâ”èäÅiÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃíl Å® HTML value ÇÃÉ}ÉbÉsÉìÉOÅj
            if (data['é{çHâ”èä']) {
                let locationsStr = data['é{çHâ”èä'];
                console.log('[loadAutodeliverySettings] Raw construction types data:', locationsStr);

                // compressedå`éÆÇÃèÍçáÇÕfullÇÃílÇíäèo
                if (locationsStr.includes('{"type":"compressed","full":"')) {
                    const match = locationsStr.match(/"full":"([^"]+)"/);
                    if (match) {
                        locationsStr = match[1];
                        console.log('[loadAutodeliverySettings] Extracted full data:', locationsStr);
                    }
                }

                const locations = locationsStr.split(',').map(s => s.trim()).filter(l => l);
                console.log('[loadAutodeliverySettings] Parsed locations:', locations);

                // ÉXÉvÉVÇÃé{çHâ”èäÉfÅ[É^ Å® HTMLÉ`ÉFÉbÉNÉ{ÉbÉNÉXvalueÇ÷ÇÃÉ}ÉbÉsÉìÉO
                // êVÉVÉXÉeÉÄ: ÉXÉvÉVÇ…ÇÕäÆëSÇ»å`éÆÇ≈ï€ë∂Ç≥ÇÍÇÈÇΩÇﬂÅAäÓñ{ìIÇ…äÆëSàÍív
                // ãåÉfÅ[É^Ç∆ÇÃå›ä∑ê´ÇÃÇΩÇﬂÅAó™èÃÉ}ÉbÉsÉìÉOÇ‡ï€éù
                const locationMap = {
                    // äÆëSàÍívÅiêVÉtÉHÅ[É}ÉbÉgÅj- ÉXÉvÉVÇÃíl = HTMLÇÃíl
                    'äOï«ìhëï': 'äOï«ìhëï',
                    'äOï«ÉJÉoÅ[çHñ@': 'äOï«ÉJÉoÅ[çHñ@',
                    'äOï«í£ë÷Ç¶': 'äOï«í£ë÷Ç¶',
                    'âÆç™ìhëïÅiäOï«çHéñä‹ÇﬁÅj': 'âÆç™ìhëïÅiäOï«çHéñä‹ÇﬁÅj',
                    'âÆè„ñhêÖÅiäOï«çHéñä‹ÇﬁÅj': 'âÆè„ñhêÖÅiäOï«çHéñä‹ÇﬁÅj',
                    'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô': 'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô',
                    'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢': 'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢',
                    'âÆç™ÉJÉoÅ[çHñ@': 'âÆç™ÉJÉoÅ[çHñ@',
                    'äOï«ï‚èCÅiäOï«çHéñä‹ÇﬁÅj': 'äOï«ï‚èCÅiäOï«çHéñä‹ÇﬁÅj',
                    'âÆç™ï‚èCÅiäOï«çHéñä‹ÇﬁÅj': 'âÆç™ï‚èCÅiäOï«çHéñä‹ÇﬁÅj',
                    'ÉxÉâÉìÉ_ñhêÖÅiäOï«çHéñä‹ÇﬁÅj': 'ÉxÉâÉìÉ_ñhêÖÅiäOï«çHéñä‹ÇﬁÅj',
                    'ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅjÅiäOï«çHéñä‹ÇﬁÅj': 'ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅjÅiäOï«çHéñä‹ÇﬁÅj',
                    'ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅjÅiäOï«çHéñä‹ÇﬁÅj': 'ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅjÅiäOï«çHéñä‹ÇﬁÅj',
                    'äOï«âJòRÇËèCëUÅiäOï«çHéñä‹ÇﬁÅj': 'äOï«âJòRÇËèCëUÅiäOï«çHéñä‹ÇﬁÅj',
                    'âÆç™âJòRÇËèCëUÅiâÆç™çHéñä‹ÇﬁÅj': 'âÆç™âJòRÇËèCëUÅiâÆç™çHéñä‹ÇﬁÅj',
                    'âÆç™ìhëïíPïi': 'âÆç™ìhëïíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'âÆè„ñhêÖíPïi': 'âÆè„ñhêÖíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'äOï«ï‚èCíPïi': 'äOï«ï‚èCíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'âÆç™ï‚èCíPïi': 'âÆç™ï‚èCíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'ÉxÉâÉìÉ_ñhêÖíPïi': 'ÉxÉâÉìÉ_ñhêÖíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'äOï«âJòRÇËèCëUíPïi': 'äOï«âJòRÇËèCëUíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'âÆç™âJòRÇËèCëUíPïi': 'âÆç™âJòRÇËèCëUíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',

                    // ãåÉfÅ[É^Ç∆ÇÃå›ä∑ê´Åió™èÃ Å® äÆëSñºèÃÅj
                    'âÆç™ìhëï': 'âÆç™ìhëïÅiäOï«çHéñä‹ÇﬁÅj',
                    'âÆè„ñhêÖ': 'âÆè„ñhêÖÅiäOï«çHéñä‹ÇﬁÅj',
                    'äOï«ï‚èC': 'äOï«ï‚èCÅiäOï«çHéñä‹ÇﬁÅj',
                    'âÆç™ï‚èC': 'âÆç™ï‚èCÅiäOï«çHéñä‹ÇﬁÅj',
                    'ÉxÉâÉìÉ_ñhêÖ': 'ÉxÉâÉìÉ_ñhêÖÅiäOï«çHéñä‹ÇﬁÅj',
                    'ì‡ëïêÖâÒÇË': 'ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅjÅiäOï«çHéñä‹ÇﬁÅj',
                    'ì‡ëï': 'ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅjÅiäOï«çHéñä‹ÇﬁÅj',
                    'âÆç™âJòRÇËèCëU': 'âÆç™âJòRÇËèCëUÅiâÆç™çHéñä‹ÇﬁÅj',
                    'äOï«âJòRÇËèCëU': 'äOï«âJòRÇËèCëUÅiäOï«çHéñä‹ÇﬁÅj',
                    'âÆç™í£ÇËë÷Ç¶ÅEÉJÉoÅ[': 'âÆç™ÉJÉoÅ[çHñ@',
                    'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷': 'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô',
                    'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶': 'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô'
                };
                locations.forEach(loc => {
                    const mappedValue = locationMap[loc] || loc;
                    const checkbox = document.querySelector(`input[name="constructionTypes"][value="${mappedValue}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        console.log('[loadAutodeliverySettings] Checked:', mappedValue);
                    } else {
                        console.warn('[loadAutodeliverySettings] Not found:', loc, 'Å®', mappedValue);
                    }
                });
            }

            // ì¡éÍëŒâûçÄñ⁄ÅiÉXÉvÉåÉbÉhÉVÅ[ÉgÇÃíl Å® HTML value ÇÃÉ}ÉbÉsÉìÉOÅj
            if (data['ì¡éÍëŒâûçÄñ⁄']) {
                let specialStr = data['ì¡éÍëŒâûçÄñ⁄'];
                console.log('[loadAutodeliverySettings] Raw special services data:', specialStr);

                // compressedå`éÆÇÃèÍçáÇÕfullÇÃílÇíäèo
                if (specialStr.includes('{"type":"compressed","full":"')) {
                    const match = specialStr.match(/"full":"([^"]+)"/);
                    if (match) {
                        specialStr = match[1];
                        console.log('[loadAutodeliverySettings] Extracted special services:', specialStr);
                    }
                }

                const specialItems = specialStr.split(',').map(s => s.trim()).filter(s => s);
                const specialMap = {
                    // äÆëSàÍívÅiêVÉtÉHÅ[É}ÉbÉgÅj - ÉXÉvÉVÇÃíl = HTMLÇÃílÅiäGï∂éöïtÇ´Åj
                    'é’îMÅEífîMìhóøíÒàƒâ¬î\': '?? é’îMÅEífîMìhóøíÒàƒâ¬î\',
                    'óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]': '?? óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]',
                    'âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬': '?? âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬',
                    'ÉGÉNÉXÉeÉäÉAÅiíÎÅEíìé‘èÍÅEäOç\Åj': '?? ÉGÉNÉXÉeÉäÉAÅiíÎÅEíìé‘èÍÅEäOç\Åj',
                    'ëæózåıÉpÉlÉãíEíÖÅiìPãéä‹ÇﬁÅj': '?? ëæózåıÉpÉlÉãíEíÖÅiìPãéä‹ÇﬁÅj',
                    'íÒågêÊÉçÅ[ÉìóLÇË': '?? íÒågêÊÉçÅ[ÉìóLÇË',
                    'ÉNÉåÉWÉbÉgÉJÅ[Éhï•Ç¢â¬': '?? ÉNÉåÉWÉbÉgÉJÅ[Éhï•Ç¢â¬',
                    'âŒç–ï€åØê\êøÉTÉ|Å[Ég': '?? âŒç–ï€åØê\êøÉTÉ|Å[Ég',
                    'èïê¨ã‡ê\êøÉTÉ|Å[Ég': '?? èïê¨ã‡ê\êøÉTÉ|Å[Ég',
                    'åöízãñâ¬èÿ': '?? åöízãñâ¬èÿ',
                    'åıêGî}ìhóøíÒàƒâ¬': '? åıêGî}ìhóøíÒàƒâ¬',
                    'ï™äÑï•Ç¢ÉvÉâÉìóL': '?? ï™äÑï•Ç¢ÉvÉâÉìóL',

                    // ãåÉfÅ[É^Ç∆ÇÃå›ä∑ê´Åiäáå Ç»Çµ Å® äáå ïtÇ´ÅAíÜì_Ç»Çµ Å® íÜì_Ç†ÇËÅj
                    'é’îMífîMìhóøíÒàƒâ¬î\': '?? é’îMÅEífîMìhóøíÒàƒâ¬î\',
                    'óßÇøâÔÇ¢Ç»Çµå©êœÇ‡ÇËéËìn': '?? óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]',
                    'âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»Çµå©êœÇ‡ÇËóXëó': '?? âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬',
                    'âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»Çµå©': '?? âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬',
                    'ÉGÉNÉXÉeÉäÉA': '?? ÉGÉNÉXÉeÉäÉAÅiíÎÅEíìé‘èÍÅEäOç\Åj',
                    'ëæózåıÉpÉlÉãíEíÖ': '?? ëæózåıÉpÉlÉãíEíÖÅiìPãéä‹ÇﬁÅj'
                };
                specialItems.forEach(item => {
                    const mappedValue = specialMap[item] || item;
                    const checkbox = document.querySelector(`input[name="specialServices"][value="${mappedValue}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        console.log('[loadAutodeliverySettings] Special checked:', mappedValue);
                    } else {
                        console.warn('[loadAutodeliverySettings] Special not found:', item);
                    }
                });

                // ÉvÉåÉrÉÖÅ[ÇçXêV
                const previewFeaturesList = document.getElementById('previewFeaturesList');
                if (previewFeaturesList) {
                    previewFeaturesList.innerHTML = '';
                    const excludeItems = ['óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËéËìnÇµäÛñ]', 'âìï˚Ç…Ç¬Ç´óßÇøâÔÇ¢Ç»ÇµÅEå©êœÇ‡ÇËóXëóÅEìdòbÇ≈è§íkâ¬'];

                    const colors = [
                        'from-blue-50 to-blue-100',
                        'from-purple-50 to-purple-100',
                        'from-green-50 to-green-100',
                        'from-pink-50 to-pink-100',
                        'from-yellow-50 to-yellow-100',
                        'from-indigo-50 to-indigo-100'
                    ];

                    let colorIndex = 0;
                    specialItems.forEach(item => {
                        const mappedValue = specialMap[item] || item;

                        // èúäOçÄñ⁄ÇÉXÉLÉbÉv
                        if (excludeItems.some(excludeItem => mappedValue.includes(excludeItem))) {
                            return;
                        }

                        // äGï∂éöÇ∆ÉeÉLÉXÉgÇï™ó£
                        const parts = mappedValue.split(' ');
                        const emoji = parts[0];
                        const text = parts.slice(1).join(' ');

                        const div = document.createElement('div');
                        div.className = `bg-gradient-to-br ${colors[colorIndex % colors.length]} rounded-xl p-4`;
                        div.innerHTML = `
                            <div class="text-3xl mb-2">${emoji}</div>
                            <h4 class="font-semibold text-gray-900 mb-1">${text}</h4>
                        `;
                        previewFeaturesList.appendChild(div);
                        colorIndex++;
                    });

                    // ã≠Ç›Ç™Ç†ÇÈèÍçáÇÃÇ›ÉZÉNÉVÉáÉìÇï\é¶
                    const featuresSection = document.getElementById('preview-features');
                    if (featuresSection) {
                        featuresSection.style.display = previewFeaturesList.children.length > 0 ? 'block' : 'none';
                    }
                }
            }

            // ëŒâûìsìπï{åßÅEésãÊí¨ë∫ÇÉçÅ[Éh
            if (data['ëŒâûìsìπï{åß']) {
                let prefecturesStr = data['ëŒâûìsìπï{åß'];
                console.log('[loadAutodeliverySettings] Raw prefectures data:', prefecturesStr);

                // compressedå`éÆÇÃèÍçáÇÕfullÇÃílÇíäèo
                if (prefecturesStr.includes('{"type":"compressed","full":"')) {
                    const match = prefecturesStr.match(/"full":"([^"]+)"/);
                    if (match) {
                        prefecturesStr = match[1];
                        console.log('[loadAutodeliverySettings] Extracted prefectures:', prefecturesStr);
                    }
                }

                // ëSäpÅEîºäpÉJÉìÉ}ÇÃóºï˚Ç…ëŒâû
                const prefectures = prefecturesStr.split(/[,ÅA]/).map(s => s.trim()).filter(s => s);
                areaSelectionData.prefectures = prefectures;

                // ìsìπï{åßÉ{É^ÉìÇëIëèÛë‘Ç…Ç∑ÇÈ
                prefectures.forEach(pref => {
                    const button = document.querySelector(`button[data-prefecture="${pref}"]`);
                    if (button) {
                        button.classList.add('selected', 'bg-blue-500', 'text-white');
                        button.classList.remove('bg-white');
                    }
                });

                console.log('[loadAutodeliverySettings] Loaded prefectures:', prefectures);
            }

            if (data['ëŒâûésãÊí¨ë∫']) {
                try {
                    let citiesStr = data['ëŒâûésãÊí¨ë∫'];
                    console.log('[loadAutodeliverySettings] Raw cities data:', citiesStr);

                    // compressedå`éÆÇÃèÍçáÇÕfullÇÃílÇíäèo
                    if (citiesStr.includes('{"type":"compressed","full":"')) {
                        const match = citiesStr.match(/"full":"([^"]+)"/);
                        if (match) {
                            citiesStr = match[1];
                            console.log('[loadAutodeliverySettings] Extracted cities:', citiesStr);
                        }
                    }

                    // ÉfÅ[É^å`éÆÉ`ÉFÉbÉN: ÉZÉ~ÉRÉçÉìÇ™Ç†ÇÍÇŒ "ìåãûìs:èaíJãÊ,êVèhãÊ;ê_ìﬁêÏåß:â°ïlés,êÏçËés" å`éÆ
                    // ÉZÉ~ÉRÉçÉìÇ™Ç»ÇØÇÍÇŒÅAíPèÉÇ»ÉJÉìÉ}ãÊêÿÇËÉäÉXÉgÅiìsìπï{åßèÓïÒÇ»ÇµÅj
                    if (citiesStr.includes(';') && citiesStr.includes(':')) {
                        // ÉZÉ~ÉRÉçÉìãÊêÿÇËÇ≈ìsìπï{åßÇ≤Ç∆Ç…ï™äÑ
                        citiesStr.split(';').forEach(prefEntry => {
                            const parts = prefEntry.split(':');
                            if (parts.length === 2) {
                                const pref = parts[0].trim();
                                const citiesStr = parts[1].trim();
                                if (pref && citiesStr) {
                                    // ëSäpÅEîºäpÉJÉìÉ}ÇÃóºï˚Ç…ëŒâû
                                    const cities = citiesStr.split(/[,ÅA]/).map(s => s.trim()).filter(c => c);
                                    if (cities.length > 0) {
                                        areaSelectionData.cities[pref] = cities;
                                        console.log(`[loadAutodeliverySettings] ${pref}:`, cities);
                                    }
                                }
                            }
                        });
                    } else {
                        // ìsìπï{åßèÓïÒÇ™Ç»Ç¢èÍçá Å® êVÇµÇ¢ÉçÉWÉbÉN: ÉfÅ[É^ÉxÅ[ÉXÇ©ÇÁésãÊí¨ë∫Çïúå≥
                        // ëSäpÅEîºäpÉJÉìÉ}ÇÃóºï˚Ç…ëŒâû
                        const allCities = citiesStr.split(/[,ÅA]/).map(s => s.trim()).filter(c => c);
                        console.log('[loadAutodeliverySettings] Parsed cities (unstructured):', allCities.length, 'cities');
                        console.log('[loadAutodeliverySettings] Current prefectures:', areaSelectionData.prefectures);

                        if (allCities.length > 0 && areaSelectionData.prefectures.length > 0) {
                            console.log('[loadAutodeliverySettings] ésãÊí¨ë∫Çìsìπï{åßï Ç…çƒÉ}ÉbÉsÉìÉOíÜ...');
                            // äeìsìπï{åßÇÃésãÊí¨ë∫ÉfÅ[É^ÉxÅ[ÉXÇ©ÇÁÅAï€ë∂Ç≥ÇÍÇƒÇ¢ÇÈésãÊí¨ë∫Çíäèo
                            areaSelectionData.prefectures.forEach(pref => {
                                const dbCities = getCitiesForPrefecture(pref);
                                const matchedCities = allCities.filter(city => dbCities.includes(city));
                                if (matchedCities.length > 0) {
                                    areaSelectionData.cities[pref] = matchedCities;
                                    console.log(`[loadAutodeliverySettings] ${pref}: ${matchedCities.length} cities matched`);
                                } else {
                                    console.warn(`[loadAutodeliverySettings] ${pref}: No matching cities found`);
                                }
                            });
                        } else {
                            console.error('[loadAutodeliverySettings] Cannot assign cities: allCities.length =', allCities.length, ', prefectures.length =', areaSelectionData.prefectures.length);
                        }
                    }

                    console.log('[loadAutodeliverySettings] Loaded cities:', areaSelectionData.cities);
                } catch (e) {
                    console.error('ésãÊí¨ë∫ÉpÅ[ÉXÉGÉâÅ[:', e);
                }
            }

            // óDêÊÉGÉäÉAÇÉçÅ[Éh
            if (data['óDêÊÉGÉäÉA']) {
                try {
                    let prioritiesStr = data['óDêÊÉGÉäÉA'];
                    console.log('[loadAutodeliverySettings] Raw priorities data:', prioritiesStr);

                    // compressedå`éÆÇÃèÍçáÇÕfullÇÃílÇíäèo
                    if (prioritiesStr.includes('{"type":"compressed","full":"')) {
                        const match = prioritiesStr.match(/"full":"([^"]+)"/);
                        if (match) {
                            prioritiesStr = match[1];
                            console.log('[loadAutodeliverySettings] Extracted priorities:', prioritiesStr);
                        }
                    }

                    // ëSäpÅEîºäpÉJÉìÉ}ÇÃóºï˚Ç…ëŒâû
                    const priorities = prioritiesStr.split(/[,ÅA]/).map(s => s.trim()).filter(p => p);

                    // ÉXÉvÉVÇÃÉfÅ[É^å`éÆÇ…âûÇ∂Çƒïœä∑
                    // "ìåãûìs èaíJãÊ" å`éÆ Å® "ìåãûìs_èaíJãÊ" Ç…ïœä∑
                    // "ìåãûìs_èaíJãÊ" å`éÆ Å® ÇªÇÃÇ‹Ç‹égóp
                    areaSelectionData.priorities = priorities.map(p => {
                        if (p.includes('_')) {
                            return p; // Ç∑Ç≈Ç…ÉAÉìÉ_Å[ÉXÉRÉAå`éÆ
                        } else {
                            return p.replace(/Äs+/, '_'); // ÉXÉyÅ[ÉXÇÉAÉìÉ_Å[ÉXÉRÉAÇ…ïœä∑
                        }
                    });

                    console.log('[loadAutodeliverySettings] Loaded priorities:', areaSelectionData.priorities);
                } catch (e) {
                    console.error('óDêÊÉGÉäÉAÉpÅ[ÉXÉGÉâÅ[:', e);
                }
            }

            // ÉGÉäÉAëIëUIÇçXêV
            if (areaSelectionData.prefectures.length > 0) {
                updateAreaSelectionUI();
            }

            // óDêÊÉGÉäÉAÉJÉEÉìÉ^Å[ÇçXêV
            const selectedPriorityCount = document.getElementById('selectedPriorityCount');
            if (selectedPriorityCount && areaSelectionData.priorities) {
                selectedPriorityCount.textContent = areaSelectionData.priorities.length;
                console.log('[loadAutodeliverySettings] Updated priority count:', areaSelectionData.priorities.length);
            }

            console.log('[loadAutodeliverySettings] Final areaSelectionData:', JSON.stringify(areaSelectionData, null, 2));

            // ÉvÉåÉrÉÖÅ[Ç…ëŒâûÉGÉäÉAÇîΩâf
            const previewCitiesContainer = document.getElementById('previewCitiesContainer');

            if (previewCitiesContainer && areaSelectionData.prefectures && areaSelectionData.prefectures.length > 0) {
                previewCitiesContainer.innerHTML = '';

                areaSelectionData.prefectures.forEach((pref, index) => {
                    const cities = areaSelectionData.cities[pref];
                    if (cities && cities.length > 0) {
                        const prefDiv = document.createElement('div');
                        prefDiv.className = index < areaSelectionData.prefectures.length - 1 ? 'mb-6 pb-6 border-b border-gray-200' : 'mb-0';
                        prefDiv.innerHTML = `
                            <div class="flex items-center mb-3">
                                <span class="text-base font-bold text-blue-600">${pref}</span>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                ${cities.map(city => `<span class="px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg text-sm transition">${city}</span>`).join('')}
                            </div>
                        `;
                        previewCitiesContainer.appendChild(prefDiv);
                    }
                });

                console.log('[loadAutodeliverySettings] Updated preview areas for', areaSelectionData.prefectures.length, 'prefectures');
            }

            // ÉvÉåÉrÉÖÅ[Ç…ëŒâûâ¬î\Ç»çHéñÇîΩâf
            const previewServicesList = document.getElementById('previewServicesList');
            const serviceIconMap = {
                'äOï«ìhëï': '??',
                'äOï«ÉJÉoÅ[çHñ@': '???',
                'äOï«í£ë÷Ç¶': '??',
                'âÆç™ìhëïÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'âÆè„ñhêÖÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ÉXÉåÅ[ÉgÅEÉKÉãÉoÉäÉEÉÄìô': '???',
                'âÆç™ïòÇ´ë÷Ç¶ÅEí£ÇËë÷Ç¶Å¶ä¢': '??',
                'âÆç™ÉJÉoÅ[çHñ@': '??',
                'äOï«ï‚èCÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'âÆç™ï‚èCÅiäOï«çHéñä‹ÇﬁÅj': '???',
                'ÉxÉâÉìÉ_ñhêÖÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'ì‡ëïêÖâÒÇËÅiÉoÉXÅEÉLÉbÉ`ÉìÅEÉgÉCÉåÅjÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'ì‡ëïÅiÉtÉçÅ[ÉäÉìÉOÇ‚èÙÇ»Ç«ÇÃè∞ÅEÉNÉçÉXìôÅjÅiäOï«çHéñä‹ÇﬁÅj': '??',
                'äOï«âJòRÇËèCëUÅiäOï«çHéñä‹ÇﬁÅj': '?',
                'âÆç™âJòRÇËèCëUÅiâÆç™çHéñä‹ÇﬁÅj': '???'
            };

            if (previewServicesList) {
                previewServicesList.innerHTML = '';
                const checkedServices = document.querySelectorAll('input[name="constructionTypes"]:checked');

                if (checkedServices.length > 0) {
                    checkedServices.forEach(service => {
                        const serviceName = service.value;

                        // íPïiçÄñ⁄ÅiíAÇµ1é–è–âÓéûÇÕíËâøÅjÇÉvÉåÉrÉÖÅ[Ç©ÇÁèúäO
                        if (serviceName.includes('ÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj')) {
                            return;
                        }

                        // ï\é¶ñºÇ©ÇÁÅiäOï«çHéñä‹ÇﬁÅjÇçÌèú
                        const displayName = serviceName.replace('ÅiäOï«çHéñä‹ÇﬁÅj', '');
                        const icon = serviceIconMap[serviceName] || '?';
                        const div = document.createElement('div');
                        div.className = 'bg-white border border-green-200 rounded-lg p-3 flex items-center hover:shadow-md transition';
                        div.innerHTML = `
                            <span class="text-2xl mr-2">${icon}</span>
                            <span class="text-sm font-medium text-gray-800">${displayName}</span>
                        `;
                        previewServicesList.appendChild(div);
                    });
                    document.getElementById('preview-services').style.display = 'block';
                    console.log('[loadAutodeliverySettings] Updated preview services:', checkedServices.length);
                } else {
                    document.getElementById('preview-services').style.display = 'none';
                }
            }

            // àÍéûí‚é~ê›íËÇì«Ç›çûÇ›
            const autoPauseToggle = document.getElementById('autoPauseToggle');
            const pauseStartDate = document.getElementById('pauseStartDate');
            const pauseEndDate = document.getElementById('pauseEndDate');
            const indefinitePause = document.getElementById('indefinitePause');
            const pauseSettings = document.getElementById('pauseSettings');

            // àÍéûí‚é~ÉtÉâÉOÇì«Ç›çûÇ›ÅiundefinedÇÃèÍçáÇÕFALSEÇ∆ÇµÇƒàµÇ§Åj
            const pauseFlag = data['àÍéûí‚é~ÉtÉâÉO'] === 'TRUE' || data['àÍéûí‚é~ÉtÉâÉO'] === true;
            console.log('[loadAutodeliverySettings] Pause flag from sheet:', data['àÍéûí‚é~ÉtÉâÉO'], 'Å®', pauseFlag);
            console.log('[loadAutodeliverySettings] Pause start date raw:', data['àÍéûí‚é~äJénì˙']);
            console.log('[loadAutodeliverySettings] Pause end date raw:', data['àÍéûí‚é~çƒäJó\íËì˙']);

            if (autoPauseToggle) {
                autoPauseToggle.checked = pauseFlag;
            }

            // àÍéûí‚é~äJénì˙ÅiAPóÒÅj- ÉtÉâÉOÇ…ä÷ÇÌÇÁÇ∏èÌÇ…ÉfÅ[É^Çì«Ç›çûÇﬁ
            if (data['àÍéûí‚é~äJénì˙'] && pauseStartDate) {
                let startDateValue = data['àÍéûí‚é~äJénì˙'];

                // ólÅXÇ»ì˙ïtÉtÉHÅ[É}ÉbÉgÇ yyyy-MM-dd Ç…ïœä∑Åiì˙ñ{éûä‘Ç≈èàóùÅj
                if (typeof startDateValue === 'string') {
                    // ISO 8601å`éÆ (2025-10-03T15:00:00.000Z) ÇÃèÍçáÅADateÉIÉuÉWÉFÉNÉgÇ…ïœä∑ÇµÇƒÇ©ÇÁì˙ñ{éûä‘Ç≈éÊìæ
                    if (startDateValue.includes('T') || startDateValue.includes('Z')) {
                        const dateObj = new Date(startDateValue);
                        const year = dateObj.getFullYear();
                        const month = String(dateObj.getMonth() + 1).padStart(2, '0');
                        const day = String(dateObj.getDate()).padStart(2, '0');
                        startDateValue = `${year}-${month}-${day}`;
                    }
                    // "yyyy-MM-dd HH:mm" å`éÆÇ yyyy-MM-dd Ç…ïœä∑
                    else if (startDateValue.includes(' ')) {
                        startDateValue = startDateValue.split(' ')[0];
                    }
                    // "yyyy/MM/dd" å`éÆÇ yyyy-MM-dd Ç…ïœä∑
                    else if (startDateValue.includes('/')) {
                        startDateValue = startDateValue.replace(/Ä//g, '-');
                    }
                } else if (startDateValue instanceof Date) {
                    // DateÉIÉuÉWÉFÉNÉgÇÃèÍçá
                    const year = startDateValue.getFullYear();
                    const month = String(startDateValue.getMonth() + 1).padStart(2, '0');
                    const day = String(startDateValue.getDate()).padStart(2, '0');
                    startDateValue = `${year}-${month}-${day}`;
                }

                pauseStartDate.value = startDateValue;
                console.log('[loadAutodeliverySettings] Pause start date set:', startDateValue);
            } else {
                console.warn('[loadAutodeliverySettings] Pause start date not found in data or element missing');
            }

            // àÍéûí‚é~çƒäJó\íËì˙ÅiAQóÒÅj- ÉtÉâÉOÇ…ä÷ÇÌÇÁÇ∏èÌÇ…ÉfÅ[É^Çì«Ç›çûÇﬁ
            if (data['àÍéûí‚é~çƒäJó\íËì˙']) {
                if (data['àÍéûí‚é~çƒäJó\íËì˙'] === 'ñ¢íË') {
                    if (indefinitePause) {
                        indefinitePause.checked = true;
                    }
                    if (pauseEndDateDisplay) {
                        pauseEndDateDisplay.value = 'ñ¢íË';
                        pauseEndDateDisplay.classList.remove('hidden');
                    }
                    if (pauseEndDate) {
                        pauseEndDate.classList.add('hidden');
                        pauseEndDate.value = '';
                    }
                    console.log('[loadAutodeliverySettings] Pause end date: ñ¢íË (from spreadsheet)');
                } else {
                    // ì˙ïtå`éÆÇÃïœä∑Åiì˙ñ{éûä‘Ç≈èàóùÅj
                    let endDateValue = data['àÍéûí‚é~çƒäJó\íËì˙'];

                    if (typeof endDateValue === 'string') {
                        // ISO 8601å`éÆ (2025-10-03T15:00:00.000Z) ÇÃèÍçáÅADateÉIÉuÉWÉFÉNÉgÇ…ïœä∑ÇµÇƒÇ©ÇÁì˙ñ{éûä‘Ç≈éÊìæ
                        if (endDateValue.includes('T') || endDateValue.includes('Z')) {
                            const dateObj = new Date(endDateValue);
                            const year = dateObj.getFullYear();
                            const month = String(dateObj.getMonth() + 1).padStart(2, '0');
                            const day = String(dateObj.getDate()).padStart(2, '0');
                            endDateValue = `${year}-${month}-${day}`;
                        }
                        // "yyyy-MM-dd HH:mm" å`éÆÇ yyyy-MM-dd Ç…ïœä∑
                        else if (endDateValue.includes(' ')) {
                            endDateValue = endDateValue.split(' ')[0];
                        }
                        // "yyyy/MM/dd" å`éÆÇ yyyy-MM-dd Ç…ïœä∑
                        else if (endDateValue.includes('/')) {
                            endDateValue = endDateValue.replace(/Ä//g, '-');
                        }
                    } else if (endDateValue instanceof Date) {
                        // DateÉIÉuÉWÉFÉNÉgÇÃèÍçá
                        const year = endDateValue.getFullYear();
                        const month = String(endDateValue.getMonth() + 1).padStart(2, '0');
                        const day = String(endDateValue.getDate()).padStart(2, '0');
                        endDateValue = `${year}-${month}-${day}`;
                    }

                    if (pauseEndDate) {
                        pauseEndDate.value = endDateValue;
                        pauseEndDate.classList.remove('hidden');
                    }
                    if (pauseEndDateDisplay) {
                        pauseEndDateDisplay.classList.add('hidden');
                    }
                    if (indefinitePause) {
                        indefinitePause.checked = false;
                    }
                    console.log('[loadAutodeliverySettings] Pause end date set:', endDateValue);
                }
            } else {
                console.warn('[loadAutodeliverySettings] Pause end date not found in data');
            }

            // àÍéû???é~ê›íËÉZÉNÉVÉáÉìÇÃï\é¶/îÒï\é¶
            if (pauseFlag && pauseSettings) {
                pauseSettings.classList.remove('hidden');
            } else if (pauseSettings) {
                pauseSettings.classList.add('hidden');
            }

            console.log('[loadAutodeliverySettings] Settings loaded');

            // ÉCÉxÉìÉgÉäÉXÉiÅ[Çí«â¡ÇµÇƒïœçXÇåüím
            attachAutodeliveryChangeListeners();

            // ì«Ç›çûÇ›äÆóπå„ÅAïœçXÉtÉâÉOÇÉäÉZÉbÉgÅiì«Ç›çûÇ›éûÇÃÉCÉxÉìÉgî≠âŒÇñ≥éãÅj
            // setTimeoutÇ≈è≠ÇµíxâÑÇ≥ÇπÇƒÅAèâä˙âªéûÇÃÉCÉxÉìÉgî≠âŒÇämé¿Ç…ñ≥éã
            setTimeout(() => {
                resetAutodeliveryChanged();
            }, 100);
        }

        // é©ìÆîzêMê›íËÇÃëSì¸óÕóvëfÇ…ïœçXåüímÉäÉXÉiÅ[Çí«â¡
        function attachAutodeliveryChangeListeners() {
            console.log('[attachAutodeliveryChangeListeners] Attaching change listeners...');

            const autodeliverySection = document.getElementById('autodeliverySection');
            if (!autodeliverySection) {
                console.warn('[attachAutodeliveryChangeListeners] autodeliverySection not found');
                return;
            }

            // ëSÇƒÇÃinputóvëfÅicheckbox, radio, text, rangeÅj
            const inputs = autodeliverySection.querySelectorAll('input');
            inputs.forEach(input => {
                // inputÇ∆changeÇÃóºï˚ÇäƒéãÅirangeÇÕinputÅAcheckboxÇÕchangeÅj
                input.addEventListener('input', markAutodeliveryChanged);
                input.addEventListener('change', markAutodeliveryChanged);
            });

            // ëSÇƒÇÃselectóvëf
            const selects = autodeliverySection.querySelectorAll('select');
            selects.forEach(select => {
                select.addEventListener('change', markAutodeliveryChanged);
            });

            // ëSÇƒÇÃtextareaóvëf
            const textareas = autodeliverySection.querySelectorAll('textarea');
            textareas.forEach(textarea => {
                textarea.addEventListener('input', markAutodeliveryChanged);
            });

            // ìsìπï{åßÅEésãÊí¨ë∫É{É^ÉìÇÃÉNÉäÉbÉN
            const prefButtons = autodeliverySection.querySelectorAll('button[data-prefecture]');
            prefButtons.forEach(button => {
                button.addEventListener('click', markAutodeliveryChanged);
            });

            console.log('[attachAutodeliveryChangeListeners] Attached listeners to:', {
                inputs: inputs.length,
                selects: selects.length,
                textareas: textareas.length,
                prefButtons: prefButtons.length
            });
        }

        // àÍéûí‚é~ê›íËä÷êîÅië¶éûîΩâfÅj
        async function toggleAutoPause() {
            const toggle = document.getElementById('autoPauseToggle');
            const settings = document.getElementById('pauseSettings');

            if (toggle.checked) {
                settings.classList.remove('hidden');
                // äJénì˙Çç°ì˙Ç…ÉZÉbÉg
                const startDate = document.getElementById('pauseStartDate');
                if (startDate && !startDate.value) {
                    startDate.value = new Date().toISOString().split('T')[0];
                }
            } else {
                settings.classList.add('hidden');
            }

            // ïœçXÉtÉâÉOÇóßÇƒÇÈÅiï€ë∂É{É^ÉìÉNÉäÉbÉNÇ≈ï€ë∂Ç≥ÇÍÇÈÅj
            markAutodeliveryChanged();
        }

        async function toggleIndefinitePause() {
            const indefinite = document.getElementById('indefinitePause');
            const endDateInput = document.getElementById('pauseEndDate');
            const endDateDisplay = document.getElementById('pauseEndDateDisplay');

            if (indefinite.checked) {
                // ñ≥ä˙å¿í‚é~: Åuñ¢íËÅvÇ∆ï\é¶
                endDateDisplay.value = 'ñ¢íË';
                endDateDisplay.classList.remove('hidden');
                endDateInput.classList.add('hidden');
            } else {
                // ä˙å¿Ç†ÇË: ì˙ïtì¸óÕóìÇï\é¶
                endDateDisplay.classList.add('hidden');
                endDateInput.classList.remove('hidden');
            }

            // ïœçXÉtÉâÉOÇóßÇƒÇÈÅiï€ë∂É{É^ÉìÉNÉäÉbÉNÇ≈ï€ë∂Ç≥ÇÍÇÈÅj
            markAutodeliveryChanged();
        }


        // íPïiçÄñ⁄ÇÃÉ`ÉFÉbÉNèÛë‘Çä«óù

        function checkSingleItemSelection(checkbox) {
            // É`ÉFÉbÉNÇ™ì¸Ç¡ÇΩèÍçáÇÃÇ›ÉÇÅ[É_ÉãÇï\é¶
            if (checkbox.checked) {
                const singleItems = [
                    'âÆç™ìhëïíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'âÆè„ñhêÖíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'äOï«ï‚èCíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'âÆç™ï‚èCíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'ÉxÉâÉìÉ_ñhêÖíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'äOï«âJòRÇËèCëUíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj',
                    'âÆç™âJòRÇËèCëUíPïiÅiíAÇµ1é–è–âÓéûÇÕíËâøÅj'
                ];

                if (singleItems.includes(checkbox.value)) {
                    showSingleItemModal();
                }
            }
        }

        function showSingleItemModal() {
            const modal = document.getElementById('singleItemModal');
            modal.classList.remove('hidden');
        }

        function closeSingleItemModal() {
            const modal = document.getElementById('singleItemModal');
            modal.classList.add('hidden');
        }

        // ëÂå^ï®åèÇÃÉÇÅ[É_Éãï\é¶ä«óù
        function checkLargeProperty(checkbox) {
            if (checkbox.checked) {
                // É`ÉFÉbÉNÉ{ÉbÉNÉXÇ…ÉtÉâÉOÇê›íËÅièââÒÉ`ÉFÉbÉNîªíËópÅj
                checkbox.dataset.shownModal = 'true';
                showLargePropertyModal();
            } else {
                // É`ÉFÉbÉNÇäOÇµÇΩÇÁÉtÉâÉOÇÉäÉZÉbÉg
                delete checkbox.dataset.shownModal;
            }
        }

        function checkFloorSelection(selectElement) {
            const value = parseInt(selectElement.value);
            const parentLabel = selectElement.closest('label');
            const checkbox = parentLabel.querySelector('input[type="checkbox"]');

            // É`ÉFÉbÉNÉ{ÉbÉNÉXÇ™ONÇ≈ÅAÇ©Ç¬Ç‹ÇæÉÇÅ[É_ÉãÇï\é¶ÇµÇƒÇ¢Ç»Ç¢èÍçáÇÃÇ›ï\é¶
            if ((value >= 3 || selectElement.value === 'unlimited') && checkbox.checked && !checkbox.dataset.shownModal) {
                checkbox.dataset.shownModal = 'true';
                showLargePropertyModal();
            }
        }

        function showLargePropertyModal() {
            const modal = document.getElementById('largePropertyModal');
            modal.classList.remove('hidden');
        }

        function closeLargePropertyModal() {
            const modal = document.getElementById('largePropertyModal');
            modal.classList.add('hidden');
        }
    </script>

</body></html>