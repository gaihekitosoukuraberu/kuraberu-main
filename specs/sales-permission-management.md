# 営業権限管理機能 - 加盟店管理画面【管理者版】

## 概要
営業担当者のアカウント管理と詳細な権限設定を行う機能

## 機能要件

### 1. 営業アカウント管理画面

#### 営業一覧表示
- テーブル形式で表示
  - 営業担当者名
  - メールアドレス
  - 担当案件数
  - 権限レベル（バッジ表示）
  - 最終ログイン
  - ステータス（稼働中/停止）
  - [編集]ボタン

### 2. 営業アカウント新規発行/編集画面

#### 画面構成
1. **上部 - 基本情報**
   - 営業担当者名: [テキスト入力]
   - メールアドレス: [テキスト入力]
   - 電話番号: [テキスト入力]
   - ステータス: [稼働中 ⚪ 停止]

2. **中部 - 権限プリセット**
   - [新人営業] [一般営業] [リーダー] [副管理者] [カスタム]
   - ボタン選択で下記トグルが自動設定

3. **下部 - 詳細権限設定**
   - すべてトグルスイッチ（ON/OFF）で設定

## 権限設定項目（トグル式）

### 📋 案件関連権限
- ☐ 他営業の案件を閲覧
- ☐ 全案件を閲覧（フィルターなし）
- ☐ 案件の削除
- ☐ 他営業への案件割り当て
- ☐ ステータスの制限なし変更

### 🏢 会社情報権限
- ☐ 会社基本情報の閲覧
- ☐ 会社基本情報の編集
- ☐ 契約書・規約の閲覧
- ☐ 対応エリアの閲覧
- ☐ 対応エリアの編集

### 📡 配信設定権限
- ☐ 配信設定の閲覧
- ☐ 配信ON/OFF切替
- ☐ 配信条件の変更
- ☐ 配信上限の変更
- ☐ 一時休止の設定

### 👤 営業管理権限
- ☐ 営業一覧の閲覧
- ☐ 営業アカウントの新規発行
- ☐ 営業アカウントの編集
- ☐ 営業アカウントの削除
- ☐ 権限設定の変更

### 💰 財務情報権限
- ☐ デポジット残高の閲覧
- ☐ デポジット明細の閲覧
- ☐ デポジット入金申請
- ☐ 請求情報の閲覧
- ☐ 請求書ダウンロード
- ☐ 全社売上データの閲覧
- ☐ 他営業の実績閲覧

### 📝 申請・報告権限
- ☐ キャンセル申請の実行
- ☐ 成約報告の実行
- ☐ 成約報告の承認
- ☐ 各種申請履歴の閲覧

### 📊 データ管理権限
- ☐ CSVエクスポート
- ☐ データインポート
- ☐ 全ファイル削除
- ☐ 他者メモの削除
- ☐ 一括データ編集

### 📈 分析・レポート権限
- ☐ 詳細分析レポート閲覧
- ☐ ランキング詳細閲覧
- ☐ エリア分析の閲覧
- ☐ カスタムレポート作成

## 権限プリセット内容

### 新人営業（最小権限）
- **ON:**
  - 会社基本情報の閲覧
  - 配信設定の閲覧
- **OFF:** その他すべて

### 一般営業（標準）
- **ON:**
  - 会社基本情報の閲覧
  - 契約書・規約の閲覧
  - 配信設定の閲覧
  - キャンセル申請の実行
  - 成約報告の実行
- **OFF:** その他すべて

### リーダー営業（拡張）
- **ON:**
  - 他営業の案件を閲覧
  - 全案件を閲覧
  - 他営業への案件割り当て
  - 会社情報系すべて（編集以外）
  - 営業一覧の閲覧
  - 全社売上データの閲覧
  - 他営業の実績閲覧
  - 申請・報告系すべて
  - 分析・レポート系すべて
- **OFF:** 編集・削除系権限

### 副管理者（準フル）
- **ON:** すべての権限
- **OFF:**
  - 営業アカウントの削除
  - 権限設定の変更

## 権限設定の保存と適用

### 保存時の処理
1. [保存]ボタン押下
2. 確認ダイアログ: "○○さんの権限を変更します。よろしいですか？"
3. 保存完了:
   - 即座に適用
   - 該当営業に通知
   - ログに記録

### 権限変更ログ
- **記録内容:**
  - 変更日時
  - 変更実行者（管理者名）
  - 対象営業
  - 変更前権限
  - 変更後権限
- **保存期間:** 90日間

## UI/UX仕様

### トグルスイッチのデザイン
```typescript
interface ToggleDesign {
  OFF状態: {
    背景: "グレー(#E5E7EB)",
    スイッチ: "左寄せ・白",
    ラベル: "OFF"
  },
  ON状態: {
    背景: "ブルー(#3B82F6)",
    スイッチ: "右寄せ・白",
    ラベル: "ON"
  },
  アニメーション: "0.3秒のスライド"
}
```

### グループ化表示
```typescript
interface GroupDisplay {
  セクションヘッダー: {
    アイコン: "📋 📡 💰 等",
    タイトル: "太字",
    一括ON/OFF: "セクション単位のトグル"
  },
  インデント: "各項目は20px左寄せ"
}
```

## 技術要件
- React + TypeScript
- 権限はJWTトークンに含める
- バックエンドでも権限チェック
- リアルタイム反映（WebSocket/SSE）